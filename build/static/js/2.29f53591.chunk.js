/*! For license information please see 2.29f53591.chunk.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(e,t,n){"use strict";e.exports=n(313)},function(e,t,n){"use strict";(function(e,r){n.d(t,"e",(function(){return i})),n.d(t,"g",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return h}));var i="undefined"!==typeof window?window:e.exports&&"undefined"!==typeof r?r:{},o=function(e){var t={},n=e.document,r=e.GreenSockGlobals=e.GreenSockGlobals||e;if(r.TweenLite)return r.TweenLite;var i,o,a,s,u,c=function(e){var t,n=e.split("."),i=r;for(t=0;t<n.length;t++)i[n[t]]=i=i[n[t]]||{};return i},l=c("com.greensock"),h=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},f=function(){},d=function(){var e=Object.prototype.toString,t=e.call([]);return function(n){return null!=n&&(n instanceof Array||"object"===typeof n&&!!n.push&&e.call(n)===t)}}(),p={},m=function e(n,i,o,a){this.sc=p[n]?p[n].sc:[],p[n]=this,this.gsClass=null,this.func=o;var s=[];this.check=function(u){for(var l,h,f,d,m=i.length,v=m;--m>-1;)(l=p[i[m]]||new e(i[m],[])).gsClass?(s[m]=l.gsClass,v--):u&&l.sc.push(this);if(0===v&&o)for(f=(h=("com.greensock."+n).split(".")).pop(),d=c(h.join("."))[f]=this.gsClass=o.apply(o,s),a&&(r[f]=t[f]=d),m=0;m<this.sc.length;m++)this.sc[m].check()},this.check(!0)},v=e._gsDefine=function(e,t,n,r){return new m(e,t,n,r)},g=l._class=function(e,t,n){return t=t||function(){},v(e,[],(function(){return t}),n),t};v.globals=r;var y=[0,0,1,1],b=g("easing.Ease",(function(e,t,n,r){this._func=e,this._type=n||0,this._power=r||0,this._params=t?y.concat(t):y}),!0),_=b.map={},w=b.register=function(e,t,n,r){for(var i,o,a,s,u=t.split(","),c=u.length,h=(n||"easeIn,easeOut,easeInOut").split(",");--c>-1;)for(o=u[c],i=r?g("easing."+o,null,!0):l.easing[o]||{},a=h.length;--a>-1;)s=h[a],_[o+"."+s]=_[s+o]=i[s]=e.getRatio?e:e[s]||new e};for((a=b.prototype)._calcEnd=!1,a.getRatio=function(e){if(this._func)return this._params[0]=e,this._func.apply(null,this._params);var t=this._type,n=this._power,r=1===t?1-e:2===t?e:e<.5?2*e:2*(1-e);return 1===n?r*=r:2===n?r*=r*r:3===n?r*=r*r*r:4===n&&(r*=r*r*r*r),1===t?1-r:2===t?r:e<.5?r/2:1-r/2},o=(i=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--o>-1;)a=i[o]+",Power"+o,w(new b(null,null,1,o),a,"easeOut",!0),w(new b(null,null,2,o),a,"easeIn"+(0===o?",easeNone":"")),w(new b(null,null,3,o),a,"easeInOut");_.linear=l.easing.Linear.easeIn,_.swing=l.easing.Quad.easeInOut;var x=g("events.EventDispatcher",(function(e){this._listeners={},this._eventTarget=e||this}));(a=x.prototype).addEventListener=function(e,t,n,r,i){i=i||0;var o,a,c=this._listeners[e],l=0;for(this!==s||u||s.wake(),null==c&&(this._listeners[e]=c=[]),a=c.length;--a>-1;)(o=c[a]).c===t&&o.s===n?c.splice(a,1):0===l&&o.pr<i&&(l=a+1);c.splice(l,0,{c:t,s:n,up:r,pr:i})},a.removeEventListener=function(e,t){var n,r=this._listeners[e];if(r)for(n=r.length;--n>-1;)if(r[n].c===t)return void r.splice(n,1)},a.dispatchEvent=function(e){var t,n,r,i=this._listeners[e];if(i)for((t=i.length)>1&&(i=i.slice(0)),n=this._eventTarget;--t>-1;)(r=i[t])&&(r.up?r.c.call(r.s||n,{type:e,target:n}):r.c.call(r.s||n))};var T=e.requestAnimationFrame,S=e.cancelAnimationFrame,E=Date.now||function(){return(new Date).getTime()},M=E();for(o=(i=["ms","moz","webkit","o"]).length;--o>-1&&!T;)T=e[i[o]+"RequestAnimationFrame"],S=e[i[o]+"CancelAnimationFrame"]||e[i[o]+"CancelRequestAnimationFrame"];g("Ticker",(function(e,t){var r,i,o,a,c,l=this,h=E(),d=!(!1===t||!T)&&"auto",p=500,m=33,v=function e(t){var n,s,u=E()-M;u>p&&(h+=u-m),M+=u,l.time=(M-h)/1e3,n=l.time-c,(!r||n>0||!0===t)&&(l.frame++,c+=n+(n>=a?.004:a-n),s=!0),!0!==t&&(o=i(e)),s&&l.dispatchEvent("tick")};x.call(l),l.time=l.frame=0,l.tick=function(){v(!0)},l.lagSmoothing=function(e,t){if(!arguments.length)return p<1e8;p=e||1e8,m=Math.min(t,p,0)},l.sleep=function(){null!=o&&(d&&S?S(o):clearTimeout(o),i=f,o=null,l===s&&(u=!1))},l.wake=function(e){null!==o?l.sleep():e?h+=-M+(M=E()):l.frame>10&&(M=E()-p+5),i=0===r?f:d&&T?T:function(e){return setTimeout(e,1e3*(c-l.time)+1|0)},l===s&&(u=!0),v(2)},l.fps=function(e){if(!arguments.length)return r;a=1/((r=e)||60),c=this.time+a,l.wake()},l.useRAF=function(e){if(!arguments.length)return d;l.sleep(),d=e,l.fps(r)},l.fps(e),setTimeout((function(){"auto"===d&&l.frame<5&&"hidden"!==(n||{}).visibilityState&&l.useRAF(!1)}),1500)})),(a=l.Ticker.prototype=new l.events.EventDispatcher).constructor=l.Ticker;var C=g("core.Animation",(function(e,t){if(this.vars=t=t||{},this._duration=this._totalDuration=e||0,this._delay=Number(t.delay)||0,this._timeScale=1,this._active=!!t.immediateRender,this.data=t.data,this._reversed=!!t.reversed,q){u||s.wake();var n=this.vars.useFrames?H:q;n.add(this,n._time),this.vars.paused&&this.paused(!0)}}));s=C.ticker=new l.Ticker,(a=C.prototype)._dirty=a._gc=a._initted=a._paused=!1,a._totalTime=a._time=0,a._rawPrevTime=-1,a._next=a._last=a._onUpdate=a._timeline=a.timeline=null,a._paused=!1;!function e(){u&&E()-M>2e3&&("hidden"!==(n||{}).visibilityState||!s.lagSmoothing())&&s.wake();var t=setTimeout(e,2e3);t.unref&&t.unref()}(),a.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},a.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},a.resume=function(e,t){return null!=e&&this.seek(e,t),this.paused(!1)},a.seek=function(e,t){return this.totalTime(Number(e),!1!==t)},a.restart=function(e,t){return this.reversed(!1).paused(!1).totalTime(e?-this._delay:0,!1!==t,!0)},a.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},a.render=function(e,t,n){},a.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},a.isActive=function(){var e,t=this._timeline,n=this._startTime;return!t||!this._gc&&!this._paused&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<n+this.totalDuration()/this._timeScale-1e-8},a._enabled=function(e,t){return u||s.wake(),this._gc=!e,this._active=this.isActive(),!0!==t&&(e&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!e&&this.timeline&&this._timeline._remove(this,!0)),!1},a._kill=function(e,t){return this._enabled(!1,!1)},a.kill=function(e,t){return this._kill(e,t),this},a._uncache=function(e){for(var t=e?this:this.timeline;t;)t._dirty=!0,t=t.timeline;return this},a._swapSelfInParams=function(e){for(var t=e.length,n=e.concat();--t>-1;)"{self}"===e[t]&&(n[t]=this);return n},a._callback=function(e){var t=this.vars,n=t[e],r=t[e+"Params"],i=t[e+"Scope"]||t.callbackScope||this;switch(r?r.length:0){case 0:n.call(i);break;case 1:n.call(i,r[0]);break;case 2:n.call(i,r[0],r[1]);break;default:n.apply(i,r)}},a.eventCallback=function(e,t,n,r){if("on"===(e||"").substr(0,2)){var i=this.vars;if(1===arguments.length)return i[e];null==t?delete i[e]:(i[e]=t,i[e+"Params"]=d(n)&&-1!==n.join("").indexOf("{self}")?this._swapSelfInParams(n):n,i[e+"Scope"]=r),"onUpdate"===e&&(this._onUpdate=t)}return this},a.delay=function(e){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+e-this._delay),this._delay=e,this):this._delay},a.duration=function(e){return arguments.length?(this._duration=this._totalDuration=e,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==e&&this.totalTime(this._totalTime*(e/this._duration),!0),this):(this._dirty=!1,this._duration)},a.totalDuration=function(e){return this._dirty=!1,arguments.length?this.duration(e):this._totalDuration},a.time=function(e,t){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(e>this._duration?this._duration:e,t)):this._time},a.totalTime=function(e,t,n){if(u||s.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(e<0&&!n&&(e+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,i=this._timeline;if(e>r&&!n&&(e=r),this._startTime=(this._paused?this._pauseTime:i._time)-(this._reversed?r-e:e)/this._timeScale,i._dirty||this._uncache(!1),i._timeline)for(;i._timeline;)i._timeline._time!==(i._startTime+i._totalTime)/i._timeScale&&i.totalTime(i._totalTime,!0),i=i._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===e&&0!==this._duration||(k.length&&K(),this.render(e,t,!1),k.length&&K())}return this},a.progress=a.totalProgress=function(e,t){var n=this.duration();return arguments.length?this.totalTime(n*e,t):n?this._time/n:this.ratio},a.startTime=function(e){return arguments.length?(e!==this._startTime&&(this._startTime=e,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,e-this._delay)),this):this._startTime},a.endTime=function(e){return this._startTime+(0!=e?this.totalDuration():this.duration())/this._timeScale},a.timeScale=function(e){if(!arguments.length)return this._timeScale;var t,n;for(e=e||1e-8,this._timeline&&this._timeline.smoothChildTiming&&(n=(t=this._pauseTime)||0===t?t:this._timeline.totalTime(),this._startTime=n-(n-this._startTime)*this._timeScale/e),this._timeScale=e,n=this.timeline;n&&n.timeline;)n._dirty=!0,n.totalDuration(),n=n.timeline;return this},a.reversed=function(e){return arguments.length?(e!=this._reversed&&(this._reversed=e,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},a.paused=function(e){if(!arguments.length)return this._paused;var t,n,r=this._timeline;return e!=this._paused&&r&&(u||e||s.wake(),n=(t=r.rawTime())-this._pauseTime,!e&&r.smoothChildTiming&&(this._startTime+=n,this._uncache(!1)),this._pauseTime=e?t:null,this._paused=e,this._active=this.isActive(),!e&&0!==n&&this._initted&&this.duration()&&(t=r.smoothChildTiming?this._totalTime:(t-this._startTime)/this._timeScale,this.render(t,t===this._totalTime,!0))),this._gc&&!e&&this._enabled(!0,!1),this};var A=g("core.SimpleTimeline",(function(e){C.call(this,0,e),this.autoRemoveChildren=this.smoothChildTiming=!0}));(a=A.prototype=new C).constructor=A,a.kill()._gc=!1,a._first=a._last=a._recent=null,a._sortChildren=!1,a.add=a.insert=function(e,t,n,r){var i,o;if(e._startTime=Number(t||0)+e._delay,e._paused&&this!==e._timeline&&(e._pauseTime=this.rawTime()-(e._timeline.rawTime()-e._pauseTime)),e.timeline&&e.timeline._remove(e,!0),e.timeline=e._timeline=this,e._gc&&e._enabled(!0,!0),i=this._last,this._sortChildren)for(o=e._startTime;i&&i._startTime>o;)i=i._prev;return i?(e._next=i._next,i._next=e):(e._next=this._first,this._first=e),e._next?e._next._prev=e:this._last=e,e._prev=i,this._recent=e,this._timeline&&this._uncache(!0),this},a._remove=function(e,t){return e.timeline===this&&(t||e._enabled(!1,!0),e._prev?e._prev._next=e._next:this._first===e&&(this._first=e._next),e._next?e._next._prev=e._prev:this._last===e&&(this._last=e._prev),e._next=e._prev=e.timeline=null,e===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},a.render=function(e,t,n){var r,i=this._first;for(this._totalTime=this._time=this._rawPrevTime=e;i;)r=i._next,(i._active||e>=i._startTime&&!i._paused&&!i._gc)&&(i._reversed?i.render((i._dirty?i.totalDuration():i._totalDuration)-(e-i._startTime)*i._timeScale,t,n):i.render((e-i._startTime)*i._timeScale,t,n)),i=r},a.rawTime=function(){return u||s.wake(),this._totalTime};var P=g("TweenLite",(function(t,n,r){if(C.call(this,n,r),this.render=P.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!==typeof t?t:P.selector(t)||t;var i,o,a,s=t.jquery||t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType),u=this.vars.overwrite;if(this._overwrite=u=null==u?G[P.defaultOverwrite]:"number"===typeof u?u>>0:G[u],(s||t instanceof Array||t.push&&d(t))&&"number"!==typeof t[0])for(this._targets=a=h(t),this._propLookup=[],this._siblings=[],i=0;i<a.length;i++)(o=a[i])?"string"!==typeof o?o.length&&o!==e&&o[0]&&(o[0]===e||o[0].nodeType&&o[0].style&&!o.nodeType)?(a.splice(i--,1),this._targets=a=a.concat(h(o))):(this._siblings[i]=X(o,this,!1),1===u&&this._siblings[i].length>1&&J(o,this,null,1,this._siblings[i])):"string"===typeof(o=a[i--]=P.selector(o))&&a.splice(i+1,1):a.splice(i--,1);else this._propLookup={},this._siblings=X(t,this,!1),1===u&&this._siblings.length>1&&J(t,this,null,1,this._siblings);(this.vars.immediateRender||0===n&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-8,this.render(Math.min(0,-this._delay)))}),!0),O=function(t){return t&&t.length&&t!==e&&t[0]&&(t[0]===e||t[0].nodeType&&t[0].style&&!t.nodeType)};(a=P.prototype=new C).constructor=P,a.kill()._gc=!1,a.ratio=0,a._firstPT=a._targets=a._overwrittenProps=a._startAt=null,a._notifyPluginsOfEnabled=a._lazy=!1,P.version="2.1.3",P.defaultEase=a._ease=new b(null,null,1,1),P.defaultOverwrite="auto",P.ticker=s,P.autoSleep=120,P.lagSmoothing=function(e,t){s.lagSmoothing(e,t)},P.selector=e.$||e.jQuery||function(t){var r=e.$||e.jQuery;return r?(P.selector=r,r(t)):(n||(n=e.document),n?n.querySelectorAll?n.querySelectorAll(t):n.getElementById("#"===t.charAt(0)?t.substr(1):t):t)};var k=[],I={},R=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,D=/[\+-]=-?[\.\d]/,L=function(e){for(var t,n=this._firstPT;n;)t=n.blob?1===e&&null!=this.end?this.end:e?this.join(""):this.start:n.c*e+n.s,n.m?t=n.m.call(this._tween,t,this._target||n.t,this._tween):t<1e-6&&t>-1e-6&&!n.blob&&(t=0),n.f?n.fp?n.t[n.p](n.fp,t):n.t[n.p](t):n.t[n.p]=t,n=n._next},N=function(e){return(1e3*e|0)/1e3+""},F=function(e,t,n,r){var i,o,a,s,u,c,l,h=[],f=0,d="",p=0;for(h.start=e,h.end=t,e=h[0]=e+"",t=h[1]=t+"",n&&(n(h),e=h[0],t=h[1]),h.length=0,i=e.match(R)||[],o=t.match(R)||[],r&&(r._next=null,r.blob=1,h._firstPT=h._applyPT=r),u=o.length,s=0;s<u;s++)l=o[s],d+=(c=t.substr(f,t.indexOf(l,f)-f))||!s?c:",",f+=c.length,p?p=(p+1)%5:"rgba("===c.substr(-5)&&(p=1),l===i[s]||i.length<=s?d+=l:(d&&(h.push(d),d=""),a=parseFloat(i[s]),h.push(a),h._firstPT={_next:h._firstPT,t:h,p:h.length-1,s:a,c:("="===l.charAt(1)?parseInt(l.charAt(0)+"1",10)*parseFloat(l.substr(2)):parseFloat(l)-a)||0,f:0,m:p&&p<4?Math.round:N}),f+=l.length;return(d+=t.substr(f))&&h.push(d),h.setRatio=L,D.test(t)&&(h.end=null),h},U=function(e,t,n,r,i,o,a,s,u){"function"===typeof r&&(r=r(u||0,e));var c=typeof e[t],l="function"!==c?"":t.indexOf("set")||"function"!==typeof e["get"+t.substr(3)]?t:"get"+t.substr(3),h="get"!==n?n:l?a?e[l](a):e[l]():e[t],f="string"===typeof r&&"="===r.charAt(1),d={t:e,p:t,s:h,f:"function"===c,pg:0,n:i||t,m:o?"function"===typeof o?o:Math.round:0,pr:0,c:f?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-h||0};if(("number"!==typeof h||"number"!==typeof r&&!f)&&(a||isNaN(h)||!f&&isNaN(r)||"boolean"===typeof h||"boolean"===typeof r?(d.fp=a,d={t:F(h,f?parseFloat(d.s)+d.c+(d.s+"").replace(/[0-9\-\.]/g,""):r,s||P.defaultStringFilter,d),p:"setRatio",s:0,c:1,f:2,pg:0,n:i||t,pr:0,m:0}):(d.s=parseFloat(h),f||(d.c=parseFloat(r)-d.s||0))),d.c)return(d._next=this._firstPT)&&(d._next._prev=d),this._firstPT=d,d},j=P._internals={isArray:d,isSelector:O,lazyTweens:k,blobDif:F},B=P._plugins={},z=j.tweenLookup={},V=0,W=j.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1,stagger:1},G={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},H=C._rootFramesTimeline=new A,q=C._rootTimeline=new A,Y=30,K=j.lazyRender=function(){var e,t,n=k.length;for(I={},e=0;e<n;e++)(t=k[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);k.length=0};q._startTime=s.time,H._startTime=s.frame,q._active=H._active=!0,setTimeout(K,1),C._updateRoot=P.render=function(){var e,t,n;if(k.length&&K(),q.render((s.time-q._startTime)*q._timeScale,!1,!1),H.render((s.frame-H._startTime)*H._timeScale,!1,!1),k.length&&K(),s.frame>=Y){for(n in Y=s.frame+(parseInt(P.autoSleep,10)||120),z){for(e=(t=z[n].tweens).length;--e>-1;)t[e]._gc&&t.splice(e,1);0===t.length&&delete z[n]}if((!(n=q._first)||n._paused)&&P.autoSleep&&!H._first&&1===s._listeners.tick.length){for(;n&&n._paused;)n=n._next;n||s.sleep()}}},s.addEventListener("tick",C._updateRoot);var X=function(e,t,n){var r,i,o=e._gsTweenID;if(z[o||(e._gsTweenID=o="t"+V++)]||(z[o]={target:e,tweens:[]}),t&&((r=z[o].tweens)[i=r.length]=t,n))for(;--i>-1;)r[i]===t&&r.splice(i,1);return z[o].tweens},Q=function(e,t,n,r){var i,o,a=e.vars.onOverwrite;return a&&(i=a(e,t,n,r)),(a=P.onOverwrite)&&(o=a(e,t,n,r)),!1!==i&&!1!==o},J=function(e,t,n,r,i){var o,a,s,u;if(1===r||r>=4){for(u=i.length,o=0;o<u;o++)if((s=i[o])!==t)s._gc||s._kill(null,e,t)&&(a=!0);else if(5===r)break;return a}var c,l=t._startTime+1e-8,h=[],f=0,d=0===t._duration;for(o=i.length;--o>-1;)(s=i[o])===t||s._gc||s._paused||(s._timeline!==t._timeline?(c=c||Z(t,0,d),0===Z(s,c,d)&&(h[f++]=s)):s._startTime<=l&&s._startTime+s.totalDuration()/s._timeScale>l&&((d||!s._initted)&&l-s._startTime<=2e-8||(h[f++]=s)));for(o=f;--o>-1;)if(u=(s=h[o])._firstPT,2===r&&s._kill(n,e,t)&&(a=!0),2!==r||!s._firstPT&&s._initted&&u){if(2!==r&&!Q(s,t))continue;s._enabled(!1,!1)&&(a=!0)}return a},Z=function(e,t,n){for(var r=e._timeline,i=r._timeScale,o=e._startTime;r._timeline;){if(o+=r._startTime,i*=r._timeScale,r._paused)return-100;r=r._timeline}return(o/=i)>t?o-t:n&&o===t||!e._initted&&o-t<2e-8?1e-8:(o+=e.totalDuration()/e._timeScale/i)>t+1e-8?0:o-t-1e-8};a._init=function(){var e,t,n,r,i,o,a=this.vars,s=this._overwrittenProps,u=this._duration,c=!!a.immediateRender,l=a.ease,h=this._startAt;if(a.startAt){for(r in h&&(h.render(-1,!0),h.kill()),i={},a.startAt)i[r]=a.startAt[r];if(i.data="isStart",i.overwrite=!1,i.immediateRender=!0,i.lazy=c&&!1!==a.lazy,i.startAt=i.delay=null,i.onUpdate=a.onUpdate,i.onUpdateParams=a.onUpdateParams,i.onUpdateScope=a.onUpdateScope||a.callbackScope||this,this._startAt=P.to(this.target||{},0,i),c)if(this._time>0)this._startAt=null;else if(0!==u)return}else if(a.runBackwards&&0!==u)if(h)h.render(-1,!0),h.kill(),this._startAt=null;else{for(r in 0!==this._time&&(c=!1),n={},a)W[r]&&"autoCSS"!==r||(n[r]=a[r]);if(n.overwrite=0,n.data="isFromStart",n.lazy=c&&!1!==a.lazy,n.immediateRender=c,this._startAt=P.to(this.target,0,n),c){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=l=l?l instanceof b?l:"function"===typeof l?new b(l,a.easeParams):_[l]||P.defaultEase:P.defaultEase,a.easeParams instanceof Array&&l.config&&(this._ease=l.config.apply(l,a.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,e=0;e<o;e++)this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],s?s[e]:null,e)&&(t=!0);else t=this._initProps(this.target,this._propLookup,this._siblings,s,0);if(t&&P._onPluginEvent("_onInitAllProps",this),s&&(this._firstPT||"function"!==typeof this.target&&this._enabled(!1,!1)),a.runBackwards)for(n=this._firstPT;n;)n.s+=n.c,n.c=-n.c,n=n._next;this._onUpdate=a.onUpdate,this._initted=!0},a._initProps=function(t,n,r,i,o){var a,s,u,c,l,h;if(null==t)return!1;for(a in I[t._gsTweenID]&&K(),this.vars.css||t.style&&t!==e&&t.nodeType&&B.css&&!1!==this.vars.autoCSS&&function(e,t){var n,r={};for(n in e)W[n]||n in t&&"transform"!==n&&"x"!==n&&"y"!==n&&"width"!==n&&"height"!==n&&"className"!==n&&"border"!==n||!(!B[n]||B[n]&&B[n]._autoCSS)||(r[n]=e[n],delete e[n]);e.css=r}(this.vars,t),this.vars)if(h=this.vars[a],W[a])h&&(h instanceof Array||h.push&&d(h))&&-1!==h.join("").indexOf("{self}")&&(this.vars[a]=h=this._swapSelfInParams(h,this));else if(B[a]&&(c=new B[a])._onInitTween(t,this.vars[a],this,o)){for(this._firstPT=l={_next:this._firstPT,t:c,p:"setRatio",s:0,c:1,f:1,n:a,pg:1,pr:c._priority,m:0},s=c._overwriteProps.length;--s>-1;)n[c._overwriteProps[s]]=this._firstPT;(c._priority||c._onInitAllProps)&&(u=!0),(c._onDisable||c._onEnable)&&(this._notifyPluginsOfEnabled=!0),l._next&&(l._next._prev=l)}else n[a]=U.call(this,t,a,"get",h,a,0,null,this.vars.stringFilter,o);return i&&this._kill(i,t)?this._initProps(t,n,r,i,o):this._overwrite>1&&this._firstPT&&r.length>1&&J(t,this,n,this._overwrite,r)?(this._kill(n,t),this._initProps(t,n,r,i,o)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(I[t._gsTweenID]=!0),u)},a.render=function(e,t,n){var r,i,o,a,s=this._time,u=this._duration,c=this._rawPrevTime;if(e>=u-1e-8&&e>=0)this._totalTime=this._time=u,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,i="onComplete",n=n||this._timeline.autoRemoveChildren),0===u&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(c<0||e<=0&&e>=-1e-8||1e-8===c&&"isPause"!==this.data)&&c!==e&&(n=!0,c>1e-8&&(i="onReverseComplete")),this._rawPrevTime=a=!t||e||c===e?e:1e-8);else if(e<1e-8)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==s||0===u&&c>0)&&(i="onReverseComplete",r=this._reversed),e>-1e-8?e=0:e<0&&(this._active=!1,0===u&&(this._initted||!this.vars.lazy||n)&&(c>=0&&(1e-8!==c||"isPause"!==this.data)&&(n=!0),this._rawPrevTime=a=!t||e||c===e?e:1e-8)),(!this._initted||this._startAt&&this._startAt.progress())&&(n=!0);else if(this._totalTime=this._time=e,this._easeType){var l=e/u,h=this._easeType,f=this._easePower;(1===h||3===h&&l>=.5)&&(l=1-l),3===h&&(l*=2),1===f?l*=l:2===f?l*=l*l:3===f?l*=l*l*l:4===f&&(l*=l*l*l*l),this.ratio=1===h?1-l:2===h?l:e/u<.5?l/2:1-l/2}else this.ratio=this._ease.getRatio(e/u);if(this._time!==s||n){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=s,this._rawPrevTime=c,k.push(this),void(this._lazy=[e,t]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/u):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==s&&e>=0&&(this._active=!0),0===s&&(this._startAt&&(e>=0?this._startAt.render(e,!0,n):i||(i="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==u||t||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(e<0&&this._startAt&&-1e-4!==e&&this._startAt.render(e,!0,n),t||(this._time!==s||r||n)&&this._callback("onUpdate")),i&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&-1e-4!==e&&this._startAt.render(e,!0,n),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[i]&&this._callback(i),0===u&&1e-8===this._rawPrevTime&&1e-8!==a&&(this._rawPrevTime=0)))}},a._kill=function(e,t,n){if("all"===e&&(e=null),null==e&&(null==t||t===this.target))return this._lazy=!1,this._enabled(!1,!1);t="string"!==typeof t?t||this._targets||this.target:P.selector(t)||t;var r,i,o,a,s,u,c,l,h,f=n&&this._time&&n._startTime===this._startTime&&this._timeline===n._timeline,p=this._firstPT;if((d(t)||O(t))&&"number"!==typeof t[0])for(r=t.length;--r>-1;)this._kill(e,t[r],n)&&(u=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(t===this._targets[r]){s=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],i=this._overwrittenProps[r]=e?this._overwrittenProps[r]||{}:"all";break}}else{if(t!==this.target)return!1;s=this._propLookup,i=this._overwrittenProps=e?this._overwrittenProps||{}:"all"}if(s){if(c=e||s,l=e!==i&&"all"!==i&&e!==s&&("object"!==typeof e||!e._tempKill),n&&(P.onOverwrite||this.vars.onOverwrite)){for(o in c)s[o]&&(h||(h=[]),h.push(o));if((h||!e)&&!Q(this,n,t,h))return!1}for(o in c)(a=s[o])&&(f&&(a.f?a.t[a.p](a.s):a.t[a.p]=a.s,u=!0),a.pg&&a.t._kill(c)&&(u=!0),a.pg&&0!==a.t._overwriteProps.length||(a._prev?a._prev._next=a._next:a===this._firstPT&&(this._firstPT=a._next),a._next&&(a._next._prev=a._prev),a._next=a._prev=null),delete s[o]),l&&(i[o]=1);!this._firstPT&&this._initted&&p&&this._enabled(!1,!1)}}return u},a.invalidate=function(){this._notifyPluginsOfEnabled&&P._onPluginEvent("_onDisable",this);var e=this._time;return this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],C.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-8,this.render(e,!1,!1!==this.vars.lazy)),this},a._enabled=function(e,t){if(u||s.wake(),e&&this._gc){var n,r=this._targets;if(r)for(n=r.length;--n>-1;)this._siblings[n]=X(r[n],this,!0);else this._siblings=X(this.target,this,!0)}return C.prototype._enabled.call(this,e,t),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&P._onPluginEvent(e?"_onEnable":"_onDisable",this)},P.to=function(e,t,n){return new P(e,t,n)},P.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new P(e,t,n)},P.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new P(e,t,r)},P.delayedCall=function(e,t,n,r,i){return new P(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,lazy:!1,useFrames:i,overwrite:0})},P.set=function(e,t){return new P(e,0,t)},P.getTweensOf=function(e,t){if(null==e)return[];var n,r,i,o;if(e="string"!==typeof e?e:P.selector(e)||e,(d(e)||O(e))&&"number"!==typeof e[0]){for(n=e.length,r=[];--n>-1;)r=r.concat(P.getTweensOf(e[n],t));for(n=r.length;--n>-1;)for(o=r[n],i=n;--i>-1;)o===r[i]&&r.splice(n,1)}else if(e._gsTweenID)for(n=(r=X(e).concat()).length;--n>-1;)(r[n]._gc||t&&!r[n].isActive())&&r.splice(n,1);return r||[]},P.killTweensOf=P.killDelayedCallsTo=function(e,t,n){"object"===typeof t&&(n=t,t=!1);for(var r=P.getTweensOf(e,t),i=r.length;--i>-1;)r[i]._kill(n,e)};var $=g("plugins.TweenPlugin",(function(e,t){this._overwriteProps=(e||"").split(","),this._propName=this._overwriteProps[0],this._priority=t||0,this._super=$.prototype}),!0);if(a=$.prototype,$.version="1.19.0",$.API=2,a._firstPT=null,a._addTween=U,a.setRatio=L,a._kill=function(e){var t,n=this._overwriteProps,r=this._firstPT;if(null!=e[this._propName])this._overwriteProps=[];else for(t=n.length;--t>-1;)null!=e[n[t]]&&n.splice(t,1);for(;r;)null!=e[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},a._mod=a._roundProps=function(e){for(var t,n=this._firstPT;n;)(t=e[this._propName]||null!=n.n&&e[n.n.split(this._propName+"_").join("")])&&"function"===typeof t&&(2===n.f?n.t._applyPT.m=t:n.m=t),n=n._next},P._onPluginEvent=function(e,t){var n,r,i,o,a,s=t._firstPT;if("_onInitAllProps"===e){for(;s;){for(a=s._next,r=i;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:o)?s._prev._next=s:i=s,(s._next=r)?r._prev=s:o=s,s=a}s=t._firstPT=i}for(;s;)s.pg&&"function"===typeof s.t[e]&&s.t[e]()&&(n=!0),s=s._next;return n},$.activate=function(e){for(var t=e.length;--t>-1;)e[t].API===$.API&&(B[(new e[t])._propName]=e[t]);return!0},v.plugin=function(e){if(!e||!e.propName||!e.init||!e.API)throw"illegal plugin definition.";var t,n=e.propName,r=e.priority||0,i=e.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},a=g("plugins."+n.charAt(0).toUpperCase()+n.substr(1)+"Plugin",(function(){$.call(this,n,r),this._overwriteProps=i||[]}),!0===e.global),s=a.prototype=new $(n);for(t in s.constructor=a,a.API=e.API,o)"function"===typeof e[t]&&(s[o[t]]=e[t]);return a.version=e.version,$.activate([a]),a},i=e._gsQueue){for(o=0;o<i.length;o++)i[o]();for(a in p)p[a].func||e.console.log("GSAP encountered missing dependency: "+a)}return u=!1,P}(i),a=i.GreenSockGlobals,s=a.com.greensock,u=s.core.SimpleTimeline,c=s.core.Animation,l=a.Ease,h=(a.Linear,a.Power1,a.Power2,a.Power3,a.Power4,a.TweenPlugin);s.events.EventDispatcher}).call(this,n(197)(e),n(47))},function(e,t,n){"use strict";function r(){}n.d(t,"a",(function(){return io})),n.d(t,"b",(function(){return $})),n.d(t,"c",(function(){return ro})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return fn})),n.d(t,"f",(function(){return Q})),n.d(t,"g",(function(){return L})),n.d(t,"h",(function(){return Zr})),n.d(t,"i",(function(){return oe})),n.d(t,"j",(function(){return ge})),n.d(t,"k",(function(){return eo})),n.d(t,"l",(function(){return x})),n.d(t,"m",(function(){return Ei})),n.d(t,"n",(function(){return c})),n.d(t,"o",(function(){return hn})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var i,o=2,a={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*a.DEG2RAD},radToDeg:function(e){return e*a.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function s(e,t){this.x=e||0,this.y=t||0}function u(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function c(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function l(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(s.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(s.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}}),Object.assign(u,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,o,a){var s=n[r+0],u=n[r+1],c=n[r+2],l=n[r+3],h=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(l!==p||s!==h||u!==f||c!==d){var m=1-a,v=s*h+u*f+c*d+l*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var w=a*g;if(s=s*m+h*w,u=u*m+f*w,c=c*m+d*w,l=l*m+p*w,m===1-a){var x=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=x,u*=x,c*=x,l*=x}}e[t]=s,e[t+1]=u,e[t+2]=c,e[t+3]=l}}),Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(u.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,u=a(n/2),c=a(r/2),l=a(i/2),h=s(n/2),f=s(r/2),d=s(i/2);return"XYZ"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"YXZ"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"ZXY"===o?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l-h*f*d):"ZYX"===o?(this._x=h*c*l-u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l+h*f*d):"YZX"===o?(this._x=h*c*l+u*f*d,this._y=u*f*l+h*c*d,this._z=u*c*d-h*f*l,this._w=u*c*l-h*f*d):"XZY"===o&&(this._x=h*c*l-u*f*d,this._y=u*f*l-h*c*d,this._z=u*c*d+h*f*l,this._w=u*c*l+h*f*d),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],h=n[10],f=r+s+h;return f>0?(t=.5/Math.sqrt(f+1),this._w=.25/t,this._x=(l-u)*t,this._y=(o-c)*t,this._z=(a-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(l-u)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+c)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(o-c)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(u+l)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(a-i)/t,this._x=(o+c)/t,this._y=(u+l)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(a.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-i*s,this._y=r*c+o*s+i*a-n*u,this._z=i*c+o*u+n*s-r*a,this._w=o*c-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-t;return this._w=u*o+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,a),h=Math.sin((1-t)*l)/c,f=Math.sin(t*l)/c;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(c.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new u;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new u;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,u=s*t+o*r-a*n,c=s*n+a*t-i*r,l=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=u*s+h*-i+c*-a-l*-o,this.y=c*s+h*-o+l*-i-u*-a,this.z=l*s+h*-a+u*-o-c*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new c;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new c;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(a.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(l.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,o,a,s,u){var c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new c;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],d=n[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],w=r[5],x=r[8];return i[0]=o*p+a*g+s*_,i[3]=o*m+a*y+s*w,i[6]=o*v+a*b+s*x,i[1]=u*p+c*g+l*_,i[4]=u*m+c*y+l*w,i[7]=u*v+c*b+l*x,i[2]=h*p+f*g+d*_,i[5]=h*m+f*y+d*w,i[8]=h*v+f*b+d*x,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*i*c+n*a*s+r*i*u-r*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],d=f*u-c*h,p=c*l-f*s,m=h*s-u*l,v=i*d+o*p+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(a*h-f*o)*y,r[2]=(c*o-a*u)*y,r[3]=p*y,r[4]=(f*i-a*l)*y,r[5]=(a*s-c*i)*y,r[6]=m*y,r[7]=(o*l-h*i)*y,r[8]=(u*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+e,-r*u,r*s,-r*(-u*o+s*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],c=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*u,r[6]=t*a+n*c,r[1]=-n*i+t*s,r[4]=-n*o+t*u,r[7]=-n*a+t*c,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var h={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===i&&(i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),i.width=e.width,i.height=e.height;var n=i.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=i}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},f=0;function d(e,t,n,r,i,o,u,c,h,p){Object.defineProperty(this,"id",{value:f++}),this.uuid=a.generateUUID(),this.name="",this.image=void 0!==e?e:d.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:d.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==i?i:1006,this.minFilter=void 0!==o?o:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==u?u:1023,this.type=void 0!==c?c:1009,this.offset=new s(0,0),this.repeat=new s(1,1),this.center=new s(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new l,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:3e3,this.version=0,this.onUpdate=null}function p(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function m(e,t,n){this.width=e,this.height=t,this.scissor=new p(0,0,e,t),this.scissorTest=!1,this.viewport=new p(0,0,e,t),n=n||{},this.texture=new d(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:1006,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function v(e,t,n){m.call(this,e,t,n),this.samples=4}function g(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function y(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||y.DefaultOrder}function b(){this.mask=1}d.DEFAULT_IMAGE=void 0,d.DEFAULT_MAPPING=300,d.prototype=Object.assign(Object.create(r.prototype),{constructor:d,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=a.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,s=r.length;o<s;o++)i.push(h.getDataURL(r[o]))}else i=h.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(d.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(p.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(p.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,o=e.elements,a=o[0],s=o[4],u=o[8],c=o[1],l=o[5],h=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(s-c)<.01&&Math.abs(u-f)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(u+f)<.1&&Math.abs(h+d)<.1&&Math.abs(a+l+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,v=(l+1)/2,g=(p+1)/2,y=(s+c)/4,b=(u+f)/4,_=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=_/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=_/i),this.set(n,r,i,t),this}var w=Math.sqrt((d-h)*(d-h)+(u-f)*(u-f)+(c-s)*(c-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(u-f)/w,this.z=(c-s)/w,this.w=Math.acos((a+l+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new p,t=new p),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),m.prototype=Object.assign(Object.create(r.prototype),{constructor:m,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),v.prototype=Object.assign(Object.create(m.prototype),{constructor:v,isWebGLMultisampleRenderTarget:!0,copy:function(e){return m.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(g.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,o,a,s,u,c,l,h,f,d,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=c,v[10]=l,v[14]=h,v[3]=f,v[7]=d,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new g).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new c;return function(t){var n=this.elements,r=t.elements,i=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),a=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),c=Math.cos(i),l=Math.sin(i);if("XYZ"===e.order){var h=o*c,f=o*l,d=a*c,p=a*l;t[0]=s*c,t[4]=-s*l,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-a*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=o*s}else if("YXZ"===e.order){var m=s*c,v=s*l,g=u*c,y=u*l;t[0]=m+y*a,t[4]=g*a-v,t[8]=o*u,t[1]=o*l,t[5]=o*c,t[9]=-a,t[2]=v*a-g,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*c,v=s*l,g=u*c,y=u*l;t[0]=m-y*a,t[4]=-o*l,t[8]=g+v*a,t[1]=v+g*a,t[5]=o*c,t[9]=y-m*a,t[2]=-o*u,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*c,f=o*l,d=a*c,p=a*l;t[0]=s*c,t[4]=d*u-f,t[8]=h*u+p,t[1]=s*l,t[5]=p*u+h,t[9]=f*u-d,t[2]=-u,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var b=o*s,_=o*u,w=a*s,x=a*u;t[0]=s*c,t[4]=x-b*l,t[8]=w*l+_,t[1]=l,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=_*l+w,t[10]=b-x*l}else if("XZY"===e.order){b=o*s,_=o*u,w=a*s,x=a*u;t[0]=s*c,t[4]=-l,t[8]=u*c,t[1]=b*l+x,t[5]=o*c,t[9]=_*l-w,t[2]=w*l-_,t[6]=a*c,t[10]=x*l+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(){var e=new c(0,0,0),t=new c(1,1,1);return function(n){return this.compose(e,n,t)}}(),lookAt:function(){var e=new c,t=new c,n=new c;return function(r,i,o){var a=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),a[0]=e.x,a[4]=t.x,a[8]=n.x,a[1]=e.y,a[5]=t.y,a[9]=n.y,a[2]=e.z,a[6]=t.z,a[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],d=n[2],p=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],w=r[0],x=r[4],T=r[8],S=r[12],E=r[1],M=r[5],C=r[9],A=r[13],P=r[2],O=r[6],k=r[10],I=r[14],R=r[3],D=r[7],L=r[11],N=r[15];return i[0]=o*w+a*E+s*P+u*R,i[4]=o*x+a*M+s*O+u*D,i[8]=o*T+a*C+s*k+u*L,i[12]=o*S+a*A+s*I+u*N,i[1]=c*w+l*E+h*P+f*R,i[5]=c*x+l*M+h*O+f*D,i[9]=c*T+l*C+h*k+f*L,i[13]=c*S+l*A+h*I+f*N,i[2]=d*w+p*E+m*P+v*R,i[6]=d*x+p*M+m*O+v*D,i[10]=d*T+p*C+m*k+v*L,i[14]=d*S+p*A+m*I+v*N,i[3]=g*w+y*E+b*P+_*R,i[7]=g*x+y*M+b*O+_*D,i[11]=g*T+y*C+b*k+_*L,i[15]=g*S+y*A+b*I+_*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new c;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],u=e[13],c=e[2],l=e[6],h=e[10],f=e[14];return e[3]*(+i*s*l-r*u*l-i*a*h+n*u*h+r*a*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*o*h-r*o*f+r*u*c-i*s*c)+e[11]*(+t*u*l-t*a*f-i*o*l+n*o*f+i*a*c-n*u*c)+e[15]*(-r*a*c-t*s*l+t*a*h+r*o*l-n*o*h+n*s*c)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],c=r[5],l=r[6],h=r[7],f=r[8],d=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=d*y*h-g*p*h+g*l*m-c*y*m-d*l*b+c*p*b,w=v*p*h-f*y*h-v*l*m+u*y*m+f*l*b-u*p*b,x=f*g*h-v*d*h+v*c*m-u*g*m-f*c*b+u*d*b,T=v*d*l-f*g*l-v*c*p+u*g*p+f*c*y-u*d*y,S=i*_+o*w+a*x+s*T;if(0===S){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var M=1/S;return n[0]=_*M,n[1]=(g*p*s-d*y*s-g*a*m+o*y*m+d*a*b-o*p*b)*M,n[2]=(c*y*s-g*l*s+g*a*h-o*y*h-c*a*b+o*l*b)*M,n[3]=(d*l*s-c*p*s-d*a*h+o*p*h+c*a*m-o*l*m)*M,n[4]=w*M,n[5]=(f*y*s-v*p*s+v*a*m-i*y*m-f*a*b+i*p*b)*M,n[6]=(v*l*s-u*y*s-v*a*h+i*y*h+u*a*b-i*l*b)*M,n[7]=(u*p*s-f*l*s+f*a*h-i*p*h-u*a*m+i*l*m)*M,n[8]=x*M,n[9]=(v*d*s-f*g*s-v*o*m+i*g*m+f*o*b-i*d*b)*M,n[10]=(u*g*s-v*c*s+v*o*h-i*g*h-u*o*b+i*c*b)*M,n[11]=(f*c*s-u*d*s-f*o*h+i*d*h+u*o*m-i*c*m)*M,n[12]=T*M,n[13]=(f*g*a-v*d*a+v*o*p-i*g*p-f*o*y+i*d*y)*M,n[14]=(v*c*a-u*g*a-v*o*l+i*g*l+u*o*y-i*c*y)*M,n[15]=(u*d*a-f*c*a+f*o*l-i*d*l-u*o*p+i*c*p)*M,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,u=i*o,c=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,c*a+n,c*s-r*o,0,u*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,u=i+i,c=o+o,l=a+a,h=i*u,f=i*c,d=i*l,p=o*c,m=o*l,v=a*l,g=s*u,y=s*c,b=s*l,_=n.x,w=n.y,x=n.z;return r[0]=(1-(p+v))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(d+y)*x,r[9]=(m-g)*x,r[10]=(1-(h+p))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(){var e=new c,t=new g;return function(n,r,i){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),u=e.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var c=1/a,l=1/s,h=1/u;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=l,t.elements[5]*=l,t.elements[6]*=l,t.elements[8]*=h,t.elements[9]*=h,t.elements[10]*=h,r.setFromRotationMatrix(t),i.x=a,i.y=s,i.z=u,this}}(),makePerspective:function(e,t,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),u=2*i/(n-r),c=(t+e)/(t-e),l=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=l,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,o){var a=this.elements,s=1/(t-e),u=1/(n-r),c=1/(o-i),l=(t+e)*s,h=(n+r)*u,f=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-l,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),y.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],y.DefaultOrder="XYZ",Object.defineProperties(y.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(y.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=a.clamp,i=e.elements,o=i[0],s=i[4],u=i[8],c=i[1],l=i[5],h=i[9],f=i[2],d=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(u,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-f,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-s,l))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(u,p))):"XZY"===t?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(){var e=new g;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new u;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new c(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(b.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var _=0;function w(){Object.defineProperty(this,"id",{value:_++}),this.uuid=a.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=w.DefaultUp.clone();var e=new c,t=new y,n=new u,r=new c(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new g},normalMatrix:{value:new l}}),this.matrix=new g,this.matrixWorld=new g,this.matrixAutoUpdate=w.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new b,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function x(){w.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function T(e,t){this.min=void 0!==e?e:new c(1/0,1/0,1/0),this.max=void 0!==t?t:new c(-1/0,-1/0,-1/0)}function S(e,t){this.center=void 0!==e?e:new c,this.radius=void 0!==t?t:0}function E(e,t){this.origin=void 0!==e?e:new c,this.direction=void 0!==t?t:new c}function M(e,t,n){this.a=void 0!==e?e:new c,this.b=void 0!==t?t:new c,this.c=void 0!==n?n:new c}w.DefaultUp=new c(0,1,0),w.DefaultMatrixAutoUpdate=!0,w.prototype=Object.assign(Object.create(r.prototype),{constructor:w,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new u;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new u;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new c(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new c(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new c(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new c;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new c(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new c(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new c(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new g;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new u,t=new g,n=new c,r=new c;return function(i,o,a){i.isVector3?n.copy(i):n.set(i,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent({type:"added"})):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent({type:"removed"})),this},attach:function(){var e=new g;return function(t){return this.updateWorldMatrix(!0,!1),e.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),e.multiply(t.parent.matrixWorld)),t.applyMatrix(e),t.updateWorldMatrix(!1,!1),this.add(t),this}}(),getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new c),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new c,t=new c;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,n,t),n}}(),getWorldScale:function(){var e=new c,t=new u;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new c),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new c),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh&&0!==this.drawMode&&(r.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var c=a[s];i(e.shapes,c)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var l=[];for(s=0,u=this.material.length;s<u;s++)l.push(i(e.materials,this.material[s]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),f=m(e.materials),d=m(e.textures),p=m(e.images);a=m(e.shapes);h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),x.prototype=Object.assign(Object.create(w.prototype),{constructor:x,isScene:!0,copy:function(e,t){return w.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=w.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.assign(T.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.length;s<u;s+=3){var c=e[s],l=e[s+1],h=e[s+2];c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=e.count;s<u;s++){var c=e.getX(s),l=e.getY(s),h=e.getZ(s);c<t&&(t=c),l<n&&(n=l),h<r&&(r=h),c>i&&(i=c),l>o&&(o=l),h>a&&(a=h)}return this.min.set(t,n,r),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new c;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new c),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new c),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new c;function i(i){var o=i.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(t=0,n=a.length;t<n;t++)r.copy(a[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new c),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new c;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new c,t=new c,n=new c,r=new c,i=new c,o=new c,a=new c,s=new c,u=new c,l=new c;function h(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=u.x*Math.abs(a.x)+u.y*Math.abs(a.y)+u.z*Math.abs(a.z),c=e.dot(a),l=t.dot(a),h=n.dot(a);if(Math.max(-Math.max(c,l,h),Math.min(c,l,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),e.subVectors(a.a,s),t.subVectors(a.b,s),n.subVectors(a.c,s),r.subVectors(t,e),i.subVectors(n,t),o.subVectors(e,n);var c=[0,-r.z,r.y,0,-i.z,i.y,0,-o.z,o.y,r.z,0,-r.x,i.z,0,-i.x,o.z,0,-o.x,-r.y,r.x,0,-i.y,i.x,0,-o.y,o.x,0];return!!h(c)&&(!!h(c=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),h(c=[l.x,l.y,l.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new c),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new c;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new c;return function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new c,new c,new c,new c,new c,new c,new c,new c];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(S.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new T;return function(t,n){var r=this.center;void 0!==n?r.copy(n):e.setFromPoints(t).getCenter(r);for(var i=0,o=0,a=t.length;o<a;o++)i=Math.max(i,r.distanceToSquared(t[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new c),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new T),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(E.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new c),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new c;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new c),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new c;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new c,t=new c,n=new c;return function(r,i,o,a){e.copy(r).add(i).multiplyScalar(.5),t.copy(i).sub(r).normalize(),n.copy(this.origin).sub(e);var s,u,c,l,h=.5*r.distanceTo(i),f=-this.direction.dot(t),d=n.dot(this.direction),p=-n.dot(t),m=n.lengthSq(),v=Math.abs(1-f*f);if(v>0)if(u=f*d-p,l=h*v,(s=f*p-d)>=0)if(u>=-l)if(u<=l){var g=1/v;c=(s*=g)*(s+f*(u*=g)+2*d)+u*(f*s+u+2*p)+m}else u=h,c=-(s=Math.max(0,-(f*u+d)))*s+u*(u+2*p)+m;else u=-h,c=-(s=Math.max(0,-(f*u+d)))*s+u*(u+2*p)+m;else u<=-l?c=-(s=Math.max(0,-(-f*h+d)))*s+(u=s>0?-h:Math.min(Math.max(-h,-p),h))*(u+2*p)+m:u<=l?(s=0,c=(u=Math.min(Math.max(-h,-p),h))*(u+2*p)+m):c=-(s=Math.max(0,-(f*h+d)))*s+(u=s>0?h:Math.min(Math.max(-h,-p),h))*(u+2*p)+m;else u=f>0?-h:h,c=-(s=Math.max(0,-(f*u+d)))*s+u*(u+2*p)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(t).multiplyScalar(u).add(e),c}}(),intersectSphere:function(){var e=new c;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,o=t.radius*t.radius;if(i>o)return null;var a=Math.sqrt(o-i),s=r-a,u=r+a;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,o,a,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||n!==n)&&(n=i),(o<r||r!==r)&&(r=o),l>=0?(a=(e.min.z-h.z)*l,s=(e.max.z-h.z)*l):(a=(e.max.z-h.z)*l,s=(e.min.z-h.z)*l),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:function(){var e=new c;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new c,t=new c,n=new c,r=new c;return function(i,o,a,s,u){t.subVectors(o,i),n.subVectors(a,i),r.crossVectors(t,n);var c,l=this.direction.dot(r);if(l>0){if(s)return null;c=1}else{if(!(l<0))return null;c=-1,l=-l}e.subVectors(this.origin,i);var h=c*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var f=c*this.direction.dot(t.cross(e));if(f<0)return null;if(h+f>l)return null;var d=-c*e.dot(r);return d<0?null:this.at(d/l,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(M,{getNormal:function(){var e=new c;return function(t,n,r,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new c),i.subVectors(r,n),e.subVectors(t,n),i.cross(e);var o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}}(),getBarycoord:function(){var e=new c,t=new c,n=new c;return function(r,i,o,a,s){e.subVectors(a,i),t.subVectors(o,i),n.subVectors(r,i);var u=e.dot(e),l=e.dot(t),h=e.dot(n),f=t.dot(t),d=t.dot(n),p=u*f-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new c),0===p)return s.set(-2,-1,-1);var m=1/p,v=(f*h-l*d)*m,g=(u*d-l*h)*m;return s.set(1-v-g,g,v)}}(),containsPoint:function(){var e=new c;return function(t,n,r,i){return M.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:function(){var e=new c;return function(t,n,r,i,o,a,s,u){return this.getBarycoord(t,n,r,i,e),u.set(0,0),u.addScaledVector(o,e.x),u.addScaledVector(a,e.y),u.addScaledVector(s,e.z),u}}(),isFrontFacing:function(){var e=new c,t=new c;return function(n,r,i,o){return e.subVectors(i,r),t.subVectors(n,r),e.cross(t).dot(o)<0}}()}),Object.assign(M.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new c,t=new c;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new c),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return M.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new c),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return M.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,n,r,i){return M.getUV(e,this.a,this.b,this.c,t,n,r,i)},containsPoint:function(e){return M.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return M.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new c,t=new c,n=new c,r=new c,i=new c,o=new c;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new c);var u,l,h=this.a,f=this.b,d=this.c;e.subVectors(f,h),t.subVectors(d,h),r.subVectors(a,h);var p=e.dot(r),m=t.dot(r);if(p<=0&&m<=0)return s.copy(h);i.subVectors(a,f);var v=e.dot(i),g=t.dot(i);if(v>=0&&g<=v)return s.copy(f);var y=p*g-v*m;if(y<=0&&p>=0&&v<=0)return u=p/(p-v),s.copy(h).addScaledVector(e,u);o.subVectors(a,d);var b=e.dot(o),_=t.dot(o);if(_>=0&&b<=_)return s.copy(d);var w=b*m-p*_;if(w<=0&&m>=0&&_<=0)return l=m/(m-_),s.copy(h).addScaledVector(t,l);var x=v*_-b*g;if(x<=0&&g-v>=0&&b-_>=0)return n.subVectors(d,f),l=(g-v)/(g-v+(b-_)),s.copy(f).addScaledVector(n,l);var T=1/(x+w+y);return u=w*T,l=y*T,s.copy(h).addScaledVector(e,u).addScaledVector(t,l)}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var C={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function A(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function P(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function O(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function k(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function I(e,t,n,r,i,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new c,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new A,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(A.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(e,t,n){if(e=a.euclideanModulo(e,1),t=a.clamp(t,0,1),n=a.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=P(i,r,e+1/3),this.g=P(i,r,e),this.b=P(i,r,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var c,l=(c=n[1]).length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(c=C[e])?this.setHex(c):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=O(e.r),this.g=O(e.g),this.b=O(e.b),this},copyLinearToSRGB:function(e){return this.r=k(e.r),this.g=k(e.g),this.b=k(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)t=0,n=0;else{var c=a-s;switch(n=u<=.5?c/(a+s):c/(2-a-s),a){case r:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-r)/c+2;break;case o:t=(r-i)/c+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,n,r){return this.getHSL(e),e.h+=t,e.s+=n,e.l+=r,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(){var e={h:0,s:0,l:0},t={h:0,s:0,l:0};return function(n,r){this.getHSL(e),n.getHSL(t);var i=a.lerp(e.h,t.h,r),o=a.lerp(e.s,t.s,r),s=a.lerp(e.l,t.l,r);return this.setHSL(i,o,s),this}}(),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),Object.assign(I.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var R=0;function D(){Object.defineProperty(this,"id",{value:R++}),this.uuid=a.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function L(e){D.call(this),this.type="MeshBasicMaterial",this.color=new A(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function N(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function F(e,t,n){N.call(this,new Int8Array(e),t,n)}function U(e,t,n){N.call(this,new Uint8Array(e),t,n)}function j(e,t,n){N.call(this,new Uint8ClampedArray(e),t,n)}function B(e,t,n){N.call(this,new Int16Array(e),t,n)}function z(e,t,n){N.call(this,new Uint16Array(e),t,n)}function V(e,t,n){N.call(this,new Int32Array(e),t,n)}function W(e,t,n){N.call(this,new Uint32Array(e),t,n)}function G(e,t,n){N.call(this,new Float32Array(e),t,n)}function H(e,t,n){N.call(this,new Float64Array(e),t,n)}function q(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Y(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}D.prototype=Object.assign(Object.create(r.prototype),{constructor:D,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),o=r(e.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),L.prototype=Object.create(D.prototype),L.prototype.constructor=L,L.prototype.isMeshBasicMaterial=!0,L.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.defineProperty(N.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(N.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new A),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new s),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new c),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new p),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),F.prototype=Object.create(N.prototype),F.prototype.constructor=F,U.prototype=Object.create(N.prototype),U.prototype.constructor=U,j.prototype=Object.create(N.prototype),j.prototype.constructor=j,B.prototype=Object.create(N.prototype),B.prototype.constructor=B,z.prototype=Object.create(N.prototype),z.prototype.constructor=z,V.prototype=Object.create(N.prototype),V.prototype.constructor=V,W.prototype=Object.create(N.prototype),W.prototype.constructor=W,G.prototype=Object.create(N.prototype),G.prototype.constructor=G,H.prototype=Object.create(N.prototype),H.prototype.constructor=H,Object.assign(q.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,n.push(t)),t={start:3*o,materialIndex:r})}void 0!==t&&(t.count=3*o-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,u=e.morphTargets,c=u.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]={name:u[l].name,data:[]};this.morphTargets.position=t}var h,f=e.morphNormals,d=f.length;if(d>0){h=[];for(l=0;l<d;l++)h[l]={name:f[l].name,data:[]};this.morphTargets.normal=h}var p=e.skinIndices,m=e.skinWeights,v=p.length===r.length,g=m.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(l=0;l<n.length;l++){var y=n[l];this.vertices.push(r[y.a],r[y.b],r[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var _=y.normal;this.normals.push(_,_,_)}var w,x=y.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var T=y.color;this.colors.push(T,T,T)}if(!0===o)void 0!==(w=i[0][l])?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new s,new s,new s));if(!0===a)void 0!==(w=i[1][l])?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new s,new s,new s));for(var S=0;S<c;S++){var E=u[S].vertices;t[S].data.push(E[y.a],E[y.b],E[y.c])}for(S=0;S<d;S++){var M=f[S].vertexNormals[l];h[S].data.push(M.a,M.b,M.c)}v&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var K=1;function X(){Object.defineProperty(this,"id",{value:K+=2}),this.uuid=a.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Q(e,t){w.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new X,this.material=void 0!==t?t:new L({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}X.prototype=Object.assign(Object.create(r.prototype),{constructor:X,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Y(e)>65535?W:z)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new N(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new l).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);var r=this.attributes.tangent;void 0!==r&&((new l).getNormalMatrix(e).applyToBufferAttribute(r),r.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new g;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new g;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new g;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new g;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new g;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new w;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new c;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new G(3*t.vertices.length,3),r=new G(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new G(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new G(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new q).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new N(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new N(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new N(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new N(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new N(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[a],c=0,l=u.length;c<l;c++){var h=u[c],f=new G(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var d=new G(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new G(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){var e=new T;return function(){null===this.boundingBox&&(this.boundingBox=new T);var t=this.attributes.position,n=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),n)for(var r=0,i=n.length;r<i;r++){var o=n[r];e.setFromBufferAttribute(o),this.boundingBox.expandByPoint(e.min),this.boundingBox.expandByPoint(e.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var e=new T,t=new T,n=new c;return function(){null===this.boundingSphere&&(this.boundingSphere=new S);var r=this.attributes.position,i=this.morphAttributes.position;if(r){var o=this.boundingSphere.center;if(e.setFromBufferAttribute(r),i)for(var a=0,s=i.length;a<s;a++){var u=i[a];t.setFromBufferAttribute(u),e.expandByPoint(t.min),e.expandByPoint(t.max)}e.getCenter(o);var c=0;for(a=0,s=r.count;a<s;a++)n.fromBufferAttribute(r,a),c=Math.max(c,o.distanceToSquared(n));if(i)for(a=0,s=i.length;a<s;a++)for(var l=0,h=(u=i[a]).count;l<h;l++)n.fromBufferAttribute(u,l),c=Math.max(c,o.distanceToSquared(n));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new N(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,l=t.normal.array,h=new c,f=new c,d=new c,p=new c,m=new c;if(e){var v=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*v[i+0],s=3*v[i+1],u=3*v[i+2],h.fromArray(n,a),f.fromArray(n,s),d.fromArray(n,u),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),l[a]+=p.x,l[a+1]+=p.y,l[a+2]+=p.z,l[s]+=p.x,l[s+1]+=p.y,l[s+2]+=p.z,l[u]+=p.x,l[u+1]+=p.y,l[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)h.fromArray(n,i),f.fromArray(n,i+3),d.fromArray(n,i+6),p.subVectors(d,f),m.subVectors(h,f),p.cross(m),l[i]=p.x,l[i+1]=p.y,l[i+2]=p.z,l[i+3]=p.x,l[i+4]=p.y,l[i+5]=p.z,l[i+6]=p.x,l[i+7]=p.y,l[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,u=Math.min(a.length,i.length-s),c=0,l=s;c<u;c++,l++)i[l]=a[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new c;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=new n.constructor(t.length*r),o=0,a=0,s=0,u=t.length;s<u;s++){o=t[s]*r;for(var c=0;c<r;c++)i[a++]=n[o++]}return new N(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new X,n=this.index.array,r=this.attributes;for(var i in r){var o=e(r[i],n);t.addAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],u=a[i],c=0,l=u.length;c<l;c++){o=e(u[c],n);s.push(o)}t.morphAttributes[i]=s}for(var h=this.groups,f=(c=0,h.length);c<f;c++){var d=h[c];t.addGroup(d.start,d.count,d.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(f=i[n]).toJSON();""!==f.name&&(o.name=f.name),e.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],c=[],l=0,h=u.length;l<h;l++){var f;o=(f=u[l]).toJSON();""!==f.name&&(o.name=f.name),c.push(o)}c.length>0&&(a[n]=c,s=!0)}s&&(e.data.morphAttributes=a);var d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e},clone:function(){return(new X).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.addAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var u=[],c=s[t];for(n=0,r=c.length;n<r;n++)u.push(c[n].clone());this.morphAttributes[t]=u}var l=e.groups;for(n=0,r=l.length;n<r;n++){var h=l[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=e.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Q.prototype=Object.assign(Object.create(w.prototype),{constructor:Q,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return w.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)n=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var e=new g,t=new E,n=new S,r=new c,i=new c,a=new c,u=new c,l=new c,h=new c,f=new c,d=new c,p=new c,m=new s,v=new s,y=new s,b=new c,_=new c;function w(e,t,n,r,i,a,s,u){if(null===(1===t.side?r.intersectTriangle(s,a,i,!0,u):r.intersectTriangle(i,a,s,t.side!==o,u)))return null;_.copy(u),_.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(_);return c<n.near||c>n.far?null:{distance:c,point:_.clone(),object:e}}function x(e,t,n,o,c,g,_,x,T,S){r.fromBufferAttribute(c,x),i.fromBufferAttribute(c,T),a.fromBufferAttribute(c,S);var E=e.morphTargetInfluences;if(t.morphTargets&&g&&E){f.set(0,0,0),d.set(0,0,0),p.set(0,0,0);for(var C=0,A=g.length;C<A;C++){var P=E[C],O=g[C];0!==P&&(u.fromBufferAttribute(O,x),l.fromBufferAttribute(O,T),h.fromBufferAttribute(O,S),f.addScaledVector(u.sub(r),P),d.addScaledVector(l.sub(i),P),p.addScaledVector(h.sub(a),P))}r.add(f),i.add(d),a.add(p)}var k=w(e,t,n,o,r,i,a,b);if(k){_&&(m.fromBufferAttribute(_,x),v.fromBufferAttribute(_,T),y.fromBufferAttribute(_,S),k.uv=M.getUV(b,r,i,a,m,v,y,new s));var R=new I(x,T,S);M.getNormal(r,i,a,R.normal),k.face=R}return k}return function(r,i){var o,a=this.geometry,u=this.material,c=this.matrixWorld;if(void 0!==u&&(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(c),!1!==r.ray.intersectsSphere(n)&&(e.getInverse(c),t.copy(r.ray).applyMatrix4(e),null===a.boundingBox||!1!==t.intersectsBox(a.boundingBox))))if(a.isBufferGeometry){var l,h,f,d,p,g,_,T,S,E=a.index,C=a.attributes.position,A=a.morphAttributes.position,P=a.attributes.uv,O=a.groups,k=a.drawRange;if(null!==E)if(Array.isArray(u))for(d=0,g=O.length;d<g;d++)for(S=u[(T=O[d]).materialIndex],p=Math.max(T.start,k.start),_=Math.min(T.start+T.count,k.start+k.count);p<_;p+=3)l=E.getX(p),h=E.getX(p+1),f=E.getX(p+2),(o=x(this,S,r,t,C,A,P,l,h,f))&&(o.faceIndex=Math.floor(p/3),o.face.materialIndex=T.materialIndex,i.push(o));else for(d=Math.max(0,k.start),g=Math.min(E.count,k.start+k.count);d<g;d+=3)l=E.getX(d),h=E.getX(d+1),f=E.getX(d+2),(o=x(this,u,r,t,C,A,P,l,h,f))&&(o.faceIndex=Math.floor(d/3),i.push(o));else if(void 0!==C)if(Array.isArray(u))for(d=0,g=O.length;d<g;d++)for(S=u[(T=O[d]).materialIndex],p=Math.max(T.start,k.start),_=Math.min(T.start+T.count,k.start+k.count);p<_;p+=3)(o=x(this,S,r,t,C,A,P,l=p,h=p+1,f=p+2))&&(o.faceIndex=Math.floor(p/3),o.face.materialIndex=T.materialIndex,i.push(o));else for(d=Math.max(0,k.start),g=Math.min(C.count,k.start+k.count);d<g;d+=3)(o=x(this,u,r,t,C,A,P,l=d,h=d+1,f=d+2))&&(o.faceIndex=Math.floor(d/3),i.push(o))}else if(a.isGeometry){var I,R,D,L,N=Array.isArray(u),F=a.vertices,U=a.faces,j=a.faceVertexUvs[0];j.length>0&&(L=j);for(var B=0,z=U.length;B<z;B++){var V=U[B],W=N?u[V.materialIndex]:u;if(void 0!==W&&(I=F[V.a],R=F[V.b],D=F[V.c],o=w(this,W,r,t,I,R,D,b))){if(L&&L[B]){var G=L[B];m.copy(G[0]),v.copy(G[1]),y.copy(G[2]),o.uv=M.getUV(b,I,R,D,m,v,y,new s)}o.face=V,o.faceIndex=B,i.push(o)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var J=0;function Z(){Object.defineProperty(this,"id",{value:J+=2}),this.uuid=a.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function $(e,t,n,r,i,o){Z.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new ee(e,t,n,r,i,o)),this.mergeVertices()}function ee(e,t,n,r,i,o){X.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],u=[],l=[],h=[],f=0,d=0;function p(e,t,n,r,i,o,p,m,v,g,y){var b,_,w=o/v,x=p/g,T=o/2,S=p/2,E=m/2,M=v+1,C=g+1,A=0,P=0,O=new c;for(_=0;_<C;_++){var k=_*x-S;for(b=0;b<M;b++){var I=b*w-T;O[e]=I*r,O[t]=k*i,O[n]=E,u.push(O.x,O.y,O.z),O[e]=0,O[t]=0,O[n]=m>0?1:-1,l.push(O.x,O.y,O.z),h.push(b/v),h.push(1-_/g),A+=1}}for(_=0;_<g;_++)for(b=0;b<v;b++){var R=f+b+M*_,D=f+b+M*(_+1),L=f+(b+1)+M*(_+1),N=f+(b+1)+M*_;s.push(R,D,N),s.push(D,L,N),P+=6}a.addGroup(d,P,y),d+=P,f+=A}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new G(u,3)),this.addAttribute("normal",new G(l,3)),this.addAttribute("uv",new G(h,2))}function te(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function ne(e){for(var t={},n=0;n<e.length;n++){var r=te(e[n]);for(var i in r)t[i]=r[i]}return t}Z.prototype=Object.assign(Object.create(r.prototype),{constructor:Z,isGeometry:!0,applyMatrix:function(e){for(var t=(new l).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new g;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new g;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new g;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new g;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new g;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new w;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,u=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var h=0;h<i.length;h+=3)t.vertices.push((new c).fromArray(i,h)),void 0!==a&&t.colors.push((new A).fromArray(a,h));function f(e,n,r,i){var h=void 0===a?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],f=new I(e,n,r,void 0===o?[]:[(new c).fromArray(o,3*e),(new c).fromArray(o,3*n),(new c).fromArray(o,3*r)],h,i);t.faces.push(f),void 0!==u&&t.faceVertexUvs[0].push([(new s).fromArray(u,2*e),(new s).fromArray(u,2*n),(new s).fromArray(u,2*r)]),void 0!==l&&t.faceVertexUvs[1].push([(new s).fromArray(l,2*e),(new s).fromArray(l,2*n),(new s).fromArray(l,2*r)])}var d=e.groups;if(d.length>0)for(h=0;h<d.length;h++)for(var p=d[h],m=p.start,v=m,g=m+p.count;v<g;v+=3)void 0!==n?f(n[v],n[v+1],n[v+2],p.materialIndex):f(v,v+1,v+2,p.materialIndex);else if(void 0!==n)for(h=0;h<n.length;h+=3)f(n[h],n[h+1],n[h+2]);else for(h=0;h<i.length/3;h+=3)f(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new c;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new g;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new c,t=new c,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)a[t]=new c;if(e){var s,u,l,h=new c,f=new c;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],l=this.vertices[o.c],h.subVectors(l,u),f.subVectors(s,u),h.cross(f),a[o.a].add(h),a[o.b].add(h),a[o.c].add(h)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)a[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var d=(o=this.faces[r]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new Z;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new c,l={a:new c,b:new c,c:new c},a.push(u),s.push(l)}var u,l,h=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=h.faceNormals[n],l=h.vertexNormals[n],u.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new T),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new S),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,u=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],f=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new l).getNormalMatrix(t));for(var p=0,m=a.length;p<m;p++){var v=a[p].clone();void 0!==t&&v.applyMatrix4(t),o.push(v)}for(p=0,m=d.length;p<m;p++)f.push(d[p].clone());for(p=0,m=u.length;p<m;p++){var g,y,b,_=u[p],w=_.vertexNormals,x=_.vertexColors;(g=new I(_.a+i,_.b+i,_.c+i)).normal.copy(_.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var T=0,S=w.length;T<S;T++)y=w[T].clone(),void 0!==r&&y.applyMatrix3(r).normalize(),g.vertexNormals.push(y);g.color.copy(_.color);for(T=0,S=x.length;T<S;T++)b=x[T],g.vertexColors.push(b.clone());g.materialIndex=_.materialIndex+n,s.push(g)}for(p=0,m=h.length;p<m;p++){var E=h[p],M=[];if(void 0!==E){for(T=0,S=E.length;T<S;T++)M.push(E[T].clone());c.push(M)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,o,a,s,u={},c=[],l=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(u[t]=n,c.push(this.vertices[n]),l[n]=c.length-1):l[n]=l[u[t]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=l[i.a],i.b=l[i.b],i.c=l[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(p,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new c(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(r=[]),a&&a.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},c=[],l={},h=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=T(b,0,0),b=T(b,1,!0),b=T(b,2,!1),b=T(b,3,p),b=T(b,4,m),b=T(b,5,v),b=T(b,6,g),b=T(b,7,y),a.push(b),a.push(d.a,d.b,d.c),a.push(d.materialIndex),p){var _=this.faceVertexUvs[0][i];a.push(M(_[0]),M(_[1]),M(_[2]))}if(m&&a.push(S(d.normal)),v){var w=d.vertexNormals;a.push(S(w[0]),S(w[1]),S(w[2]))}if(g&&a.push(E(d.color)),y){var x=d.vertexColors;a.push(E(x[0]),E(x[1]),E(x[2]))}}function T(e,t,n){return n?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=s.length/3,s.push(e.x,e.y,e.z),u[t])}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==l[t]?l[t]:(l[t]=c.length,c.push(e.getHex()),l[t])}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==f[t]?f[t]:(f[t]=h.length/2,h.push(e.x,e.y),f[t])}return e.data={},e.data.vertices=r,e.data.normals=s,c.length>0&&(e.data.colors=c),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new Z).copy(this)},copy:function(e){var t,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var c=e.faces;for(t=0,n=c.length;t<n;t++)this.faces.push(c[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var l=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=l.length;r<i;r++){var h=l[r],f=[];for(o=0,a=h.length;o<a;o++){var d=h[o];f.push(d.clone())}this.faceVertexUvs[t].push(f)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)m.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(m.normals=[],r=0,i=p[t].normals.length;r<i;r++)m.normals.push(p[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var x=e.lineDistances;for(t=0,n=x.length;t<n;t++)this.lineDistances.push(x[t]);var T=e.boundingBox;null!==T&&(this.boundingBox=T.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$.prototype=Object.create(Z.prototype),$.prototype.constructor=$,ee.prototype=Object.create(X.prototype),ee.prototype.constructor=ee;function re(e){D.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function ie(){w.call(this),this.type="Camera",this.matrixWorldInverse=new g,this.projectionMatrix=new g,this.projectionMatrixInverse=new g}function oe(e,t,n,r){ie.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}re.prototype=Object.create(D.prototype),re.prototype.constructor=re,re.prototype.isShaderMaterial=!0,re.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=te(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},re.prototype.toJSON=function(e){var t=D.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},ie.prototype=Object.assign(Object.create(w.prototype),{constructor:ie,isCamera:!0,copy:function(e,t){return w.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new c),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){w.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),oe.prototype=Object.assign(Object.create(ie.prototype),{constructor:oe,isPerspectiveCamera:!0,copy:function(e,t){return ie.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*a.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*a.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*a.RAD2DEG*Math.atan(Math.tan(.5*a.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*a.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var s=o.fullWidth,u=o.fullHeight;i+=o.offsetX*r/s,t-=o.offsetY*n/u,r*=o.width/s,n*=o.height/u}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=w.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});function ae(e,t,n,r){w.call(this),this.type="CubeCamera";var i=new oe(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new c(1,0,0)),this.add(i);var o=new oe(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new c(-1,0,0)),this.add(o);var a=new oe(90,1,e,t);a.up.set(0,0,1),a.lookAt(new c(0,1,0)),this.add(a);var s=new oe(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new c(0,-1,0)),this.add(s);var u=new oe(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new c(0,0,1)),this.add(u);var l=new oe(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new c(0,0,-1)),this.add(l),r=r||{format:1022,magFilter:1006,minFilter:1006},this.renderTarget=new se(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=e.getRenderTarget(),r=this.renderTarget,c=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,a),e.setRenderTarget(r,3),e.render(t,s),e.setRenderTarget(r,4),e.render(t,u),r.texture.generateMipmaps=c,e.setRenderTarget(r,5),e.render(t,l),e.setRenderTarget(n)},this.clear=function(e,t,n,r){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,n,r);e.setRenderTarget(i)}}function se(e,t,n){m.call(this,e,t,n)}function ue(e,t,n,r,i,o,a,s,u,c,l,h){d.call(this,null,o,a,s,u,c,r,i,l,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==c?c:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function ce(e,t){this.normal=void 0!==e?e:new c(1,0,0),this.constant=void 0!==t?t:0}function le(e,t,n,r,i,o){this.planes=[void 0!==e?e:new ce,void 0!==t?t:new ce,void 0!==n?n:new ce,void 0!==r?r:new ce,void 0!==i?i:new ce,void 0!==o?o:new ce]}ae.prototype=Object.create(w.prototype),ae.prototype.constructor=ae,se.prototype=Object.create(m.prototype),se.prototype.constructor=se,se.prototype.isWebGLRenderTargetCube=!0,se.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var n=new x,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new re({type:"CubemapFromEquirect",uniforms:te(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:1,blending:0});i.uniforms.tEquirect.value=t;var o=new Q(new ee(5,5,5),i);n.add(o);var a=new ae(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(e,n),o.geometry.dispose(),o.material.dispose(),this},ue.prototype=Object.create(d.prototype),ue.prototype.constructor=ue,ue.prototype.isDataTexture=!0,Object.assign(ce.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new c,t=new c;return function(n,r,i){var o=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new c),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new c;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new c);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var o=-(t.start.dot(this.normal)+this.constant)/i;return o<0||o>1?void 0:n.copy(r).multiplyScalar(o).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new c),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new c,t=new l;return function(n,r){var i=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),a=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(a),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(le.prototype,{set:function(e,t,n,r,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],d=n[10],p=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,l-s,p-h,y-m).normalize(),t[1].setComponents(a+r,l+s,p+h,y+m).normalize(),t[2].setComponents(a+i,l+u,p+f,y+v).normalize(),t[3].setComponents(a-i,l-u,p-f,y-v).normalize(),t[4].setComponents(a-o,l-c,p-d,y-g).normalize(),t[5].setComponents(a+o,l+c,p+d,y+g).normalize(),this},intersectsObject:function(){var e=new S;return function(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new S;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:function(){var e=new c;return function(t){for(var n=this.planes,r=0;r<6;r++){var i=n[r];if(e.x=i.normal.x>0?t.max.x:t.min.x,e.y=i.normal.y>0?t.max.y:t.min.y,e.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(e)<0)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var he={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},fe={common:{diffuse:{value:new A(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new l},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new s(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new A(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new A(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new l}},sprite:{diffuse:{value:new A(15658734)},opacity:{value:1},center:{value:new s(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new l}}},de={basic:{uniforms:ne([fe.common,fe.specularmap,fe.envmap,fe.aomap,fe.lightmap,fe.fog]),vertexShader:he.meshbasic_vert,fragmentShader:he.meshbasic_frag},lambert:{uniforms:ne([fe.common,fe.specularmap,fe.envmap,fe.aomap,fe.lightmap,fe.emissivemap,fe.fog,fe.lights,{emissive:{value:new A(0)}}]),vertexShader:he.meshlambert_vert,fragmentShader:he.meshlambert_frag},phong:{uniforms:ne([fe.common,fe.specularmap,fe.envmap,fe.aomap,fe.lightmap,fe.emissivemap,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.gradientmap,fe.fog,fe.lights,{emissive:{value:new A(0)},specular:{value:new A(1118481)},shininess:{value:30}}]),vertexShader:he.meshphong_vert,fragmentShader:he.meshphong_frag},standard:{uniforms:ne([fe.common,fe.envmap,fe.aomap,fe.lightmap,fe.emissivemap,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.roughnessmap,fe.metalnessmap,fe.fog,fe.lights,{emissive:{value:new A(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:he.meshphysical_vert,fragmentShader:he.meshphysical_frag},matcap:{uniforms:ne([fe.common,fe.bumpmap,fe.normalmap,fe.displacementmap,fe.fog,{matcap:{value:null}}]),vertexShader:he.meshmatcap_vert,fragmentShader:he.meshmatcap_frag},points:{uniforms:ne([fe.points,fe.fog]),vertexShader:he.points_vert,fragmentShader:he.points_frag},dashed:{uniforms:ne([fe.common,fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:he.linedashed_vert,fragmentShader:he.linedashed_frag},depth:{uniforms:ne([fe.common,fe.displacementmap]),vertexShader:he.depth_vert,fragmentShader:he.depth_frag},normal:{uniforms:ne([fe.common,fe.bumpmap,fe.normalmap,fe.displacementmap,{opacity:{value:1}}]),vertexShader:he.normal_vert,fragmentShader:he.normal_frag},sprite:{uniforms:ne([fe.sprite,fe.fog]),vertexShader:he.sprite_vert,fragmentShader:he.sprite_frag},background:{uniforms:{uvTransform:{value:new l},t2D:{value:null}},vertexShader:he.background_vert,fragmentShader:he.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:he.cube_vert,fragmentShader:he.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:he.equirect_vert,fragmentShader:he.equirect_frag},distanceRGBA:{uniforms:ne([fe.common,fe.displacementmap,{referencePosition:{value:new c},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:he.distanceRGBA_vert,fragmentShader:he.distanceRGBA_frag},shadow:{uniforms:ne([fe.lights,fe.fog,{color:{value:new A(0)},opacity:{value:1}}]),vertexShader:he.shadow_vert,fragmentShader:he.shadow_frag}};function pe(){var e=null,t=!1,n=null;function r(i,o){!1!==t&&(n(i,o),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function me(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?35048:35044,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(!function(t,n,r){var i=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,35044):-1===o.count?e.bufferSubData(r,0,i):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i.subarray(o.offset,o.offset+o.count)),o.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function ve(e,t,n,r){Z.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new ge(e,t,n,r)),this.mergeVertices()}function ge(e,t,n,r){X.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,c=Math.floor(r)||1,l=u+1,h=c+1,f=e/u,d=t/c,p=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*d-s;for(i=0;i<l;i++){var b=i*f-a;m.push(b,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/c)}}for(o=0;o<c;o++)for(i=0;i<u;i++){var _=i+l*o,w=i+l*(o+1),x=i+1+l*(o+1),T=i+1+l*o;p.push(_,w,T),p.push(w,x,T)}this.setIndex(p),this.addAttribute("position",new G(m,3)),this.addAttribute("normal",new G(v,3)),this.addAttribute("uv",new G(g,2))}function ye(e,t,n,r){var i,o,a=new A(0),s=0,u=null,c=0;function l(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),l(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){l(a,s=e)},render:function(t,r,h,f){var d=r.background,p=e.vr,m=p.getSession&&p.getSession();if(m&&"additive"===m.environmentBlendMode&&(d=null),null===d?(l(a,s),u=null,c=0):d&&d.isColor&&(l(d,1),f=!0,u=null,c=0),(e.autoClear||f)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===o&&((o=new Q(new ee(1,1,1),new re({type:"BackgroundCubeMaterial",uniforms:te(de.cube.uniforms),vertexShader:de.cube.vertexShader,fragmentShader:de.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var v=d.isWebGLRenderTargetCube?d.texture:d;o.material.uniforms.tCube.value=v,o.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,u===d&&c===v.version||(o.material.needsUpdate=!0,u=d,c=v.version),t.unshift(o,o.geometry,o.material,0,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new Q(new ge(2,2),new re({type:"BackgroundMaterial",uniforms:te(de.background.uniforms),vertexShader:de.background.vertexShader,fragmentShader:de.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),u===d&&c===d.version||(i.material.needsUpdate=!0,u=d,c=d.version),t.unshift(i,i.geometry,i.material,0,0,null))}}}function be(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(o,a,s){var u;if(r.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,a,s,o.maxInstancedCount),n.update(s,i,o.maxInstancedCount)}}function _e(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),l=e.getParameter(35660),h=e.getParameter(3379),f=e.getParameter(34076),d=e.getParameter(34921),p=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=l>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:f,maxAttributes:d,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?e.getParameter(36183):0}}function we(){var e=this,t=null,n=0,r=!1,i=!1,o=new ce,a=new l,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(t,n,r,i){var u=null!==t?t.length:0,c=null;if(0!==u){if(c=s.value,!0!==i||null===c){var l=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<l)&&(c=new Float32Array(l));for(var f=0,d=r;f!==u;++f,d+=4)o.copy(t[f]).applyMatrix4(h,a),o.normal.toArray(c,d),c[d+3]=o.constant}s.value=c,s.needsUpdate=!0}return e.numPlanes=u,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==n||r;return r=i,t=c(e,o,0),n=e.length,a},this.beginShadows=function(){i=!0,c(null)},this.endShadows=function(){i=!1,u()},this.setState=function(e,o,a,l,h,f){if(!r||null===e||0===e.length||i&&!a)i?c(null):u();else{var d=i?0:n,p=4*d,m=h.clippingState||null;s.value=m,m=c(e,l,p,f);for(var v=0;v!==p;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=d}}}function xe(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function Te(e,t,n){var r={},i={};function o(e){var a=e.target,s=r[a.id];for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);a.removeEventListener("dispose",o),delete r[a.id];var c=i[s.id];c&&(t.remove(c),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new X).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var n=i[e.id];if(n)return n;var r,o=[],a=e.index,s=e.attributes;if(null!==a)for(var u=0,c=(r=a.array).length;u<c;u+=3){var l=r[u+0],h=r[u+1],f=r[u+2];o.push(l,h,h,f,f,l)}else for(u=0,c=(r=s.position.array).length/3-1;u<c;u+=3){l=u+0,h=u+1,f=u+2;o.push(l,h,h,f,f,l)}return n=new(Y(o)>65535?W:z)(o,1),t.update(n,34963),i[e.id]=n,n}}}function Se(e,t,n,r){var i,o,a;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,o,t*a),n.update(r,i)},this.renderInstances=function(s,u,c){var l;if(r.isWebGL2)l=e;else if(null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,c,o,u*a,s.maxInstancedCount),n.update(c,i,s.maxInstancedCount)}}function Ee(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 5:case 6:t.triangles+=r*(e-2);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Me(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Ce(e){var t={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=s.length,c=t[i.id];if(void 0===c){c=[];for(var l=0;l<u;l++)c[l]=[l,0];t[i.id]=c}var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(l=0;l<u;l++){0!==(d=c[l])[1]&&(h&&i.removeAttribute("morphTarget"+l),f&&i.removeAttribute("morphNormal"+l))}for(l=0;l<u;l++){(d=c[l])[0]=l,d[1]=s[l]}for(c.sort(Me),l=0;l<8;l++){var d;if(d=c[l]){var p=d[0],m=d[1];if(m){h&&i.addAttribute("morphTarget"+l,h[p]),f&&i.addAttribute("morphNormal"+l,f[p]),n[l]=m;continue}}n[l]=0}a.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function Ae(e,t){var n={};return{update:function(r){var i=t.render.frame,o=r.geometry,a=e.get(r,o);return n[a.id]!==i&&(o.isGeometry&&a.updateFromObject(r),e.update(a),n[a.id]=i),a},dispose:function(){n={}}}}function Pe(e,t,n,r,i,o,a,s,u,c){e=void 0!==e?e:[],t=void 0!==t?t:301,a=void 0!==a?a:1022,d.call(this,e,t,n,r,i,o,a,s,u,c),this.flipY=!1}function Oe(e,t,n,r){d.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}function ke(e,t,n,r){d.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1}de.physical={uniforms:ne([de.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:he.meshphysical_vert,fragmentShader:he.meshphysical_frag},ve.prototype=Object.create(Z.prototype),ve.prototype.constructor=ve,ge.prototype=Object.create(X.prototype),ge.prototype.constructor=ge,Pe.prototype=Object.create(d.prototype),Pe.prototype.constructor=Pe,Pe.prototype.isCubeTexture=!0,Object.defineProperty(Pe.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Oe.prototype=Object.create(d.prototype),Oe.prototype.constructor=Oe,Oe.prototype.isDataTexture2DArray=!0,ke.prototype=Object.create(d.prototype),ke.prototype.constructor=ke,ke.prototype.isDataTexture3D=!0;var Ie=new d,Re=new Oe,De=new ke,Le=new Pe,Ne=[],Fe=[],Ue=new Float32Array(16),je=new Float32Array(9),Be=new Float32Array(4);function ze(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,o=Ne[i];if(void 0===o&&(o=new Float32Array(i),Ne[i]=o),0!==t){r.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=n,e[a].toArray(o,s)}return o}function Ve(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function We(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Ge(e,t){var n=Fe[t];void 0===n&&(n=new Int32Array(t),Fe[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function He(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function qe(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ve(n,t))return;e.uniform2fv(this.addr,t),We(n,t)}}function Ye(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ve(n,t))return;e.uniform3fv(this.addr,t),We(n,t)}}function Ke(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ve(n,t))return;e.uniform4fv(this.addr,t),We(n,t)}}function Xe(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ve(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),We(n,t)}else{if(Ve(n,r))return;Be.set(r),e.uniformMatrix2fv(this.addr,!1,Be),We(n,r)}}function Qe(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ve(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),We(n,t)}else{if(Ve(n,r))return;je.set(r),e.uniformMatrix3fv(this.addr,!1,je),We(n,r)}}function Je(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Ve(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),We(n,t)}else{if(Ve(n,r))return;Ue.set(r),e.uniformMatrix4fv(this.addr,!1,Ue),We(n,r)}}function Ze(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Ie,i)}function $e(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Re,i)}function et(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||De,i)}function tt(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Le,i)}function nt(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function rt(e,t){var n=this.cache;Ve(n,t)||(e.uniform2iv(this.addr,t),We(n,t))}function it(e,t){var n=this.cache;Ve(n,t)||(e.uniform3iv(this.addr,t),We(n,t))}function ot(e,t){var n=this.cache;Ve(n,t)||(e.uniform4iv(this.addr,t),We(n,t))}function at(e,t){e.uniform1fv(this.addr,t)}function st(e,t){e.uniform1iv(this.addr,t)}function ut(e,t){e.uniform2iv(this.addr,t)}function ct(e,t){e.uniform3iv(this.addr,t)}function lt(e,t){e.uniform4iv(this.addr,t)}function ht(e,t){var n=ze(t,this.size,2);e.uniform2fv(this.addr,n)}function ft(e,t){var n=ze(t,this.size,3);e.uniform3fv(this.addr,n)}function dt(e,t){var n=ze(t,this.size,4);e.uniform4fv(this.addr,n)}function pt(e,t){var n=ze(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function mt(e,t){var n=ze(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function vt(e,t){var n=ze(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function gt(e,t,n){var r=t.length,i=Ge(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(t[o]||Ie,i[o])}function yt(e,t,n){var r=t.length,i=Ge(n,r);e.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(t[o]||Le,i[o])}function bt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return He;case 35664:return qe;case 35665:return Ye;case 35666:return Ke;case 35674:return Xe;case 35675:return Qe;case 35676:return Je;case 35678:case 36198:return Ze;case 35679:return et;case 35680:return tt;case 36289:return $e;case 5124:case 35670:return nt;case 35667:case 35671:return rt;case 35668:case 35672:return it;case 35669:case 35673:return ot}}(t.type)}function _t(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return at;case 35664:return ht;case 35665:return ft;case 35666:return dt;case 35674:return pt;case 35675:return mt;case 35676:return vt;case 35678:return gt;case 35680:return yt;case 5124:case 35670:return st;case 35667:case 35671:return ut;case 35668:case 35672:return ct;case 35669:case 35673:return lt}}(t.type)}function wt(e){this.id=e,this.seq=[],this.map={}}_t.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),We(t,e)},wt.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(e,t[a.id],n)}};var xt=/([\w\d_]+)(\])?(\[|\.)?/g;function Tt(e,t){e.seq.push(t),e.map[t.id]=t}function St(e,t,n){var r=e.name,i=r.length;for(xt.lastIndex=0;;){var o=xt.exec(r),a=xt.lastIndex,s=o[1],u="]"===o[2],c=o[3];if(u&&(s|=0),void 0===c||"["===c&&a+2===i){Tt(n,void 0===c?new bt(s,e,t):new _t(s,e,t));break}var l=n.map[s];void 0===l&&Tt(n,l=new wt(s)),n=l}}function Et(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);St(i,e.getUniformLocation(t,i.name),this)}}function Mt(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Et.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Et.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},Et.upload=function(e,t,n,r){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,r)}},Et.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var o=e[r];o.id in t&&n.push(o)}return n};var Ct=0;function At(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Pt(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function Ot(e,t){var n=At(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function kt(e,t){var n=At(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function It(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;case 5:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Rt(e){return""!==e}function Dt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Lt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Nt(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){var n=he[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Nt(n)}))}function Ft(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,r){for(var i="",o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]");return i}))}function Ut(e,t,n,r,i,o,a){var s=e.context,u=r.defines,c=i.vertexShader,l=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";1===o.shadowMapType?h="SHADOWMAP_TYPE_PCF":2===o.shadowMapType&&(h="SHADOWMAP_TYPE_PCF_SOFT");var f="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(r.envMap.mapping){case 301:case 302:f="ENVMAP_TYPE_CUBE";break;case 306:case 307:f="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:f="ENVMAP_TYPE_EQUIREC";break;case 305:f="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:p="ENVMAP_BLENDING_MULTIPLY";break;case 1:p="ENVMAP_BLENDING_MIX";break;case 2:p="ENVMAP_BLENDING_ADD"}}var m,v,g=e.gammaFactor>0?e.gammaFactor:1,y=a.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Rt).join("\n")}(r.extensions,o,t),b=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(u),_=s.createProgram();if(r.isRawShaderMaterial?((m=[b].filter(Rt).join("\n")).length>0&&(m+="\n"),(v=[y,b].filter(Rt).join("\n")).length>0&&(v+="\n")):(m=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+g,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Rt).join("\n"),v=[y,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+i.name,b,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+g,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.envMap?"#define "+d:"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+h:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?he.tonemapping_pars_fragment:"",0!==o.toneMapping?It("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?he.encodings_pars_fragment:"",o.mapEncoding?Ot("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?Ot("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?Ot("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ot("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?kt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Rt).join("\n")),c=Lt(c=Dt(c=Nt(c),o),o),l=Lt(l=Dt(l=Nt(l),o),o),c=Ft(c),l=Ft(l),a.isWebGL2&&!r.isRawShaderMaterial){var w=!1,x=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==c.match(x)&&null!==l.match(x)&&(w=!0,c=c.replace(x,""),l=l.replace(x,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var T,S,E=v+l,M=Mt(s,35633,m+c),C=Mt(s,35632,E);if(s.attachShader(_,M),s.attachShader(_,C),void 0!==r.index0AttributeName?s.bindAttribLocation(_,0,r.index0AttributeName):!0===o.morphTargets&&s.bindAttribLocation(_,0,"position"),s.linkProgram(_),e.debug.checkShaderErrors){var A=s.getProgramInfoLog(_).trim(),P=s.getShaderInfoLog(M).trim(),O=s.getShaderInfoLog(C).trim(),k=!0,I=!0;if(!1===s.getProgramParameter(_,35714)){k=!1;var R=Pt(s,M,"vertex"),D=Pt(s,C,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(_,35715),"gl.getProgramInfoLog",A,R,D)}else""!==A?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",A):""!==P&&""!==O||(I=!1);I&&(this.diagnostics={runnable:k,material:r,programLog:A,vertexShader:{log:P,prefix:m},fragmentShader:{log:O,prefix:v}})}return s.deleteShader(M),s.deleteShader(C),this.getUniforms=function(){return void 0===T&&(T=new Et(s,_)),T},this.getAttributes=function(){return void 0===S&&(S=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var o=e.getActiveAttrib(t,i).name;n[o]=e.getAttribLocation(t,o)}return n}(s,_)),S},this.destroy=function(){s.deleteProgram(_),this.program=void 0},this.name=i.name,this.id=Ct++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=M,this.fragmentShader=C,this}function jt(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=3e3,3e3===n&&t&&(n=3007),n}this.getParameters=function(t,r,a,u,c,l,h){var f=i[t.type],d=h.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),o=Math.min(i,t.length);return o<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+o+"."),0):o}(h):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",p,"instead.");var m=e.getRenderTarget();return{shaderID:f,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:s(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:s(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:1===t.normalMapType,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexTangents:t.normalMap&&t.vertexTangents,vertexColors:t.vertexColors,fog:!!u,useFog:t.fog,fogExp:u&&u.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===o,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var o=0;o<a.length;o++)r.push(n[a[o]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.push(e.gammaFactor),r.join()},this.acquireProgram=function(i,o,a,s){for(var u,c=0,l=r.length;c<l;c++){var h=r[c];if(h.code===s){++(u=h).usedTimes;break}}return void 0===u&&(u=new Ut(e,t,s,i,o,a,n),r.push(u)),u},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function Bt(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function zt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Vt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Wt(){var e=[],t=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,u){var c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=o,c.program=o.program||i,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=u),t++,c}return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(e,t,i,a,s,u){var c=o(e,t,i,a,s,u);(!0===i.transparent?r:n).push(c)},unshift:function(e,t,i,a,s,u){var c=o(e,t,i,a,s,u);(!0===i.transparent?r:n).unshift(c)},sort:function(){n.length>1&&n.sort(zt),r.length>1&&r.sort(Vt)}}}function Gt(){var e={};function t(n){var r=n.target;r.removeEventListener("dispose",t),delete e[r.id]}return{get:function(n,r){var i,o=e[n.id];return void 0===o?(i=new Wt,e[n.id]={},e[n.id][r.id]=i,n.addEventListener("dispose",t)):void 0===(i=o[r.id])&&(i=new Wt,o[r.id]=i),i},dispose:function(){e={}}}}function Ht(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new c,color:new A,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s};break;case"SpotLight":n={position:new c,direction:new c,color:new A,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s};break;case"PointLight":n={position:new c,color:new A,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new s,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new c,skyColor:new A,groundColor:new A};break;case"RectAreaLight":n={color:new A,position:new c,halfWidth:new c,halfHeight:new c}}return e[t.id]=n,n}}}var qt=0;function Yt(){for(var e=new Ht,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=0;n<9;n++)t.probe.push(new c);var r=new c,i=new g,o=new g;return{setup:function(n,a,s){for(var u=0,c=0,l=0,h=0;h<9;h++)t.probe[h].set(0,0,0);for(var f=0,d=0,p=0,m=0,v=0,g=s.matrixWorldInverse,y=(h=0,n.length);h<y;h++){var b=n[h],_=b.color,w=b.intensity,x=b.distance,T=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)u+=_.r*w,c+=_.g*w,l+=_.b*w;else if(b.isLightProbe)for(var S=0;S<9;S++)t.probe[S].addScaledVector(b.sh.coefficients[S],w);else if(b.isDirectionalLight){if((M=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),M.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(g),M.shadow=b.castShadow,b.castShadow){var E=b.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize}t.directionalShadowMap[f]=T,t.directionalShadowMatrix[f]=b.shadow.matrix,t.directional[f]=M,f++}else if(b.isSpotLight){if((M=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(g),M.color.copy(_).multiplyScalar(w),M.distance=x,M.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),M.direction.sub(r),M.direction.transformDirection(g),M.coneCos=Math.cos(b.angle),M.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),M.decay=b.decay,M.shadow=b.castShadow,b.castShadow){E=b.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize}t.spotShadowMap[p]=T,t.spotShadowMatrix[p]=b.shadow.matrix,t.spot[p]=M,p++}else if(b.isRectAreaLight){(M=e.get(b)).color.copy(_).multiplyScalar(w),M.position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(g),o.identity(),i.copy(b.matrixWorld),i.premultiply(g),o.extractRotation(i),M.halfWidth.set(.5*b.width,0,0),M.halfHeight.set(0,.5*b.height,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),t.rectArea[m]=M,m++}else if(b.isPointLight){if((M=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),M.position.applyMatrix4(g),M.color.copy(b.color).multiplyScalar(b.intensity),M.distance=b.distance,M.decay=b.decay,M.shadow=b.castShadow,b.castShadow){E=b.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize,M.shadowCameraNear=E.camera.near,M.shadowCameraFar=E.camera.far}t.pointShadowMap[d]=T,t.pointShadowMatrix[d]=b.shadow.matrix,t.point[d]=M,d++}else if(b.isHemisphereLight){var M;(M=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),M.direction.transformDirection(g),M.direction.normalize(),M.skyColor.copy(b.color).multiplyScalar(w),M.groundColor.copy(b.groundColor).multiplyScalar(w),t.hemi[v]=M,v++}}t.ambient[0]=u,t.ambient[1]=c,t.ambient[2]=l;var C=t.hash;C.directionalLength===f&&C.pointLength===d&&C.spotLength===p&&C.rectAreaLength===m&&C.hemiLength===v&&C.shadowsLength===a.length||(t.directional.length=f,t.spot.length=p,t.rectArea.length=m,t.point.length=d,t.hemi.length=v,C.directionalLength=f,C.pointLength=d,C.spotLength=p,C.rectAreaLength=m,C.hemiLength=v,C.shadowsLength=a.length,t.version=qt++)},state:t}}function Kt(){var e=new Yt,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Xt(){var e={};function t(n){var r=n.target;r.removeEventListener("dispose",t),delete e[r.id]}return{get:function(n,r){var i;return void 0===e[n.id]?(i=new Kt,e[n.id]={},e[n.id][r.id]=i,n.addEventListener("dispose",t)):void 0===e[n.id][r.id]?(i=new Kt,e[n.id][r.id]=i):i=e[n.id][r.id],i},dispose:function(){e={}}}}function Qt(e){D.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Jt(e){D.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new c,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Zt(e,t,n){for(var r=new le,i=new g,a=new s,u=new s(n,n),l=new c,h=new c,f=new Array(4),d=new Array(4),v={},y={0:1,1:0,2:o},b=[new c(1,0,0),new c(-1,0,0),new c(0,0,1),new c(0,0,-1),new c(0,1,0),new c(0,-1,0)],_=[new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,0,1),new c(0,0,-1)],w=[new p,new p,new p,new p,new p,new p],x=0;4!==x;++x){var T=0!==(1&x),S=0!==(2&x),E=new Qt({depthPacking:3201,morphTargets:T,skinning:S});f[x]=E;var M=new Jt({morphTargets:T,skinning:S});d[x]=M}var C=this;function A(t,n,r,i,o,a){var s=t.geometry,u=null,c=f,l=t.customDepthMaterial;if(r&&(c=d,l=t.customDistanceMaterial),l)u=l;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var p=0;h&&(p|=1),t.isSkinnedMesh&&n.skinning&&(p|=2),u=c[p]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var m=u.uuid,g=n.uuid,b=v[m];void 0===b&&(b={},v[m]=b);var _=b[g];void 0===_&&(_=u.clone(),b[g]=_),u=_}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:y[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=o,u.farDistance=a),u}function P(n,i,o,a){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var s=t.update(n),u=n.material;if(Array.isArray(u))for(var c=s.groups,l=0,f=c.length;l<f;l++){var d=c[l],p=u[d.materialIndex];if(p&&p.visible){var m=A(n,p,a,h,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,d)}}else if(u.visible){m=A(n,u,a,h,o.near,o.far);e.renderBufferDirect(o,null,s,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)P(v[g],i,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,o){if(!1!==C.enabled&&(!1!==C.autoUpdate||!1!==C.needsUpdate)&&0!==t.length){var s,c=e.getRenderTarget(),f=e.getActiveCubeFace(),d=e.getActiveMipMapLevel(),p=e.state;p.setBlending(0),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var v=0,g=t.length;v<g;v++){var y=t[v],x=y.shadow,T=y&&y.isPointLight;if(void 0!==x){var S=x.camera;if(a.copy(x.mapSize),a.min(u),T){var E=a.x,M=a.y;w[0].set(2*E,M,E,M),w[1].set(0,M,E,M),w[2].set(3*E,M,E,M),w[3].set(E,M,E,M),w[4].set(3*E,0,E,M),w[5].set(E,0,E,M),a.x*=4,a.y*=2}if(null===x.map){var A={minFilter:1003,magFilter:1003,format:1023};x.map=new m(a.x,a.y,A),x.map.texture.name=y.name+".shadowMap",S.updateProjectionMatrix()}x.isSpotLightShadow&&x.update(y);var O=x.map,k=x.matrix;h.setFromMatrixPosition(y.matrixWorld),S.position.copy(h),T?(s=6,k.makeTranslation(-h.x,-h.y,-h.z)):(s=1,l.setFromMatrixPosition(y.target.matrixWorld),S.lookAt(l),S.updateMatrixWorld(),k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(S.projectionMatrix),k.multiply(S.matrixWorldInverse)),e.setRenderTarget(O),e.clear();for(var I=0;I<s;I++){if(T){l.copy(S.position),l.add(b[I]),S.up.copy(_[I]),S.lookAt(l),S.updateMatrixWorld();var R=w[I];p.viewport(R)}i.multiplyMatrices(S.projectionMatrix,S.matrixWorldInverse),r.setFromMatrix(i),P(n,o,S,T)}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}C.needsUpdate=!1,e.setRenderTarget(c,f,d)}}}function $t(e,t,n,r){var i=new function(){var t=!1,n=new p,r=null,i=new p(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?z(2929):V(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){var t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null;return{setTest:function(e){e?z(2960):V(2960)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&u===r||(e.stencilOp(t,n,r),a=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,c=null}}},u=e.getParameter(34921),c=new Uint8Array(u),l=new Uint8Array(u),h=new Uint8Array(u),f={},d=null,m=null,v=null,g=null,y=null,b=null,_=null,w=null,x=null,T=null,S=!1,E=null,M=null,C=null,A=null,P=null,O=e.getParameter(35661),k=!1,I=0,R=e.getParameter(7938);-1!==R.indexOf("WebGL")?(I=parseFloat(/^WebGL\ ([0-9])/.exec(R)[1]),k=I>=1):-1!==R.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(R)[1]),k=I>=2);var D=null,L={},N=new p,F=new p;function U(t,n,r){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<r;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var j={};function B(n,i){(c[n]=1,0===l[n]&&(e.enableVertexAttribArray(n),l[n]=1),h[n]!==i)&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),h[n]=i)}function z(t){!0!==f[t]&&(e.enable(t),f[t]=!0)}function V(t){!1!==f[t]&&(e.disable(t),f[t]=!1)}function W(t,r,i,o,a,s,u,c){if(0!==t){if(v||(z(3042),v=!0),5===t)a=a||r,s=s||i,u=u||o,r===y&&a===w||(e.blendEquationSeparate(n.convert(r),n.convert(a)),y=r,w=a),i===b&&o===_&&s===x&&u===T||(e.blendFuncSeparate(n.convert(i),n.convert(o),n.convert(s),n.convert(u)),b=i,_=o,x=s,T=u),g=t,S=null;else if(t!==g||c!==S){if(100===y&&100===w||(e.blendEquation(32774),y=100,w=100),c)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}b=null,_=null,x=null,T=null,g=t,S=c}}else v&&(V(3042),v=!1)}function G(t){E!==t&&(t?e.frontFace(2304):e.frontFace(2305),E=t)}function H(t){0!==t?(z(2884),t!==M&&(1===t?e.cullFace(1029):2===t?e.cullFace(1028):e.cullFace(1032))):V(2884),M=t}function q(t,n,r){t?(z(32823),A===n&&P===r||(e.polygonOffset(n,r),A=n,P=r)):V(32823)}function Y(t){void 0===t&&(t=33984+O-1),D!==t&&(e.activeTexture(t),D=t)}return j[3553]=U(3553,3553,1),j[34067]=U(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),s.setClear(0),z(2929),a.setFunc(3),G(!1),H(1),z(2884),W(0),{buffers:{color:i,depth:a,stencil:s},initAttributes:function(){for(var e=0,t=c.length;e<t;e++)c[e]=0},enableAttribute:function(e){B(e,0)},enableAttributeAndDivisor:B,disableUnusedAttributes:function(){for(var t=0,n=l.length;t!==n;++t)l[t]!==c[t]&&(e.disableVertexAttribArray(t),l[t]=0)},enable:z,disable:V,getCompressedTextureFormats:function(){if(null===d&&(d=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),r=0;r<n.length;r++)d.push(n[r]);return d},useProgram:function(t){return m!==t&&(e.useProgram(t),m=t,!0)},setBlending:W,setMaterial:function(e,t){e.side===o?V(2884):z(2884);var n=1===e.side;t&&(n=!n),G(n),1===e.blending&&!1===e.transparent?W(0):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),i.setMask(e.colorWrite),q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:G,setCullFace:H,setLineWidth:function(t){t!==C&&(k&&e.lineWidth(t),C=t)},setPolygonOffset:q,setScissorTest:function(e){e?z(3089):V(3089)},activeTexture:Y,bindTexture:function(t,n){null===D&&Y();var r=L[D];void 0===r&&(r={type:void 0,texture:void 0},L[D]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){for(var t=0;t<l.length;t++)1===l[t]&&(e.disableVertexAttribArray(t),l[t]=0);f={},d=null,D=null,L={},m=null,g=null,E=null,M=null,i.reset(),a.reset(),s.reset()}}}function en(e,t,n,r,i,o,s){var u,c={},l="undefined"!==typeof OffscreenCanvas;function h(e,t){return l?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function f(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?a.floorPowerOfTwo:Math.floor,s=o(i*e.width),c=o(i*e.height);void 0===u&&(u=h(s,c));var l=n?h(s,c):u;return l.width=s,l.height=c,l.getContext("2d").drawImage(e,0,0,s,c),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+c+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function d(e){return a.isPowerOfTwo(e.width)&&a.isPowerOfTwo(e.height)}function p(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function m(t,n,i,o){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function v(e,n){if(!i.isWebGL2)return e;var r=e;return 6403===e&&(5126===n&&(r=33326),5131===n&&(r=33325),5121===n&&(r=33321)),6407===e&&(5126===n&&(r=34837),5131===n&&(r=34843),5121===n&&(r=32849)),6408===e&&(5126===n&&(r=34836),5131===n&&(r=34842),5121===n&&(r=32856)),33325===r||33326===r||34842===r||34836===r?t.get("EXT_color_buffer_float"):34843!==r&&34837!==r||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),r}function g(e){return 1003===e||1004===e||1005===e?9728:9729}function y(t){var n=t.target;n.removeEventListener("dispose",y),function(t){var n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&delete c[n.id],s.memory.textures--}function b(t){var n=t.target;n.removeEventListener("dispose",b),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var o=0;o<6;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),s.memory.textures--}var _=0;function w(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=e.id,n=s.render.frame;c[t]!==n&&(c[t]=n,e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void M(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function x(t,a){var s=r.get(t);if(6===t.image.length)if(t.version>0&&s.__version!==t.version){E(s,t),n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture),e.pixelStorei(37440,t.flipY);for(var u=t&&t.isCompressedTexture,c=t.image[0]&&t.image[0].isDataTexture,l=[],h=0;h<6;h++)l[h]=u||c?c?t.image[h].image:t.image[h]:f(t.image[h],!1,!0,i.maxCubemapSize);var g=l[0],y=d(g)||i.isWebGL2,b=o.convert(t.format),_=o.convert(t.type),w=v(b,_);S(34067,t,y);for(h=0;h<6;h++)if(u)for(var x,T=l[h].mipmaps,M=0,C=T.length;M<C;M++)x=T[M],1023!==t.format&&1022!==t.format?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+h,M,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+h,M,w,x.width,x.height,0,b,_,x.data);else c?n.texImage2D(34069+h,0,w,l[h].width,l[h].height,0,b,_,l[h].data):n.texImage2D(34069+h,0,w,b,_,l[h]);s.__maxMipLevel=u?T.length-1:0,p(t,y)&&m(34067,t,g.width,g.height),s.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture)}function T(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)}function S(n,a,s){var u;if(s?(e.texParameteri(n,10242,o.convert(a.wrapS)),e.texParameteri(n,10243,o.convert(a.wrapT)),32879!==n&&35866!==n||e.texParameteri(n,32882,o.convert(a.wrapR)),e.texParameteri(n,10240,o.convert(a.magFilter)),e.texParameteri(n,10241,o.convert(a.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,g(a.magFilter)),e.texParameteri(n,10241,g(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),u=t.get("EXT_texture_filter_anisotropic")){if(1015===a.type&&null===t.get("OES_texture_float_linear"))return;if(1016===a.type&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function E(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",y),t.__webglTexture=e.createTexture(),s.memory.textures++)}function M(t,r,a){var s=3553;r.isDataTexture2DArray&&(s=35866),r.isDataTexture3D&&(s=32879),E(t,r),n.activeTexture(33984+a),n.bindTexture(s,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var u=function(e){return!i.isWebGL2&&(1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter)}(r)&&!1===d(r.image),c=f(r.image,u,!1,i.maxTextureSize),l=d(c)||i.isWebGL2,h=o.convert(r.format),g=o.convert(r.type),y=v(h,g);S(s,r,l);var b,_=r.mipmaps;if(r.isDepthTexture){if(y=6402,1015===r.type){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");y=36012}else i.isWebGL2&&(y=33189);1026===r.format&&6402===y&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,g=o.convert(r.type)),1027===r.format&&(y=34041,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,g=o.convert(r.type))),n.texImage2D(3553,0,y,c.width,c.height,0,h,g,null)}else if(r.isDataTexture)if(_.length>0&&l){for(var w=0,x=_.length;w<x;w++)b=_[w],n.texImage2D(3553,w,y,b.width,b.height,0,h,g,b.data);r.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,c.width,c.height,0,h,g,c.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(w=0,x=_.length;w<x;w++)b=_[w],1023!==r.format&&1022!==r.format?n.getCompressedTextureFormats().indexOf(h)>-1?n.compressedTexImage2D(3553,w,y,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,w,y,b.width,b.height,0,h,g,b.data);t.__maxMipLevel=_.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,y,c.width,c.height,c.depth,0,h,g,c.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,y,c.width,c.height,c.depth,0,h,g,c.data),t.__maxMipLevel=0;else if(_.length>0&&l){for(w=0,x=_.length;w<x;w++)b=_[w],n.texImage2D(3553,w,y,h,g,b);r.generateMipmaps=!1,t.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,y,h,g,c),t.__maxMipLevel=0;p(r,l)&&m(3553,r,c.width,c.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function C(t,i,a,s){var u=o.convert(i.texture.format),c=o.convert(i.texture.type),l=v(u,c);n.texImage2D(s,0,l,i.width,i.height,0,u,c,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function A(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){if(r){var i=O(n);e.renderbufferStorageMultisample(36161,i,33189,n.width,n.height)}else e.renderbufferStorage(36161,33189,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){i=O(n);e.renderbufferStorageMultisample(36161,i,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var a=v(o.convert(n.texture.format),o.convert(n.texture.type));if(r){i=O(n);e.renderbufferStorageMultisample(36161,i,a,n.width,n.height)}else e.renderbufferStorage(36161,a,n.width,n.height)}e.bindRenderbuffer(36161,null)}function P(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),w(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(1026===n.depthTexture.format)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(1027!==n.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),A(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),A(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function O(e){return i.isWebGL2&&e.isWebGLMultisampleRenderTarget?Math.min(i.maxSamples,e.samples):0}var k=!1,I=!1;this.allocateTextureUnit=function(){var e=_;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),_+=1,e},this.resetTextureUnits=function(){_=0},this.setTexture2D=w,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?M(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?M(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=x,this.setTextureCubeDynamic=T,this.setupRenderTarget=function(t){var a=r.get(t),u=r.get(t.texture);t.addEventListener("dispose",b),u.__webglTexture=e.createTexture(),s.memory.textures++;var c=!0===t.isWebGLRenderTargetCube,l=!0===t.isWebGLMultisampleRenderTarget,h=d(t)||i.isWebGL2;if(c){a.__webglFramebuffer=[];for(var f=0;f<6;f++)a.__webglFramebuffer[f]=e.createFramebuffer()}else if(a.__webglFramebuffer=e.createFramebuffer(),l)if(i.isWebGL2){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,a.__webglColorRenderbuffer);var g=v(o.convert(t.texture.format),o.convert(t.texture.type)),y=O(t);e.renderbufferStorageMultisample(36161,y,g,t.width,t.height),e.bindFramebuffer(36160,a.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,a.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),A(a.__webglDepthRenderbuffer,t,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,u.__webglTexture),S(34067,t.texture,h);for(f=0;f<6;f++)C(a.__webglFramebuffer[f],t,36064,34069+f);p(t.texture,h)&&m(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,u.__webglTexture),S(3553,t.texture,h),C(a.__webglFramebuffer,t,36064,3553),p(t.texture,h)&&m(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&P(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(p(t,d(e)||i.isWebGL2)){var o=e.isWebGLRenderTargetCube?34067:3553,a=r.get(t).__webglTexture;n.bindTexture(o,a),m(o,t,e.width,e.height),n.bindTexture(o,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(i.isWebGL2){var n=r.get(t);e.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,n.__webglFramebuffer);var o=t.width,a=t.height,s=16384;t.depthBuffer&&(s|=256),t.stencilBuffer&&(s|=1024),e.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===k&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),k=!0),e=e.texture),w(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLRenderTargetCube&&(!1===I&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),I=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?x(e,t):T(e,t)}}function tn(e,t,n){return{convert:function(e){var r;if(1e3===e)return 10497;if(1001===e)return 33071;if(1002===e)return 33648;if(1003===e)return 9728;if(1004===e)return 9984;if(1005===e)return 9986;if(1006===e)return 9729;if(1007===e)return 9985;if(1008===e)return 9987;if(1009===e)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(1012===e)return 5123;if(1013===e)return 5124;if(1014===e)return 5125;if(1015===e)return 5126;if(1016===e){if(n.isWebGL2)return 5131;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(1021===e)return 6406;if(1022===e)return 6407;if(1023===e)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(1026===e)return 6402;if(1027===e)return 34041;if(1028===e)return 6403;if(100===e)return 32774;if(101===e)return 32778;if(102===e)return 32779;if(200===e)return 0;if(201===e)return 1;if(202===e)return 768;if(203===e)return 769;if(204===e)return 770;if(205===e)return 771;if(206===e)return 772;if(207===e)return 773;if(208===e)return 774;if(209===e)return 775;if(210===e)return 776;if((33776===e||33777===e||33778===e||33779===e)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===e)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===e||35841===e||35842===e||35843===e)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===e)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return e;if(103===e||104===e){if(n.isWebGL2){if(103===e)return 32775;if(104===e)return 32776}if(null!==(r=t.get("EXT_blend_minmax"))){if(103===e)return r.MIN_EXT;if(104===e)return r.MAX_EXT}}if(1020===e){if(n.isWebGL2)return 34042;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function nn(){w.call(this),this.type="Group"}function rn(e){oe.call(this),this.cameras=e||[]}Qt.prototype=Object.create(D.prototype),Qt.prototype.constructor=Qt,Qt.prototype.isMeshDepthMaterial=!0,Qt.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Jt.prototype=Object.create(D.prototype),Jt.prototype.constructor=Jt,Jt.prototype.isMeshDistanceMaterial=!0,Jt.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},nn.prototype=Object.assign(Object.create(w.prototype),{constructor:nn,isGroup:!0}),rn.prototype=Object.assign(Object.create(oe.prototype),{constructor:rn,isArrayCamera:!0});var on,an=new c,sn=new c;function un(e,t,n){an.setFromMatrixPosition(t.matrixWorld),sn.setFromMatrixPosition(n.matrixWorld);var r=an.distanceTo(sn),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],c=(i[9]-1)/i[5],l=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*l,d=a*h,p=r/(-l+h),m=p*-l;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=a+p,g=s+p,y=f-m,b=d+(r-m),_=u*s/g*v,w=c*s/g*v;e.projectionMatrix.makePerspective(y,b,_,w,v,g)}function cn(e){var t,n,r=this,i=null,o=null,a=null,l=[],h=new g,f=new g,d=1,m="local-floor";"undefined"!==typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",M,!1));var v=new g,y=new u,b=new c,_=new oe;_.viewport=new p,_.layers.enable(1);var w=new oe;w.viewport=new p,w.layers.enable(2);var x=new rn([_,w]);function T(){return null!==i&&!0===i.isPresenting}x.layers.enable(1),x.layers.enable(2);var S,E=new s;function M(){if(T()){var o=i.getEyeParameters("left");t=2*o.renderWidth*d,n=o.renderHeight*d,S=e.getPixelRatio(),e.getSize(E),e.setDrawingBufferSize(t,n,1),_.viewport.set(0,0,t/2,n),w.viewport.set(t/2,0,t/2,n),O.start(),r.dispatchEvent({type:"sessionstart"})}else r.enabled&&e.setDrawingBufferSize(E.width,E.height,S),O.stop(),r.dispatchEvent({type:"sessionend"})}var C=[];function A(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var o=t[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("HTC Vive Focus")||o.id.startsWith("Spatial Controller"))){if(r===e)return o;r++}}}function P(e,r){null!==r&&4===r.length&&e.set(r[0]*t,r[1]*n,r[2]*t,r[3]*n)}this.enabled=!1,this.getController=function(e){var t=l[e];return void 0===t&&((t=new nn).matrixAutoUpdate=!1,t.visible=!1,l[e]=t),t},this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),O.setContext(e)},this.setFramebufferScaleFactor=function(e){d=e},this.setReferenceSpaceType=function(e){m=e},this.setPoseTarget=function(e){void 0!==e&&(a=e)},this.getCamera=function(e){var t="local-floor"===m?1.6:0;if(!1===T())return e.position.set(0,t,0),e.rotation.set(0,0,0),e;if(i.depthNear=e.near,i.depthFar=e.far,i.getFrameData(o),"local-floor"===m){var n=i.stageParameters;n?h.fromArray(n.sittingToStandingTransform):h.makeTranslation(0,t,0)}var r=o.pose,s=null!==a?a:e;s.matrix.copy(h),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==r.orientation&&(y.fromArray(r.orientation),s.quaternion.multiply(y)),null!==r.position&&(y.setFromRotationMatrix(h),b.fromArray(r.position),b.applyQuaternion(y),s.position.add(b)),s.updateMatrixWorld(),_.near=e.near,w.near=e.near,_.far=e.far,w.far=e.far,_.matrixWorldInverse.fromArray(o.leftViewMatrix),w.matrixWorldInverse.fromArray(o.rightViewMatrix),f.getInverse(h),"local-floor"===m&&(_.matrixWorldInverse.multiply(f),w.matrixWorldInverse.multiply(f));var u=s.parent;null!==u&&(v.getInverse(u.matrixWorld),_.matrixWorldInverse.multiply(v),w.matrixWorldInverse.multiply(v)),_.matrixWorld.getInverse(_.matrixWorldInverse),w.matrixWorld.getInverse(w.matrixWorldInverse),_.projectionMatrix.fromArray(o.leftProjectionMatrix),w.projectionMatrix.fromArray(o.rightProjectionMatrix),un(x,_,w);var c=i.getLayers();if(c.length){var d=c[0];P(_.viewport,d.leftBounds),P(w.viewport,d.rightBounds)}return function(){for(var e=0;e<l.length;e++){var t=l[e],n=A(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(h),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;void 0===C[e]&&(C[e]=!1),C[e]!==n.buttons[i].pressed&&(C[e]=n.buttons[i].pressed,!0===C[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),x},this.getStandingMatrix=function(){return h},this.isPresenting=T;var O=new pe;this.setAnimationLoop=function(e){O.setAnimationLoop(e),T()&&O.start()},this.submitFrame=function(){T()&&i.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",M)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function ln(e){var t=this,n=e.context,r=null,i=null,o="local-floor",a=null,s=[],u=[];function c(){return null!==r&&null!==i}var l=new oe;l.layers.enable(1),l.viewport=new p;var h=new oe;h.layers.enable(2),h.viewport=new p;var f=new rn([l,h]);function d(e){for(var t=0;t<s.length;t++)u[t]===e.inputSource&&s[t].dispatchEvent({type:e.type})}function m(){e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),_.stop(),t.dispatchEvent({type:"sessionend"})}function v(e){i=e,_.setContext(r),_.start(),t.dispatchEvent({type:"sessionstart"})}function y(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}f.layers.enable(1),f.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=s[e];return void 0===t&&((t=new nn).matrixAutoUpdate=!1,t.visible=!1,s[e]=t),t},this.setFramebufferScaleFactor=function(e){},this.setReferenceSpaceType=function(e){o=e},this.getSession=function(){return r},this.setSession=function(e){null!==(r=e)&&(r.addEventListener("select",d),r.addEventListener("selectstart",d),r.addEventListener("selectend",d),r.addEventListener("end",m),r.updateRenderState({baseLayer:new XRWebGLLayer(r,n)}),r.requestReferenceSpace(o).then(v),u=r.inputSources,r.addEventListener("inputsourceschange",(function(){u=r.inputSources,console.log(u);for(var e=0;e<s.length;e++){s[e].userData.inputSource=u[e]}})))},this.getCamera=function(e){if(c()){var t=e.parent,n=f.cameras;y(f,t);for(var r=0;r<n.length;r++)y(n[r],t);e.matrixWorld.copy(f.matrixWorld);for(var i=e.children,o=(r=0,i.length);r<o;r++)i[r].updateMatrixWorld(!0);return un(f,l,h),f}return e},this.isPresenting=c;var b=null;var _=new pe;_.setAnimationLoop((function(t,n){if(null!==(a=n.getViewerPose(i))){var o=a.views,c=r.renderState.baseLayer;e.setFramebuffer(c.framebuffer);for(var l=0;l<o.length;l++){var h=o[l],d=c.getViewport(h),p=h.transform.inverse.matrix,m=f.cameras[l];m.matrix.fromArray(p).getInverse(m.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===l&&f.matrix.copy(m.matrix)}}for(l=0;l<s.length;l++){var v=s[l],g=u[l];if(g){var y=n.getPose(g.targetRaySpace,i);if(null!==y){v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.visible=!0;continue}}v.visible=!1}b&&b(t)})),this.setAnimationLoop=function(e){b=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new g},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function hn(e){console.log("THREE.WebGLRenderer","106");var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,u=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,h=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,f=void 0!==e.powerPreference?e.powerPreference:"default",d=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,m=null,v=null;this.domElement=t,this.context=null,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var y,b,_,w,x,T,S,E,M,C,A,P,O,k,I,R,D,L,N=this,F=!1,U=null,j=0,B=0,z=null,V=null,W=-1,G={geometry:null,program:null,wireframe:!1},H=null,q=null,Y=new p,K=new p,X=null,Q=t.width,J=t.height,Z=1,$=new p(0,0,Q,J),ee=new p(0,0,Q,J),ne=!1,re=new le,ie=new we,oe=!1,ae=!1,se=new g,ce=new c;function he(){return null===z?Z:1}try{var ve={alpha:r,depth:i,stencil:o,antialias:u,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:f,failIfMajorPerformanceCaveat:d,xrCompatible:!0};if(t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",ke,!1),null===(y=n||t.getContext("webgl",ve)||t.getContext("experimental-webgl",ve)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===y.getShaderPrecisionFormat&&(y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ge){throw console.error("THREE.WebGLRenderer: "+Ge.message),Ge}function ge(){b=new xe(y),(_=new _e(y,b,e)).isWebGL2||(b.get("WEBGL_depth_texture"),b.get("OES_texture_float"),b.get("OES_texture_half_float"),b.get("OES_texture_half_float_linear"),b.get("OES_standard_derivatives"),b.get("OES_element_index_uint"),b.get("ANGLE_instanced_arrays")),b.get("OES_texture_float_linear"),L=new tn(y,b,_),(w=new $t(y,b,L,_)).scissor(K.copy(ee).multiplyScalar(Z).floor()),w.viewport(Y.copy($).multiplyScalar(Z).floor()),x=new Ee(y),T=new Bt,S=new en(y,b,w,T,_,L,x),E=new me(y),M=new Te(y,E,x),C=new Ae(M,x),I=new Ce(y),A=new jt(N,b,_),P=new Gt,O=new Xt,k=new ye(N,w,C,l),R=new be(y,b,x,_),D=new Se(y,b,x,_),x.programs=A.programs,N.context=y,N.capabilities=_,N.extensions=b,N.properties=T,N.renderLists=P,N.state=w,N.info=x}ge();var Me="undefined"!==typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new ln(N):new cn(N);this.vr=Me;var Pe=new Zt(N,C,_.maxTextureSize);function Oe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),F=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),F=!1,ge()}function Ie(e){var t=e.target;t.removeEventListener("dispose",Ie),function(e){Re(e),T.remove(e)}(t)}function Re(e){var t=T.get(e).program;e.program=void 0,void 0!==t&&A.releaseProgram(t)}this.shadowMap=Pe,this.getContext=function(){return y},this.getContextAttributes=function(){return y.getContextAttributes()},this.forceContextLoss=function(){var e=b.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=b.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Z},this.setPixelRatio=function(e){void 0!==e&&(Z=e,this.setSize(Q,J,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new s),e.set(Q,J)},this.setSize=function(e,n,r){Me.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Q=e,J=n,t.width=Math.floor(e*Z),t.height=Math.floor(n*Z),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new s),e.set(Q*Z,J*Z).floor()},this.setDrawingBufferSize=function(e,n,r){Q=e,J=n,Z=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new p),e.copy(Y)},this.getViewport=function(e){return e.copy($)},this.setViewport=function(e,t,n,r){e.isVector4?$.set(e.x,e.y,e.z,e.w):$.set(e,t,n,r),w.viewport(Y.copy($).multiplyScalar(Z).floor())},this.getScissor=function(e){return e.copy(ee)},this.setScissor=function(e,t,n,r){e.isVector4?ee.set(e.x,e.y,e.z,e.w):ee.set(e,t,n,r),w.scissor(K.copy(ee).multiplyScalar(Z).floor())},this.getScissorTest=function(){return ne},this.setScissorTest=function(e){w.setScissorTest(ne=e)},this.getClearColor=function(){return k.getClearColor()},this.setClearColor=function(){k.setClearColor.apply(k,arguments)},this.getClearAlpha=function(){return k.getClearAlpha()},this.setClearAlpha=function(){k.setClearAlpha.apply(k,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),y.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",ke,!1),P.dispose(),O.dispose(),T.dispose(),C.dispose(),Me.dispose(),Le.stop()},this.renderBufferImmediate=function(e,t){w.initAttributes();var n=T.get(e);e.hasPositions&&!n.position&&(n.position=y.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=y.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=y.createBuffer()),e.hasColors&&!n.color&&(n.color=y.createBuffer());var r=t.getAttributes();e.hasPositions&&(y.bindBuffer(34962,n.position),y.bufferData(34962,e.positionArray,35048),w.enableAttribute(r.position),y.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(y.bindBuffer(34962,n.normal),y.bufferData(34962,e.normalArray,35048),w.enableAttribute(r.normal),y.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(y.bindBuffer(34962,n.uv),y.bufferData(34962,e.uvArray,35048),w.enableAttribute(r.uv),y.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(y.bindBuffer(34962,n.color),y.bufferData(34962,e.colorArray,35048),w.enableAttribute(r.color),y.vertexAttribPointer(r.color,3,5126,!1,0,0)),w.disableUnusedAttributes(),y.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,o){var a=i.isMesh&&i.matrixWorld.determinant()<0;w.setMaterial(r,a);var s=Be(e,t,r,i),u=!1;G.geometry===n.id&&G.program===s.id&&G.wireframe===(!0===r.wireframe)||(G.geometry=n.id,G.program=s.id,G.wireframe=!0===r.wireframe,u=!0),i.morphTargetInfluences&&(I.update(i,n,r,s),u=!0);var c,l=n.index,h=n.attributes.position,f=1;!0===r.wireframe&&(l=M.getWireframeAttribute(n),f=2);var d=R;null!==l&&(c=E.get(l),(d=D).setIndex(c)),u&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&&!_.isWebGL2&&null===b.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");w.initAttributes();var r=n.attributes,i=t.getAttributes(),o=e.defaultAttributeValues;for(var a in i){var s=i[a];if(s>=0){var u=r[a];if(void 0!==u){var c=u.normalized,l=u.itemSize,h=E.get(u);if(void 0===h)continue;var f=h.buffer,d=h.type,p=h.bytesPerElement;if(u.isInterleavedBufferAttribute){var m=u.data,v=m.stride,g=u.offset;m&&m.isInstancedInterleavedBuffer?(w.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):w.enableAttribute(s),y.bindBuffer(34962,f),y.vertexAttribPointer(s,l,d,c,v*p,g*p)}else u.isInstancedBufferAttribute?(w.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):w.enableAttribute(s),y.bindBuffer(34962,f),y.vertexAttribPointer(s,l,d,c,0,0)}else if(void 0!==o){var x=o[a];if(void 0!==x)switch(x.length){case 2:y.vertexAttrib2fv(s,x);break;case 3:y.vertexAttrib3fv(s,x);break;case 4:y.vertexAttrib4fv(s,x);break;default:y.vertexAttrib1fv(s,x)}}}}w.disableUnusedAttributes()}(r,s,n),null!==l&&y.bindBuffer(34963,c.buffer));var p=1/0;null!==l?p=l.count:void 0!==h&&(p=h.count);var m=n.drawRange.start*f,v=n.drawRange.count*f,g=null!==o?o.start*f:0,x=null!==o?o.count*f:1/0,T=Math.max(m,g),S=Math.min(p,m+v,g+x)-1,C=Math.max(0,S-T+1);if(0!==C){if(i.isMesh)if(!0===r.wireframe)w.setLineWidth(r.wireframeLinewidth*he()),d.setMode(1);else switch(i.drawMode){case 0:d.setMode(4);break;case 1:d.setMode(5);break;case 2:d.setMode(6)}else if(i.isLine){var A=r.linewidth;void 0===A&&(A=1),w.setLineWidth(A*he()),i.isLineSegments?d.setMode(1):i.isLineLoop?d.setMode(2):d.setMode(3)}else i.isPoints?d.setMode(0):i.isSprite&&d.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&d.renderInstances(n,T,C):d.render(T,C)}},this.compile=function(e,t){(v=O.get(e,t)).init(),e.traverse((function(e){e.isLight&&(v.pushLight(e),e.castShadow&&v.pushShadow(e))})),v.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)je(t.material[n],e.fog,t);else je(t.material,e.fog,t)}))};var De=null;var Le=new pe;function Ne(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)v.pushLight(e),e.castShadow&&v.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||re.intersectsSprite(e)){r&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(se);var i=C.update(e);(o=e.material).visible&&m.push(e,i,o,n,ce.z,null)}}else if(e.isImmediateRenderObject)r&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(se),m.push(e,null,e.material,n,ce.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||re.intersectsObject(e))){r&&ce.setFromMatrixPosition(e.matrixWorld).applyMatrix4(se);i=C.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var c=a[s],l=o[c.materialIndex];l&&l.visible&&m.push(e,i,l,n,ce.z,c)}else o.visible&&m.push(e,i,o,n,ce.z,null)}var h=e.children;for(s=0,u=h.length;s<u;s++)Ne(h[s],t,n,r)}}function Fe(e,t,n,r){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,u=a.geometry,c=void 0===r?a.material:r,l=a.group;if(n.isArrayCamera){q=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var p=h[f];s.layers.test(p.layers)&&(w.viewport(Y.copy(p.viewport)),v.setupLights(p),Ue(s,t,p,u,c,l))}}else q=null,Ue(s,t,n,u,c,l)}}function Ue(e,t,n,r,i,o){if(e.onBeforeRender(N,t,n,r,i,o),v=O.get(t,q||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){w.setMaterial(i);var a=Be(n,t.fog,i,e);G.geometry=null,G.program=null,G.wireframe=!1,function(e,t){e.render((function(e){N.renderBufferImmediate(e,t)}))}(e,a)}else N.renderBufferDirect(n,t.fog,r,i,e,o);e.onAfterRender(N,t,n,r,i,o),v=O.get(t,q||n)}function je(e,t,n){var r=T.get(e),i=v.state.lights,o=v.state.shadowsArray,a=i.state.version,s=A.getParameters(e,i.state,o,t,ie.numPlanes,ie.numIntersection,n),u=A.getProgramCode(e,s),c=r.program,l=!0;if(void 0===c)e.addEventListener("dispose",Ie);else if(c.code!==u)Re(e);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,l=!1;else{if(void 0!==s.shaderID)return;l=!1}if(l){if(s.shaderID){var h=de[s.shaderID];r.shader={name:e.type,uniforms:te(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,N),u=A.getProgramCode(e,s),c=A.acquireProgram(e,r.shader,s,u),r.program=c,e.program=c}var f=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var d=0;d<N.maxMorphTargets;d++)f["morphTarget"+d]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(d=0;d<N.maxMorphNormals;d++)f["morphNormal"+d]>=0&&e.numSupportedMorphNormals++}var p=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ie.numPlanes,r.numIntersection=ie.numIntersection,p.clippingPlanes=ie.uniform),r.fog=t,r.lightsStateVersion=a,e.lights&&(p.ambientLightColor.value=i.state.ambient,p.lightProbe.value=i.state.probe,p.directionalLights.value=i.state.directional,p.spotLights.value=i.state.spot,p.rectAreaLights.value=i.state.rectArea,p.pointLights.value=i.state.point,p.hemisphereLights.value=i.state.hemi,p.directionalShadowMap.value=i.state.directionalShadowMap,p.directionalShadowMatrix.value=i.state.directionalShadowMatrix,p.spotShadowMap.value=i.state.spotShadowMap,p.spotShadowMatrix.value=i.state.spotShadowMatrix,p.pointShadowMap.value=i.state.pointShadowMap,p.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),g=Et.seqWithValue(m.seq,p);r.uniformsList=g}function Be(e,t,n,r){S.resetTextureUnits();var i=T.get(n),o=v.state.lights;if(oe&&(ae||e!==H)){var s=e===H&&n.id===W;ie.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,s)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsStateVersion!==o.state.version?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===ie.numPlanes&&i.numIntersection===ie.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(je(n,t,r),n.needsUpdate=!1);var u,c,l=!1,h=!1,f=!1,d=i.program,p=d.getUniforms(),m=i.shader.uniforms;if(w.useProgram(d.program)&&(l=!0,h=!0,f=!0),n.id!==W&&(W=n.id,h=!0),l||H!==e){if(p.setValue(y,"projectionMatrix",e.projectionMatrix),_.logarithmicDepthBuffer&&p.setValue(y,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),H!==e&&(H=e,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var g=p.map.cameraPosition;void 0!==g&&g.setValue(y,ce.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&p.setValue(y,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){p.setOptional(y,r,"bindMatrix"),p.setOptional(y,r,"bindMatrixInverse");var b=r.skeleton;if(b){var x=b.bones;if(_.floatVertexTextures){if(void 0===b.boneTexture){var E=Math.sqrt(4*x.length);E=a.ceilPowerOfTwo(E),E=Math.max(E,4);var M=new Float32Array(E*E*4);M.set(b.boneMatrices);var C=new ue(M,E,E,1023,1015);C.needsUpdate=!0,b.boneMatrices=M,b.boneTexture=C,b.boneTextureSize=E}p.setValue(y,"boneTexture",b.boneTexture,S),p.setValue(y,"boneTextureSize",b.boneTextureSize)}else p.setOptional(y,b,"boneMatrices")}}return h&&(p.setValue(y,"toneMappingExposure",N.toneMappingExposure),p.setValue(y,"toneMappingWhitePoint",N.toneMappingWhitePoint),n.lights&&(c=f,(u=m).ambientLightColor.needsUpdate=c,u.lightProbe.needsUpdate=c,u.directionalLights.needsUpdate=c,u.pointLights.needsUpdate=c,u.spotLights.needsUpdate=c,u.rectAreaLights.needsUpdate=c,u.hemisphereLights.needsUpdate=c),t&&n.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(m,t),n.isMeshBasicMaterial?ze(m,n):n.isMeshLambertMaterial?(ze(m,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(m,n)):n.isMeshPhongMaterial?(ze(m,n),n.isMeshToonMaterial?function(e,t){Ve(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(m,n):Ve(m,n)):n.isMeshStandardMaterial?(ze(m,n),n.isMeshPhysicalMaterial?function(e,t){We(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(m,n):We(m,n)):n.isMeshMatcapMaterial?(ze(m,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(m,n)):n.isMeshDepthMaterial?(ze(m,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(m,n)):n.isMeshDistanceMaterial?(ze(m,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(m,n)):n.isMeshNormalMaterial?(ze(m,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(m,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(m,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(m,n)):n.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Z,e.scale.value=.5*J,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(m,n):n.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(m,n):n.isShadowMaterial&&(m.color.value.copy(n.color),m.opacity.value=n.opacity),void 0!==m.ltc_1&&(m.ltc_1.value=fe.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=fe.LTC_2),Et.upload(y,i.uniformsList,m,S)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Et.upload(y,i.uniformsList,m,S),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&p.setValue(y,"center",r.center),p.setValue(y,"modelViewMatrix",r.modelViewMatrix),p.setValue(y,"normalMatrix",r.normalMatrix),p.setValue(y,"modelMatrix",r.matrixWorld),d}function ze(e,t){var n;e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=T.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Ve(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function We(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}Le.setAnimationLoop((function(e){Me.isPresenting()||De&&De(e)})),"undefined"!==typeof window&&Le.setContext(window),this.setAnimationLoop=function(e){De=e,Me.setAnimationLoop(e),Le.start()},this.render=function(e,t){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),t&&t.isCamera){if(!F){G.geometry=null,G.program=null,G.wireframe=!1,W=-1,H=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Me.enabled&&(t=Me.getCamera(t)),(v=O.get(e,t)).init(),e.onBeforeRender(N,e,t,n||z),se.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),re.setFromMatrix(se),ae=this.localClippingEnabled,oe=ie.init(this.clippingPlanes,ae,t),(m=P.get(e,t)).init(),Ne(e,t,0,N.sortObjects),!0===N.sortObjects&&m.sort(),oe&&ie.beginShadows();var i=v.state.shadowsArray;Pe.render(i,e,t),v.setupLights(t),oe&&ie.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),k.render(m,e,t,r);var o=m.opaque,a=m.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&Fe(o,e,t,s),a.length&&Fe(a,e,t,s)}else o.length&&Fe(o,e,t),a.length&&Fe(a,e,t);e.onAfterRender(N,e,t),null!==z&&(S.updateRenderTargetMipmap(z),S.updateMultisampleRenderTarget(z)),w.buffers.depth.setTest(!0),w.buffers.depth.setMask(!0),w.buffers.color.setMask(!0),w.setPolygonOffset(!1),Me.enabled&&Me.submitFrame(),m=null,v=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){U!==e&&y.bindFramebuffer(36160,e),U=e},this.getActiveCubeFace=function(){return j},this.getActiveMipMapLevel=function(){return B},this.getRenderTarget=function(){return z},this.setRenderTarget=function(e,t,n){z=e,j=t,B=n,e&&void 0===T.get(e).__webglFramebuffer&&S.setupRenderTarget(e);var r=U,i=!1;if(e){var o=T.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(r=o[t||0],i=!0):r=e.isWebGLMultisampleRenderTarget?T.get(e).__webglMultisampledFramebuffer:o,Y.copy(e.viewport),K.copy(e.scissor),X=e.scissorTest}else Y.copy($).multiplyScalar(Z).floor(),K.copy(ee).multiplyScalar(Z).floor(),X=ne;if(V!==r&&(y.bindFramebuffer(36160,r),V=r),w.viewport(Y),w.scissor(K),w.setScissorTest(X),i){var a=T.get(e.texture);y.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(e&&e.isWebGLRenderTarget){var s=T.get(e).__webglFramebuffer;if(e.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var u=!1;s!==V&&(y.bindFramebuffer(36160,s),u=!0);try{var c=e.texture,l=c.format,h=c.type;if(1023!==l&&L.convert(l)!==y.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(1009!==h&&L.convert(h)!==y.getParameter(35738)&&(1015!==h||!(_.isWebGL2||b.get("OES_texture_float")||b.get("WEBGL_color_buffer_float")))&&(1016!==h||(_.isWebGL2?!b.get("EXT_color_buffer_float"):!b.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===y.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&y.readPixels(t,n,r,i,L.convert(l),L.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&y.bindFramebuffer(36160,V)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,o=L.convert(t.format);S.setTexture2D(t,0),y.copyTexImage2D(3553,n||0,o,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,o=t.image.height,a=L.convert(n.format),s=L.convert(n.type);S.setTexture2D(n,0),t.isDataTexture?y.texSubImage2D(3553,r||0,e.x,e.y,i,o,a,s,t.image.data):y.texSubImage2D(3553,r||0,e.x,e.y,a,s,t.image)},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function fn(e,t){this.name="",this.color=new A(e),this.density=void 0!==t?t:25e-5}function dn(e,t,n){this.name="",this.color=new A(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function pn(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function mn(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function vn(e){D.call(this),this.type="SpriteMaterial",this.color=new A(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function gn(e){if(w.call(this),this.type="Sprite",void 0===on){on=new X;var t=new pn(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);on.setIndex([0,1,2,0,2,3]),on.addAttribute("position",new mn(t,3,0,!1)),on.addAttribute("uv",new mn(t,2,3,!1))}this.geometry=on,this.material=void 0!==e?e:new vn,this.center=new s(.5,.5)}function yn(){w.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function bn(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Q.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new g,this.bindMatrixInverse=new g}function _n(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new g)}}function wn(){w.call(this),this.type="Bone"}function xn(e){D.call(this),this.type="LineBasicMaterial",this.color=new A(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Tn(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),w.call(this),this.type="Line",this.geometry=void 0!==e?e:new X,this.material=void 0!==t?t:new xn({color:16777215*Math.random()})}function Sn(e,t){Tn.call(this,e,t),this.type="LineSegments"}function En(e,t){Tn.call(this,e,t),this.type="LineLoop"}function Mn(e){D.call(this),this.type="PointsMaterial",this.color=new A(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Cn(e,t){w.call(this),this.type="Points",this.geometry=void 0!==e?e:new X,this.material=void 0!==t?t:new Mn({color:16777215*Math.random()}),this.updateMorphTargets()}function An(e,t,n,r,i,o,a,s,u){d.call(this,e,t,n,r,i,o,a,s,u),this.format=void 0!==a?a:1022,this.minFilter=void 0!==o?o:1006,this.magFilter=void 0!==i?i:1006,this.generateMipmaps=!1}function Pn(e,t,n,r,i,o,a,s,u,c,l,h){d.call(this,null,o,a,s,u,c,r,i,l,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function On(e,t,n,r,i,o,a,s,u){d.call(this,e,t,n,r,i,o,a,s,u),this.needsUpdate=!0}function kn(e,t,n,r,i,o,a,s,u,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),d.call(this,null,r,i,o,a,s,c,n,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==s?s:1003,this.flipY=!1,this.generateMipmaps=!1}function In(e){X.call(this),this.type="WireframeGeometry";var t,n,r,i,o,a,s,u,l,h,f=[],d=[0,0],p={},m=["a","b","c"];if(e&&e.isGeometry){var v=e.faces;for(t=0,r=v.length;t<r;t++){var g=v[t];for(n=0;n<3;n++)s=g[m[n]],u=g[m[(n+1)%3]],d[0]=Math.min(s,u),d[1]=Math.max(s,u),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)a=p[l],h=e.vertices[a.index1],f.push(h.x,h.y,h.z),h=e.vertices[a.index2],f.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,b,_,w,x,T,S;if(h=new c,null!==e.index){for(y=e.attributes.position,b=e.index,0===(_=e.groups).length&&(_=[{start:0,count:b.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(t=x=(w=_[i]).start,r=x+w.count;t<r;t+=3)for(n=0;n<3;n++)s=b.getX(t+n),u=b.getX(t+(n+1)%3),d[0]=Math.min(s,u),d[1]=Math.max(s,u),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)a=p[l],h.fromBufferAttribute(y,a.index1),f.push(h.x,h.y,h.z),h.fromBufferAttribute(y,a.index2),f.push(h.x,h.y,h.z)}else for(t=0,r=(y=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)T=3*t+n,h.fromBufferAttribute(y,T),f.push(h.x,h.y,h.z),S=3*t+(n+1)%3,h.fromBufferAttribute(y,S),f.push(h.x,h.y,h.z)}this.addAttribute("position",new G(f,3))}function Rn(e,t,n){Z.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Dn(e,t,n)),this.mergeVertices()}function Dn(e,t,n){X.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,o=[],a=[],s=[],u=[],l=new c,h=new c,f=new c,d=new c,p=new c;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=t+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=t;i++){var g=i/t;e(g,v,h),a.push(h.x,h.y,h.z),g-1e-5>=0?(e(g-1e-5,v,f),d.subVectors(h,f)):(e(g+1e-5,v,f),d.subVectors(f,h)),v-1e-5>=0?(e(g,v-1e-5,f),p.subVectors(h,f)):(e(g,v+1e-5,f),p.subVectors(f,h)),l.crossVectors(d,p).normalize(),s.push(l.x,l.y,l.z),u.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var y=r*m+i,b=r*m+i+1,_=(r+1)*m+i+1,w=(r+1)*m+i;o.push(y,b,w),o.push(b,_,w)}this.setIndex(o),this.addAttribute("position",new G(a,3)),this.addAttribute("normal",new G(s,3)),this.addAttribute("uv",new G(u,2))}function Ln(e,t,n,r){Z.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new Nn(e,t,n,r)),this.mergeVertices()}function Nn(e,t,n,r){X.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],o=[];function a(e,t,n,r){var i,o,a=Math.pow(2,r),s=[];for(i=0;i<=a;i++){s[i]=[];var c=e.clone().lerp(n,i/a),l=t.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)s[i][o]=0===o&&i===a?c:c.clone().lerp(l,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2===0?(u(s[i][f+1]),u(s[i+1][f]),u(s[i][f])):(u(s[i][f+1]),u(s[i+1][f+1]),u(s[i+1][f]))}}function u(e){i.push(e.x,e.y,e.z)}function l(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function h(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function f(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new c,r=new c,i=new c,o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r=r||0),function(e){for(var t=new c,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new c,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=f(e)/2/Math.PI+.5,r=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(n,1-r)}var a;(function(){for(var e=new c,t=new c,n=new c,r=new c,a=new s,u=new s,l=new s,d=0,p=0;d<i.length;d+=9,p+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),a.set(o[p+0],o[p+1]),u.set(o[p+2],o[p+3]),l.set(o[p+4],o[p+5]),r.copy(e).add(t).add(n).divideScalar(3);var m=f(r);h(a,p+0,e,m),h(u,p+2,t,m),h(l,p+4,n,m)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.addAttribute("position",new G(i,3)),this.addAttribute("normal",new G(i.slice(),3)),this.addAttribute("uv",new G(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Fn(e,t){Z.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Un(e,t)),this.mergeVertices()}function Un(e,t){Nn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function jn(e,t){Z.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Bn(e,t)),this.mergeVertices()}function Bn(e,t){Nn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function zn(e,t){Z.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vn(e,t)),this.mergeVertices()}function Vn(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Nn.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wn(e,t){Z.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Gn(e,t)),this.mergeVertices()}function Gn(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Nn.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Hn(e,t,n,r,i,o){Z.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new qn(e,t,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function qn(e,t,n,r,i){X.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,u,l=new c,h=new c,f=new s,d=new c,p=[],m=[],v=[],g=[];function y(i){d=e.getPointAt(i/t,d);var a=o.normals[i],s=o.binormals[i];for(u=0;u<=r;u++){var c=u/r*Math.PI*2,f=Math.sin(c),v=-Math.cos(c);h.x=v*a.x+f*s.x,h.y=v*a.y+f*s.y,h.z=v*a.z+f*s.z,h.normalize(),m.push(h.x,h.y,h.z),l.x=d.x+n*h.x,l.y=d.y+n*h.y,l.z=d.z+n*h.z,p.push(l.x,l.y,l.z)}}!function(){for(a=0;a<t;a++)y(a);y(!1===i?t:0),function(){for(a=0;a<=t;a++)for(u=0;u<=r;u++)f.x=a/t,f.y=u/r,v.push(f.x,f.y)}(),function(){for(u=1;u<=t;u++)for(a=1;a<=r;a++){var e=(r+1)*(u-1)+(a-1),n=(r+1)*u+(a-1),i=(r+1)*u+a,o=(r+1)*(u-1)+a;g.push(e,n,o),g.push(n,i,o)}}()}(),this.setIndex(g),this.addAttribute("position",new G(p,3)),this.addAttribute("normal",new G(m,3)),this.addAttribute("uv",new G(v,2))}function Yn(e,t,n,r,i,o,a){Z.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Kn(e,t,n,r,i,o)),this.mergeVertices()}function Kn(e,t,n,r,i,o){X.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],h=[],f=[],d=new c,p=new c,m=new c,v=new c,g=new c,y=new c,b=new c;for(a=0;a<=n;++a){var _=a/n*i*Math.PI*2;for(A(_,i,o,e,m),A(_+.01,i,o,e,v),y.subVectors(v,m),b.addVectors(v,m),g.crossVectors(y,b),b.crossVectors(g,y),g.normalize(),b.normalize(),s=0;s<=r;++s){var w=s/r*Math.PI*2,x=-t*Math.cos(w),T=t*Math.sin(w);d.x=m.x+(x*b.x+T*g.x),d.y=m.y+(x*b.y+T*g.y),d.z=m.z+(x*b.z+T*g.z),l.push(d.x,d.y,d.z),p.subVectors(d,m).normalize(),h.push(p.x,p.y,p.z),f.push(a/n),f.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var S=(r+1)*(s-1)+(a-1),E=(r+1)*s+(a-1),M=(r+1)*s+a,C=(r+1)*(s-1)+a;u.push(S,E,C),u.push(E,M,C)}function A(e,t,n,r,i){var o=Math.cos(e),a=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new G(l,3)),this.addAttribute("normal",new G(h,3)),this.addAttribute("uv",new G(f,2))}function Xn(e,t,n,r,i){Z.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Qn(e,t,n,r,i)),this.mergeVertices()}function Qn(e,t,n,r,i){X.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],h=[],f=new c,d=new c,p=new c;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var m=a/r*i,v=o/n*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(m),d.y=(e+t*Math.cos(v))*Math.sin(m),d.z=t*Math.sin(v),u.push(d.x,d.y,d.z),f.x=e*Math.cos(m),f.y=e*Math.sin(m),p.subVectors(d,f).normalize(),l.push(p.x,p.y,p.z),h.push(a/r),h.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var g=(r+1)*o+a-1,y=(r+1)*(o-1)+a-1,b=(r+1)*(o-1)+a,_=(r+1)*o+a;s.push(g,y,_),s.push(y,b,_)}this.setIndex(s),this.addAttribute("position",new G(u,3)),this.addAttribute("normal",new G(l,3)),this.addAttribute("uv",new G(h,2))}Object.assign(cn.prototype,r.prototype),Object.assign(ln.prototype,r.prototype),Object.assign(fn.prototype,{isFogExp2:!0,clone:function(){return new fn(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(dn.prototype,{isFog:!0,clone:function(){return new dn(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(pn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(pn.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(mn.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(mn.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),vn.prototype=Object.create(D.prototype),vn.prototype.constructor=vn,vn.prototype.isSpriteMaterial=!0,vn.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},gn.prototype=Object.assign(Object.create(w.prototype),{constructor:gn,isSprite:!0,raycast:function(){var e=new c,t=new c,n=new c,r=new s,i=new s,o=new g,a=new c,u=new c,l=new c,h=new s,f=new s,d=new s;function p(e,t,n,a,s,u){r.subVectors(e,n).addScalar(.5).multiply(a),void 0!==s?(i.x=u*r.x-s*r.y,i.y=s*r.x+u*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(o)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),o.copy(r._camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(r._camera.matrixWorldInverse,this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix),r._camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&t.multiplyScalar(-n.z);var c,m,v=this.material.rotation;0!==v&&(m=Math.cos(v),c=Math.sin(v));var g=this.center;p(a.set(-.5,-.5,0),n,g,t,c,m),p(u.set(.5,-.5,0),n,g,t,c,m),p(l.set(.5,.5,0),n,g,t,c,m),h.set(0,0),f.set(1,0),d.set(1,1);var y=r.ray.intersectTriangle(a,u,l,!1,e);if(null!==y||(p(u.set(-.5,.5,0),n,g,t,c,m),f.set(0,1),null!==(y=r.ray.intersectTriangle(a,l,u,!1,e)))){var b=r.ray.origin.distanceTo(e);b<r.near||b>r.far||i.push({distance:b,point:e.clone(),uv:M.getUV(e,a,u,l,h,f,d,new s),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return w.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),yn.prototype=Object.assign(Object.create(w.prototype),{constructor:yn,isLOD:!0,copy:function(e){w.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new c;return function(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new c,t=new c;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,a=r.length;o<a&&i>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<a;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=w.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),bn.prototype=Object.assign(Object.create(Q.prototype),{constructor:bn,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new p,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Q.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(_n.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new g;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new g,t=new g;return function(){for(var n=this.bones,r=this.boneInverses,i=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var u=n[a]?n[a].matrixWorld:t;e.multiplyMatrices(u,r[a]),e.toArray(i,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new _n(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),wn.prototype=Object.assign(Object.create(w.prototype),{constructor:wn,isBone:!0}),xn.prototype=Object.create(D.prototype),xn.prototype.constructor=xn,xn.prototype.isLineBasicMaterial=!0,xn.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Tn.prototype=Object.assign(Object.create(w.prototype),{constructor:Tn,isLine:!0,computeLineDistances:function(){var e=new c,t=new c;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[0],o=1,a=r.count;o<a;o++)e.fromBufferAttribute(r,o-1),t.fromBufferAttribute(r,o),i[o]=i[o-1],i[o]+=e.distanceTo(t);n.addAttribute("lineDistance",new G(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;(i=n.lineDistances)[0]=0;for(o=1,a=s.length;o<a;o++)i[o]=i[o-1],i[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var e=new g,t=new E,n=new S;return function(r,i){var o=r.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var u=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=u*u,h=new c,f=new c,d=new c,p=new c,m=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var v=a.index,g=a.attributes.position.array;if(null!==v)for(var y=v.array,b=0,_=y.length-1;b<_;b+=m){var w=y[b],x=y[b+1];if(h.fromArray(g,3*w),f.fromArray(g,3*x),!(t.distanceSqToSegment(h,f,p,d)>l))p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}else for(b=0,_=g.length/3-1;b<_;b+=m){if(h.fromArray(g,3*b),f.fromArray(g,3*b+3),!(t.distanceSqToSegment(h,f,p,d)>l))p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else if(a.isGeometry){var T=a.vertices,S=T.length;for(b=0;b<S-1;b+=m){var E;if(!(t.distanceSqToSegment(T[b],T[b+1],p,d)>l))p.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(p))<r.near||E>r.far||i.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Sn.prototype=Object.assign(Object.create(Tn.prototype),{constructor:Sn,isLineSegments:!0,computeLineDistances:function(){var e=new c,t=new c;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],o=0,a=r.count;o<a;o+=2)e.fromBufferAttribute(r,o),t.fromBufferAttribute(r,o+1),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t);n.addAttribute("lineDistance",new G(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,o=0,a=s.length;o<a;o+=2)e.copy(s[o]),t.copy(s[o+1]),i[o]=0===o?0:i[o-1],i[o+1]=i[o]+e.distanceTo(t)}return this}}()}),En.prototype=Object.assign(Object.create(Tn.prototype),{constructor:En,isLineLoop:!0}),Mn.prototype=Object.create(D.prototype),Mn.prototype.constructor=Mn,Mn.prototype.isPointsMaterial=!0,Mn.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Cn.prototype=Object.assign(Object.create(w.prototype),{constructor:Cn,isPoints:!0,raycast:function(){var e=new g,t=new E,n=new S;return function(r,i){var o=this,a=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),h=l*l,f=new c,d=new c;if(a.isBufferGeometry){var p=a.index,m=a.attributes.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length;g<y;g++){var b=v[g];f.fromArray(m,3*b),x(f,b)}else{g=0;for(var _=m.length/3;g<_;g++)f.fromArray(m,3*g),x(f,g)}}else{var w=a.vertices;for(g=0,_=w.length;g<_;g++)x(w[g],g)}}function x(e,n){var a=t.distanceSqToPoint(e);if(a<h){t.closestPointToPoint(e,d),d.applyMatrix4(s);var u=r.ray.origin.distanceTo(d);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),updateMorphTargets:function(){var e,t,n,r=this.geometry.morphAttributes,i=Object.keys(r);if(i.length>0){var o=r[i[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),An.prototype=Object.assign(Object.create(d.prototype),{constructor:An,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Pn.prototype=Object.create(d.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isCompressedTexture=!0,On.prototype=Object.create(d.prototype),On.prototype.constructor=On,On.prototype.isCanvasTexture=!0,kn.prototype=Object.create(d.prototype),kn.prototype.constructor=kn,kn.prototype.isDepthTexture=!0,In.prototype=Object.create(X.prototype),In.prototype.constructor=In,Rn.prototype=Object.create(Z.prototype),Rn.prototype.constructor=Rn,Dn.prototype=Object.create(X.prototype),Dn.prototype.constructor=Dn,Ln.prototype=Object.create(Z.prototype),Ln.prototype.constructor=Ln,Nn.prototype=Object.create(X.prototype),Nn.prototype.constructor=Nn,Fn.prototype=Object.create(Z.prototype),Fn.prototype.constructor=Fn,Un.prototype=Object.create(Nn.prototype),Un.prototype.constructor=Un,jn.prototype=Object.create(Z.prototype),jn.prototype.constructor=jn,Bn.prototype=Object.create(Nn.prototype),Bn.prototype.constructor=Bn,zn.prototype=Object.create(Z.prototype),zn.prototype.constructor=zn,Vn.prototype=Object.create(Nn.prototype),Vn.prototype.constructor=Vn,Wn.prototype=Object.create(Z.prototype),Wn.prototype.constructor=Wn,Gn.prototype=Object.create(Nn.prototype),Gn.prototype.constructor=Gn,Hn.prototype=Object.create(Z.prototype),Hn.prototype.constructor=Hn,qn.prototype=Object.create(X.prototype),qn.prototype.constructor=qn,qn.prototype.toJSON=function(){var e=X.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Yn.prototype=Object.create(Z.prototype),Yn.prototype.constructor=Yn,Kn.prototype=Object.create(X.prototype),Kn.prototype.constructor=Kn,Xn.prototype=Object.create(Z.prototype),Xn.prototype.constructor=Xn,Qn.prototype=Object.create(X.prototype),Qn.prototype.constructor=Qn;var Jn=function(e,t,n){n=n||2;var r,i,o,a,s,u,c,l=t&&t.length,h=l?t[0]*n:e.length,f=Zn(e,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(l&&(f=function(e,t,n,r){var i,o,a,s,u,c=[];for(i=0,o=t.length;i<o;i++)a=t[i]*r,s=i<o-1?t[i+1]*r:e.length,(u=Zn(e,a,s,r,!1))===u.next&&(u.steiner=!0),c.push(ur(u));for(c.sort(or),i=0;i<c.length;i++)ar(c[i],n),n=$n(n,n.next);return n}(e,t,f,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?1/c:0}return er(f,d,n,r,i,c),d};function Zn(e,t,n,r,i){var o,a;if(i===function(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=vr(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=vr(o,e[o],e[o+1],a);return a&&fr(a,a.next)&&(gr(a),a=a.next),a}function $n(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!fr(r,r.next)&&0!==hr(r.prev,r,r.next))r=r.next;else{if(gr(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function er(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=sr(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?nr(e,r,i,o):tr(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),gr(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?er(e=rr(e,t,n),t,n,r,i,o,2):2===a&&ir(e,t,n,r,i,o):er($n(e),t,n,r,i,o,1);break}}}function tr(e){var t=e.prev,n=e,r=e.next;if(hr(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(cr(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&hr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function nr(e,t,n,r){var i=e.prev,o=e,a=e.next;if(hr(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=sr(s,u,t,n,r),f=sr(c,l,t,n,r),d=e.prevZ,p=e.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==e.prev&&d!==e.next&&cr(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&hr(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==e.prev&&p!==e.next&&cr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&hr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&cr(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&hr(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&cr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&hr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function rr(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!fr(i,o)&&dr(i,r,r.next,o)&&pr(i,o)&&pr(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),gr(r),gr(r.next),r=e=o),r=r.next}while(r!==e);return r}function ir(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&lr(a,s)){var u=mr(a,s);return a=$n(a,a.next),u=$n(u,u.next),er(a,t,n,r,i,o),void er(u,t,n,r,i,o)}s=s.next}a=a.next}while(a!==e)}function or(e,t){return e.x-t.x}function ar(e,t){if(t=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;r=n.next;for(;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&cr(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<f||u===f&&r.x>n.x)&&pr(r,e)&&(n=r,f=u),r=r.next;return n}(e,t)){var n=mr(t,e);$n(n,n.next)}}function sr(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ur(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function cr(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function lr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&dr(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&pr(e,t)&&pr(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function hr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function fr(e,t){return e.x===t.x&&e.y===t.y}function dr(e,t,n,r){return!!(fr(e,n)&&fr(t,r)||fr(e,r)&&fr(n,t))||hr(e,t,n)>0!==hr(e,t,r)>0&&hr(n,r,e)>0!==hr(n,r,t)>0}function pr(e,t){return hr(e.prev,e,e.next)<0?hr(e,t,e.next)>=0&&hr(e,e.prev,t)>=0:hr(e,t,e.prev)<0||hr(e,e.next,t)<0}function mr(e,t){var n=new yr(e.i,e.x,e.y),r=new yr(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function vr(e,t,n,r){var i=new yr(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function gr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function yr(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var br={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return br.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];_r(e),wr(n,e);var o=e.length;t.forEach(_r);for(var a=0;a<t.length;a++)r.push(o),o+=t[a].length,wr(n,t[a]);var s=Jn(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function _r(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function wr(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function xr(e,t){Z.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Tr(e,t)),this.mergeVertices()}function Tr(e,t){X.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],o=0,a=e.length;o<a;o++){u(e[o])}function u(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,h=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:f-2,p=void 0!==t.bevelOffset?t.bevelOffset:0,m=void 0!==t.bevelSegments?t.bevelSegments:3,v=t.extrudePath,g=void 0!==t.UVGenerator?t.UVGenerator:Sr;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var y,b,_,w,x,T,S,E,M=!1;v&&(y=v.getSpacedPoints(u),M=!0,h=!1,b=v.computeFrenetFrames(u,!1),_=new c,w=new c,x=new c),h||(m=0,f=0,d=0,p=0);var C=e.extractPoints(a),A=C.shape,P=C.holes;if(!br.isClockWise(A))for(A=A.reverse(),S=0,E=P.length;S<E;S++)T=P[S],br.isClockWise(T)&&(P[S]=T.reverse());var O=br.triangulateShape(A,P),k=A;for(S=0,E=P.length;S<E;S++)T=P[S],A=A.concat(T);function I(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var R,D,L,N,F,U,j=A.length,B=O.length;function z(e,t,n){var r,i,o,a=e.x-t.x,u=e.y-t.y,c=n.x-e.x,l=n.y-e.y,h=a*a+u*u,f=a*l-u*c;if(Math.abs(f)>Number.EPSILON){var d=Math.sqrt(h),p=Math.sqrt(c*c+l*l),m=t.x-u/d,v=t.y+a/d,g=((n.x-l/p-m)*l-(n.y+c/p-v)*c)/(a*l-u*c),y=(r=m+a*g-e.x)*r+(i=v+u*g-e.y)*i;if(y<=2)return new s(r,i);o=Math.sqrt(y/2)}else{var b=!1;a>Number.EPSILON?c>Number.EPSILON&&(b=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(b=!0):Math.sign(u)===Math.sign(l)&&(b=!0),b?(r=-u,i=a,o=Math.sqrt(h)):(r=a,i=u,o=Math.sqrt(h/2))}return new s(r/o,i/o)}for(var V=[],W=0,G=k.length,H=G-1,q=W+1;W<G;W++,H++,q++)H===G&&(H=0),q===G&&(q=0),V[W]=z(k[W],k[H],k[q]);var Y,K,X=[],Q=V.concat();for(S=0,E=P.length;S<E;S++){for(T=P[S],Y=[],W=0,H=(G=T.length)-1,q=W+1;W<G;W++,H++,q++)H===G&&(H=0),q===G&&(q=0),Y[W]=z(T[W],T[H],T[q]);X.push(Y),Q=Q.concat(Y)}for(R=0;R<m;R++){for(L=R/m,N=f*Math.cos(L*Math.PI/2),D=d*Math.sin(L*Math.PI/2)+p,W=0,G=k.length;W<G;W++)Z((F=I(k[W],V[W],D)).x,F.y,-N);for(S=0,E=P.length;S<E;S++)for(T=P[S],Y=X[S],W=0,G=T.length;W<G;W++)Z((F=I(T[W],Y[W],D)).x,F.y,-N)}for(D=d+p,W=0;W<j;W++)F=h?I(A[W],Q[W],D):A[W],M?(w.copy(b.normals[0]).multiplyScalar(F.x),_.copy(b.binormals[0]).multiplyScalar(F.y),x.copy(y[0]).add(w).add(_),Z(x.x,x.y,x.z)):Z(F.x,F.y,0);for(K=1;K<=u;K++)for(W=0;W<j;W++)F=h?I(A[W],Q[W],D):A[W],M?(w.copy(b.normals[K]).multiplyScalar(F.x),_.copy(b.binormals[K]).multiplyScalar(F.y),x.copy(y[K]).add(w).add(_),Z(x.x,x.y,x.z)):Z(F.x,F.y,l/u*K);for(R=m-1;R>=0;R--){for(L=R/m,N=f*Math.cos(L*Math.PI/2),D=d*Math.sin(L*Math.PI/2)+p,W=0,G=k.length;W<G;W++)Z((F=I(k[W],V[W],D)).x,F.y,l+N);for(S=0,E=P.length;S<E;S++)for(T=P[S],Y=X[S],W=0,G=T.length;W<G;W++)F=I(T[W],Y[W],D),M?Z(F.x,F.y+y[u-1].y,y[u-1].x+N):Z(F.x,F.y,l+N)}function J(e,t){var n,r;for(W=e.length;--W>=0;){n=W,(r=W-1)<0&&(r=e.length-1);var i=0,o=u+2*m;for(i=0;i<o;i++){var a=j*i,s=j*(i+1);ee(t+n+a,t+r+a,t+r+s,t+n+s)}}}function Z(e,t,n){o.push(e),o.push(t),o.push(n)}function $(e,t,i){te(e),te(t),te(i);var o=r.length/3,a=g.generateTopUV(n,r,o-3,o-2,o-1);ne(a[0]),ne(a[1]),ne(a[2])}function ee(e,t,i,o){te(e),te(t),te(o),te(t),te(i),te(o);var a=r.length/3,s=g.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);ne(s[0]),ne(s[1]),ne(s[3]),ne(s[1]),ne(s[2]),ne(s[3])}function te(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function ne(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(h){var t=0,i=j*t;for(W=0;W<B;W++)$((U=O[W])[2]+i,U[1]+i,U[0]+i);for(i=j*(t=u+2*m),W=0;W<B;W++)$((U=O[W])[0]+i,U[1]+i,U[2]+i)}else{for(W=0;W<B;W++)$((U=O[W])[2],U[1],U[0]);for(W=0;W<B;W++)$((U=O[W])[0]+j*u,U[1]+j*u,U[2]+j*u)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(J(k,t),t+=k.length,S=0,E=P.length;S<E;S++)J(T=P[S],t),t+=T.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new G(r,3)),this.addAttribute("uv",new G(i,2)),this.computeVertexNormals()}xr.prototype=Object.create(Z.prototype),xr.prototype.constructor=xr,xr.prototype.toJSON=function(){var e=Z.prototype.toJSON.call(this);return Er(this.parameters.shapes,this.parameters.options,e)},Tr.prototype=Object.create(X.prototype),Tr.prototype.constructor=Tr,Tr.prototype.toJSON=function(){var e=X.prototype.toJSON.call(this);return Er(this.parameters.shapes,this.parameters.options,e)};var Sr={generateTopUV:function(e,t,n,r,i){var o=t[3*n],a=t[3*n+1],u=t[3*r],c=t[3*r+1],l=t[3*i],h=t[3*i+1];return[new s(o,a),new s(u,c),new s(l,h)]},generateSideWallUV:function(e,t,n,r,i,o){var a=t[3*n],u=t[3*n+1],c=t[3*n+2],l=t[3*r],h=t[3*r+1],f=t[3*r+2],d=t[3*i],p=t[3*i+1],m=t[3*i+2],v=t[3*o],g=t[3*o+1],y=t[3*o+2];return Math.abs(u-h)<.01?[new s(a,1-c),new s(l,1-f),new s(d,1-m),new s(v,1-y)]:[new s(u,1-c),new s(h,1-f),new s(p,1-m),new s(g,1-y)]}};function Er(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function Mr(e,t){Z.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Cr(e,t)),this.mergeVertices()}function Cr(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Z;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Tr.call(this,r,t),this.type="TextBufferGeometry"}function Ar(e,t,n,r,i,o,a){Z.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Pr(e,t,n,r,i,o,a)),this.mergeVertices()}function Pr(e,t,n,r,i,o,a){X.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,l=Math.min(o+a,Math.PI),h=0,f=[],d=new c,p=new c,m=[],v=[],g=[],y=[];for(u=0;u<=n;u++){var b=[],_=u/n,w=0;for(0==u&&0==o?w=.5/t:u==n&&l==Math.PI&&(w=-.5/t),s=0;s<=t;s++){var x=s/t;d.x=-e*Math.cos(r+x*i)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(r+x*i)*Math.sin(o+_*a),v.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),y.push(x+w,1-_),b.push(h++)}f.push(b)}for(u=0;u<n;u++)for(s=0;s<t;s++){var T=f[u][s+1],S=f[u][s],E=f[u+1][s],M=f[u+1][s+1];(0!==u||o>0)&&m.push(T,S,M),(u!==n-1||l<Math.PI)&&m.push(S,E,M)}this.setIndex(m),this.addAttribute("position",new G(v,3)),this.addAttribute("normal",new G(g,3)),this.addAttribute("uv",new G(y,2))}function Or(e,t,n,r,i,o){Z.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new kr(e,t,n,r,i,o)),this.mergeVertices()}function kr(e,t,n,r,i,o){X.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,u,l,h=[],f=[],d=[],p=[],m=e,v=(t-e)/(r=void 0!==r?Math.max(1,r):1),g=new c,y=new s;for(u=0;u<=r;u++){for(l=0;l<=n;l++)a=i+l/n*o,g.x=m*Math.cos(a),g.y=m*Math.sin(a),f.push(g.x,g.y,g.z),d.push(0,0,1),y.x=(g.x/t+1)/2,y.y=(g.y/t+1)/2,p.push(y.x,y.y);m+=v}for(u=0;u<r;u++){var b=u*(n+1);for(l=0;l<n;l++){var _=a=l+b,w=a+n+1,x=a+n+2,T=a+1;h.push(_,w,T),h.push(w,x,T)}}this.setIndex(h),this.addAttribute("position",new G(f,3)),this.addAttribute("normal",new G(d,3)),this.addAttribute("uv",new G(p,2))}function Ir(e,t,n,r){Z.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Rr(e,t,n,r)),this.mergeVertices()}function Rr(e,t,n,r){X.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=a.clamp(r,0,2*Math.PI);var i,o,u,l=[],h=[],f=[],d=1/t,p=new c,m=new s;for(o=0;o<=t;o++){var v=n+o*d*r,g=Math.sin(v),y=Math.cos(v);for(u=0;u<=e.length-1;u++)p.x=e[u].x*g,p.y=e[u].y,p.z=e[u].x*y,h.push(p.x,p.y,p.z),m.x=o/t,m.y=u/(e.length-1),f.push(m.x,m.y)}for(o=0;o<t;o++)for(u=0;u<e.length-1;u++){var b=i=u+o*e.length,_=i+e.length,w=i+e.length+1,x=i+1;l.push(b,_,x),l.push(_,w,x)}if(this.setIndex(l),this.addAttribute("position",new G(h,3)),this.addAttribute("uv",new G(f,2)),this.computeVertexNormals(),r===2*Math.PI){var T=this.attributes.normal.array,S=new c,E=new c,M=new c;for(i=t*e.length*3,o=0,u=0;o<e.length;o++,u+=3)S.x=T[u+0],S.y=T[u+1],S.z=T[u+2],E.x=T[i+u+0],E.y=T[i+u+1],E.z=T[i+u+2],M.addVectors(S,E).normalize(),T[u+0]=T[i+u+0]=M.x,T[u+1]=T[i+u+1]=M.y,T[u+2]=T[i+u+2]=M.z}}function Dr(e,t){Z.call(this),this.type="ShapeGeometry","object"===typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Lr(e,t)),this.mergeVertices()}function Lr(e,t){X.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))c(e);else for(var u=0;u<e.length;u++)c(e[u]),this.addGroup(a,s,u),a+=s,s=0;function c(e){var a,u,c,l=r.length/3,h=e.extractPoints(t),f=h.shape,d=h.holes;for(!1===br.isClockWise(f)&&(f=f.reverse()),a=0,u=d.length;a<u;a++)c=d[a],!0===br.isClockWise(c)&&(d[a]=c.reverse());var p=br.triangulateShape(f,d);for(a=0,u=d.length;a<u;a++)c=d[a],f=f.concat(c);for(a=0,u=f.length;a<u;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=p.length;a<u;a++){var v=p[a],g=v[0]+l,y=v[1]+l,b=v[2]+l;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new G(r,3)),this.addAttribute("normal",new G(i,3)),this.addAttribute("uv",new G(o,2))}function Nr(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Fr(e,t){X.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,o,s=[],u=Math.cos(a.DEG2RAD*t),c=[0,0],l={},h=["a","b","c"];e.isBufferGeometry?(o=new Z).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var f=o.vertices,d=o.faces,p=0,m=d.length;p<m;p++)for(var v=d[p],g=0;g<3;g++)n=v[h[g]],r=v[h[(g+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),void 0===l[i=c[0]+","+c[1]]?l[i]={index1:c[0],index2:c[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var y=l[i];if(void 0===y.face2||d[y.face1].normal.dot(d[y.face2].normal)<=u){var b=f[y.index1];s.push(b.x,b.y,b.z),b=f[y.index2],s.push(b.x,b.y,b.z)}}this.addAttribute("position",new G(s,3))}function Ur(e,t,n,r,i,o,a,s){Z.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new jr(e,t,n,r,i,o,a,s)),this.mergeVertices()}function jr(e,t,n,r,i,o,a,u){X.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:u};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,u=void 0!==u?u:2*Math.PI;var h=[],f=[],d=[],p=[],m=0,v=[],g=n/2,y=0;function b(n){var i,o,v,b=new s,_=new c,w=0,x=!0===n?e:t,T=!0===n?1:-1;for(o=m,i=1;i<=r;i++)f.push(0,g*T,0),d.push(0,T,0),p.push(.5,.5),m++;for(v=m,i=0;i<=r;i++){var S=i/r*u+a,E=Math.cos(S),M=Math.sin(S);_.x=x*M,_.y=g*T,_.z=x*E,f.push(_.x,_.y,_.z),d.push(0,T,0),b.x=.5*E+.5,b.y=.5*M*T+.5,p.push(b.x,b.y),m++}for(i=0;i<r;i++){var C=o+i,A=v+i;!0===n?h.push(A,A+1,C):h.push(A+1,A,C),w+=3}l.addGroup(y,w,!0===n?1:2),y+=w}!function(){var o,s,b=new c,_=new c,w=0,x=(t-e)/n;for(s=0;s<=i;s++){var T=[],S=s/i,E=S*(t-e)+e;for(o=0;o<=r;o++){var M=o/r,C=M*u+a,A=Math.sin(C),P=Math.cos(C);_.x=E*A,_.y=-S*n+g,_.z=E*P,f.push(_.x,_.y,_.z),b.set(A,x,P).normalize(),d.push(b.x,b.y,b.z),p.push(M,1-S),T.push(m++)}v.push(T)}for(o=0;o<r;o++)for(s=0;s<i;s++){var O=v[s][o],k=v[s+1][o],I=v[s+1][o+1],R=v[s][o+1];h.push(O,k,R),h.push(k,I,R),w+=6}l.addGroup(y,w,0),y+=w}(),!1===o&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(h),this.addAttribute("position",new G(f,3)),this.addAttribute("normal",new G(d,3)),this.addAttribute("uv",new G(p,2))}function Br(e,t,n,r,i,o,a){Ur.call(this,0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function zr(e,t,n,r,i,o,a){jr.call(this,0,e,t,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function Vr(e,t,n,r){Z.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Wr(e,t,n,r)),this.mergeVertices()}function Wr(e,t,n,r){X.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],u=[],l=[],h=[],f=new c,d=new s;for(u.push(0,0,0),l.push(0,0,1),h.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var p=n+o/t*r;f.x=e*Math.cos(p),f.y=e*Math.sin(p),u.push(f.x,f.y,f.z),l.push(0,0,1),d.x=(u[i]/e+1)/2,d.y=(u[i+1]/e+1)/2,h.push(d.x,d.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.addAttribute("position",new G(u,3)),this.addAttribute("normal",new G(l,3)),this.addAttribute("uv",new G(h,2))}Mr.prototype=Object.create(Z.prototype),Mr.prototype.constructor=Mr,Cr.prototype=Object.create(Tr.prototype),Cr.prototype.constructor=Cr,Ar.prototype=Object.create(Z.prototype),Ar.prototype.constructor=Ar,Pr.prototype=Object.create(X.prototype),Pr.prototype.constructor=Pr,Or.prototype=Object.create(Z.prototype),Or.prototype.constructor=Or,kr.prototype=Object.create(X.prototype),kr.prototype.constructor=kr,Ir.prototype=Object.create(Z.prototype),Ir.prototype.constructor=Ir,Rr.prototype=Object.create(X.prototype),Rr.prototype.constructor=Rr,Dr.prototype=Object.create(Z.prototype),Dr.prototype.constructor=Dr,Dr.prototype.toJSON=function(){var e=Z.prototype.toJSON.call(this);return Nr(this.parameters.shapes,e)},Lr.prototype=Object.create(X.prototype),Lr.prototype.constructor=Lr,Lr.prototype.toJSON=function(){var e=X.prototype.toJSON.call(this);return Nr(this.parameters.shapes,e)},Fr.prototype=Object.create(X.prototype),Fr.prototype.constructor=Fr,Ur.prototype=Object.create(Z.prototype),Ur.prototype.constructor=Ur,jr.prototype=Object.create(X.prototype),jr.prototype.constructor=jr,Br.prototype=Object.create(Ur.prototype),Br.prototype.constructor=Br,zr.prototype=Object.create(jr.prototype),zr.prototype.constructor=zr,Vr.prototype=Object.create(Z.prototype),Vr.prototype.constructor=Vr,Wr.prototype=Object.create(X.prototype),Wr.prototype.constructor=Wr;var Gr=Object.freeze({WireframeGeometry:In,ParametricGeometry:Rn,ParametricBufferGeometry:Dn,TetrahedronGeometry:Fn,TetrahedronBufferGeometry:Un,OctahedronGeometry:jn,OctahedronBufferGeometry:Bn,IcosahedronGeometry:zn,IcosahedronBufferGeometry:Vn,DodecahedronGeometry:Wn,DodecahedronBufferGeometry:Gn,PolyhedronGeometry:Ln,PolyhedronBufferGeometry:Nn,TubeGeometry:Hn,TubeBufferGeometry:qn,TorusKnotGeometry:Yn,TorusKnotBufferGeometry:Kn,TorusGeometry:Xn,TorusBufferGeometry:Qn,TextGeometry:Mr,TextBufferGeometry:Cr,SphereGeometry:Ar,SphereBufferGeometry:Pr,RingGeometry:Or,RingBufferGeometry:kr,PlaneGeometry:ve,PlaneBufferGeometry:ge,LatheGeometry:Ir,LatheBufferGeometry:Rr,ShapeGeometry:Dr,ShapeBufferGeometry:Lr,ExtrudeGeometry:xr,ExtrudeBufferGeometry:Tr,EdgesGeometry:Fr,ConeGeometry:Br,ConeBufferGeometry:zr,CylinderGeometry:Ur,CylinderBufferGeometry:jr,CircleGeometry:Vr,CircleBufferGeometry:Wr,BoxGeometry:$,BoxBufferGeometry:ee});function Hr(e){D.call(this),this.type="ShadowMaterial",this.color=new A(0),this.transparent=!0,this.setValues(e)}function qr(e){re.call(this,e),this.type="RawShaderMaterial"}function Yr(e){D.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new A(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new A(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Kr(e){Yr.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Xr(e){D.call(this),this.type="MeshPhongMaterial",this.color=new A(16777215),this.specular=new A(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new A(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Qr(e){Xr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Jr(e){D.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Zr(e){D.call(this),this.type="MeshLambertMaterial",this.color=new A(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new A(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function $r(e){D.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new A(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new s(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function ei(e){xn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Hr.prototype=Object.create(D.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isShadowMaterial=!0,Hr.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this},qr.prototype=Object.create(re.prototype),qr.prototype.constructor=qr,qr.prototype.isRawShaderMaterial=!0,Yr.prototype=Object.create(D.prototype),Yr.prototype.constructor=Yr,Yr.prototype.isMeshStandardMaterial=!0,Yr.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Kr.prototype=Object.create(Yr.prototype),Kr.prototype.constructor=Kr,Kr.prototype.isMeshPhysicalMaterial=!0,Kr.prototype.copy=function(e){return Yr.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Xr.prototype=Object.create(D.prototype),Xr.prototype.constructor=Xr,Xr.prototype.isMeshPhongMaterial=!0,Xr.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Qr.prototype=Object.create(Xr.prototype),Qr.prototype.constructor=Qr,Qr.prototype.isMeshToonMaterial=!0,Qr.prototype.copy=function(e){return Xr.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Jr.prototype=Object.create(D.prototype),Jr.prototype.constructor=Jr,Jr.prototype.isMeshNormalMaterial=!0,Jr.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Zr.prototype=Object.create(D.prototype),Zr.prototype.constructor=Zr,Zr.prototype.isMeshLambertMaterial=!0,Zr.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},$r.prototype=Object.create(D.prototype),$r.prototype.constructor=$r,$r.prototype.isMeshMatcapMaterial=!0,$r.prototype.copy=function(e){return D.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ei.prototype=Object.create(xn.prototype),ei.prototype.constructor=ei,ei.prototype.isLineDashedMaterial=!0,ei.prototype.copy=function(e){return xn.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var ti=Object.freeze({ShadowMaterial:Hr,SpriteMaterial:vn,RawShaderMaterial:qr,ShaderMaterial:re,PointsMaterial:Mn,MeshPhysicalMaterial:Kr,MeshStandardMaterial:Yr,MeshPhongMaterial:Xr,MeshToonMaterial:Qr,MeshNormalMaterial:Jr,MeshLambertMaterial:Zr,MeshDepthMaterial:Qt,MeshDistanceMaterial:Jt,MeshBasicMaterial:L,MeshMatcapMaterial:$r,LineDashedMaterial:ei,LineBasicMaterial:xn,Material:D}),ni={arraySlice:function(e,t,n){return ni.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*t,u=0;u!==t;++u)i[a++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}}};function ri(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ii(e,t,n,r){ri.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function oi(e,t,n,r){ri.call(this,e,t,n,r)}function ai(e,t,n,r){ri.call(this,e,t,n,r)}function si(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ni.convertArray(t,this.TimeBufferType),this.values=ni.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function ui(e,t,n){si.call(this,e,t,n)}function ci(e,t,n,r){si.call(this,e,t,n,r)}function li(e,t,n,r){si.call(this,e,t,n,r)}function hi(e,t,n,r){ri.call(this,e,t,n,r)}function fi(e,t,n,r){si.call(this,e,t,n,r)}function di(e,t,n,r){si.call(this,e,t,n,r)}function pi(e,t,n,r){si.call(this,e,t,n,r)}function mi(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=a.generateUUID(),this.duration<0&&this.resetDuration()}function vi(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return li;case"vector":case"vector2":case"vector3":case"vector4":return pi;case"color":return ci;case"quaternion":return fi;case"bool":case"boolean":return ui;case"string":return di}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];ni.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(ri.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var o;n:{r:if(!(e<r)){for(var a=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===a)break;if(i=r,e<(r=t[++n]))break t}o=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===a)break;if(r=i,e>=(i=t[--n-1]))break t}o=n,n=0}for(;n<o;){var u=n+o>>>1;e<t[u]?o=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,o=0;o!==r;++o)t[o]=n[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(ri.prototype,{beforeStart_:ri.prototype.copySampleValue_,afterEnd_:ri.prototype.copySampleValue_}),ii.prototype=Object.assign(Object.create(ri.prototype),{constructor:ii,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:a=t+r[i=r.length-2]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}var u=.5*(n-t),c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,m=p*d,v=-h*m+2*h*p-h*d,g=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*m+(1.5+f)*p+.5*d,b=f*m-f*p,_=0;_!==a;++_)i[_]=v*o[c+_]+g*o[u+_]+y*o[s+_]+b*o[l+_];return i}}),oi.prototype=Object.assign(Object.create(ri.prototype),{constructor:oi,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,u=s-a,c=(n-t)/(r-t),l=1-c,h=0;h!==a;++h)i[h]=o[u+h]*l+o[s+h]*c;return i}}),ai.prototype=Object.assign(Object.create(ri.prototype),{constructor:ai,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(si,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:ni.convertArray(e.times,Array),values:ni.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(si.prototype,{constructor:si,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new ai(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new oi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ii(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=ni.arraySlice(n,i,o),this.values=ni.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==r&&ni.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,o=e.length-1,a=1;a<o;++a){var s=!1,u=e[a];if(u!==e[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var c=a*n,l=c-n,h=c+n,f=0;f!==n;++f){var d=t[c+f];if(d!==t[l+f]||d!==t[h+f]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var p=a*n,m=i*n;for(f=0;f!==n;++f)t[m+f]=t[p+f]}++i}}if(o>0){e[i]=e[o];for(p=o*n,m=i*n,f=0;f!==n;++f)t[m+f]=t[p+f];++i}return i!==e.length&&(this.times=ni.arraySlice(e,0,i),this.values=ni.arraySlice(t,0,i*n)),this},clone:function(){var e=ni.arraySlice(this.times,0),t=ni.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}),ui.prototype=Object.assign(Object.create(si.prototype),{constructor:ui,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ci.prototype=Object.assign(Object.create(si.prototype),{constructor:ci,ValueTypeName:"color"}),li.prototype=Object.assign(Object.create(si.prototype),{constructor:li,ValueTypeName:"number"}),hi.prototype=Object.assign(Object.create(ri.prototype),{constructor:hi,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(n-t)/(r-t),l=s+a;s!==l;s+=4)u.slerpFlat(i,0,o,s-a,o,s,c);return i}}),fi.prototype=Object.assign(Object.create(si.prototype),{constructor:fi,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new hi(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),di.prototype=Object.assign(Object.create(si.prototype),{constructor:di,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),pi.prototype=Object.assign(Object.create(si.prototype),{constructor:pi,ValueTypeName:"vector"}),Object.assign(mi,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,o=n.length;i!==o;++i)t.push(vi(n[i]).scale(r));return new mi(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=n.length;i!==o;++i)t.push(si.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var c=ni.getKeyframeOrder(s);s=ni.sortedArray(s,1,c),u=ni.sortedArray(u,1,c),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new li(".morphTargetInfluences["+t[a].name+"]",s,u).scale(1/n))}return new mi(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],u=s.name.match(i);if(u&&u.length>1){var c=r[h=u[1]];c||(r[h]=c=[]),c.push(s)}}var l=[];for(var h in r)l.push(mi.CreateFromMorphTargetSequence(h,r[h],t,n));return l},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var o=[],a=[];ni.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var c=s[u].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var l={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var f=0;f<c[h].morphTargets.length;f++)l[c[h].morphTargets[f]]=-1;for(var d in l){var p=[],m=[];for(f=0;f!==c[h].morphTargets.length;++f){var v=c[h];p.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new li(".morphTargetInfluence["+d+"]",p,m))}o=l.length*(a||1)}else{var g=".bones["+t[u].name+"]";n(pi,g+".position",c,"pos",r),n(fi,g+".quaternion",c,"rot",r),n(pi,g+".scale",c,"scl",r)}}return 0===r.length?null:new mi(i,o,r)}}),Object.assign(mi.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new mi(this.name,this.duration,e)}});var gi={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function yi(e,t,n){var r=this,i=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===i&&void 0!==r.onStart&&r.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var bi=new yi,_i={};function wi(e){this.manager=void 0!==e?e:bi}function xi(e){this.manager=void 0!==e?e:bi,this._parser=null}function Ti(e){this.manager=void 0!==e?e:bi}function Si(e){this.manager=void 0!==e?e:bi}function Ei(e){this.manager=void 0!==e?e:bi}function Mi(){this.type="Curve",this.arcLengthDivisions=200}function Ci(e,t,n,r,i,o,a,s){Mi.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Ai(e,t,n,r,i,o){Ci.call(this,e,t,n,n,r,i,o),this.type="ArcCurve"}function Pi(){var e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){var u=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;i(t,n,u*=a,c*=a)},calc:function(i){var o=i*i;return e+t*i+n*o+r*(o*i)}}}Object.assign(wi.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=gi.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===_i[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],c=a[3];c=decodeURIComponent(c),u&&(c=atob(c));try{var l,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(c.length),d=0;d<c.length;d++)f[d]=c.charCodeAt(d);l="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var p=new DOMParser;l=p.parseFromString(c,s);break;case"json":l=JSON.parse(c);break;default:l=c}setTimeout((function(){t&&t(l),i.manager.itemEnd(e)}),0)}catch(g){setTimeout((function(){r&&r(g),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{_i[e]=[],_i[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",(function(t){var n=this.response;gi.add(e,n);var r=_i[e];if(delete _i[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=r.length;o<a;o++){(s=r[o]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var n=_i[e],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var n=_i[e];delete _i[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var n=_i[e];delete _i[e];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}_i[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:bi}.prototype,{load:function(e,t,n,r){var i=this,o=new wi(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){for(var t=[],n=0;n<e.length;n++){var r=mi.parse(e[n]);t.push(r)}return t},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:bi,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,o=[],a=new Pn;a.image=o;var s=new wi(this.manager);function u(u){s.load(e[u],(function(e){var n=i._parser(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(a.minFilter=1006),a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var c=0,l=0,h=e.length;l<h;++l)u(l);else s.load(e,(function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=1006),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a},setPath:function(e){return this.path=e,this}}),Object.assign(xi.prototype,{load:function(e,t,n,r){var i=this,o=new ue,a=new wi(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var n=i._parser(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:1001,o.wrapT=void 0!==n.wrapT?n.wrapT:1001,o.magFilter=void 0!==n.magFilter?n.magFilter:1006,o.minFilter=void 0!==n.minFilter?n.minFilter:1008,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,n))}),n,r),o},setPath:function(e){return this.path=e,this}}),Object.assign(Ti.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=gi.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),gi.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Si.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new Pe,o=new Ti(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ei.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new d,o=new Ti(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?1022:1023,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Mi.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=e;n++)o+=(t=this.getPoint(n/e)).distanceTo(i),r.push(o),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,o=r.length;n=t||e*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var c=r[i];return(i+(n-c)/(r[i+1]-c))/(o-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,o=new c,s=[],u=[],l=[],h=new c,f=new g;for(n=0;n<=e;n++)r=n/e,s[n]=this.getTangentAt(r),s[n].normalize();u[0]=new c,l[0]=new c;var d=Number.MAX_VALUE,p=Math.abs(s[0].x),m=Math.abs(s[0].y),v=Math.abs(s[0].z);for(p<=d&&(d=p,o.set(1,0,0)),m<=d&&(d=m,o.set(0,1,0)),v<=d&&o.set(0,0,1),h.crossVectors(s[0],o).normalize(),u[0].crossVectors(s[0],h),l[0].crossVectors(s[0],u[0]),n=1;n<=e;n++)u[n]=u[n-1].clone(),l[n]=l[n-1].clone(),h.crossVectors(s[n-1],s[n]),h.length()>Number.EPSILON&&(h.normalize(),i=Math.acos(a.clamp(s[n-1].dot(s[n]),-1,1)),u[n].applyMatrix4(f.makeRotationAxis(h,i))),l[n].crossVectors(s[n],u[n]);if(!0===t)for(i=Math.acos(a.clamp(u[0].dot(u[e]),-1,1)),i/=e,s[0].dot(h.crossVectors(u[0],u[e]))>0&&(i=-i),n=1;n<=e;n++)u[n].applyMatrix4(f.makeRotationAxis(s[n],i*n)),l[n].crossVectors(s[n],u[n]);return{tangents:s,normals:u,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ci.prototype=Object.create(Mi.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isEllipseCurve=!0,Ci.prototype.getPoint=function(e,t){for(var n=t||new s,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+e*i,u=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=u-this.aX,d=c-this.aY;u=f*l-d*h+this.aX,c=f*h+d*l+this.aY}return n.set(u,c)},Ci.prototype.copy=function(e){return Mi.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ci.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ci.prototype.fromJSON=function(e){return Mi.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ai.prototype=Object.create(Ci.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isArcCurve=!0;var Oi=new c,ki=new Pi,Ii=new Pi,Ri=new Pi;function Di(e,t,n,r){Mi.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Li(e,t,n,r,i){var o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Ni(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Fi(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Ui(e,t,n,r){Mi.call(this),this.type="CubicBezierCurve",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s,this.v3=r||new s}function ji(e,t,n,r){Mi.call(this),this.type="CubicBezierCurve3",this.v0=e||new c,this.v1=t||new c,this.v2=n||new c,this.v3=r||new c}function Bi(e,t){Mi.call(this),this.type="LineCurve",this.v1=e||new s,this.v2=t||new s}function zi(e,t){Mi.call(this),this.type="LineCurve3",this.v1=e||new c,this.v2=t||new c}function Vi(e,t,n){Mi.call(this),this.type="QuadraticBezierCurve",this.v0=e||new s,this.v1=t||new s,this.v2=n||new s}function Wi(e,t,n){Mi.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new c,this.v1=t||new c,this.v2=n||new c}function Gi(e){Mi.call(this),this.type="SplineCurve",this.points=e||[]}Di.prototype=Object.create(Mi.prototype),Di.prototype.constructor=Di,Di.prototype.isCatmullRomCurve3=!0,Di.prototype.getPoint=function(e,t){var n,r,i,o,a=t||new c,s=this.points,u=s.length,l=(u-(this.closed?0:1))*e,h=Math.floor(l),f=l-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/u)+1)*u:0===f&&h===u-1&&(h=u-2,f=1),this.closed||h>0?n=s[(h-1)%u]:(Oi.subVectors(s[0],s[1]).add(s[0]),n=Oi),r=s[h%u],i=s[(h+1)%u],this.closed||h+2<u?o=s[(h+2)%u]:(Oi.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=Oi),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(i),d),v=Math.pow(i.distanceToSquared(o),d);m<1e-4&&(m=1),p<1e-4&&(p=m),v<1e-4&&(v=m),ki.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,m,v),Ii.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,m,v),Ri.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,m,v)}else"catmullrom"===this.curveType&&(ki.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Ii.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Ri.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(ki.calc(f),Ii.calc(f),Ri.calc(f)),a},Di.prototype.copy=function(e){Mi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Di.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Di.prototype.fromJSON=function(e){Mi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new c).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ui.prototype=Object.create(Mi.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isCubicBezierCurve=!0,Ui.prototype.getPoint=function(e,t){var n=t||new s,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Fi(e,r.x,i.x,o.x,a.x),Fi(e,r.y,i.y,o.y,a.y)),n},Ui.prototype.copy=function(e){return Mi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ui.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ui.prototype.fromJSON=function(e){return Mi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ji.prototype=Object.create(Mi.prototype),ji.prototype.constructor=ji,ji.prototype.isCubicBezierCurve3=!0,ji.prototype.getPoint=function(e,t){var n=t||new c,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Fi(e,r.x,i.x,o.x,a.x),Fi(e,r.y,i.y,o.y,a.y),Fi(e,r.z,i.z,o.z,a.z)),n},ji.prototype.copy=function(e){return Mi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},ji.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},ji.prototype.fromJSON=function(e){return Mi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Bi.prototype=Object.create(Mi.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isLineCurve=!0,Bi.prototype.getPoint=function(e,t){var n=t||new s;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Bi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Bi.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Bi.prototype.copy=function(e){return Mi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Bi.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Bi.prototype.fromJSON=function(e){return Mi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},zi.prototype=Object.create(Mi.prototype),zi.prototype.constructor=zi,zi.prototype.isLineCurve3=!0,zi.prototype.getPoint=function(e,t){var n=t||new c;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},zi.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},zi.prototype.copy=function(e){return Mi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zi.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zi.prototype.fromJSON=function(e){return Mi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Vi.prototype=Object.create(Mi.prototype),Vi.prototype.constructor=Vi,Vi.prototype.isQuadraticBezierCurve=!0,Vi.prototype.getPoint=function(e,t){var n=t||new s,r=this.v0,i=this.v1,o=this.v2;return n.set(Ni(e,r.x,i.x,o.x),Ni(e,r.y,i.y,o.y)),n},Vi.prototype.copy=function(e){return Mi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Vi.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Vi.prototype.fromJSON=function(e){return Mi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Wi.prototype=Object.create(Mi.prototype),Wi.prototype.constructor=Wi,Wi.prototype.isQuadraticBezierCurve3=!0,Wi.prototype.getPoint=function(e,t){var n=t||new c,r=this.v0,i=this.v1,o=this.v2;return n.set(Ni(e,r.x,i.x,o.x),Ni(e,r.y,i.y,o.y),Ni(e,r.z,i.z,o.z)),n},Wi.prototype.copy=function(e){return Mi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wi.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wi.prototype.fromJSON=function(e){return Mi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Gi.prototype=Object.create(Mi.prototype),Gi.prototype.constructor=Gi,Gi.prototype.isSplineCurve=!0,Gi.prototype.getPoint=function(e,t){var n=t||new s,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,u=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return n.set(Li(a,u.x,c.x,l.x,h.x),Li(a,u.y,c.y,l.y,h.y)),n},Gi.prototype.copy=function(e){Mi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Gi.prototype.toJSON=function(){var e=Mi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Gi.prototype.fromJSON=function(e){Mi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new s).fromArray(r))}return this};var Hi=Object.freeze({ArcCurve:Ai,CatmullRomCurve3:Di,CubicBezierCurve:Ui,CubicBezierCurve3:ji,EllipseCurve:Ci,LineCurve:Bi,LineCurve3:zi,QuadraticBezierCurve:Vi,QuadraticBezierCurve3:Wi,SplineCurve:Gi});function qi(){Mi.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Yi(e){qi.call(this),this.type="Path",this.currentPoint=new s,e&&this.setFromPoints(e)}function Ki(e){Yi.call(this,e),this.uuid=a.generateUUID(),this.type="Shape",this.holes=[]}function Xi(e,t){w.call(this),this.type="Light",this.color=new A(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Qi(e,t,n){Xi.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(w.DefaultUp),this.updateMatrix(),this.groundColor=new A(t)}function Ji(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new s(512,512),this.map=null,this.matrix=new g}function Zi(){Ji.call(this,new oe(50,1,.5,500))}function $i(e,t,n,r,i,o){Xi.call(this,e,t),this.type="SpotLight",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Zi}function eo(e,t,n,r){Xi.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Ji(new oe(90,1,.5,500))}function to(e,t,n,r,i,o){ie.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function no(){Ji.call(this,new to(-5,5,5,-5,.5,500))}function ro(e,t){Xi.call(this,e,t),this.type="DirectionalLight",this.position.copy(w.DefaultUp),this.updateMatrix(),this.target=new w,this.shadow=new no}function io(e,t){Xi.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function oo(e,t,n,r){Xi.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ao(e){this.manager=void 0!==e?e:bi,this.textures={}}qi.prototype=Object.assign(Object.create(Mi.prototype),{constructor:qi,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Bi(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),u=0;u<s.length;u++){var c=s[u];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Mi.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Mi.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Mi.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Hi[r.type]).fromJSON(r))}return this}}),Yi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Yi,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Bi(this.currentPoint.clone(),new s(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Vi(this.currentPoint.clone(),new s(e,t),new s(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,o){var a=new Ui(this.currentPoint.clone(),new s(e,t),new s(n,r),new s(i,o));this.curves.push(a),this.currentPoint.set(i,o)},splineThru:function(e){var t=new Gi([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+a,t+s,n,r,i,o)},absarc:function(e,t,n,r,i,o){this.absellipse(e,t,n,n,r,i,o)},ellipse:function(e,t,n,r,i,o,a,s){var u=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(e+u,t+c,n,r,i,o,a,s)},absellipse:function(e,t,n,r,i,o,a,s){var u=new Ci(e,t,n,r,i,o,a,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);this.currentPoint.copy(l)},copy:function(e){return qi.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=qi.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return qi.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Ki.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Ki,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Yi.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Yi.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Yi.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Yi).fromJSON(r))}return this}}),Xi.prototype=Object.assign(Object.create(w.prototype),{constructor:Xi,isLight:!0,copy:function(e){return w.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=w.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Qi.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Qi,isHemisphereLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Ji.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Zi.prototype=Object.assign(Object.create(Ji.prototype),{constructor:Zi,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*a.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),$i.prototype=Object.assign(Object.create(Xi.prototype),{constructor:$i,isSpotLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),eo.prototype=Object.assign(Object.create(Xi.prototype),{constructor:eo,isPointLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),to.prototype=Object.assign(Object.create(ie.prototype),{constructor:to,isOrthographicCamera:!0,copy:function(e,t){return ie.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),l=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;o=(i+=l*(this.view.offsetX/u))+l*(this.view.width/u),s=(a-=h*(this.view.offsetY/c))-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=w.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),no.prototype=Object.assign(Object.create(Ji.prototype),{constructor:no}),ro.prototype=Object.assign(Object.create(Xi.prototype),{constructor:ro,isDirectionalLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),io.prototype=Object.assign(Object.create(Xi.prototype),{constructor:io,isAmbientLight:!0}),oo.prototype=Object.assign(Object.create(Xi.prototype),{constructor:oo,isRectAreaLight:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Xi.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(ao.prototype,{load:function(e,t,n,r){var i=this,o=new wi(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new ti[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(r.morphNormals=e.morphNormals),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new A).setHex(o.value);break;case"v2":r.uniforms[i].value=(new s).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new c).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new p).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new l).fromArray(o.value);case"m4":r.uniforms[i].value=(new g).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)r.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var u=e.normalScale;!1===Array.isArray(u)&&(u=[u,u]),r.normalScale=(new s).fromArray(u)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var so=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function uo(){X.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function co(e,t,n,r){"number"===typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),N.call(this,e,t,n),this.meshPerAttribute=r||1}function lo(e){this.manager=void 0!==e?e:bi}uo.prototype=Object.assign(Object.create(X.prototype),{constructor:uo,isInstancedBufferGeometry:!0,copy:function(e){return X.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=X.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),co.prototype=Object.assign(Object.create(N.prototype),{constructor:co,isInstancedBufferAttribute:!0,copy:function(e){return N.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=N.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),Object.assign(lo.prototype,{load:function(e,t,n,r){var i=this,o=new wi(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=e.isInstancedBufferGeometry?new uo:new X,n=e.data.index;if(void 0!==n){var r=new ho[n.type](n.array);t.setIndex(new N(r,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(r=new ho[a.type](a.array),new(a.isInstancedBufferAttribute?co:N)(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.addAttribute(o,s)}var u=e.data.morphAttributes;if(u)for(var o in u){for(var l=u[o],h=[],f=0,d=l.length;f<d;f++){a=l[f],s=new N(r=new ho[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),h.push(s)}t.morphAttributes[o]=h}var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){f=0;for(var m=p.length;f!==m;++f){var v=p[f];t.addGroup(v.start,v.count,v.materialIndex)}}var g=e.data.boundingSphere;if(void 0!==g){var y=new c;void 0!==g.center&&y.fromArray(g.center),t.boundingSphere=new S(y,g.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var ho={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function fo(e){this.manager=void 0!==e?e:bi,this.resourcePath=""}Object.assign(fo.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,o=void 0===this.path?so(e):this.path;this.resourcePath=this.resourcePath||o;var a=new wi(i.manager);a.setPath(this.path),a.load(e,(function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==r&&r(s),void console.error("THREE:ObjectLoader: Can't parse "+e+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new Ki).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new lo,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Gr[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Gr[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Gr[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Gr[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Gr[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Gr[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Gr[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Gr[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Gr[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Gr[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Gr[s.type]((new Hi[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Gr[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Gr[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,l=s.shapes.length;c<l;c++){var h=t[s.shapes[c]];u.push(h)}a=new Gr[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],c=0,l=s.shapes.length;c<l;c++){h=t[s.shapes[c]];u.push(h)}var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new Hi[f.type]).fromJSON(f)),a=new Gr[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new ao;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=i.parse(l)),u.push(n[l.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=mi.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),o.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new Ti(new yi(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var u=e[a],c=u.url;if(Array.isArray(c)){r[u.uuid]=[];for(var l=0,h=c.length;l<h;l++){var f=c[l],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;r[u.uuid].push(i(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url;r[u.uuid]=i(d)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Pe(t[s.image]):new d(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,mo)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],vo),a.wrapT=n(s.wrap[1],vo)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,go)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,go)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var o=e[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(n[o])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new x,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new A(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new dn(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new fn(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new oe(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new to(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new io(e.color,e.intensity);break;case"DirectionalLight":r=new ro(e.color,e.intensity);break;case"PointLight":r=new eo(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new oo(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new $i(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Qi(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);r=a.bones&&a.bones.length>0?new bn(a,s):new Q(a,s),void 0!==e.drawMode&&r.setDrawMode(e.drawMode);break;case"LOD":r=new yn;break;case"Line":r=new Tn(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":r=new En(i(e.geometry),o(e.material));break;case"LineSegments":r=new Sn(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":r=new Cn(i(e.geometry),o(e.material));break;case"Sprite":r=new gn(o(e.material));break;case"Group":r=new nn;break;default:r=new w}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,c=0;c<u.length;c++)r.add(this.parseObject(u[c],t,n));if("LOD"===e.type)for(var l=e.levels,h=0;h<l.length;h++){var f=l[h],d=r.getObjectByProperty("uuid",f.object);void 0!==d&&r.addLevel(d,f.distance)}return r}});var po,mo={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},vo={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},go={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};function yo(e){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:bi,this.options=void 0}function bo(){this.type="ShapePath",this.color=new A,this.subPaths=[],this.currentPath=null}function _o(e){this.type="Font",this.data=e}function wo(e,t,n,r,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,u,c,l,h,f,d,p=new bo;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":a=m[v++]*t+n,s=m[v++]*t+r,p.moveTo(a,s);break;case"l":a=m[v++]*t+n,s=m[v++]*t+r,p.lineTo(a,s);break;case"q":u=m[v++]*t+n,c=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,p.quadraticCurveTo(l,h,u,c);break;case"b":u=m[v++]*t+n,c=m[v++]*t+r,l=m[v++]*t+n,h=m[v++]*t+r,f=m[v++]*t+n,d=m[v++]*t+r,p.bezierCurveTo(l,h,f,d,u,c)}}return{offsetX:o.ha*t,path:p}}}function xo(){}yo.prototype={constructor:yo,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=gi.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(n){gi.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(bo.prototype,{moveTo:function(e,t){this.currentPath=new Yi,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,o){this.currentPath.bezierCurveTo(e,t,n,r,i,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],o=new Ki;o.curves=i.curves,t.push(o)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=t[i],s=t[o],u=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=t[o],u=-u,s=t[i],c=-c),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var l=c*(e.x-a.x)-u*(e.y-a.y);if(0===l)return!0;if(l<0)continue;r=!r}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return r}var i=br.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);var a,s,u,c=[];if(1===o.length)return s=o[0],(u=new Ki).curves=s.curves,c.push(u),c;var l=!i(o[0].getPoints());l=e?!l:l;var h,f,d=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=e?!a:a)?(!l&&p[v]&&v++,p[v]={s:new Ki,p:h},p[v].s.curves=s.curves,l&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!p[0])return n(o);if(p.length>1){for(var b=!1,_=[],w=0,x=p.length;w<x;w++)d[w]=[];for(w=0,x=p.length;w<x;w++)for(var T=m[w],S=0;S<T.length;S++){for(var E=T[S],M=!0,C=0;C<p.length;C++)r(E.p,p[C].p)&&(w!==C&&_.push({froms:w,tos:C,hole:S}),M?(M=!1,d[C].push(E)):b=!0);M&&d[w].push(E)}_.length>0&&(b||(m=d))}g=0;for(var A=p.length;g<A;g++){u=p[g].s,c.push(u);for(var P=0,O=(f=m[g]).length;P<O;P++)u.holes.push(f[P].h)}return c}}),Object.assign(_o.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,c=0;c<r.length;c++){var l=r[c];if("\n"===l)s=0,u-=o;else{var h=wo(l,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(function(e){this.manager=void 0!==e?e:bi}.prototype,{load:function(e,t,n,r){var i=this,o=new wi(this.manager);o.setPath(this.path),o.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new _o(e)},setPath:function(e){return this.path=e,this}}),xo.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],o=t[n+1];if(i.test(e))return o}return null}},Object.assign(xo.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:function(){var e={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},t=new A,n=new Ei,r=new ao;return function(i,s,u){var c={};function l(e,t,r,i,o){var l,h=s+e,f=xo.Handlers.get(h);null!==f?l=f.load(h):(n.setCrossOrigin(u),l=n.load(h)),void 0!==t&&(l.repeat.fromArray(t),1!==t[0]&&(l.wrapS=1e3),1!==t[1]&&(l.wrapT=1e3)),void 0!==r&&l.offset.fromArray(r),void 0!==i&&("repeat"===i[0]&&(l.wrapS=1e3),"mirror"===i[0]&&(l.wrapS=1002),"repeat"===i[1]&&(l.wrapT=1e3),"mirror"===i[1]&&(l.wrapT=1002)),void 0!==o&&(l.anisotropy=o);var d=a.generateUUID();return c[d]=l,d}var h={uuid:a.generateUUID(),type:"MeshLambertMaterial"};for(var f in i){var d=i[f];switch(f){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":h.name=d;break;case"blending":h.blending=e[d];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",f,"is no longer supported.");break;case"colorDiffuse":h.color=t.fromArray(d).getHex();break;case"colorSpecular":h.specular=t.fromArray(d).getHex();break;case"colorEmissive":h.emissive=t.fromArray(d).getHex();break;case"specularCoef":h.shininess=d;break;case"shading":"basic"===d.toLowerCase()&&(h.type="MeshBasicMaterial"),"phong"===d.toLowerCase()&&(h.type="MeshPhongMaterial"),"standard"===d.toLowerCase()&&(h.type="MeshStandardMaterial");break;case"mapDiffuse":h.map=l(d,i.mapDiffuseRepeat,i.mapDiffuseOffset,i.mapDiffuseWrap,i.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":h.emissiveMap=l(d,i.mapEmissiveRepeat,i.mapEmissiveOffset,i.mapEmissiveWrap,i.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":h.lightMap=l(d,i.mapLightRepeat,i.mapLightOffset,i.mapLightWrap,i.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":h.aoMap=l(d,i.mapAORepeat,i.mapAOOffset,i.mapAOWrap,i.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":h.bumpMap=l(d,i.mapBumpRepeat,i.mapBumpOffset,i.mapBumpWrap,i.mapBumpAnisotropy);break;case"mapBumpScale":h.bumpScale=d;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":h.normalMap=l(d,i.mapNormalRepeat,i.mapNormalOffset,i.mapNormalWrap,i.mapNormalAnisotropy);break;case"mapNormalFactor":h.normalScale=d;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":h.specularMap=l(d,i.mapSpecularRepeat,i.mapSpecularOffset,i.mapSpecularWrap,i.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":h.metalnessMap=l(d,i.mapMetalnessRepeat,i.mapMetalnessOffset,i.mapMetalnessWrap,i.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":h.roughnessMap=l(d,i.mapRoughnessRepeat,i.mapRoughnessOffset,i.mapRoughnessWrap,i.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":h.alphaMap=l(d,i.mapAlphaRepeat,i.mapAlphaOffset,i.mapAlphaWrap,i.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":h.side=1;break;case"doubleSided":h.side=o;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),h.opacity=d;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":h[f]=d;break;case"vertexColors":!0===d&&(h.vertexColors=2),"face"===d&&(h.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",f,d)}}return"MeshBasicMaterial"===h.type&&delete h.emissive,"MeshPhongMaterial"!==h.type&&delete h.specular,h.opacity<1&&(h.transparent=!0),r.setTextures(c),r.parse(h)}}()});var To=function(){return void 0===po&&(po=new(window.AudioContext||window.webkitAudioContext)),po};function So(e){this.manager=void 0!==e?e:bi}function Eo(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new c)}function Mo(e,t){Xi.call(this,void 0,t),this.sh=void 0!==e?e:new Eo}function Co(e,t,n){Mo.call(this,void 0,n);var r=(new A).set(e),i=(new A).set(t),o=new c(r.r,r.g,r.b),a=new c(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function Ao(e,t){Mo.call(this,void 0,t);var n=(new A).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Po(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Oo(){w.call(this),this.type="AudioListener",this.context=To(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function ko(e){w.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Io(e){ko.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Ro(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Do(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(So.prototype,{load:function(e,t,n,r){var i=new wi(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,(function(e){var n=e.slice(0);To().decodeAudioData(n,(function(e){t(e)}))}),n,r)},setPath:function(e){return this.path=e,this}}),Object.assign(Eo.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*r),t.addScale(o[2],.488603*i),t.addScale(o[3],.488603*n),t.addScale(o[4],n*r*1.092548),t.addScale(o[5],r*i*1.092548),t.addScale(o[6],.315392*(3*i*i-1)),t.addScale(o[7],n*i*1.092548),t.addScale(o[8],.546274*(n*n-r*r)),t},getIrradianceAt:function(e,t){var n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*r),t.addScale(o[2],1.023328*i),t.addScale(o[3],1.023328*n),t.addScale(o[4],.858086*n*r),t.addScale(o[5],.858086*r*i),t.addScale(o[6],.743125*i*i-.247708),t.addScale(o[7],.858086*n*i),t.addScale(o[8],.429043*(n*n-r*r)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e){for(var t=this.coefficients,n=0;n<9;n++)t[n].fromArray(e,3*n);return this},toArray:function(){for(var e=[],t=this.coefficients,n=0;n<9;n++)t[n].toArray(e,3*n);return e}}),Object.assign(Eo,{getBasisAt:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}),Mo.prototype=Object.assign(Object.create(Xi.prototype),{constructor:Mo,isLightProbe:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return Xi.prototype.toJSON.call(this,e)}}),Co.prototype=Object.assign(Object.create(Mo.prototype),{constructor:Co,isHemisphereLightProbe:!0,copy:function(e){return Mo.prototype.copy.call(this,e),this},toJSON:function(e){return Mo.prototype.toJSON.call(this,e)}}),Ao.prototype=Object.assign(Object.create(Mo.prototype),{constructor:Ao,isAmbientLightProbe:!0,copy:function(e){return Mo.prototype.copy.call(this,e),this},toJSON:function(e){return Mo.prototype.toJSON.call(this,e)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new oe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new oe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:function(){var e,t,n,r,i,o,s,u,c=new g,l=new g;return function(h){if(e!==this||t!==h.focus||n!==h.fov||r!==h.aspect*this.aspect||i!==h.near||o!==h.far||s!==h.zoom||u!==this.eyeSep){e=this,t=h.focus,n=h.fov,r=h.aspect*this.aspect,i=h.near,o=h.far,s=h.zoom;var f,d,p=h.projectionMatrix.clone(),m=(u=this.eyeSep/2)*i/t,v=i*Math.tan(a.DEG2RAD*n*.5)/s;l.elements[12]=-u,c.elements[12]=u,f=-v*r+m,d=v*r+m,p.elements[0]=2*i/(d-f),p.elements[8]=(d+f)/(d-f),this.cameraL.projectionMatrix.copy(p),f=-v*r-m,d=v*r-m,p.elements[0]=2*i/(d-f),p.elements[8]=(d+f)/(d-f),this.cameraR.projectionMatrix.copy(p)}this.cameraL.matrixWorld.copy(h.matrixWorld).multiply(l),this.cameraR.matrixWorld.copy(h.matrixWorld).multiply(c)}}()}),Object.assign(Po.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"===typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Oo.prototype=Object.assign(Object.create(w.prototype),{constructor:Oo,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new c,t=new u,n=new c,r=new c,i=new Po;return function(o){w.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),a.positionX){var u=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(e.x,u),a.positionY.linearRampToValueAtTime(e.y,u),a.positionZ.linearRampToValueAtTime(e.z,u),a.forwardX.linearRampToValueAtTime(r.x,u),a.forwardY.linearRampToValueAtTime(r.y,u),a.forwardZ.linearRampToValueAtTime(r.z,u),a.upX.linearRampToValueAtTime(s.x,u),a.upY.linearRampToValueAtTime(s.y,u),a.upZ.linearRampToValueAtTime(s.z,u)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),ko.prototype=Object.assign(Object.create(w.prototype),{constructor:ko,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Io.prototype=Object.assign(Object.create(ko.prototype),{constructor:Io,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new c,t=new u,n=new c,r=new c;return function(i){if(w.prototype.updateMatrixWorld.call(this,i),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t);var o=this.panner;if(o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(e.x,a),o.positionY.linearRampToValueAtTime(e.y,a),o.positionZ.linearRampToValueAtTime(e.z,a),o.orientationX.linearRampToValueAtTime(r.x,a),o.orientationY.linearRampToValueAtTime(r.y,a),o.orientationZ.linearRampToValueAtTime(r.z,a)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z)}}}()}),Object.assign(Ro.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Do.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(n,r,a,1-i,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,r){u.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[n+a]*r}}});var Lo,No;function Fo(e,t,n){var r=n||Uo.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Uo(e,t,n){this.path=t,this.parsedPath=n||Uo.parseTrackName(t),this.node=Uo.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function jo(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,o=new Array(i),a={endingStart:2400,endingEnd:2400},s=0;s!==i;++s){var u=r[s].createInterpolant(null);o[s]=u,u.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Bo(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function zo(e){"string"===typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Vo(e,t,n){pn.call(this,e,t),this.meshPerAttribute=n||1}function Wo(e,t){return e.distance-t.distance}function Go(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,o=0,a=i.length;o<a;o++)Go(i[o],t,n,!0)}function Ho(e,t){this.min=void 0!==e?e:new s(1/0,1/0),this.max=void 0!==t?t:new s(-1/0,-1/0)}function qo(e,t){this.start=void 0!==e?e:new c,this.end=void 0!==t?t:new c}function Yo(e){w.call(this),this.material=e,this.render=function(){}}function Ko(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var u=new X,c=new G(2*a*3,3);u.addAttribute("position",c),Sn.call(this,u,new xn({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Xo(e,t){w.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new X,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new G(r,3));var u=new xn({fog:!1});this.cone=new Sn(n,u),this.add(this.cone),this.update()}function Qo(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new X,r=[],i=[],o=new A(0,0,1),a=new A(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.addAttribute("position",new G(r,3)),n.addAttribute("color",new G(i,3));var c=new xn({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});Sn.call(this,n,c),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Jo(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new Pr(t,4,2),i=new L({wireframe:!0,fog:!1});Q.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Zo(e,t){this.type="RectAreaLightHelper",this.light=e,this.color=t;var n=new X;n.addAttribute("position",new G([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();var r=new xn({fog:!1});Tn.call(this,n,r);var i=new X;i.addAttribute("position",new G([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Q(i,new L({side:1,fog:!1}))),this.update()}function $o(e,t,n){w.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Bn(t);r.rotateY(.5*Math.PI),this.material=new L({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.addAttribute("color",new N(o,3)),this.add(new Q(r,this.material)),this.update()}function ea(e,t){this.lightProbe=e,this.size=t;var n={GAMMA_OUTPUT:""},r=new re({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),i=new Pr(1,32,16);Q.call(this,i,r),this.onBeforeRender()}function ta(e,t,n,r){e=e||10,t=t||10,n=new A(void 0!==n?n:4473924),r=new A(void 0!==r?r:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],u=[],c=0,l=0,h=-a;c<=t;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=c===i?n:r;f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3}var d=new X;d.addAttribute("position",new G(s,3)),d.addAttribute("color",new G(u,3));var p=new xn({vertexColors:2});Sn.call(this,d,p)}function na(e,t,n,r,i,o){e=e||10,t=t||16,n=n||8,r=r||64,i=new A(void 0!==i?i:4473924),o=new A(void 0!==o?o:8947848);var a,s,u,c,l,h,f,d=[],p=[];for(c=0;c<=t;c++)u=c/t*(2*Math.PI),a=Math.sin(u)*e,s=Math.cos(u)*e,d.push(0,0,0),d.push(a,0,s),f=1&c?i:o,p.push(f.r,f.g,f.b),p.push(f.r,f.g,f.b);for(c=0;c<=n;c++)for(f=1&c?i:o,h=e-e/n*c,l=0;l<r;l++)u=l/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b),u=(l+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,d.push(a,0,s),p.push(f.r,f.g,f.b);var m=new X;m.addAttribute("position",new G(d,3)),m.addAttribute("color",new G(p,3));var v=new xn({vertexColors:2});Sn.call(this,m,v)}function ra(e,t,n,r){this.audio=e,this.range=t||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=r||2;var i=new X,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));i.addAttribute("position",new N(a,3));var s=new xn({color:65280}),u=new xn({color:16776960});Tn.call(this,i,[u,s]),this.update()}function ia(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,o=void 0!==r?r:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new X,c=new G(2*a*3,3);u.addAttribute("position",c),Sn.call(this,u,new xn({color:i,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function oa(e,t,n){w.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new X;r.addAttribute("position",new G([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new xn({fog:!1});this.lightPlane=new Tn(r,i),this.add(this.lightPlane),(r=new X).addAttribute("position",new G([0,0,0,0,0,1],3)),this.targetLine=new Tn(r,i),this.add(this.targetLine),this.update()}function aa(e){var t=new X,n=new xn({color:16777215,vertexColors:1}),r=[],i=[],o={},a=new A(16755200),s=new A(16711680),u=new A(43775),c=new A(16777215),l=new A(3355443);function h(e,t,n){f(e,n),f(t,n)}function f(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",c),h("p","c",l),h("cn1","cn2",l),h("cn3","cn4",l),h("cf1","cf2",l),h("cf3","cf4",l),t.addAttribute("position",new G(r,3)),t.addAttribute("color",new G(i,3)),Sn.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function sa(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new X;i.setIndex(new N(n,1)),i.addAttribute("position",new N(r,3)),Sn.call(this,i,new xn({color:t})),this.matrixAutoUpdate=!1,this.update()}function ua(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new X;r.setIndex(new N(n,1)),r.addAttribute("position",new G([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Sn.call(this,r,new xn({color:t})),this.geometry.computeBoundingSphere()}function ca(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new X;i.addAttribute("position",new G([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Tn.call(this,i,new xn({color:r}));var o=new X;o.addAttribute("position",new G([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Q(o,new L({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function la(e,t,n,r,i,o){w.call(this),void 0===e&&(e=new c(0,0,1)),void 0===t&&(t=new c(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===Lo&&((Lo=new X).addAttribute("position",new G([0,0,0,0,1,0],3)),(No=new jr(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Tn(Lo,new xn({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Q(No,new L({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}function ha(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new X;n.addAttribute("position",new G(t,3)),n.addAttribute("color",new G([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new xn({vertexColors:2});Sn.call(this,n,r)}Object.assign(Fo.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Uo,{Composite:Fo,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Uo.Composite(e,t,n):new Uo(e,t,n)},sanitizeNodeName:function(){var e=new RegExp("[\\[\\]\\.:\\/]","g");return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^\\[\\]\\.:\\/]",t="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",e),r=/(WCOD+)?/.source.replace("WCOD",t),i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e),a=new RegExp("^"+n+r+i+o+"$"),s=["material","materials","bones"];return function(e){var t=a.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==s.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var o=e(i.children);if(o)return o}return null}(e.children);if(r)return r}return null}}),Object.assign(Uo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Uo.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else{var l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Uo.prototype,{_getValue_unbound:Uo.prototype.getValue,_setValue_unbound:Uo.prototype.setValue}),Object.assign(function(){this.uuid=a.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,c=0,l=arguments.length;c!==l;++c){var h=arguments[c],f=h.uuid,d=r[f];if(void 0===d){d=t++,r[f]=d,e.push(h);for(var p=0,m=s;p!==m;++p)a[p].push(new Uo(h,i[p],o[p]))}else if(d<n){u=e[d];var v=--n,g=e[v];r[g.uuid]=d,e[d]=g,r[f]=v,e[v]=h;for(p=0,m=s;p!==m;++p){var y=a[p],b=y[v],_=y[d];y[d]=b,void 0===_&&(_=new Uo(h,i[p],o[p])),y[v]=_}}else e[d]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,c=n[u];if(void 0!==c&&c>=t){var l=t++,h=e[l];n[h.uuid]=c,e[c]=h,n[u]=l,e[l]=s;for(var f=0,d=i;f!==d;++f){var p=r[f],m=p[l],v=p[c];p[c]=m,p[l]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],c=u.uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var h=--n,f=e[h],d=e[y=--t];r[f.uuid]=l,e[l]=f,r[d.uuid]=h,e[h]=d,e.pop();for(var p=0,m=o;p!==m;++p){var v=(b=i[p])[h],g=b[y];b[l]=v,b[h]=g,b.pop()}}else{var y;r[(d=e[y=--t]).uuid]=l,e[l]=d,e.pop();for(p=0,m=o;p!==m;++p){var b;(b=i[p])[l]=b[y],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(l);for(var h=c,f=s.length;h!==f;++h){var d=s[h];l[h]=new Uo(d,e,t)}return l},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(jo.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,o=i/r,a=r/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*n;if(o<0||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,c=this._propertyBindings,l=0,h=u.length;l!==h;++l)u[l].evaluate(a),c[l].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,o=2202===r;if(0===e)return-1===i?t:o&&1===(1&i)?n-t:t;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var a=Math.floor(t/n);t-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1===(1&i))return n-t}return t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}),Bo.prototype=Object.assign(Object.create(r.prototype),{constructor:Bo,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==i;++l){var h=r[l],f=h.name,d=c[f];if(void 0!==d)o[l]=d;else{if(void 0!==(d=o[l])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}var p=t&&t._propertyBindings[l].binding.parsedPath;++(d=new Do(Uo.create(n,f,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),o[l]=d}a[l].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0===--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],o=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new oi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?mi.findByName(n,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var u=a.actionByRoot[r];if(void 0!==u)return u;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var c=new jo(this,i,t);return this._bindAction(c,s),this._addInactiveAction(c,o,r),c},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"===typeof e?mi.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==n;++a){t[a]._update(r,e,i,o)}var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var c=u._cacheIndex,l=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,t[c]=l,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),zo.prototype.clone=function(){return new zo(void 0===this.value.clone?this.value:this.value.clone())},Vo.prototype=Object.assign(Object.create(pn.prototype),{constructor:Vo,isInstancedInterleavedBuffer:!0,copy:function(e){return pn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(function(e,t,n,r){this.ray=new E(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this._camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this._camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Go(e,this,r,t),r.sort(Wo),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=e.length;i<o;i++)Go(e[i],this,r,t);return r.sort(Wo),r}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(a.clamp(t/this.radius,-1,1))),this}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(Ho.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new s;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new s),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new s),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new s),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new s),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new s;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(qo.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new c),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new c),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new c),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new c,t=new c;return function(n,r){e.subVectors(n,this.start),t.subVectors(this.end,this.start);var i=t.dot(t),o=t.dot(e)/i;return r&&(o=a.clamp(o,0,1)),o}}(),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new c),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Yo.prototype=Object.create(w.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isImmediateRenderObject=!0,Ko.prototype=Object.create(Sn.prototype),Ko.prototype.constructor=Ko,Ko.prototype.update=function(){var e=new c,t=new c,n=new l;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,u=a.faces,c=0,l=0,h=u.length;l<h;l++)for(var f=u[l],d=0,p=f.vertexNormals.length;d<p;d++){var m=s[f[r[d]]],v=f.vertexNormals[d];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(c=0,d=0,p=g.count;d<p;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(i),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(c,e.x,e.y,e.z),c+=1,o.setXYZ(c,t.x,t.y,t.z),c+=1}o.needsUpdate=!0}}(),Xo.prototype=Object.create(w.prototype),Xo.prototype.constructor=Xo,Xo.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Xo.prototype.update=function(){var e=new c;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Qo.prototype=Object.create(Sn.prototype),Qo.prototype.constructor=Qo,Qo.prototype.updateMatrixWorld=function(){var e=new c,t=new g,n=new g;return function(r){var i=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var c=i[s];c.parent&&c.parent.isBone&&(t.multiplyMatrices(n,c.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,c.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(u+1,e.x,e.y,e.z),u+=2)}o.getAttribute("position").needsUpdate=!0,w.prototype.updateMatrixWorld.call(this,r)}}(),Jo.prototype=Object.create(Q.prototype),Jo.prototype.constructor=Jo,Jo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Jo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Zo.prototype=Object.create(Tn.prototype),Zo.prototype.constructor=Zo,Zo.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}},Zo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},$o.prototype=Object.create(w.prototype),$o.prototype.constructor=$o,$o.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},$o.prototype.update=function(){var e=new c,t=new A,n=new A;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=i.count;o<a;o++){var s=o<a/2?t:n;i.setXYZ(o,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),ea.prototype=Object.create(Q.prototype),ea.prototype.constructor=ea,ea.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ea.prototype.onBeforeRender=function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity},ta.prototype=Object.assign(Object.create(Sn.prototype),{constructor:ta,copy:function(e){return Sn.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),na.prototype=Object.create(Sn.prototype),na.prototype.constructor=na,ra.prototype=Object.create(Tn.prototype),ra.prototype.constructor=ra,ra.prototype.update=function(){var e,t,n=this.audio,r=this.range,i=this.divisionsInnerAngle,o=this.divisionsOuterAngle,s=a.degToRad(n.panner.coneInnerAngle),u=a.degToRad(n.panner.coneOuterAngle),c=s/2,l=u/2,h=0,f=0,d=this.geometry,p=d.attributes.position;function m(n,i,o,a){var s=(i-n)/o;for(p.setXYZ(h,0,0,0),f++,e=n;e<i;e+=s)t=h+f,p.setXYZ(t,Math.sin(e)*r,0,Math.cos(e)*r),p.setXYZ(t+1,Math.sin(Math.min(e+s,i))*r,0,Math.cos(Math.min(e+s,i))*r),p.setXYZ(t+2,0,0,0),f+=3;d.addGroup(h,f,a),h+=f,f=0}d.clearGroups(),m(-l,-c,o,0),m(-c,c,i,1),m(c,l,o,0),p.needsUpdate=!0,s===u&&(this.material[0].visible=!1)},ra.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},ia.prototype=Object.create(Sn.prototype),ia.prototype.constructor=ia,ia.prototype.update=function(){var e=new c,t=new c,n=new l;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,u=0,c=0,l=s.length;c<l;c++){var h=s[c],f=h.normal;e.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(r),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),u+=1,i.setXYZ(u,t.x,t.y,t.z),u+=1}i.needsUpdate=!0}}(),oa.prototype=Object.create(w.prototype),oa.prototype.constructor=oa,oa.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},oa.prototype.update=function(){var e=new c,t=new c,n=new c;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=n.length()}}(),aa.prototype=Object.create(Sn.prototype),aa.prototype.constructor=aa,aa.prototype.update=function(){var e,t,n=new c,r=new ie;function i(i,o,a,s){n.set(o,a,s).unproject(r);var u=t[i];if(void 0!==u)for(var c=e.getAttribute("position"),l=0,h=u.length;l<h;l++)c.setXYZ(u[l],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),sa.prototype=Object.create(Sn.prototype),sa.prototype.constructor=sa,sa.prototype.update=function(){var e=new T;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),sa.prototype.setFromObject=function(e){return this.object=e,this.update(),this},sa.prototype.copy=function(e){return Sn.prototype.copy.call(this,e),this.object=e.object,this},sa.prototype.clone=function(){return(new this.constructor).copy(this)},ua.prototype=Object.create(Sn.prototype),ua.prototype.constructor=ua,ua.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),w.prototype.updateMatrixWorld.call(this,e))},ca.prototype=Object.create(Tn.prototype),ca.prototype.constructor=ca,ca.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),w.prototype.updateMatrixWorld.call(this,e)},la.prototype=Object.create(w.prototype),la.prototype.constructor=la,la.prototype.setDirection=function(){var e,t=new c;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(t.set(n.z,0,-n.x).normalize(),e=Math.acos(n.y),this.quaternion.setFromAxisAngle(t,e))}}(),la.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},la.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},la.prototype.copy=function(e){return w.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},la.prototype.clone=function(){return(new this.constructor).copy(this)},ha.prototype=Object.create(Sn.prototype),ha.prototype.constructor=ha;function fa(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Di.call(this,e),this.type="catmullrom"}Mi.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Mi.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(qi.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Z,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new c(i.x,i.y,i.z||0))}return t}}),Object.assign(Yi.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Object.create(Di.prototype),Object.create(Di.prototype),fa.prototype=Object.create(Di.prototype),Object.assign(fa.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),ta.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Qo.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(xo.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),so(e)}}),Object.assign(fo.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(Ho.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(T.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),qo.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(a,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),a.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),a.ceilPowerOfTwo(e)}}),Object.assign(l.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(g.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new c),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)}}),ce.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},u.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(E.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(M.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(M,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),M.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),M.getNormal(e,t,n,r)}}),Object.assign(Ki.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new xr(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Dr(this,e)}}),Object.assign(s.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(c.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(p.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Z.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(w.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(w.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(yn.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(_n.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),bn.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Mi.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),oe.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Xi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(N.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(X.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(X.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Tr.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(zo.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(D.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new A}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Xr.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(re.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(hn.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(hn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Zt.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(se.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(m.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(cn.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),ko.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new So).load(e,(function(e){t.setBuffer(e)})),this},Ro.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ae.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};h.crossOrigin=void 0,h.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ei;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},h.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Si;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},h.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},h.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},function(e,t,n){e.exports=n(320)()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}var o=n(44);function a(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?Object(o.a)(e):t}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(124),a=n(191),s=n(297),u=n(298),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),l=new a.ErrorFactory("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),p=function(){function e(e,t,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e),this.container=new s.ComponentContainer(t.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){d.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var m=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=f[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}u(new s.Component(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},apps:null,SDK_VERSION:"7.6.0",INTERNAL:{registerComponent:u,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){if("serverAuth"===t)return null;return t}}};function i(e){if(e=e||"[DEFAULT]",!a.contains(t,e))throw l.create("no-app",{appName:e});return t[e]}function u(s){var u,c,h=s.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[h])throw l.create("invalid-app-argument",{appName:h});return e[h]()};void 0!==s.serviceProps&&a.deepExtend(f,s.serviceProps),r[h]=f,e.prototype[h]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?e:[])}}try{for(var p=o.__values(Object.keys(t)),m=p.next();!m.done;m=p.next()){var v=m.value;t[v]._addComponent(s)}}catch(g){u={error:g}}finally{try{m&&!m.done&&(c=p.return)&&c.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r)}(p);return t.INTERNAL=o.__assign(o.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),v=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(a.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,e)};var b=m;!function(e,t){e.INTERNAL.registerComponent(new s.Component("platform-logger",(function(e){return new v(e)}),"PRIVATE")),e.registerVersion(h,"0.5.0",t),e.registerVersion("fire-js","")}(b),t.default=b,t.firebase=b},function(e,t,n){"use strict";var r=n(29),i=n(0),o=n.n(i),a=n(3),s=n.n(a),u=s.a.shape({trySubscribe:s.a.func.isRequired,tryUnsubscribe:s.a.func.isRequired,notifyNestedSubs:s.a.func.isRequired,isSubscribed:s.a.func.isRequired}),c=s.a.shape({subscribe:s.a.func.isRequired,dispatch:s.a.func.isRequired,getState:s.a.func.isRequired});o.a.forwardRef;var l=function(e){var t;void 0===e&&(e="store");var n=e+"Subscription",o=function(t){Object(r.a)(a,t);var o=a.prototype;function a(n,r){var i;return(i=t.call(this,n,r)||this)[e]=n.store,i}return o.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},o.render=function(){return i.Children.only(this.props.children)},a}(i.Component);return o.propTypes={store:c.isRequired,children:s.a.element.isRequired},o.childContextTypes=((t={})[e]=c.isRequired,t[n]=u,t),o}();function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var f=n(13),d=n(34),p=n(55),m=n.n(p),v=n(127),g=n.n(v),y=n(125),b={notify:function(){}};var _=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=b}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=function(){var e=[],t=[];return{clear:function(){t=null,e=null},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&null!==e&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=b)},e}(),w="undefined"!==typeof o.a.forwardRef,x=0,T={};function S(){}function E(e,t){var n,o;void 0===t&&(t={});var a=t,s=a.getDisplayName,l=void 0===s?function(e){return"ConnectAdvanced("+e+")"}:s,p=a.methodName,v=void 0===p?"connectAdvanced":p,b=a.renderCountProp,E=void 0===b?void 0:b,M=a.shouldHandleStateChanges,C=void 0===M||M,A=a.storeKey,P=void 0===A?"store":A,O=a.withRef,k=void 0!==O&&O,I=Object(d.a)(a,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),R=P+"Subscription",D=x++,L=((n={})[P]=c,n[R]=u,n),N=((o={})[R]=u,o);return function(t){g()(Object(y.isValidElementType)(t),"You must pass a component to the function returned by "+v+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",o=l(n),a=Object(f.a)({},I,{getDisplayName:l,methodName:v,renderCountProp:E,shouldHandleStateChanges:C,storeKey:P,withRef:k,displayName:o,wrappedComponentName:n,WrappedComponent:t}),s=function(n){function s(e,t){var r;return(r=n.call(this,e,t)||this).version=D,r.state={},r.renderCount=0,r.store=e[P]||t[P],r.propsMode=Boolean(e[P]),r.setWrappedInstance=r.setWrappedInstance.bind(h(h(r))),g()(r.store,'Could not find "'+P+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+P+'" as a prop to "'+o+'".'),r.initSelector(),r.initSubscription(),r}Object(r.a)(s,n);var u=s.prototype;return u.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[R]=t||this.context[R],e},u.componentDidMount=function(){C&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},u.componentWillReceiveProps=function(e){this.selector.run(e)},u.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},u.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=S,this.store=null,this.selector.run=S,this.selector.shouldComponentUpdate=!1},u.getWrappedInstance=function(){return g()(k,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+v+"() call."),this.wrappedInstance},u.setWrappedInstance=function(e){this.wrappedInstance=e},u.initSelector=function(){var t=e(this.store.dispatch,a);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(o){n.shouldComponentUpdate=!0,n.error=o}}};return n}(t,this.store),this.selector.run(this.props)},u.initSubscription=function(){if(C){var e=(this.propsMode?this.props:this.context)[R];this.subscription=new _(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},u.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(T)):this.notifyNestedSubs()},u.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},u.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},u.addExtraProps=function(e){if(!k&&!E&&(!this.propsMode||!this.subscription))return e;var t=Object(f.a)({},e);return k&&(t.ref=this.setWrappedInstance),E&&(t[E]=this.renderCount++),this.propsMode&&this.subscription&&(t[R]=this.subscription),t},u.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(i.createElement)(t,this.addExtraProps(e.props))},s}(i.Component);return w&&(s.prototype.UNSAFE_componentWillReceiveProps=s.prototype.componentWillReceiveProps,delete s.prototype.componentWillReceiveProps),s.WrappedComponent=t,s.displayName=o,s.childContextTypes=N,s.contextTypes=L,s.propTypes=L,m()(s,t)}}var M=Object.prototype.hasOwnProperty;function C(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function A(e,t){if(C(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!M.call(t,n[i])||!C(e[n[i]],t[n[i]]))return!1;return!0}var P=n(28);function O(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function k(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function I(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=k(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=k(i),i=r(t,n)),i},r}}var R=[function(e){return"function"===typeof e?I(e):void 0},function(e){return e?void 0:O((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?O((function(t){return Object(P.b)(e,t)})):void 0}];var D=[function(e){return"function"===typeof e?I(e):void 0},function(e){return e?void 0:O((function(){return{}}))}];function L(e,t,n){return Object(f.a)({},n,e,t)}var N=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var u=e(t,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return L}}];function F(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function U(e,t,n,r,i){var o,a,s,u,c,l=i.areStatesEqual,h=i.areOwnPropsEqual,f=i.areStatePropsEqual,d=!1;function p(i,d){var p=!h(d,a),m=!l(i,o);return o=i,a=d,p&&m?(s=e(o,a),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):p?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(u=t(r,a)),c=n(s,u,a)):m?function(){var t=e(o,a),r=!f(t,s);return s=t,r&&(c=n(s,u,a)),c}():c}return function(i,l){return d?p(i,l):(s=e(o=i,a=l),u=t(r,a),c=n(s,u,a),d=!0,c)}}function j(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Object(d.a)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?U:F)(a,s,u,e,o)}function B(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function z(e,t){return e===t}var V=function(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?E:n,i=t.mapStateToPropsFactories,o=void 0===i?D:i,a=t.mapDispatchToPropsFactories,s=void 0===a?R:a,u=t.mergePropsFactories,c=void 0===u?N:u,l=t.selectorFactory,h=void 0===l?j:l;return function(e,t,n,i){void 0===i&&(i={});var a=i,u=a.pure,l=void 0===u||u,p=a.areStatesEqual,m=void 0===p?z:p,v=a.areOwnPropsEqual,g=void 0===v?A:v,y=a.areStatePropsEqual,b=void 0===y?A:y,_=a.areMergedPropsEqual,w=void 0===_?A:_,x=Object(d.a)(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),T=B(e,o,"mapStateToProps"),S=B(t,s,"mapDispatchToProps"),E=B(n,c,"mergeProps");return r(h,Object(f.a)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:T,initMapDispatchToProps:S,initMergeProps:E,pure:l,areStatesEqual:m,areOwnPropsEqual:g,areStatePropsEqual:b,areMergedPropsEqual:w},x))}}();n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return V}))},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return _}));var r=n(56),i=n(29),o=n(0),a=n.n(o),s=n(37),u=(n(3),n(13)),c=n(34),l=n(36),h=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Object(s.a)(t.props),t}return Object(i.a)(t,e),t.prototype.render=function(){return a.a.createElement(r.c,{history:this.history,children:this.props.children})},t}(a.a.Component);a.a.Component;var f=function(e,t){return"function"===typeof e?e(t):e},d=function(e,t){return"string"===typeof e?Object(s.c)(e,null,null,t):e},p=function(e){return e},m=a.a.forwardRef;"undefined"===typeof m&&(m=p);var v=m((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=Object(c.a)(e,["innerRef","navigate","onClick"]),s=o.target,l=Object(u.a)({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=p!==m&&t||n,a.a.createElement("a",l)}));var g=m((function(e,t){var n=e.component,i=void 0===n?v:n,o=e.replace,s=e.to,h=e.innerRef,g=Object(c.a)(e,["component","replace","to","innerRef"]);return a.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=e.history,r=d(f(s,e.location),e.location),c=r?n.createHref(r):"",v=Object(u.a)({},g,{href:c,navigate:function(){var t=f(s,e.location);(o?n.replace:n.push)(t)}});return p!==m?v.ref=t||h:v.innerRef=h,a.a.createElement(i,v)}))})),y=function(e){return e},b=a.a.forwardRef;"undefined"===typeof b&&(b=y);var _=b((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,o=e.activeClassName,s=void 0===o?"active":o,h=e.activeStyle,p=e.className,m=e.exact,v=e.isActive,_=e.location,w=e.strict,x=e.style,T=e.to,S=e.innerRef,E=Object(c.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return a.a.createElement(r.e.Consumer,null,(function(e){e||Object(l.a)(!1);var n=_||e.location,o=d(f(T,n),n),c=o.pathname,M=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),C=M?Object(r.f)(n.pathname,{path:M,exact:m,strict:w}):null,A=!!(v?v(C,n):C),P=A?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(p,s):p,O=A?Object(u.a)({},x,{},h):x,k=Object(u.a)({"aria-current":A&&i||null,className:P,style:O,to:o},E);return y!==b?k.ref=t||S:k.innerRef=S,a.a.createElement(g,k)}))}))},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){e.exports={default:n(473),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(476),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(265),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,o.default)(t))&&"function"!==typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(501)),i=a(n(505)),o=a(n(265));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(554),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){var r=n(40),i=n(16);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={easeOutFunction:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutFunction:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeOut:function(e,t,n,r){if(r=r||this.easeOutFunction,t&&"[object Array]"===Object.prototype.toString.call(t)){for(var i="",o=0;o<t.length;o++)i&&(i+=","),i+=this.create(e,t[o],n,r);return i}return this.create(e,t,n,r)},create:function(e,t,n,r){return(t=t||"all")+" "+(e=e||"450ms")+" "+(r=r||"linear")+" "+(n=n||"0ms")}}},function(e,t,n){var r=n(199),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.actionsPrefix="@@reactReduxFirebase",i=t.actionTypes={START:r+"/START",SET:r+"/SET",REMOVE:r+"/REMOVE",MERGE:r+"/MERGE",SET_PROFILE:r+"/SET_PROFILE",LOGIN:r+"/LOGIN",LOGOUT:r+"/LOGOUT",LOGIN_ERROR:r+"/LOGIN_ERROR",NO_VALUE:r+"/NO_VALUE",UNAUTHORIZED_ERROR:r+"/UNAUTHORIZED_ERROR",ERROR:r+"/ERROR",CLEAR_ERRORS:r+"/CLEAR_ERRORS",SET_LISTENER:r+"/SET_LISTENER",UNSET_LISTENER:r+"/UNSET_LISTENER",AUTHENTICATION_INIT_STARTED:r+"/AUTHENTICATION_INIT_STARTED",AUTHENTICATION_INIT_FINISHED:r+"/AUTHENTICATION_INIT_FINISHED",SESSION_START:r+"/SESSION_START",SESSION_END:r+"/SESSION_END",FILE_UPLOAD_START:r+"/FILE_UPLOAD_START",FILE_UPLOAD_ERROR:r+"/FILE_UPLOAD_ERROR",FILE_UPLOAD_PROGRESS:r+"/FILE_UPLOAD_PROGRESS",FILE_UPLOAD_COMPLETE:r+"/FILE_UPLOAD_COMPLETE",FILE_DELETE_START:r+"/FILE_DELETE_START",FILE_DELETE_ERROR:r+"/FILE_DELETE_ERROR",FILE_DELETE_COMPLETE:r+"/FILE_DELETE_COMPLETE",AUTH_UPDATE_START:r+"/AUTH_UPDATE_START",AUTH_UPDATE_SUCCESS:r+"/AUTH_UPDATE_SUCCESS",AUTH_UPDATE_ERROR:r+"/AUTH_UPDATE_ERROR",PROFILE_UPDATE_START:r+"/PROFILE_UPDATE_START",PROFILE_UPDATE_SUCCESS:r+"/PROFILE_UPDATE_SUCCESS",PROFILE_UPDATE_ERROR:r+"/PROFILE_UPDATE_ERROR",EMAIL_UPDATE_START:r+"/EMAIL_UPDATE_START",EMAIL_UPDATE_SUCCESS:r+"/EMAIL_UPDATE_SUCCESS",EMAIL_UPDATE_ERROR:r+"/EMAIL_UPDATE_ERROR",AUTH_RELOAD_START:r+"/AUTH_RELOAD_START",AUTH_RELOAD_ERROR:r+"/AUTH_RELOAD_ERROR",AUTH_RELOAD_SUCCESS:r+"/AUTH_RELOAD_SUCCESS",AUTH_LINK_START:r+"/AUTH_LINK_START",AUTH_LINK_ERROR:r+"/AUTH_LINK_ERROR",AUTH_LINK_SUCCESS:r+"/AUTH_LINK_SUCCESS",AUTH_EMPTY_CHANGE:r+"/AUTH_EMPTY_CHANGE"},o=t.defaultConfig={userProfile:null,presence:null,sessions:"sessions",enableLogging:!1,logErrors:!0,preserveOnLogout:null,preserveOnEmptyAuthChange:null,resetBeforeLogin:!0,updateProfileOnLogin:!0,enableRedirectHandling:!0,autoPopulateProfile:!1,setProfilePopulateResults:!1,dispatchOnUnsetListener:!0,dispatchRemoveAction:!1,enableEmptyAuthChanges:!0,firebaseStateName:"firebase",attachAuthIsReady:!1,keysToRemoveFromAuth:["appName","apiKey","authDomain","redirectEventId","stsTokenManager","uid"],keysToPreserveFromProviderData:["email","phoneNumber","photoURL","providerId","uid"]};t.supportedAuthProviders=["google","github","twitter","facebook"],t.topLevelPaths=["auth","profile","ordered","data"],t.v3ErrorMessage="Context from react-redux not found. If you are using react-redux v6 a v3.*.* version of react-redux-firebase is required. Please checkout the v3 migration guide: http://bit.ly/2SRNdiO";t.default={actionTypes:i,defaultConfig:o}},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return s}));var r=n(194),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function a(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e,t,n){var i;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error("Expected the enhancer to be a function.");return n(s)(e,t)}if("function"!==typeof e)throw new Error("Expected the reducer to be a function.");var u=e,c=t,l=[],h=l,f=!1;function d(){h===l&&(h=l.slice())}function p(){if(f)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function m(e){if("function"!==typeof e)throw new Error("Expected the listener to be a function.");if(f)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return d(),h.push(e),function(){if(t){if(f)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,d();var n=h.indexOf(e);h.splice(n,1),l=null}}}function v(e){if(!a(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(f)throw new Error("Reducers may not dispatch actions.");try{f=!0,c=u(c,e)}finally{f=!1}for(var t=l=h,n=0;n<t.length;n++){(0,t[n])()}return e}function g(e){if("function"!==typeof e)throw new Error("Expected the nextReducer to be a function.");u=e,v({type:o.REPLACE})}function y(){var e,t=m;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e}return v({type:o.INIT}),(i={dispatch:v,subscribe:m,getState:p,replaceReducer:g})[r.a]=y,i}function u(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if("undefined"===typeof n(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(c){a=c}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},o=0;o<s.length;o++){var c=s[o],l=n[c],h=e[c],f=l(h,t);if("undefined"===typeof f){var d=u(c,t);throw new Error(d)}i[c]=f,r=r||f!==h}return(r=r||s.length!==Object.keys(e).length)?i:e}}function l(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"===typeof e)return l(e,t);if("object"!==typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=l(i,t))}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return p({},n,{dispatch:r=m.apply(void 0,o)(n.dispatch)})}}}},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(42);function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){Object(r.a)(e,t,n[t])}))}return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(553),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){var r=n(328),i=n(370),o=n(83),a=n(11),s=n(374);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RadioButtonGroup=t.RadioButton=void 0;var r=o(n(282)),i=o(n(590));function o(e){return e&&e.__esModule?e:{default:e}}t.RadioButton=r.default,t.RadioButtonGroup=i.default,t.default=r.default},function(e,t,n){"use strict";t.a=function(e,t){if(!e)throw new Error("Invariant failed")}},function(e,t,n){"use strict";var r=n(13);function i(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var a=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],a=t&&t.split("/")||[],s=e&&i(e),u=t&&i(t),c=s||u;if(e&&i(e)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var h=0,f=a.length;f>=0;f--){var d=a[f];"."===d?o(a,f):".."===d?(o(a,f),h++):h&&(o(a,f),h--)}if(!c)for(;h--;h)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var p=a.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=s(t),i=s(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1},c=n(36);function l(e){return"/"===e.charAt(0)?e:"/"+e}function h(e){return"/"===e.charAt(0)?e.substr(1):e}function f(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function m(e,t,n,i){var o;"string"===typeof e?(o=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(o=Object(r.a)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function v(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function g(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return M})),n.d(t,"d",(function(){return A})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return p}));var y=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(e,t){t(window.confirm(e))}function _(){try{return window.history.state||{}}catch(e){return{}}}function w(e){void 0===e&&(e={}),y||Object(c.a)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,h=void 0===u?b:u,v=o.keyLength,w=void 0===v?6:v,x=e.basename?d(l(e.basename)):"";function T(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return x&&(o=f(o,x)),m(o,r,n)}function S(){return Math.random().toString(36).substr(2,w)}var E=g();function M(e){Object(r.a)(U,e),U.length=t.length,E.notifyListeners(U.location,U.action)}function C(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||O(T(e.state))}function A(){O(T(_()))}var P=!1;function O(e){if(P)P=!1,M();else{E.confirmTransitionTo(e,"POP",h,(function(t){t?M({action:"POP",location:e}):function(e){var t=U.location,n=I.indexOf(t.key);-1===n&&(n=0);var r=I.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(P=!0,D(i))}(e)}))}}var k=T(_()),I=[k.key];function R(e){return x+p(e)}function D(e){t.go(e)}var L=0;function N(e){1===(L+=e)&&1===e?(window.addEventListener("popstate",C),i&&window.addEventListener("hashchange",A)):0===L&&(window.removeEventListener("popstate",C),i&&window.removeEventListener("hashchange",A))}var F=!1;var U={length:t.length,action:"POP",location:k,createHref:R,push:function(e,r){var i=m(e,r,S(),U.location);E.confirmTransitionTo(i,"PUSH",h,(function(e){if(e){var r=R(i),o=i.key,a=i.state;if(n)if(t.pushState({key:o,state:a},null,r),s)window.location.href=r;else{var u=I.indexOf(U.location.key),c=I.slice(0,u+1);c.push(i.key),I=c,M({action:"PUSH",location:i})}else window.location.href=r}}))},replace:function(e,r){var i=m(e,r,S(),U.location);E.confirmTransitionTo(i,"REPLACE",h,(function(e){if(e){var r=R(i),o=i.key,a=i.state;if(n)if(t.replaceState({key:o,state:a},null,r),s)window.location.replace(r);else{var u=I.indexOf(U.location.key);-1!==u&&(I[u]=i.key),M({action:"REPLACE",location:i})}else window.location.replace(r)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(e){void 0===e&&(e=!1);var t=E.setPrompt(e);return F||(N(1),F=!0),function(){return F&&(F=!1,N(-1)),t()}},listen:function(e){var t=E.appendListener(e);return N(1),function(){N(-1),t()}}};return U}var x={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+h(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:h,decodePath:l},slash:{encodePath:l,decodePath:l}};function T(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function S(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function E(e){window.location.replace(T(window.location.href)+"#"+e)}function M(e){void 0===e&&(e={}),y||Object(c.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,o=void 0===i?b:i,a=n.hashType,s=void 0===a?"slash":a,u=e.basename?d(l(e.basename)):"",h=x[s],v=h.encodePath,_=h.decodePath;function w(){var e=_(S());return u&&(e=f(e,u)),m(e)}var M=g();function C(e){Object(r.a)(j,e),j.length=t.length,M.notifyListeners(j.location,j.action)}var A=!1,P=null;function O(){var e,t,n=S(),r=v(n);if(n!==r)E(r);else{var i=w(),a=j.location;if(!A&&(t=i,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(P===p(i))return;P=null,function(e){if(A)A=!1,C();else{M.confirmTransitionTo(e,"POP",o,(function(t){t?C({action:"POP",location:e}):function(e){var t=j.location,n=D.lastIndexOf(p(t));-1===n&&(n=0);var r=D.lastIndexOf(p(e));-1===r&&(r=0);var i=n-r;i&&(A=!0,L(i))}(e)}))}}(i)}}var k=S(),I=v(k);k!==I&&E(I);var R=w(),D=[p(R)];function L(e){t.go(e)}var N=0;function F(e){1===(N+=e)&&1===e?window.addEventListener("hashchange",O):0===N&&window.removeEventListener("hashchange",O)}var U=!1;var j={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=T(window.location.href)),n+"#"+v(u+p(e))},push:function(e,t){var n=m(e,void 0,void 0,j.location);M.confirmTransitionTo(n,"PUSH",o,(function(e){if(e){var t=p(n),r=v(u+t);if(S()!==r){P=t,function(e){window.location.hash=e}(r);var i=D.lastIndexOf(p(j.location)),o=D.slice(0,i+1);o.push(t),D=o,C({action:"PUSH",location:n})}else C()}}))},replace:function(e,t){var n=m(e,void 0,void 0,j.location);M.confirmTransitionTo(n,"REPLACE",o,(function(e){if(e){var t=p(n),r=v(u+t);S()!==r&&(P=t,E(r));var i=D.indexOf(p(j.location));-1!==i&&(D[i]=t),C({action:"REPLACE",location:n})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=M.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},listen:function(e){var t=M.appendListener(e);return F(1),function(){F(-1),t()}}};return j}function C(e,t,n){return Math.min(Math.max(e,t),n)}function A(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,o=void 0===i?["/"]:i,a=t.initialIndex,s=void 0===a?0:a,u=t.keyLength,c=void 0===u?6:u,l=g();function h(e){Object(r.a)(_,e),_.length=_.entries.length,l.notifyListeners(_.location,_.action)}function f(){return Math.random().toString(36).substr(2,c)}var d=C(s,0,o.length-1),v=o.map((function(e){return m(e,void 0,"string"===typeof e?f():e.key||f())})),y=p;function b(e){var t=C(_.index+e,0,_.entries.length-1),r=_.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?h({action:"POP",location:r,index:t}):h()}))}var _={length:v.length,action:"POP",location:v[d],index:d,entries:v,createHref:y,push:function(e,t){var r=m(e,t,f(),_.location);l.confirmTransitionTo(r,"PUSH",n,(function(e){if(e){var t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),h({action:"PUSH",location:r,index:t,entries:n})}}))},replace:function(e,t){var r=m(e,t,f(),_.location);l.confirmTransitionTo(r,"REPLACE",n,(function(e){e&&(_.entries[_.index]=r,h({action:"REPLACE",location:r}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return _}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.actionsPrefix="@@reduxFirestore",i=t.actionTypes={START:r+"/START",ERROR:r+"/ERROR",CLEAR_DATA:r+"/CLEAR_DATA",CLEAR_ERROR:r+"/CLEAR_ERROR",CLEAR_ERRORS:r+"/CLEAR_ERRORS",SET_LISTENER:r+"/SET_LISTENER",UNSET_LISTENER:r+"/UNSET_LISTENER",GET_REQUEST:r+"/GET_REQUEST",GET_SUCCESS:r+"/GET_SUCCESS",GET_FAILURE:r+"/GET_FAILURE",SET_REQUEST:r+"/SET_REQUEST",SET_SUCCESS:r+"/SET_SUCCESS",SET_FAILURE:r+"/SET_FAILURE",ADD_REQUEST:r+"/ADD_REQUEST",ADD_SUCCESS:r+"/ADD_SUCCESS",ADD_FAILURE:r+"/ADD_FAILURE",UPDATE_REQUEST:r+"/UPDATE_REQUEST",UPDATE_SUCCESS:r+"/UPDATE_SUCCESS",UPDATE_FAILURE:r+"/UPDATE_FAILURE",DELETE_REQUEST:r+"/DELETE_REQUEST",DELETE_SUCCESS:r+"/DELETE_SUCCESS",DELETE_FAILURE:r+"/DELETE_FAILURE",ATTACH_LISTENER:r+"/ATTACH_LISTENER",LISTENER_RESPONSE:r+"/LISTENER_RESPONSE",LISTENER_ERROR:r+"/LISTENER_ERROR",ON_SNAPSHOT_REQUEST:r+"/ON_SNAPSHOT_REQUEST",ON_SNAPSHOT_SUCCESS:r+"/ON_SNAPSHOT_SUCCESS",ON_SNAPSHOT_FAILURE:r+"/ON_SNAPSHOT_FAILURE",DOCUMENT_ADDED:r+"/DOCUMENT_ADDED",DOCUMENT_MODIFIED:r+"/DOCUMENT_MODIFIED",DOCUMENT_REMOVED:r+"/DOCUMENT_REMOVED",TRANSACTION_START:r+"/TRANSACTION_START",TRANSACTION_SUCCESS:r+"/TRANSACTION_SUCCESS",TRANSACTION_FAILURE:r+"/TRANSACTION_FAILURE"},o=t.defaultConfig={logListenerError:!0,enhancerNamespace:"firestore",helpersNamespace:null,allowMultipleListeners:!1,preserveOnDelete:null,preserveOnListenerError:null,onAttemptCollectionDelete:null,mergeOrdered:!0,mergeOrderedDocUpdates:!0,mergeOrderedCollectionUpdates:!0};t.methodsToAddFromFirestore=["collection","configureClient","doc","batch","disableNetwork","enableNetwork","enablePersistence","ensureClientConfigured","setLogLevel","settings"];t.default={actionsPrefix:r,actionTypes:i,defaultConfig:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(198),o=n(462),a=_(o),s=n(465),u=_(s),c=n(466),l=_(c),h=n(467),f=_(h),d=n(468),p=_(d),m=_(n(469)),v=n(27),g=_(v),y=n(169),b=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(236));function _(e){return e&&e.__esModule?e:{default:e}}t.default=r({firebase:a.default,createFirebaseInstance:i.createFirebaseInstance,firebaseConnect:a.default,createFirebaseConnect:o.createFirebaseConnect,firestoreConnect:u.default,createFirestoreConnect:s.createFirestoreConnect,withFirebase:l.default,createWithFirebase:c.createWithFirebase,withFirestore:f.default,createWithFirestore:h.createWithFirestore,reducer:m.default,firebaseReducer:m.default,firebaseStateReducer:m.default,reduxReactFirebase:p.default,reactReduxFirebase:p.default,reduxFirebase:p.default,constants:g.default,actionTypes:v.actionTypes,getFirebase:d.getFirebase,authIsReady:y.authIsReady,helpers:b},b),e.exports=t.default},function(e,t,n){var r=n(66),i=n(324),o=n(325),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(175)("wks"),i=n(119),o=n(51).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(17)),i=h(n(15)),o=h(n(18)),a=h(n(19)),s=h(n(20)),u=n(0),c=h(n(3)),l=h(n(508));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,s.default)(t,e),(0,o.default)(t,[{key:"getChildContext",value:function(){return{muiTheme:this.props.muiTheme||(0,l.default)()}}},{key:"render",value:function(){return this.props.children}}]),t}(u.Component);f.childContextTypes={muiTheme:c.default.object.isRequired},f.propTypes={},t.default=f},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.makeSelectable=t.ListItem=t.List=void 0;var r=a(n(290)),i=a(n(594)),o=a(n(605));function a(e){return e&&e.__esModule?e:{default:e}}t.List=r.default,t.ListItem=i.default,t.makeSelectable=o.default,t.default=r.default},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}}(),e.exports=n(314)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(23),i=n(140);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){var r=n(82);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},function(e,t,n){var r=n(40),i=n(11),o=n(24);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(51),i=n(33),o=n(176),a=n(72),s=n(64),u=function e(t,n,u){var c,l,h,f=t&e.F,d=t&e.G,p=t&e.S,m=t&e.P,v=t&e.B,g=t&e.W,y=d?i:i[n]||(i[n]={}),b=y.prototype,_=d?r:p?r[n]:(r[n]||{}).prototype;for(c in d&&(u=n),u)(l=!f&&_&&void 0!==_[c])&&s(y,c)||(h=l?_[c]:u[c],y[c]=d&&"function"!=typeof _[c]?u[c]:v&&l?o(h,r):g&&_[c]==h?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[c]=h,t&e.R&&b&&!b[c]&&a(b,c,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(73),i=n(263),o=n(177),a=Object.defineProperty;t.f=n(54)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(75)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";var r=n(125),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(t),m=u(n),v=0;v<a.length;++v){var g=a[v];if(!o[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=f(n,g);try{c(t,g,y)}catch(b){}}}}return t}},function(e,t,n){"use strict";var r=n(29),i=n(0),o=n.n(i),a=n(3),s=n.n(a),u=n(37),c=n(192),l=n.n(c),h=n(305),f=n.n(h);function d(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var p=o.a.createContext||function(e,t){var n,r,o="__create-react-context-"+f()()+"__",a=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=d(t.props.value),t}l()(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(a=i)?0!==o||1/o===1/a:o!==o&&a!==a)?n=0:(n="function"===typeof t?t(r,i):1073741823,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(i.Component);a.childContextTypes=((n={})[o]=s.a.object.isRequired,n);var u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}l()(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return u.contextTypes=((r={})[o]=s.a.object,r),{Provider:a,Consumer:u}},m=n(36),v=n(13),g=n(193),y=n.n(g),b=(n(125),n(34));n(55);n.d(t,"a",(function(){return M})),n.d(t,"b",(function(){return O})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return N})),n.d(t,"e",(function(){return _})),n.d(t,"f",(function(){return P}));var _=function(e){var t=p();return t.displayName=e,t}("Router"),w=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}Object(r.a)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(_.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},t}(o.a.Component);o.a.Component;var x=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(o.a.Component);var T={},S=0;function E(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(T[e])return T[e];var t=y.a.compile(e);return S<1e4&&(T[e]=t,S++),t}(e)(t,{pretty:!0})}function M(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return o.a.createElement(_.Consumer,null,(function(e){e||Object(m.a)(!1);var r=e.history,a=e.staticContext,s=i?r.push:r.replace,c=Object(u.c)(t?"string"===typeof n?E(n,t.params):Object(v.a)({},n,{pathname:E(n.pathname,t.params)}):n);return a?(s(c),null):o.a.createElement(x,{onMount:function(){s(c)},onUpdate:function(e,t){var n=Object(u.c)(t.to);Object(u.f)(n,Object(v.a)({},c,{key:n.key}))||s(c)},to:n})}))}var C={},A=0;function P(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=C[n]||(C[n]={});if(r[e])return r[e];var i=[],o={regexp:y()(e,i,t),keys:i};return A<1e4&&(r[e]=o,A++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],h=u.slice(1),f=e===l;return o&&!f?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:f,params:a.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var O=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(_.Consumer,null,(function(t){t||Object(m.a)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?P(n.pathname,e.props):t.match,i=Object(v.a)({},t,{location:n,match:r}),a=e.props,s=a.children,u=a.component,c=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(_.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:u?o.a.createElement(u,i):c?c(i):null:"function"===typeof s?s(i):null)}))},t}(o.a.Component);function k(e){return"/"===e.charAt(0)?e:"/"+e}function I(e,t){if(!e)return t;var n=k(e);return 0!==t.pathname.indexOf(n)?t:Object(v.a)({},t,{pathname:t.pathname.substr(n.length)})}function R(e){return"string"===typeof e?e:Object(u.e)(e)}function D(e){return function(){Object(m.a)(!1)}}function L(){}o.a.Component;var N=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return o.a.createElement(_.Consumer,null,(function(t){t||Object(m.a)(!1);var n,r,i=e.props.location||t.location;return o.a.Children.forEach(e.props.children,(function(e){if(null==r&&o.a.isValidElement(e)){n=e;var a=e.props.path||e.props.from;r=a?P(i.pathname,Object(v.a)({},e.props,{path:a})):t.match}})),r?o.a.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(o.a.Component);o.a.useContext},function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}n.d(t,"a",(function(){return r}))},function(e,t,n){var r=n(340),i=n(343);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(106);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t,n){var r=n(11),i=n(143),o=n(213),a=n(61);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t,n){var r=n(144);e.exports=function(e){return null==e?"":r(e)}},function(e,t,n){var r=n(219),i=n(381)(r);e.exports=i},function(e,t,n){var r=n(109),i=n(86);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):r(n,c,l)}return n}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){var r=n(26).Symbol;e.exports=r},function(e,t,n){var r=n(207),i=n(142),o=n(48);e.exports=function(e){return o(e)?r(e):i(e)}},function(e,t){var n=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(367),i=n(130),o=n(368),a=n(209),s=n(210),u=n(40),c=n(200),l=c(r),h=c(i),f=c(o),d=c(a),p=c(s),m=u;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||o&&"[object Promise]"!=m(o.resolve())||a&&"[object Set]"!=m(new a)||s&&"[object WeakMap]"!=m(new s))&&(m=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return t}),e.exports=m},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(173);e.exports=function(e){return Object(r(e))}},function(e,t,n){var r=n(53),i=n(92);e.exports=n(54)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(74);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var r=n(270),i=n(173);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n)return[e,t];return e},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(614)),i=l(n(255)),o=l(n(112)),a=l(n(11)),s=l(n(254)),u=l(n(23)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function l(e){return e&&e.__esModule?e:{default:e}}function h(e){return e?e.split(/\//).filter((function(e){return!!e})):[]}t.pathToArr=h,t.getSlashStrPath=function(e){return(0,r.default)((0,i.default)(e,/[.]/g,"/"),"/")},t.getDotStrPath=function(e){return h(e).join(".")},t.combineReducers=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return Object.keys(e).reduce((function(r,i){return r[i]=e[i](t[i],n),r}),{})}},t.pathFromMeta=function e(t){if(!t)throw new Error("Action meta is required to build path for reducers.");var n=t.collection,r=t.doc,i=t.subcollections,o=t.storeAs;if(o)return r?o+"."+r:o;if(t.path)return t.path.split("/");if(!n)throw new Error("Collection is required to construct reducer path.");var a=n;r&&(a+="."+r);if(!i)return a;var s=i.map(e);return a.concat("."+s.join("."))},t.updateItemInArray=function(e,t,n){var r=!1,i=e.map((function(e){return e&&e.id===t?(r=!0,n(e)):e}));r||i.push(n({id:t}));return i},t.createReducer=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments[1];return t.hasOwnProperty(r.type)?t[r.type](n,r):n}},t.preserveValuesFromState=function(e,t,n){if((0,s.default)(t))return n?c({},e,n):e;if((0,u.default)(t))return t(e,n);if((0,a.default)(t))return(0,o.default)(e,t);throw new Error("Invalid preserve parameter. It must be an Object or an Array.")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToDate=t.wrapDisplayName=t.getDisplayName=t.createCallable=t.getEventsFromInput=void 0;var r,i=n(23),o=(r=i)&&r.__esModule?r:{default:r},a=n(326);Object.defineProperty(t,"getEventsFromInput",{enumerable:!0,get:function(){return a.getEventsFromInput}});t.createCallable=function(e){return(0,o.default)(e)?e:function(){return e}};var s=t.getDisplayName=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":void 0};t.wrapDisplayName=function(e,t){return t+"("+s(e)+")"},t.stringToDate=function(e){try{return new Date(JSON.parse(e))}catch(t){return console.error("Error parsing string to date:",t.message||t),e}}},function(e,t){e.exports=function(e,t){return e===t||e!==e&&t!==t}},function(e,t,n){var r=n(40),i=n(24);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},function(e,t){e.exports=function(e){return e}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(70),i=n(32),o=n(379),a=n(11);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},function(e,t,n){var r=n(222);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(142),i=n(69),o=n(48),a=n(50),s=n(385);e.exports=function(e){if(null==e)return 0;if(o(e))return a(e)?s(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(83),i=n(229),o=n(153);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t){e.exports={}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t,n){var r=n(269),i=n(181);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(558),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_FIRESTORE=t.middleware=t.actionTypes=t.constants=t.getFirestore=t.actions=t.createFirestoreInstance=t.reduxFirestore=t.enhancer=t.firestoreReducer=t.reducer=t.version=void 0;var r=n(606),i=f(r),o=f(n(613)),a=n(294),s=f(n(292)),u=n(38),c=f(u),l=n(629),h=f(l);function f(e){return e&&e.__esModule?e:{default:e}}var d=t.version="0.5.8";t.reducer=o.default,t.firestoreReducer=o.default,t.enhancer=i.default,t.reduxFirestore=i.default,t.createFirestoreInstance=s.default,t.actions=a.firestoreActions,t.getFirestore=r.getFirestore,t.constants=c.default,t.actionTypes=u.actionTypes,t.middleware=h.default,t.CALL_FIRESTORE=l.CALL_FIRESTORE,t.default={version:d,reducer:o.default,firestoreReducer:o.default,enhancer:i.default,reduxFirestore:i.default,createFirestoreInstance:s.default,actions:a.firestoreActions,getFirestore:r.getFirestore,constants:c.default,actionTypes:u.actionTypes,middleware:h.default,CALL_FIRESTORE:l.CALL_FIRESTORE}},function(e,t,n){var r=n(98),i=n(335),o=n(336),a=n(337),s=n(338),u=n(339);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,e.exports=c},function(e,t,n){var r=n(330),i=n(331),o=n(332),a=n(333),s=n(334);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(81);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(58)(Object,"create");e.exports=r},function(e,t,n){var r=n(352);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(363),i=n(24),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){(function(e){var r=n(26),i=n(364),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u}).call(this,n(79)(e))},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(60),i=n(49);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(136),i=n(378);e.exports=function e(t,n,o,a,s){var u=-1,c=t.length;for(o||(o=i),s||(s=[]);++u<c;){var l=t[u];n>0&&o(l)?n>1?e(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promisesForPopulate=t.populateList=t.getPopulateChild=t.getPopulates=t.getPopulateObjs=t.getChildType=t.getPopulateObj=void 0;var r=p(n(146)),i=p(n(148)),o=p(n(221)),a=p(n(110)),s=p(n(59)),u=p(n(85)),c=p(n(16)),l=p(n(23)),h=p(n(11)),f=p(n(50)),d=p(n(223));function p(e){return e&&e.__esModule?e:{default:e}}var m=t.getPopulateObj=function(e){if(!(0,f.default)(e))return e;var t=e.split(":");return{child:t[0],root:t[1]}},v=(t.getChildType=function(e){return(0,f.default)(e)?"string":(0,h.default)(e)?"array":(0,c.default)(e)?"object":"other"},t.getPopulateObjs=function(e){return(0,h.default)(e)?e.map((function(e){return(0,c.default)(e)?e:m(e)})):e}),g=(t.getPopulates=function(e){var t=(0,d.default)(e,(function(e){return-1!==e.indexOf("populate")||(0,c.default)(e)&&e.populates})).map((function(e){return e.split("=")[1]}));return t.length?t.map(m):null},t.getPopulateChild=function(e,t,n){return e.database().ref().child(t.root+"/"+n).once("value").then((function(e){return e.val()}))}),y=t.populateList=function(e,t,n,r){return r[n.root]||(0,o.default)(r,n.root,{}),Promise.all((0,u.default)(t,(function(t,i){var a=!0===t||n.populateByKey?i:t;return g(e,n,a).then((function(e){return e?(0,o.default)(r,n.root+"."+a,e):r}))})))},b=t.promisesForPopulate=function(e,t,n,u){var d=[],p={},b=v((0,l.default)(u)?u(t,n):u);return(0,r.default)(b,(function(e){return(0,i.default)(n,e.child)}))?(0,a.default)(b,(function(t){return(0,f.default)((0,s.default)(n,t.child))?d.push(g(e,t,(0,s.default)(n,t.child)).then((function(e){e&&(0,o.default)(p,t.root+"."+(0,s.default)(n,t.child),e)}))):d.push(y(e,(0,s.default)(n,t.child),t,p))})):(0,a.default)(n,(function(t,n){var r=m((0,l.default)(u)?u(n,t):u);(0,a.default)(r,(function(n){var r=(0,s.default)(t,n.child);if(r)return(0,f.default)(r)?d.push(g(e,n,r).then((function(e){return e&&(0,o.default)(p,n.root+"."+r,e),p}))):(0,h.default)(r)||(0,c.default)(r)?d.push(y(e,r,n,p)):void 0}))})),Promise.all(d).then((function(){return p}))};t.default={promisesForPopulate:b}},function(e,t,n){var r=n(86),i=n(81),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(111),i=n(62),o=n(384),a=n(11);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(391),i=n(152)((function(e,t){return null==e?{}:r(e,t)}));e.exports=i},function(e,t,n){var r=n(70),i=n(154),o=n(145),a=n(60),s=n(63),u=n(409),c=n(152),l=n(156),h=c((function(e,t){var n={};if(null==e)return n;var c=!1;t=r(t,(function(t){return t=a(t,e),c||(c=t.length>1),t})),s(e,l(e),n),c&&(n=i(n,7,u));for(var h=t.length;h--;)o(n,t[h]);return n}));e.exports=h},function(e,t,n){var r=n(207),i=n(396),o=n(48);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(16),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var r=n(421),i=n(423);e.exports=function(e,t,n){return r(i,e,t,n)}},function(e,t,n){var r=n(115),i=n(16);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),o=e.apply(n,t);return i(o)?o:n}}},function(e,t){e.exports=!0},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertColorToString=a,t.convertHexToRGB=s,t.decomposeColor=u,t.getContrastRatio=function(e,t){var n=c(e),r=c(t),i=(Math.max(n,r)+.05)/(Math.min(n,r)+.05);return Number(i.toFixed(2))},t.getLuminance=c,t.emphasize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return c(e)>.5?l(e,t):h(e,t)},t.fade=function(e,t){e=u(e),t=o(t,0,1),("rgb"===e.type||"hsl"===e.type)&&(e.type+="a");return e.values[3]=t,a(e)},t.darken=l,t.lighten=h;var r,i=n(65);(r=i)&&r.__esModule;function o(e,t,n){return e<t?t:e>n?n:e}function a(e){var t=e.type,n=e.values;if(t.indexOf("rgb")>-1)for(var r=0;r<3;r++)n[r]=parseInt(n[r]);var i=void 0;return i=t.indexOf("hsl")>-1?e.type+"("+n[0]+", "+n[1]+"%, "+n[2]+"%":e.type+"("+n[0]+", "+n[1]+", "+n[2],4===n.length?i+=", "+e.values[3]+")":i+=")",i}function s(e){if(4===e.length){for(var t="#",n=1;n<e.length;n++)t+=e.charAt(n)+e.charAt(n);e=t}return"rgb("+parseInt(e.substr(1,2),16)+", "+parseInt(e.substr(3,2),16)+", "+parseInt(e.substr(5,2),16)+")"}function u(e){if("#"===e.charAt(0))return u(s(e));var t=e.indexOf("("),n=e.substring(0,t),r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function c(e){if((e=u(e)).type.indexOf("rgb")>-1){var t=e.values.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}));return Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}if(e.type.indexOf("hsl")>-1)return e.values[2]/100}function l(e,t){if(e=u(e),t=o(t,0,1),e.type.indexOf("hsl")>-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")>-1)for(var n=0;n<3;n++)e.values[n]*=1-t;return a(e)}function h(e,t){if(e=u(e),t=o(t,0,1),e.type.indexOf("hsl")>-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")>-1)for(var n=0;n<3;n++)e.values[n]+=(255-e.values[n])*t;return a(e)}},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(585)),i=o(n(95));o(n(288)),o(n(289));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return(0,r.default)((function(e,t){return!(0,i.default)(e,t)}))(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(588),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__metadata",(function(){return c})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return h})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return d})),n.d(t,"__read",(function(){return p})),n.d(t,"__spread",(function(){return m})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__await",(function(){return g})),n.d(t,"__asyncGenerator",(function(){return y})),n.d(t,"__asyncDelegator",(function(){return b})),n.d(t,"__asyncValues",(function(){return _})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return x})),n.d(t,"__importDefault",(function(){return T}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof g?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=d(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";e.exports=n(323)},function(e,t,n){(function(e){e.exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e){return void 0===e}function s(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return Tt(e,t,n,r,!0).utc()}function d(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function p(e){if(null==e._isValid){var t=d(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=f(NaN);return null!=e?h(d(t),e):d(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var v=r.momentProperties=[];function g(e,t){var n,r,i;if(a(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),a(t._i)||(e._i=t._i),a(t._f)||(e._f=t._f),a(t._l)||(e._l=t._l),a(t._strict)||(e._strict=t._strict),a(t._tzm)||(e._tzm=t._tzm),a(t._isUTC)||(e._isUTC=t._isUTC),a(t._offset)||(e._offset=t._offset),a(t._pf)||(e._pf=d(t)),a(t._locale)||(e._locale=t._locale),v.length>0)for(n=0;n<v.length;n++)a(i=t[r=v[n]])||(e[r]=i);return e}var y=!1;function b(e){g(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,r.updateOffset(this),y=!1)}function _(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function x(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function T(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&x(e[r])!==x(t[r]))&&a++;return a+o}function S(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function E(e,t){var n=!0;return h((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"===typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}S(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var M,C={};function A(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),C[e]||(S(t),C[e]=!0)}function P(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e,t){var n,r=h({},e);for(n in t)l(t,n)&&(o(e[n])&&o(t[n])?(r[n]={},h(r[n],e[n]),h(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)l(e,n)&&!l(t,n)&&o(e[n])&&(r[n]=h({},r[n]));return r}function k(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,M=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n};var I={};function R(e,t){var n=e.toLowerCase();I[n]=I[n+"s"]=I[t]=e}function D(e){return"string"===typeof e?I[e]||I[e.toLowerCase()]:void 0}function L(e){var t,n,r={};for(n in e)l(e,n)&&(t=D(n))&&(r[t]=e[n]);return r}var N={};function F(e,t){N[e]=t}function U(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var j=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,z={},V={};function W(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(V[e]=i),t&&(V[t[0]]=function(){return U(i.apply(this,arguments),t[1],t[2])}),n&&(V[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function G(e,t){return e.isValid()?(t=H(t,e.localeData()),z[t]=z[t]||function(e){var t,n,r,i=e.match(j);for(t=0,n=i.length;t<n;t++)V[i[t]]?i[t]=V[i[t]]:i[t]=(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,o="";for(r=0;r<n;r++)o+=P(i[r])?i[r].call(t,e):i[r];return o}}(t),z[t](e)):e.localeData().invalidDate()}function H(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(B.lastIndex=0;n>=0&&B.test(e);)e=e.replace(B,r),B.lastIndex=0,n-=1;return e}var q=/\d/,Y=/\d\d/,K=/\d{3}/,X=/\d{4}/,Q=/[+-]?\d{6}/,J=/\d\d?/,Z=/\d\d\d\d?/,$=/\d\d\d\d\d\d?/,ee=/\d{1,3}/,te=/\d{1,4}/,ne=/[+-]?\d{1,6}/,re=/\d+/,ie=/[+-]?\d+/,oe=/Z|[+-]\d\d:?\d\d/gi,ae=/Z|[+-]\d\d(?::?\d\d)?/gi,se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ue={};function ce(e,t,n){ue[e]=P(t)?t:function(e,r){return e&&n?n:t}}function le(e,t){return l(ue,e)?ue[e](t._strict,t._locale):new RegExp(he(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i}))))}function he(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var fe={};function de(e,t){var n,r=t;for("string"===typeof e&&(e=[e]),s(t)&&(r=function(e,n){n[t]=x(e)}),n=0;n<e.length;n++)fe[e[n]]=r}function pe(e,t){de(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function me(e,t,n){null!=t&&l(fe,e)&&fe[e](t,n._a,n,e)}function ve(e){return ge(e)?366:365}function ge(e){return e%4===0&&e%100!==0||e%400===0}W("Y",0,0,(function(){var e=this.year();return e<=9999?""+e:"+"+e})),W(0,["YY",2],0,(function(){return this.year()%100})),W(0,["YYYY",4],0,"year"),W(0,["YYYYY",5],0,"year"),W(0,["YYYYYY",6,!0],0,"year"),R("year","y"),F("year",1),ce("Y",ie),ce("YY",J,Y),ce("YYYY",te,X),ce("YYYYY",ne,Q),ce("YYYYYY",ne,Q),de(["YYYYY","YYYYYY"],0),de("YYYY",(function(e,t){t[0]=2===e.length?r.parseTwoDigitYear(e):x(e)})),de("YY",(function(e,t){t[0]=r.parseTwoDigitYear(e)})),de("Y",(function(e,t){t[0]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return x(e)+(x(e)>68?1900:2e3)};var ye,be=_e("FullYear",!0);function _e(e,t){return function(n){return null!=n?(xe(this,e,n),r.updateOffset(this,t),this):we(this,e)}}function we(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function xe(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ge(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Te(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Te(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,r=(t%(n=12)+n)%n;return e+=(t-r)/12,1===r?ge(e)?29:28:31-r%7%2}ye=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},W("M",["MM",2],"Mo",(function(){return this.month()+1})),W("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),W("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),R("month","M"),F("month",8),ce("M",J),ce("MM",J,Y),ce("MMM",(function(e,t){return t.monthsShortRegex(e)})),ce("MMMM",(function(e,t){return t.monthsRegex(e)})),de(["M","MM"],(function(e,t){t[1]=x(e)-1})),de(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[1]=i:d(n).invalidMonth=e}));var Se=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ee="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Me="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ce(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=ye.call(this._shortMonthsParse,a))?i:null:-1!==(i=ye.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=ye.call(this._shortMonthsParse,a))?i:-1!==(i=ye.call(this._longMonthsParse,a))?i:null:-1!==(i=ye.call(this._longMonthsParse,a))?i:-1!==(i=ye.call(this._shortMonthsParse,a))?i:null}function Ae(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=x(t);else if(!s(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Te(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Pe(e){return null!=e?(Ae(this,e),r.updateOffset(this,!0),this):we(this,"Month")}var Oe=se,ke=se;function Ie(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=he(r[t]),i[t]=he(i[t]);for(t=0;t<24;t++)o[t]=he(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Re(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}function De(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function Le(e,t,n){var r=7+t-n;return-(7+De(e,0,r).getUTCDay()-t)%7+r-1}function Ne(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+Le(e,r,i);return s<=0?a=ve(o=e-1)+s:s>ve(e)?(o=e+1,a=s-ve(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Fe(e,t,n){var r,i,o=Le(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+Ue(i=e.year()-1,t,n):a>Ue(e.year(),t,n)?(r=a-Ue(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Ue(e,t,n){var r=Le(e,t,n),i=Le(e+1,t,n);return(ve(e)-r+i)/7}function je(e,t){return e.slice(t,7).concat(e.slice(0,t))}W("w",["ww",2],"wo","week"),W("W",["WW",2],"Wo","isoWeek"),R("week","w"),R("isoWeek","W"),F("week",5),F("isoWeek",5),ce("w",J),ce("ww",J,Y),ce("W",J),ce("WW",J,Y),pe(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=x(e)})),W("d",0,"do","day"),W("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),W("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),W("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),W("e",0,0,"weekday"),W("E",0,0,"isoWeekday"),R("day","d"),R("weekday","e"),R("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),ce("d",J),ce("e",J),ce("E",J),ce("dd",(function(e,t){return t.weekdaysMinRegex(e)})),ce("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),ce("dddd",(function(e,t){return t.weekdaysRegex(e)})),pe(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:d(n).invalidWeekday=e})),pe(["d","e","E"],(function(e,t,n,r){t[r]=x(e)}));var Be="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ze="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ve="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function We(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=ye.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=ye.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=ye.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=ye.call(this._weekdaysParse,a))?i:-1!==(i=ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=ye.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=ye.call(this._shortWeekdaysParse,a))?i:-1!==(i=ye.call(this._weekdaysParse,a))?i:-1!==(i=ye.call(this._minWeekdaysParse,a))?i:null:-1!==(i=ye.call(this._minWeekdaysParse,a))?i:-1!==(i=ye.call(this._weekdaysParse,a))?i:-1!==(i=ye.call(this._shortWeekdaysParse,a))?i:null}var Ge=se,He=se,qe=se;function Ye(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],c=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),c.push(r),c.push(i),c.push(o);for(a.sort(e),s.sort(e),u.sort(e),c.sort(e),t=0;t<7;t++)s[t]=he(s[t]),u[t]=he(u[t]),c[t]=he(c[t]);this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Ke(){return this.hours()%12||12}function Xe(e,t){W(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function Qe(e,t){return t._meridiemParse}W("H",["HH",2],0,"hour"),W("h",["hh",2],0,Ke),W("k",["kk",2],0,(function(){return this.hours()||24})),W("hmm",0,0,(function(){return""+Ke.apply(this)+U(this.minutes(),2)})),W("hmmss",0,0,(function(){return""+Ke.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)})),W("Hmm",0,0,(function(){return""+this.hours()+U(this.minutes(),2)})),W("Hmmss",0,0,(function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)})),Xe("a",!0),Xe("A",!1),R("hour","h"),F("hour",13),ce("a",Qe),ce("A",Qe),ce("H",J),ce("h",J),ce("k",J),ce("HH",J,Y),ce("hh",J,Y),ce("kk",J,Y),ce("hmm",Z),ce("hmmss",$),ce("Hmm",Z),ce("Hmmss",$),de(["H","HH"],3),de(["k","kk"],(function(e,t,n){var r=x(e);t[3]=24===r?0:r})),de(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),de(["h","hh"],(function(e,t,n){t[3]=x(e),d(n).bigHour=!0})),de("hmm",(function(e,t,n){var r=e.length-2;t[3]=x(e.substr(0,r)),t[4]=x(e.substr(r)),d(n).bigHour=!0})),de("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=x(e.substr(0,r)),t[4]=x(e.substr(r,2)),t[5]=x(e.substr(i)),d(n).bigHour=!0})),de("Hmm",(function(e,t,n){var r=e.length-2;t[3]=x(e.substr(0,r)),t[4]=x(e.substr(r))})),de("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[3]=x(e.substr(0,r)),t[4]=x(e.substr(r,2)),t[5]=x(e.substr(i))}));var Je,Ze=_e("Hours",!0),$e={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ee,monthsShort:Me,week:{dow:0,doy:6},weekdays:Be,weekdaysMin:Ve,weekdaysShort:ze,meridiemParse:/[ap]\.?m?\.?/i},et={},tt={};function nt(e){return e?e.toLowerCase().replace("_","-"):e}function rt(t){var n=null;if(!et[t]&&"undefined"!==typeof e&&e&&e.exports)try{n=Je._abbr,!function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),it(n)}catch(r){}return et[t]}function it(e,t){var n;return e&&((n=a(t)?at(e):ot(e,t))?Je=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Je._abbr}function ot(e,t){if(null!==t){var n,r=$e;if(t.abbr=e,null!=et[e])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=et[e]._config;else if(null!=t.parentLocale)if(null!=et[t.parentLocale])r=et[t.parentLocale]._config;else{if(null==(n=rt(t.parentLocale)))return tt[t.parentLocale]||(tt[t.parentLocale]=[]),tt[t.parentLocale].push({name:e,config:t}),null;r=n._config}return et[e]=new k(O(r,t)),tt[e]&&tt[e].forEach((function(e){ot(e.name,e.config)})),it(e),et[e]}return delete et[e],null}function at(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Je;if(!i(e)){if(t=rt(e))return t;e=[e]}return function(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=nt(e[o]).split("-")).length,n=(n=nt(e[o+1]))?n.split("-"):null;t>0;){if(r=rt(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&T(i,n,!0)>=t-1)break;t--}o++}return Je}(e)}function st(e){var t,n=e._a;return n&&-2===d(e).overflow&&(t=n[1]<0||n[1]>11?1:n[2]<1||n[2]>Te(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,d(e)._overflowDayOfYear&&(t<0||t>2)&&(t=2),d(e)._overflowWeeks&&-1===t&&(t=7),d(e)._overflowWeekday&&-1===t&&(t=8),d(e).overflow=t),e}function ut(e,t,n){return null!=e?e:null!=t?t:n}function ct(e){var t,n,i,o,a,s=[];if(!e._d){for(i=function(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[2]&&null==e._a[1]&&function(e){var t,n,r,i,o,a,s,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,n=ut(t.GG,e._a[0],Fe(St(),1,4).year),r=ut(t.W,1),((i=ut(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var c=Fe(St(),o,a);n=ut(t.gg,e._a[0],c.year),r=ut(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>Ue(n,o,a)?d(e)._overflowWeeks=!0:null!=u?d(e)._overflowWeekday=!0:(s=Ne(n,r,i,o,a),e._a[0]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=ut(e._a[0],i[0]),(e._dayOfYear>ve(a)||0===e._dayOfYear)&&(d(e)._overflowDayOfYear=!0),n=De(a,0,e._dayOfYear),e._a[1]=n.getUTCMonth(),e._a[2]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[3]&&0===e._a[4]&&0===e._a[5]&&0===e._a[6]&&(e._nextDay=!0,e._a[3]=0),e._d=(e._useUTC?De:Re).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[3]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==o&&(d(e).weekdayMismatch=!0)}}var lt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ht=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ft=/Z|[+-]\d\d(?::?\d\d)?/,dt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],pt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],mt=/^\/?Date\((\-?\d+)/i;function vt(e){var t,n,r,i,o,a,s=e._i,u=lt.exec(s)||ht.exec(s);if(u){for(d(e).iso=!0,t=0,n=dt.length;t<n;t++)if(dt[t][1].exec(u[1])){i=dt[t][0],r=!1!==dt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=pt.length;t<n;t++)if(pt[t][1].exec(u[3])){o=(u[2]||" ")+pt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!ft.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),wt(e)}else e._isValid=!1}var gt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function yt(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var bt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _t(e){var t=gt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(t){var n=function(e,t,n,r,i,o){var a=[yt(e),Me.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function(e,t,n){return!e||ze.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(d(n).weekdayMismatch=!0,n._isValid=!1,!1)}(t[1],n,e))return;e._a=n,e._tzm=function(e,t,n){if(e)return bt[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(t[8],t[9],t[10]),e._d=De.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),d(e).rfc2822=!0}else e._isValid=!1}function wt(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],d(e).empty=!0;var t,n,i,o,a,s=""+e._i,u=s.length,c=0;for(i=H(e._f,e._locale).match(j)||[],t=0;t<i.length;t++)o=i[t],(n=(s.match(le(o,e))||[])[0])&&((a=s.substr(0,s.indexOf(n))).length>0&&d(e).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),c+=n.length),V[o]?(n?d(e).empty=!1:d(e).unusedTokens.push(o),me(o,n,e)):e._strict&&!n&&d(e).unusedTokens.push(o);d(e).charsLeftOver=u-c,s.length>0&&d(e).unusedInput.push(s),e._a[3]<=12&&!0===d(e).bigHour&&e._a[3]>0&&(d(e).bigHour=void 0),d(e).parsedDateParts=e._a.slice(0),d(e).meridiem=e._meridiem,e._a[3]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[3],e._meridiem),ct(e),st(e)}else _t(e);else vt(e)}function xt(e){var t=e._i,n=e._f;return e._locale=e._locale||at(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),_(t)?new b(st(t)):(u(t)?e._d=t:i(n)?function(e){var t,n,r,i,o;if(0===e._f.length)return d(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=g({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],wt(t),p(t)&&(o+=d(t).charsLeftOver,o+=10*d(t).unusedTokens.length,d(t).score=o,(null==r||o<r)&&(r=o,n=t));h(e,n||t)}(e):n?wt(e):function(e){var t=e._i;a(t)?e._d=new Date(r.now()):u(t)?e._d=new Date(t.valueOf()):"string"===typeof t?function(e){var t=mt.exec(e._i);null===t?(vt(e),!1===e._isValid&&(delete e._isValid,_t(e),!1===e._isValid&&(delete e._isValid,r.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):i(t)?(e._a=c(t.slice(0),(function(e){return parseInt(e,10)})),ct(e)):o(t)?function(e){if(!e._d){var t=L(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),ct(e)}}(e):s(t)?e._d=new Date(t):r.createFromInputFallback(e)}(e),p(e)||(e._d=null),e))}function Tt(e,t,n,r,a){var s={};return!0!==n&&!1!==n||(r=n,n=void 0),(o(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||i(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=a,s._l=n,s._i=e,s._f=t,s._strict=r,function(e){var t=new b(st(xt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}(s)}function St(e,t,n,r){return Tt(e,t,n,r,!1)}r.createFromInputFallback=E("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Et=E("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()})),Mt=E("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=St.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()}));function Ct(e,t){var n,r;if(1===t.length&&i(t[0])&&(t=t[0]),!t.length)return St();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var At=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Pt(e){var t=L(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===ye.call(At,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<At.length;++r)if(e[At[r]]){if(n)return!1;parseFloat(e[At[r]])!==x(e[At[r]])&&(n=!0)}return!0}(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=at(),this._bubble()}function Ot(e){return e instanceof Pt}function kt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function It(e,t){W(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+U(~~(e/60),2)+t+U(~~e%60,2)}))}It("Z",":"),It("ZZ",""),ce("Z",ae),ce("ZZ",ae),de(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=Dt(ae,e)}));var Rt=/([\+\-]|\d\d)/gi;function Dt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Rt)||["-",0,0],i=60*r[1]+x(r[2]);return 0===i?0:"+"===r[0]?i:-i}function Lt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(_(e)||u(e)?e.valueOf():St(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):St(e).local()}function Nt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ft(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ut=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,jt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Bt(e,t){var n,r,i,o=e,a=null;return Ot(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:s(e)?(o={},t?o[t]=e:o.milliseconds=e):(a=Ut.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:x(a[2])*n,h:x(a[3])*n,m:x(a[4])*n,s:x(a[5])*n,ms:x(kt(1e3*a[6]))*n}):(a=jt.exec(e))?(n="-"===a[1]?-1:1,o={y:zt(a[2],n),M:zt(a[3],n),w:zt(a[4],n),d:zt(a[5],n),h:zt(a[6],n),m:zt(a[7],n),s:zt(a[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=function(e,t){var n;return e.isValid()&&t.isValid()?(t=Lt(t,e),e.isBefore(t)?n=Vt(e,t):((n=Vt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}(St(o.from),St(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new Pt(o),Ot(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Vt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Wt(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(A(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Gt(this,Bt(n="string"===typeof n?+n:n,r),e),this}}function Gt(e,t,n,i){var o=t._milliseconds,a=kt(t._days),s=kt(t._months);e.isValid()&&(i=null==i||i,s&&Ae(e,we(e,"Month")+s*n),a&&xe(e,"Date",we(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,a||s))}Bt.fn=Pt.prototype,Bt.invalid=function(){return Bt(NaN)};var Ht=Wt(1,"add"),qt=Wt(-1,"subtract");function Yt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Kt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=at(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Xt=E("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function Qt(){return this._locale}function Jt(e,t){return(e%t+t)%t}function Zt(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-126227808e5:new Date(e,t,n).valueOf()}function $t(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-126227808e5:Date.UTC(e,t,n)}function en(e,t){W(0,[e,e.length],0,t)}function tn(e,t,n,r,i){var o;return null==e?Fe(this,r,i).year:(t>(o=Ue(e,r,i))&&(t=o),nn.call(this,e,t,n,r,i))}function nn(e,t,n,r,i){var o=Ne(e,t,n,r,i),a=De(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}W(0,["gg",2],0,(function(){return this.weekYear()%100})),W(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),en("gggg","weekYear"),en("ggggg","weekYear"),en("GGGG","isoWeekYear"),en("GGGGG","isoWeekYear"),R("weekYear","gg"),R("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),ce("G",ie),ce("g",ie),ce("GG",J,Y),ce("gg",J,Y),ce("GGGG",te,X),ce("gggg",te,X),ce("GGGGG",ne,Q),ce("ggggg",ne,Q),pe(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=x(e)})),pe(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),W("Q",0,"Qo","quarter"),R("quarter","Q"),F("quarter",7),ce("Q",q),de("Q",(function(e,t){t[1]=3*(x(e)-1)})),W("D",["DD",2],"Do","date"),R("date","D"),F("date",9),ce("D",J),ce("DD",J,Y),ce("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),de(["D","DD"],2),de("Do",(function(e,t){t[2]=x(e.match(J)[0])}));var rn=_e("Date",!0);W("DDD",["DDDD",3],"DDDo","dayOfYear"),R("dayOfYear","DDD"),F("dayOfYear",4),ce("DDD",ee),ce("DDDD",K),de(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=x(e)})),W("m",["mm",2],0,"minute"),R("minute","m"),F("minute",14),ce("m",J),ce("mm",J,Y),de(["m","mm"],4);var on=_e("Minutes",!1);W("s",["ss",2],0,"second"),R("second","s"),F("second",15),ce("s",J),ce("ss",J,Y),de(["s","ss"],5);var an,sn=_e("Seconds",!1);for(W("S",0,0,(function(){return~~(this.millisecond()/100)})),W(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),W(0,["SSS",3],0,"millisecond"),W(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),W(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),W(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),W(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),W(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),W(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),R("millisecond","ms"),F("millisecond",16),ce("S",ee,q),ce("SS",ee,Y),ce("SSS",ee,K),an="SSSS";an.length<=9;an+="S")ce(an,re);function un(e,t){t[6]=x(1e3*("0."+e))}for(an="S";an.length<=9;an+="S")de(an,un);var cn=_e("Milliseconds",!1);W("z",0,0,"zoneAbbr"),W("zz",0,0,"zoneName");var ln=b.prototype;function hn(e){return e}ln.add=Ht,ln.calendar=function(e,t){var n=e||St(),i=Lt(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=t&&(P(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,St(n)))},ln.clone=function(){return new b(this)},ln.diff=function(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=Lt(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=D(t)){case"year":o=Yt(this,r)/12;break;case"month":o=Yt(this,r);break;case"quarter":o=Yt(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:w(o)},ln.endOf=function(e){var t;if(void 0===(e=D(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?$t:Zt;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Jt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Jt(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Jt(t,1e3)-1}return this._d.setTime(t),r.updateOffset(this,!0),this},ln.format=function(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=G(this,e);return this.localeData().postformat(t)},ln.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||St(e).isValid())?Bt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.fromNow=function(e){return this.from(St(),e)},ln.to=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||St(e).isValid())?Bt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},ln.toNow=function(e){return this.to(St(),e)},ln.get=function(e){return P(this[e=D(e)])?this[e]():this},ln.invalidAt=function(){return d(this).overflow},ln.isAfter=function(e,t){var n=_(e)?e:St(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=D(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},ln.isBefore=function(e,t){var n=_(e)?e:St(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=D(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},ln.isBetween=function(e,t,n,r){var i=_(e)?e:St(e),o=_(t)?t:St(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},ln.isSame=function(e,t){var n,r=_(e)?e:St(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=D(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},ln.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},ln.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},ln.isValid=function(){return p(this)},ln.lang=Xt,ln.locale=Kt,ln.localeData=Qt,ln.max=Mt,ln.min=Et,ln.parsingFlags=function(){return h({},d(this))},ln.set=function(e,t){if("object"===typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:N[n]});return t.sort((function(e,t){return e.priority-t.priority})),t}(e=L(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(P(this[e=D(e)]))return this[e](t);return this},ln.startOf=function(e){var t;if(void 0===(e=D(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?$t:Zt;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Jt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Jt(t,6e4);break;case"second":t=this._d.valueOf(),t-=Jt(t,1e3)}return this._d.setTime(t),r.updateOffset(this,!0),this},ln.subtract=qt,ln.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},ln.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},ln.toDate=function(){return new Date(this.valueOf())},ln.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?G(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):P(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",G(n,"Z")):G(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},ln.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=t+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},ln.toJSON=function(){return this.isValid()?this.toISOString():null},ln.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},ln.unix=function(){return Math.floor(this.valueOf()/1e3)},ln.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},ln.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},ln.year=be,ln.isLeapYear=function(){return ge(this.year())},ln.weekYear=function(e){return tn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},ln.isoWeekYear=function(e){return tn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},ln.quarter=ln.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},ln.month=Pe,ln.daysInMonth=function(){return Te(this.year(),this.month())},ln.week=ln.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},ln.isoWeek=ln.isoWeeks=function(e){var t=Fe(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},ln.weeksInYear=function(){var e=this.localeData()._week;return Ue(this.year(),e.dow,e.doy)},ln.isoWeeksInYear=function(){return Ue(this.year(),1,4)},ln.date=rn,ln.day=ln.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},ln.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},ln.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},ln.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},ln.hour=ln.hours=Ze,ln.minute=ln.minutes=on,ln.second=ln.seconds=sn,ln.millisecond=ln.milliseconds=cn,ln.utcOffset=function(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=Dt(ae,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=Nt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?Gt(this,Bt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Nt(this)},ln.utc=function(e){return this.utcOffset(0,e)},ln.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Nt(this),"m")),this},ln.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=Dt(oe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},ln.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?St(e).utcOffset():0,(this.utcOffset()-e)%60===0)},ln.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},ln.isLocal=function(){return!!this.isValid()&&!this._isUTC},ln.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},ln.isUtc=Ft,ln.isUTC=Ft,ln.zoneAbbr=function(){return this._isUTC?"UTC":""},ln.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},ln.dates=E("dates accessor is deprecated. Use date instead.",rn),ln.months=E("months accessor is deprecated. Use month instead",Pe),ln.years=E("years accessor is deprecated. Use year instead",be),ln.zone=E("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()})),ln.isDSTShifted=E("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var e={};if(g(e,this),(e=xt(e))._a){var t=e._isUTC?f(e._a):St(e._a);this._isDSTShifted=this.isValid()&&T(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var fn=k.prototype;function dn(e,t,n,r){var i=at(),o=f().set(r,t);return i[n](o,e)}function pn(e,t,n){if(s(e)&&(t=e,e=void 0),e=e||"",null!=t)return dn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=dn(e,r,n,"month");return i}function mn(e,t,n,r){"boolean"===typeof e?(s(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,s(t)&&(n=t,t=void 0),t=t||"");var i,o=at(),a=e?o._week.dow:0;if(null!=n)return dn(t,(n+a)%7,r,"day");var u=[];for(i=0;i<7;i++)u[i]=dn(t,(i+a)%7,r,"day");return u}fn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return P(r)?r.call(t,n):r},fn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,(function(e){return e.slice(1)})),this._longDateFormat[e])},fn.invalidDate=function(){return this._invalidDate},fn.ordinal=function(e){return this._ordinal.replace("%d",e)},fn.preparse=hn,fn.postformat=hn,fn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return P(i)?i(e,t,n,r):i.replace(/%d/i,e)},fn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return P(n)?n(t):n.replace(/%s/i,t)},fn.set=function(e){var t,n;for(n in e)P(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},fn.months=function(e,t){return e?i(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Se).test(t)?"format":"standalone"][e.month()]:i(this._months)?this._months:this._months.standalone},fn.monthsShort=function(e,t){return e?i(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Se.test(t)?"format":"standalone"][e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},fn.monthsParse=function(e,t,n){var r,i,o;if(this._monthsParseExact)return Ce.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},fn.monthsRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Ie.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=ke),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},fn.monthsShortRegex=function(e){return this._monthsParseExact?(l(this,"_monthsRegex")||Ie.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Oe),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},fn.week=function(e){return Fe(e,this._week.dow,this._week.doy).week},fn.firstDayOfYear=function(){return this._week.doy},fn.firstDayOfWeek=function(){return this._week.dow},fn.weekdays=function(e,t){var n=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?je(n,this._week.dow):e?n[e.day()]:n},fn.weekdaysMin=function(e){return!0===e?je(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},fn.weekdaysShort=function(e){return!0===e?je(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},fn.weekdaysParse=function(e,t,n){var r,i,o;if(this._weekdaysParseExact)return We.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},fn.weekdaysRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ye.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ge),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},fn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ye.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=He),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},fn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ye.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},fn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},fn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},it("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===x(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=E("moment.lang is deprecated. Use moment.locale instead.",it),r.langData=E("moment.langData is deprecated. Use moment.localeData instead.",at);var vn=Math.abs;function gn(e,t,n,r){var i=Bt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function yn(e){return e<0?Math.floor(e):Math.ceil(e)}function bn(e){return 4800*e/146097}function _n(e){return 146097*e/4800}function wn(e){return function(){return this.as(e)}}var xn=wn("ms"),Tn=wn("s"),Sn=wn("m"),En=wn("h"),Mn=wn("d"),Cn=wn("w"),An=wn("M"),Pn=wn("Q"),On=wn("y");function kn(e){return function(){return this.isValid()?this._data[e]:NaN}}var In=kn("milliseconds"),Rn=kn("seconds"),Dn=kn("minutes"),Ln=kn("hours"),Nn=kn("days"),Fn=kn("months"),Un=kn("years"),jn=Math.round,Bn={ss:44,s:45,m:45,h:22,d:26,M:11};function zn(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}var Vn=Math.abs;function Wn(e){return(e>0)-(e<0)||+e}function Gn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Vn(this._milliseconds)/1e3,r=Vn(this._days),i=Vn(this._months);e=w(n/60),t=w(e/60),n%=60,e%=60;var o=w(i/12),a=i%=12,s=r,u=t,c=e,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var f=h<0?"-":"",d=Wn(this._months)!==Wn(h)?"-":"",p=Wn(this._days)!==Wn(h)?"-":"",m=Wn(this._milliseconds)!==Wn(h)?"-":"";return f+"P"+(o?d+o+"Y":"")+(a?d+a+"M":"")+(s?p+s+"D":"")+(u||c||l?"T":"")+(u?m+u+"H":"")+(c?m+c+"M":"")+(l?m+l+"S":"")}var Hn=Pt.prototype;return Hn.isValid=function(){return this._isValid},Hn.abs=function(){var e=this._data;return this._milliseconds=vn(this._milliseconds),this._days=vn(this._days),this._months=vn(this._months),e.milliseconds=vn(e.milliseconds),e.seconds=vn(e.seconds),e.minutes=vn(e.minutes),e.hours=vn(e.hours),e.months=vn(e.months),e.years=vn(e.years),this},Hn.add=function(e,t){return gn(this,e,t,1)},Hn.subtract=function(e,t){return gn(this,e,t,-1)},Hn.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=D(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+bn(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(_n(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},Hn.asMilliseconds=xn,Hn.asSeconds=Tn,Hn.asMinutes=Sn,Hn.asHours=En,Hn.asDays=Mn,Hn.asWeeks=Cn,Hn.asMonths=An,Hn.asQuarters=Pn,Hn.asYears=On,Hn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12):NaN},Hn._bubble=function(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*yn(_n(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=w(o/1e3),u.seconds=e%60,t=w(e/60),u.minutes=t%60,n=w(t/60),u.hours=n%24,a+=w(n/24),i=w(bn(a)),s+=i,a-=yn(_n(i)),r=w(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},Hn.clone=function(){return Bt(this)},Hn.get=function(e){return e=D(e),this.isValid()?this[e+"s"]():NaN},Hn.milliseconds=In,Hn.seconds=Rn,Hn.minutes=Dn,Hn.hours=Ln,Hn.days=Nn,Hn.weeks=function(){return w(this.days()/7)},Hn.months=Fn,Hn.years=Un,Hn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var r=Bt(e).abs(),i=jn(r.as("s")),o=jn(r.as("m")),a=jn(r.as("h")),s=jn(r.as("d")),u=jn(r.as("M")),c=jn(r.as("y")),l=i<=Bn.ss&&["s",i]||i<Bn.s&&["ss",i]||o<=1&&["m"]||o<Bn.m&&["mm",o]||a<=1&&["h"]||a<Bn.h&&["hh",a]||s<=1&&["d"]||s<Bn.d&&["dd",s]||u<=1&&["M"]||u<Bn.M&&["MM",u]||c<=1&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,zn.apply(null,l)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Hn.toISOString=Gn,Hn.toString=Gn,Hn.toJSON=Gn,Hn.locale=Kt,Hn.localeData=Qt,Hn.toIsoString=E("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Gn),Hn.lang=Xt,W("X",0,0,"unix"),W("x",0,0,"valueOf"),ce("x",ie),ce("X",/[+-]?\d+(\.\d{1,3})?/),de("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))})),de("x",(function(e,t,n){n._d=new Date(x(e))})),r.version="2.24.0",t=St,r.fn=ln,r.min=function(){var e=[].slice.call(arguments,0);return Ct("isBefore",e)},r.max=function(){var e=[].slice.call(arguments,0);return Ct("isAfter",e)},r.now=function(){return Date.now?Date.now():+new Date},r.utc=f,r.unix=function(e){return St(1e3*e)},r.months=function(e,t){return pn(e,t,"months")},r.isDate=u,r.locale=it,r.invalid=m,r.duration=Bt,r.isMoment=_,r.weekdays=function(e,t,n){return mn(e,t,n,"weekdays")},r.parseZone=function(){return St.apply(null,arguments).parseZone()},r.localeData=at,r.isDuration=Ot,r.monthsShort=function(e,t){return pn(e,t,"monthsShort")},r.weekdaysMin=function(e,t,n){return mn(e,t,n,"weekdaysMin")},r.defineLocale=ot,r.updateLocale=function(e,t){if(null!=t){var n,r,i=$e;null!=(r=rt(e))&&(i=r._config),t=O(i,t),(n=new k(t)).parentLocale=et[e],et[e]=n,it(e)}else null!=et[e]&&(null!=et[e].parentLocale?et[e]=et[e].parentLocale:null!=et[e]&&delete et[e]);return et[e]},r.locales=function(){return M(et)},r.weekdaysShort=function(e,t,n){return mn(e,t,n,"weekdaysShort")},r.normalizeUnits=D,r.relativeTimeRounding=function(e){return void 0===e?jn:"function"===typeof e&&(jn=e,!0)},r.relativeTimeThreshold=function(e,t){return void 0!==Bn[e]&&(void 0===t?Bn[e]:(Bn[e]=t,"s"===e&&(Bn.ss=t-1),!0))},r.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=ln,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(79)(e))},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";var r,i=(r=n(9))&&"object"===typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.6.1","app"),e.exports=i},,function(e,t,n){var r=n(58)(n(26),"Map");e.exports=r},function(e,t,n){var r=n(344),i=n(351),o=n(353),a=n(354),s=n(355);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(356),i=n(24);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},function(e,t,n){var r=n(131),i=n(357),o=n(358);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(138),i=n(206),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t,n){var r=n(365),i=n(104),o=n(141),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){(function(e){var r=n(199),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s}).call(this,n(79)(e))},function(e,t,n){var r=n(105),i=n(366),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(11),i=n(82),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},function(e,t,n){var r=n(66),i=n(70),o=n(11),a=n(82),s=r?r.prototype:void 0,u=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},function(e,t,n){var r=n(60),i=n(84),o=n(217),a=n(49);e.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},function(e,t,n){var r=n(202),i=n(32),o=n(382),a=n(11),s=n(147);e.exports=function(e,t,n){var u=a(e)?r:o;return n&&s(e,t,n)&&(t=void 0),u(e,i(t,3))}},function(e,t,n){var r=n(81),i=n(48),o=n(68),a=n(16);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(383),i=n(215);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){var r=n(109),i=n(60),o=n(68),a=n(16),s=n(49);e.exports=function(e,t,n,u){if(!a(e))return e;for(var c=-1,l=(t=i(t,e)).length,h=l-1,f=e;null!=f&&++c<l;){var d=s(t[c]),p=n;if(c!=h){var m=f[d];void 0===(p=u?u(m,d,f):void 0)&&(p=a(m)?m:o(t[c+1])?[]:{})}r(f,d,p),f=f[d]}return e}},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t,n){var r=n(86),i=n(219),o=n(32);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},function(e,t,n){var r=n(392),i=n(229),o=n(153);e.exports=function(e){return o(i(e,void 0,r),e+"")}},function(e,t,n){var r=n(393),i=n(230)(r);e.exports=i},function(e,t,n){var r=n(97),i=n(111),o=n(109),a=n(231),s=n(395),u=n(232),c=n(89),l=n(398),h=n(399),f=n(204),d=n(156),p=n(69),m=n(400),v=n(401),g=n(235),y=n(11),b=n(103),_=n(405),w=n(16),x=n(407),T=n(67),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,e.exports=function e(t,n,E,M,C,A){var P,O=1&n,k=2&n,I=4&n;if(E&&(P=C?E(t,M,C,A):E(t)),void 0!==P)return P;if(!w(t))return t;var R=y(t);if(R){if(P=m(t),!O)return c(t,P)}else{var D=p(t),L="[object Function]"==D||"[object GeneratorFunction]"==D;if(b(t))return u(t,O);if("[object Object]"==D||"[object Arguments]"==D||L&&!C){if(P=k||L?{}:g(t),!O)return k?h(t,s(P,t)):l(t,a(P,t))}else{if(!S[D])return C?t:{};P=v(t,D,O)}}A||(A=new r);var N=A.get(t);if(N)return N;A.set(t,P),x(t)?t.forEach((function(r){P.add(e(r,n,E,r,t,A))})):_(t)&&t.forEach((function(r,i){P.set(i,e(r,n,E,i,t,A))}));var F=I?k?d:f:k?keysIn:T,U=R?void 0:F(t);return i(U||t,(function(r,i){U&&(r=t[i=r]),o(P,i,e(r,n,E,i,t,A))})),P}},function(e,t,n){var r=n(208)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(205),i=n(233),o=n(114);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(203);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){var r=n(40),i=n(155),o=n(24),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,l=u.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},function(e,t,n){var r=n(97),i=n(237),o=n(220),a=n(413),s=n(16),u=n(114),c=n(238);e.exports=function e(t,n,l,h,f){t!==n&&o(n,(function(o,u){if(f||(f=new r),s(o))a(t,n,u,l,e,h,f);else{var d=h?h(c(t,u),o,u+"",t,n,f):void 0;void 0===d&&(d=o),i(t,u,d)}}),u)}},function(e,t,n){var r=n(48),i=n(24);e.exports=function(e){return i(e)&&r(e)}},function(e,t,n){var r=n(90),i=n(147);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recursiveUnset=t.preserveValuesFromState=t.combineReducers=void 0;var r=f(n(420)),i=f(n(11)),o=f(n(112)),a=f(n(254)),s=f(n(23)),u=f(n(87)),c=f(n(255)),l=f(n(59)),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return e?e.split(/\//).filter((function(e){return!!e})):[]}t.pathToArr=d,t.getSlashStrPath=function(e){return d(e).join("/")},t.getDotStrPath=function(e){return d(e).join(".")};t.combineReducers=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return Object.keys(e).reduce((function(r,i){return r[i]=e[i](t[i],n),r}),{})}},t.preserveValuesFromState=function(e,t,n){if((0,s.default)(t))return t(e,n);if((0,a.default)(t)&&t)return n?h({},e,n):e;if((0,i.default)(t))return(0,o.default)(e,t);throw new Error("Invalid preserve parameter. It must be an Object or an Array")},t.recursiveUnset=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return n;if((0,u.default)((0,l.default)(n,t))>0&&i)return n;var o=(0,r.default)(t,n),a=t.match(/\./)?(0,c.default)(t,/\.[^.]*$/,""):"";return e(a,o,!0)}},function(e,t,n){var r=n(241),i=n(425),o=n(426),a=n(243),s=n(440),u=n(247),c=n(441),l=n(250),h=n(251),f=n(253),d=Math.max;e.exports=function(e,t,n,p,m,v,g,y){var b=2&t;if(!b&&"function"!=typeof e)throw new TypeError("Expected a function");var _=p?p.length:0;if(_||(t&=-97,p=m=void 0),g=void 0===g?g:d(f(g),0),y=void 0===y?y:f(y),_-=m?m.length:0,64&t){var w=p,x=m;p=m=void 0}var T=b?void 0:u(e),S=[e,t,n,p,m,w,x,v,g,y];if(T&&c(S,T),e=S[0],t=S[1],n=S[2],p=S[3],m=S[4],!(y=S[9]=void 0===S[9]?b?0:e.length:d(S[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)E=8==t||16==t?o(e,t,y):32!=t&&33!=t||m.length?a.apply(void 0,S):s(e,t,n,p);else var E=i(e,t,n);return h((T?r:l)(E,S),e,t)}},function(e,t,n){var r=n(115),i=n(165);function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(167);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(436),i=n(437),o=n(438);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",o[i++]=n)}return o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateProfileOnFirestore=t.updateProfileOnRTDB=t.createAuthIsReady=t.authIsReady=t.getLoginMethodAndParams=void 0;var r=u(n(23)),i=u(n(50)),o=u(n(11)),a=u(n(452));t.setupPresence=function(e,t){if(!t.database||!t.database.ServerValue)return;var n=t.database().ref(),i=t._,o=i.config,a=o.presence,u=o.sessions,c=i.authUid,l=n.child(".info/connected"),h=n.child((0,r.default)(a)?a(t.auth().currentUser,t):a).child(c),f=(0,r.default)(u)?u(t.auth().currentUser,t):u;f&&(f=n.child(u));l.on("value",(function(n){if(n.val()){if(f){e({type:s.actionTypes.SESSION_START,payload:c});var i=f.push({startedAt:t.database.ServerValue.TIMESTAMP,user:c});(0,r.default)(i.setPriority)&&i.setPriority(c),i.child("endedAt").onDisconnect().set(t.database.ServerValue.TIMESTAMP,(function(){e({type:s.actionTypes.SESSION_END})}))}h.set(!0),h.onDisconnect().remove()}}))};var s=n(27);function u(e){return e&&e.__esModule?e:{default:e}}t.getLoginMethodAndParams=function(e,t){var n=t.email,u=t.password,c=t.provider,l=t.type,h=t.token,f=t.scopes,d=t.phoneNumber,p=t.applicationVerifier,m=t.credential;if(m)return e.auth().signInAndRetrieveDataWithCredential?{method:"signInAndRetrieveDataWithCredential",params:[m]}:{method:"signInWithCredential",params:[m]};if(c){if(-1===s.supportedAuthProviders.indexOf(c.toLowerCase()))throw new Error(c+" is not a valid Auth Provider");if(h)throw new Error("provider with token no longer supported, use credential parameter instead");var v=function(e,t,n){var s=(0,a.default)(t)+"AuthProvider";if(!e.auth[s])throw new Error(t+" is not a valid auth provider for your firebase instance. If using react-native, use a RN specific auth library.");var u=new e.auth[s],c=e._.config.customAuthParameters;return c&&c[t]&&u.setCustomParameters(c[t]),"twitter"!==t.toLowerCase()&&(0,r.default)(u.addScope)?(u.addScope("email"),n&&((0,o.default)(n)&&n.forEach((function(e){u.addScope(e)})),(0,i.default)(n)&&u.addScope(n)),u):u}(e,c,f);return"popup"===l?{method:"signInWithPopup",params:[v]}:{method:"signInWithRedirect",params:[v]}}if(h)return e.auth().signInAndRetrieveDataWithCustomToken?{method:"signInAndRetrieveDataWithCustomToken",params:[h]}:{method:"signInWithCustomToken",params:[h]};if(d){if(!p)throw new Error("Application verifier is required for phone authentication");return{method:"signInWithPhoneNumber",params:[d,p]}}return e.auth().signInWithEmailAndPassword?{method:"signInWithEmailAndPassword",params:[n,u]}:{method:"signInAndRetrieveDataWithEmailAndPassword",params:[n,u]}};var c=function(e,t){var n=e.getState(),r=t?n[t]:n;if(!(r&&r.auth))throw new Error("The Firebase auth state could not be found in the store under the attribute '"+(t?t+".":"")+"auth'. Make sure your react-redux-firebase reducer is correctly set in the store");return r.auth.isLoaded},l=t.authIsReady=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"firebase";return new Promise((function(n){if(c(e,t))n();else var r=e.subscribe((function(){c(e,t)&&(r(),n())}))}))};t.createAuthIsReady=function(e,t){return(0,r.default)(t.authIsReady)?t.authIsReady(e,t):l(e,t.firebaseStateName)},t.updateProfileOnRTDB=function(e,t){var n=e.database,r=e._,i=r.config,o=r.authUid,a=n().ref(i.userProfile+"/"+o);return a.update(t).then((function(){return a.once("value")}))},t.updateProfileOnFirestore=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.useSet,i=void 0===r||r,o=n.merge,a=void 0===o||o,s=e.firestore,u=e._,c=u.config,l=u.authUid,h=s().doc(c.userProfile+"/"+l),f=i?h.set(t,{merge:a}):h.update(t);return f.then((function(){return h.get()}))}},function(e,t,n){var r=n(218);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},function(e,t,n){var r=n(455),i=n(150),o=n(456);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){var r=n(132);e.exports=function(e,t){return r(e,t)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(175)("keys"),i=n(119);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(33),i=n(51),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(118)?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(475);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(74);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(73),i=n(483),o=n(181),a=n(174)("IE_PROTO"),s=function(){},u=function(){var e,t=n(264)("iframe"),r=o.length;for(t.style.display="none",n(486).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(53).f,i=n(64),o=n(41)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){t.f=n(41)},function(e,t,n){var r=n(51),i=n(33),o=n(118),a=n(183),s=n(53).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.red50="#ffebee",t.red100="#ffcdd2",t.red200="#ef9a9a",t.red300="#e57373",t.red400="#ef5350",t.red500="#f44336",t.red600="#e53935",t.red700="#d32f2f",t.red800="#c62828",t.red900="#b71c1c",t.redA100="#ff8a80",t.redA200="#ff5252",t.redA400="#ff1744",t.redA700="#d50000",t.pink50="#fce4ec",t.pink100="#f8bbd0",t.pink200="#f48fb1",t.pink300="#f06292",t.pink400="#ec407a",t.pink500="#e91e63",t.pink600="#d81b60",t.pink700="#c2185b",t.pink800="#ad1457",t.pink900="#880e4f",t.pinkA100="#ff80ab",t.pinkA200="#ff4081",t.pinkA400="#f50057",t.pinkA700="#c51162",t.purple50="#f3e5f5",t.purple100="#e1bee7",t.purple200="#ce93d8",t.purple300="#ba68c8",t.purple400="#ab47bc",t.purple500="#9c27b0",t.purple600="#8e24aa",t.purple700="#7b1fa2",t.purple800="#6a1b9a",t.purple900="#4a148c",t.purpleA100="#ea80fc",t.purpleA200="#e040fb",t.purpleA400="#d500f9",t.purpleA700="#aa00ff",t.deepPurple50="#ede7f6",t.deepPurple100="#d1c4e9",t.deepPurple200="#b39ddb",t.deepPurple300="#9575cd",t.deepPurple400="#7e57c2",t.deepPurple500="#673ab7",t.deepPurple600="#5e35b1",t.deepPurple700="#512da8",t.deepPurple800="#4527a0",t.deepPurple900="#311b92",t.deepPurpleA100="#b388ff",t.deepPurpleA200="#7c4dff",t.deepPurpleA400="#651fff",t.deepPurpleA700="#6200ea",t.indigo50="#e8eaf6",t.indigo100="#c5cae9",t.indigo200="#9fa8da",t.indigo300="#7986cb",t.indigo400="#5c6bc0",t.indigo500="#3f51b5",t.indigo600="#3949ab",t.indigo700="#303f9f",t.indigo800="#283593",t.indigo900="#1a237e",t.indigoA100="#8c9eff",t.indigoA200="#536dfe",t.indigoA400="#3d5afe",t.indigoA700="#304ffe",t.blue50="#e3f2fd",t.blue100="#bbdefb",t.blue200="#90caf9",t.blue300="#64b5f6",t.blue400="#42a5f5",t.blue500="#2196f3",t.blue600="#1e88e5",t.blue700="#1976d2",t.blue800="#1565c0",t.blue900="#0d47a1",t.blueA100="#82b1ff",t.blueA200="#448aff",t.blueA400="#2979ff",t.blueA700="#2962ff",t.lightBlue50="#e1f5fe",t.lightBlue100="#b3e5fc",t.lightBlue200="#81d4fa",t.lightBlue300="#4fc3f7",t.lightBlue400="#29b6f6",t.lightBlue500="#03a9f4",t.lightBlue600="#039be5",t.lightBlue700="#0288d1",t.lightBlue800="#0277bd",t.lightBlue900="#01579b",t.lightBlueA100="#80d8ff",t.lightBlueA200="#40c4ff",t.lightBlueA400="#00b0ff",t.lightBlueA700="#0091ea",t.cyan50="#e0f7fa",t.cyan100="#b2ebf2",t.cyan200="#80deea",t.cyan300="#4dd0e1",t.cyan400="#26c6da",t.cyan500="#00bcd4",t.cyan600="#00acc1",t.cyan700="#0097a7",t.cyan800="#00838f",t.cyan900="#006064",t.cyanA100="#84ffff",t.cyanA200="#18ffff",t.cyanA400="#00e5ff",t.cyanA700="#00b8d4",t.teal50="#e0f2f1",t.teal100="#b2dfdb",t.teal200="#80cbc4",t.teal300="#4db6ac",t.teal400="#26a69a",t.teal500="#009688",t.teal600="#00897b",t.teal700="#00796b",t.teal800="#00695c",t.teal900="#004d40",t.tealA100="#a7ffeb",t.tealA200="#64ffda",t.tealA400="#1de9b6",t.tealA700="#00bfa5",t.green50="#e8f5e9",t.green100="#c8e6c9",t.green200="#a5d6a7",t.green300="#81c784",t.green400="#66bb6a",t.green500="#4caf50",t.green600="#43a047",t.green700="#388e3c",t.green800="#2e7d32",t.green900="#1b5e20",t.greenA100="#b9f6ca",t.greenA200="#69f0ae",t.greenA400="#00e676",t.greenA700="#00c853",t.lightGreen50="#f1f8e9",t.lightGreen100="#dcedc8",t.lightGreen200="#c5e1a5",t.lightGreen300="#aed581",t.lightGreen400="#9ccc65",t.lightGreen500="#8bc34a",t.lightGreen600="#7cb342",t.lightGreen700="#689f38",t.lightGreen800="#558b2f",t.lightGreen900="#33691e",t.lightGreenA100="#ccff90",t.lightGreenA200="#b2ff59",t.lightGreenA400="#76ff03",t.lightGreenA700="#64dd17",t.lime50="#f9fbe7",t.lime100="#f0f4c3",t.lime200="#e6ee9c",t.lime300="#dce775",t.lime400="#d4e157",t.lime500="#cddc39",t.lime600="#c0ca33",t.lime700="#afb42b",t.lime800="#9e9d24",t.lime900="#827717",t.limeA100="#f4ff81",t.limeA200="#eeff41",t.limeA400="#c6ff00",t.limeA700="#aeea00",t.yellow50="#fffde7",t.yellow100="#fff9c4",t.yellow200="#fff59d",t.yellow300="#fff176",t.yellow400="#ffee58",t.yellow500="#ffeb3b",t.yellow600="#fdd835",t.yellow700="#fbc02d",t.yellow800="#f9a825",t.yellow900="#f57f17",t.yellowA100="#ffff8d",t.yellowA200="#ffff00",t.yellowA400="#ffea00",t.yellowA700="#ffd600",t.amber50="#fff8e1",t.amber100="#ffecb3",t.amber200="#ffe082",t.amber300="#ffd54f",t.amber400="#ffca28",t.amber500="#ffc107",t.amber600="#ffb300",t.amber700="#ffa000",t.amber800="#ff8f00",t.amber900="#ff6f00",t.amberA100="#ffe57f",t.amberA200="#ffd740",t.amberA400="#ffc400",t.amberA700="#ffab00",t.orange50="#fff3e0",t.orange100="#ffe0b2",t.orange200="#ffcc80",t.orange300="#ffb74d",t.orange400="#ffa726",t.orange500="#ff9800",t.orange600="#fb8c00",t.orange700="#f57c00",t.orange800="#ef6c00",t.orange900="#e65100",t.orangeA100="#ffd180",t.orangeA200="#ffab40",t.orangeA400="#ff9100",t.orangeA700="#ff6d00",t.deepOrange50="#fbe9e7",t.deepOrange100="#ffccbc",t.deepOrange200="#ffab91",t.deepOrange300="#ff8a65",t.deepOrange400="#ff7043",t.deepOrange500="#ff5722",t.deepOrange600="#f4511e",t.deepOrange700="#e64a19",t.deepOrange800="#d84315",t.deepOrange900="#bf360c",t.deepOrangeA100="#ff9e80",t.deepOrangeA200="#ff6e40",t.deepOrangeA400="#ff3d00",t.deepOrangeA700="#dd2c00",t.brown50="#efebe9",t.brown100="#d7ccc8",t.brown200="#bcaaa4",t.brown300="#a1887f",t.brown400="#8d6e63",t.brown500="#795548",t.brown600="#6d4c41",t.brown700="#5d4037",t.brown800="#4e342e",t.brown900="#3e2723",t.blueGrey50="#eceff1",t.blueGrey100="#cfd8dc",t.blueGrey200="#b0bec5",t.blueGrey300="#90a4ae",t.blueGrey400="#78909c",t.blueGrey500="#607d8b",t.blueGrey600="#546e7a",t.blueGrey700="#455a64",t.blueGrey800="#37474f",t.blueGrey900="#263238",t.grey50="#fafafa",t.grey100="#f5f5f5",t.grey200="#eeeeee",t.grey300="#e0e0e0",t.grey400="#bdbdbd",t.grey500="#9e9e9e",t.grey600="#757575",t.grey700="#616161",t.grey800="#424242",t.grey900="#212121",t.black="#000000",t.white="#ffffff",t.transparent="rgba(0, 0, 0, 0)",t.fullBlack="rgba(0, 0, 0, 1)",t.darkBlack="rgba(0, 0, 0, 0.87)",t.lightBlack="rgba(0, 0, 0, 0.54)",t.minBlack="rgba(0, 0, 0, 0.26)",t.faintBlack="rgba(0, 0, 0, 0.12)",t.fullWhite="rgba(255, 255, 255, 1)",t.darkWhite="rgba(255, 255, 255, 0.87)",t.lightWhite="rgba(255, 255, 255, 0.54)"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"===typeof e&&r.test(e)};var r=/-webkit-|-moz-|-ms-/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={set:function(e,t,n){e[t]=n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(23)),i=d(n(148)),o=d(n(110)),a=d(n(611)),s=d(n(87)),u=d(n(11)),c=d(n(50)),l=d(n(16)),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.firestoreRef=function(e,t,n){if(!e.firestore)throw new Error("Firestore must be required and initalized.");var i=n.collection,a=n.doc,s=n.subcollections,u=n.where,c=n.orderBy,l=n.limit,h=n.startAt,f=n.startAfter,d=n.endAt,p=n.endBefore,g=e.firestore().collection(i);a&&(g=g.doc(a));g=function e(t,n){n&&(0,o.default)(n,(function(n){if(n.collection){if(!(0,r.default)(t.collection))throw new Error('Collection can only be run on a document. Check that query config for subcollection: "'+n.collection+'" contains a doc parameter.');t=t.collection(n.collection)}n.doc&&(t=t.doc(n.doc)),n.where&&(t=m(t,n.where)),n.orderBy&&(t=v(t,n.orderBy)),n.limit&&(t=t.limit(n.limit)),n.startAt&&(t=t.startAt(n.startAt)),n.startAfter&&(t=t.startAfter(n.startAfter)),n.endAt&&(t=t.endAt(n.endAt)),n.endBefore&&(t=t.endBefore(n.endBefore)),t=e(t,n.subcollections)}));return t}(g,s),u&&(g=m(g,u));c&&(g=v(g,c));l&&(g=g.limit(l));h&&(g=g.startAt(h));f&&(g=g.startAfter(f));d&&(g=g.endAt(d));p&&(g=g.endBefore(p));return g},t.getQueryName=y,t.listenerExists=function(e,t){b(e,t);var n=y(t);return!!e._.listeners[n]},t.attachListener=function(e,t,n,r){b(e,n);var i=y(n);e._.listeners[i]||(e._.listeners[i]=r);return t({type:f.actionTypes.SET_LISTENER,meta:n,payload:{name:i}}),e._.listeners},t.detachListener=function(e,t,n){var r=y(n);e._.listeners[r]&&(e._.listeners[r](),delete e._.listeners[r]);t({type:f.actionTypes.UNSET_LISTENER,meta:n,payload:{name:r}})},t.queryStrToObj=_,t.getQueryConfig=w,t.getQueryConfigs=function(e){if((0,u.default)(e))return e.map(w);if((0,c.default)(e))return _(e);if((0,l.default)(e))return[w(e)];throw new Error("Querie(s) must be an Array or a string.")},t.orderedFromSnap=function(e){var t=[];if(e.data&&e.exists){var n=(0,l.default)(e.data())?h({id:e.id},e.data()||e.data):{id:e.id,data:e.data()};t.push(n)}else e.forEach&&e.forEach((function(e){var n=(0,l.default)(e.data())?h({id:e.id},e.data()||e.data):{id:e.id,data:e.data()};t.push(n)}));return t},t.dataByIdSnapshot=function(e){var t={};e.data&&e.exists?t[e.id]=e.data():e.forEach&&e.forEach((function(e){t[e.id]=e.data()||e}));return(0,s.default)(t)?t:null};var f=n(38);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function m(e,t){if(!(0,u.default)(t))throw new Error("where parameter must be an array.");return(0,c.default)(t[0])?t.length>1?e.where.apply(e,p(t)):e.where(t[0]):t.reduce((function(e,t){return m(e,t)}),e)}function v(e,t){if(!(0,u.default)(t)&&!(0,c.default)(t))throw new Error("orderBy parameter must be an array or string.");return(0,c.default)(t)?e.orderBy(t):(0,c.default)(t[0])?e.orderBy.apply(e,p(t)):t.reduce((function(e,t){return v(e,t)}),e)}function g(e){return(0,c.default)(e[0])?"where="+e.join(":"):e.map(g)}function y(e){if((0,c.default)(e))return e;var t=e.collection,n=e.doc,r=e.subcollections,i=e.where,o=e.limit;if(!t)throw new Error("Collection is required to build query name");var a=t;(n&&(a=a.concat("/"+n)),r)&&(a=a+"/"+r.map((function(e){return y(e)})).join("/"));if(i){if(!(0,u.default)(i))throw new Error("where parameter must be an array.");a=a.concat("?"+g(i))}if("undefined"!==typeof o){var s="limit="+o;a=a.concat((i?"&":"?")+s)}return a}function b(e,t){if(!t)throw new Error("Meta data is required to attach listener.");if(!(0,i.default)(e,"_.listeners"))throw new Error("Internal Firebase object required to attach listener. Confirm that reduxFirestore enhancer was added when you were creating your store")}function _(e,t){var n,r=t||(0,a.default)(e,["/"]).split("/"),i=(n=r,Array.isArray(n)?n:Array.from(n)),o=i[0],s=i[1],u=i.slice(2),c={};return o&&(c.collection=o),s&&(c.doc=s),u.length&&(c.subcollections=[_("",u)]),c}function w(e){if((0,c.default)(e))return _(e);if((0,l.default)(e)){if(!e.collection&&!e.doc)throw new Error("Collection and/or Doc are required parameters within query definition object.");return e}throw new Error("Invalid Path Definition: Only Strings and Objects are accepted.")}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=l(e[n],t[n]));return e}var h=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function f(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}var d=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,p.prototype.create),i}return r.__extends(t,e),t}(Error),p=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?m(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new d(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function m(e,t){return e.replace(v,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var v=/\{\$([^}]+)}/g;function g(e){return JSON.parse(e)}var y=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=g(c(o[0])||""),n=g(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}};var b=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var _=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function w(){}function x(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}t.CONSTANTS=i,t.Deferred=h,t.ErrorFactory=p,t.FirebaseError=d,t.Sha1=b,t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},t.base64=u,t.base64Decode=c,t.base64Encode=function(e){var t=s(e);return u.encodeByteArray(t,!0)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createSubscribe=function(e,t){var n=new _(e,t);return n.subscribe.bind(n)},t.decode=y,t.deepCopy=function(e){return l(void 0,e)},t.deepExtend=l,t.errorPrefix=x,t.getUA=f,t.isAdmin=function(e){var t=y(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"object"===typeof self&&self.self===self},t.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},t.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}},t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isValidFormat=function(e){var t=y(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){var t=y(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){var t=y(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=g,t.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(x(e,t,r)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(x(e,t,r)+"must be a valid context object.")},t.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!==typeof n)throw new Error(x(e,t,r)+"must be a valid firebase namespace.")}}).call(this,n(47))},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){var r=n(322);e.exports=d,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],f=n[1],d=n.index;if(s+=e.slice(a,d),a=d+h.length,f)s+=f[1];else{var p=e[a],m=n[2],v=n[3],g=n[4],y=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var w=null!=m&&null!=p&&p!==m,x="+"===b||"*"===b,T="?"===b||"*"===b,S=n[2]||l,E=g||y;r.push({name:v||o++,prefix:m||"",delimiter:S,optional:T,repeat:x,partial:w,asterisk:!!_,pattern:E?c(E):_?".*":"[^"+u(S)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",s=t||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var h,f=s[l.name];if(null==f){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=u(f[d]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===d?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function f(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var c=e[s];if("string"===typeof c)a+=u(c);else{var f=u(c.prefix),d="(?:"+c.pattern+")";t.push(c),c.repeat&&(d+="(?:"+f+d+")*"),a+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),m=a.slice(-p.length)===p;return i||(a=(m?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+p+"|$)",l(new RegExp("^"+a,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return f(o(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";(function(e,r){var i,o=n(306);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:r;var a=Object(o.a)(i);t.a=a}).call(this,n(47),n(197)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(0)),a=u(n(3)),s=u(n(46));function u(e){return e&&e.__esModule?e:{default:e}}var c=n(591)(window),l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={skycons:new c({color:n.props.color})},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){this.state.skycons.add(s.default.findDOMNode(this),c[this.props.icon]),this.props.autoplay&&this.state.skycons.play()}},{key:"componentWillReceiveProps",value:function(e){this.state.skycons.set(s.default.findDOMNode(this),c[e.icon])}},{key:"componentWillUnmount",value:function(){this.state.skycons.pause(),this.state.skycons.remove(s.default.findDOMNode(this))}},{key:"play",value:function(){this.state.skycons.play()}},{key:"pause",value:function(){this.state.skycons.pause()}},{key:"render",value:function(){var e={};for(var t in this.props)e[t]=this.props[t];return delete e.autoplay,o.default.createElement("canvas",r({style:{width:"100%",height:"100%"}},e))}}]),t}(o.default.Component);l.propTypes={color:a.default.string,autoplay:a.default.bool,icon:a.default.oneOf(["CLEAR_DAY","CLEAR_NIGHT","PARTLY_CLOUDY_DAY","PARTLY_CLOUDY_NIGHT","CLOUDY","RAIN","SLEET","SNOW","WIND","FOG"])},l.defaultProps={color:null,autoplay:!0},t.default=l},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFirebaseInstance=void 0;var r,i=n(16),o=(r=i)&&r.__esModule?r:{default:r},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(80),u=n(226),c=n(227);t.createFirebaseInstance=function(e,t,n){t.enableLogging&&e.database&&"function"===typeof e.database.enableLogging&&e.database.enableLogging(t.enableLogging);var r={watchers:{},listeners:{},callbacks:{},queries:{},config:t,authUid:null};Object.defineProperty(e,"_",{value:r,writable:!0,enumerable:!0,configurable:!0});var i=function(t,n,r,i){if((0,o.default)(r)){var s="update"===t?"updated":"created",u=a({},r,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},s+"At",e.database.ServerValue.TIMESTAMP));return e.auth().currentUser&&(u[s+"By"]=e.auth().currentUser.uid),e.database().ref(n)[t](u,i)}return e.database().ref(n)[t](r,i)},l=(0,u.mapWithFirebaseAndDispatch)(e,n,{signInWithPhoneNumber:c.authActions.signInWithPhoneNumber}),h=a({ref:function(t){return e.database().ref(t)},set:function(t,n,r){return e.database().ref(t).set(n,r)},setWithMeta:function(e,t,n){return i("set",e,t,n)},uniqueSet:function(t,n,r){return e.database().ref(t).transaction((function(e){return null===e?n:void 0})).then((function(e){var t=e.committed,n=e.snapshot;if(!t){var i=new Error("Path already exists.");return r&&r(i),Promise.reject(i)}return r&&r(n),n}))},push:function(t,n,r){return e.database().ref(t).push(n,r)},pushWithMeta:function(e,t,n){return i("push",e,t,n)},remove:function(t,r,i){return c.queryActions.remove(e,n,t,i).then((function(){return"function"===typeof r&&r(),t}))},update:function(t,n,r){return e.database().ref(t).update(n,r)},updateWithMeta:function(e,t,n){return i("update",e,t,n)},login:function(t){return c.authActions.login(n,e,t)},logout:function(){return c.authActions.logout(n,e)},updateAuth:function(t,r){return c.authActions.updateAuth(n,e,t,r)},updateEmail:function(t,r){return c.authActions.updateEmail(n,e,t,r)},updateProfile:function(t,r){return c.authActions.updateProfile(n,e,t,r)},uploadFile:function(t,r,i,o){return c.storageActions.uploadFile(n,e,{path:t,file:r,dbPath:i,options:o})},uploadFiles:function(t,r,i,o){return c.storageActions.uploadFiles(n,e,{path:t,files:r,dbPath:i,options:o})},deleteFile:function(t,r){return c.storageActions.deleteFile(n,e,{path:t,dbPath:r})},createUser:function(t,r){return c.authActions.createUser(n,e,t,r)},resetPassword:function(t){return c.authActions.resetPassword(n,e,t)},confirmPasswordReset:function(t,r){return c.authActions.confirmPasswordReset(n,e,t,r)},verifyPasswordResetCode:function(t){return c.authActions.verifyPasswordResetCode(n,e,t)},watchEvent:function(t,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return c.queryActions.watchEvent(e,n,a({type:t,path:r,storeAs:i},o))},unWatchEvent:function(t,r,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return c.queryActions.unWatchEvent(e,n,a({type:t,path:r,queryId:i},o))},reloadAuth:function(){return c.authActions.reloadAuth(n,e)},linkWithCredential:function(t){return c.authActions.linkWithCredential(n,e,t)},promiseEvents:function(t,r){var i=(0,s.createCallable)(t)(r,e),o=(0,s.getEventsFromInput)(i);return Promise.all(o.map((function(t){return c.queryActions.watchEvent(e,n,t)})))}},l);return a(e,h,{helpers:h})}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(47))},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}},function(e,t,n){var r=n(133),i=n(202),o=n(134);e.exports=function(e,t,n,a,s,u){var c=1&n,l=e.length,h=t.length;if(l!=h&&!(c&&h>l))return!1;var f=u.get(e);if(f&&u.get(t))return f==t;var d=-1,p=!0,m=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++d<l;){var v=e[d],g=t[d];if(a)var y=c?a(g,v,d,t,e,u):a(v,g,d,e,t,u);if(void 0!==y){if(y)continue;p=!1;break}if(m){if(!i(t,(function(e,t){if(!o(m,t)&&(v===e||s(v,e,n,a,u)))return m.push(t)}))){p=!1;break}}else if(v!==g&&!s(v,g,n,a,u)){p=!1;break}}return u.delete(e),u.delete(t),p}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(26).Uint8Array;e.exports=r},function(e,t,n){var r=n(205),i=n(137),o=n(67);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(136),i=n(11);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(362),i=n(102),o=n(11),a=n(103),s=n(68),u=n(139),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),h=!n&&!l&&a(e),f=!n&&!l&&!h&&u(e),d=n||l||h||f,p=d?r(e.length,String):[],m=p.length;for(var v in e)!t&&!c.call(e,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||p.push(v);return p}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){var r=n(58)(n(26),"Set");e.exports=r},function(e,t,n){var r=n(58)(n(26),"WeakMap");e.exports=r},function(e,t,n){var r=n(16);e.exports=function(e){return e===e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(371),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},function(e,t,n){var r=n(373),i=n(215);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){var r=n(60),i=n(102),o=n(11),a=n(68),s=n(140),u=n(49);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,h=!1;++c<l;){var f=u(t[c]);if(!(h=null!=e&&n(e,f)))break;e=e[f]}return h||++c!=l?h:!!(l=null==e?0:e.length)&&s(l)&&a(f,l)&&(o(e)||i(e))}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t,n){var r=n(106),i=n(218);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},function(e,t){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},function(e,t,n){var r=n(220),i=n(67);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(380)();e.exports=r},function(e,t,n){var r=n(149);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},function(e,t,n){var r=n(58),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},function(e,t,n){var r=n(138),i=n(224),o=n(32),a=n(11);e.exports=function(e,t){return(a(e)?r:i)(e,o(t,3))}},function(e,t,n){var r=n(62);e.exports=function(e,t){var n=[];return r(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.populateAndDispatch=t.orderedFromSnapshot=t.applyParamsToQuery=t.unsetWatcher=t.getWatcherCount=t.setWatcher=t.getQueryIdFromPath=t.getWatchPath=void 0;var r=c(n(50)),i=c(n(87)),o=c(n(110)),a=c(n(388)),s=n(27),u=n(108);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=Number(e);return(0,a.default)(t)?e:t},h=t.getWatchPath=function(e,t){if(!e||""===e||!t)throw new Error("Event and path are required");return e+":"+("/"===t.substring(0,1)?"":"/")+t},f=t.getQueryIdFromPath=function(e,t){if(!(0,r.default)(e))throw new Error("Query path must be a string");var n=e,i=e.split("#");e=i[0];var o=i.length>1,a=o?i[1].split("&"):[],s=o?a.map((function(e){var t=e.split("=");if("queryId"===t[0])return t[1]})).filter((function(e){return e})):void 0;return s&&s.length>0?t?t+":/"+s:s[0]:o?n:void 0},d=(t.setWatcher=function(e,t,n,r,i){var o=i||f(r,n)||h(n,r);return e._.watchers[o]?e._.watchers[o]++:e._.watchers[o]=1,t({type:s.actionTypes.SET_LISTENER,path:r,payload:{id:o}}),e._.watchers[o]},t.getWatcherCount=function(e,t,n,r){var i=r||f(n,t)||h(t,n);return e._.watchers[i]},t.unsetWatcher=function(e,t,n,r,i){var o=i||f(r,n)||h(n,r);r=r.split("#")[0];var a=e._.watchers;a[o]<=1?(delete a[o],"first_child"!==n&&"once"!==n&&e.database().ref().child(r).off(n)):a[o]&&a[o]--,t({type:s.actionTypes.UNSET_LISTENER,path:r,payload:{id:o}})},t.applyParamsToQuery=function(e,t){var n=!1;return e&&e.forEach((function(e){switch((e=e.split("="))[0]){case"orderByValue":t=t.orderByValue(),n=!0;break;case"orderByPriority":t=t.orderByPriority(),n=!0;break;case"orderByKey":t=t.orderByKey(),n=!0;break;case"orderByChild":t=t.orderByChild(e[1]);break;case"limitToFirst":t=t.limitToFirst(parseInt(e[1],10));break;case"limitToLast":t=t.limitToLast(parseInt(e[1],10));break;case"notParsed":n=!0;break;case"parsed":n=!1;break;case"equalTo":var r=n?e[1]:l(e[1]);r="true"===(r="false"!==(r="null"===r?null:r)&&r)||r,t=3===e.length?t.equalTo(r,e[2]):t.equalTo(r);break;case"startAt":var i=n?e[1]:l(e[1]);i="null"===i?null:i,t=3===e.length?t.startAt(i,e[2]):t.startAt(i);break;case"endAt":var o=n?e[1]:l(e[1]);o="null"===o?null:o,t=3===e.length?t.endAt(o,e[2]):t.endAt(o)}})),t},t.orderedFromSnapshot=function(e){if(e.hasChildren&&!e.hasChildren())return null;var t=[];return e.forEach&&e.forEach((function(e){t.push({key:e.key,value:e.val()})})),(0,i.default)(t)?t:null});t.populateAndDispatch=function(e,t,n){var r=n.data,i=n.populates,a=n.snapshot,c=n.path,l=n.storeAs;return(0,u.promisesForPopulate)(e,a.key,r,i).then((function(e){return(0,o.default)(e,(function(e,n){t({type:s.actionTypes.MERGE,path:n,data:e})})),t({type:s.actionTypes.SET,path:l||c,data:r,ordered:d(a)}),e})).catch((function(e){return t({type:s.actionTypes.ERROR,payload:e}),Promise.reject(e)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapWithFirebaseAndDispatch=t.wrapInDispatch=void 0;var r=s(n(151)),i=s(n(16)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.wrapInDispatch=function(e,t){t.ref;var n=t.meta,r=t.method,o=t.args,s=void 0===o?[]:o,u=t.types,c=a(u,3),l=c[0],h=c[1],f=c[2];return e({type:(0,i.default)(l)?l.type:l,meta:n,payload:(0,i.default)(l)?l.payload:{args:s}}),r.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(s)).then((function(t){return e({type:(0,i.default)(h)?h.type:h,meta:n,payload:(0,i.default)(h)?h.payload:t}),t})).catch((function(t){return e({type:f,meta:n,payload:t}),Promise.reject(t)}))};var c=function(e,t,n){return function(r){return function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return r.apply(e,n?[t,e].concat(o):[e,t].concat(o))}}};t.mapWithFirebaseAndDispatch=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=c(e,t);return o({},(0,r.default)(n,a),i.reduce((function(e,t){var n=t.action,r=t.name;return o({},e,u({},r,a(n)))}),{}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.storageActions=t.queryActions=t.authActions=void 0;var r=a(n(390)),i=a(n(256)),o=a(n(457));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.authActions=r,t.queryActions=i,t.storageActions=o,t.default={authActions:r,queryActions:i,storageActions:o}},function(e,t,n){var r=n(106),i=n(149),o=n(60);e.exports=function(e,t,n){for(var a=-1,s=t.length,u={};++a<s;){var c=t[a],l=r(e,c);n(l,c)&&i(u,o(c,e),l)}return u}},function(e,t,n){var r=n(88),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),u=Array(s);++a<s;)u[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(u),r(e,this,c)}}},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var i=n(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(63),i=n(67);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){(function(e){var r=n(26),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(79)(e))},function(e,t,n){var r=n(136),i=n(155),o=n(137),a=n(206),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},function(e,t,n){var r=n(157);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(115),i=n(155),o=n(105);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.populate=t.fixPath=t.isEmpty=t.isLoaded=t.getVal=void 0;var r=x(n(23)),i=x(n(11)),o=x(n(146)),a=x(n(410)),s=x(n(50)),u=x(n(411)),c=x(n(239)),l=x(n(240)),h=x(n(151)),f=x(n(85)),d=x(n(84)),p=x(n(148)),m=x(n(59)),v=x(n(221)),g=x(n(87)),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=n(27),_=n(108),w=n(162);function x(e){return e&&e.__esModule?e:{default:e}}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.getVal=function(e,t,n){if(!e)return n;var r=(0,w.getDotStrPath)(t);return(0,m.default)(e,r,n)},t.isLoaded=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t||!t.length||(0,l.default)(t,(function(e){return void 0!==e&&!1!==(0,m.default)(e,"isLoaded")}))},t.isEmpty=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.default)(t,(function(e){return!(e&&(0,g.default)(e))||!0===e.isEmpty}))},t.fixPath=function(e){return("/"===e.substring(0,1)?"":"/")+e};var S=function(e,t,n){var r=(0,m.default)(t,n.child);if(!t||!r)return null;if((0,s.default)(r)){var i=[(0,a.default)(n.root.split("/")).join("."),r];n.childParam&&i.push(n.childParam);var o=i.join("."),u=(0,m.default)(e.data,o);return u?(0,v.default)({},n.childAlias||n.child,n.keyProp?y(T({},n.keyProp,r),u):u):t}return(0,v.default)({},n.childAlias||n.child,function(e,t,n){return(0,h.default)(t,(function(t,r){var i=t;(!0===t||n.populateByKey)&&(i=r);var o=[(0,a.default)(n.root.split("/")).join("."),i];n.childParam&&o.push(n.childParam);var s=o.join(".");return(0,m.default)(e.data,s)?n.keyProp?y(T({},n.keyProp,i),(0,m.default)(e.data,s)):(0,m.default)(e.data,s):!0===t||n.populateByKey?t:i}))}(e,r,n))};t.populate=function(e,t,n,s){var l=(0,a.default)(t.split("/")),v=-1===b.topLevelPaths.indexOf(l[0])?["data"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l)):l,g=v.join("."),y=(0,m.default)(e,g,s);if(!e||y===s)return s;if(null===y)return null;var w=(0,_.getPopulateObjs)((0,r.default)(n)?n((0,d.default)(v),y):n);if((0,i.default)(y)){return(0,o.default)(w,(function(e){return(t=y,function(e){return(0,o.default)(t,(function(t){return(0,p.default)(t,e)}))})(["value",e.child]);var t}))?y.map((function(t){var n=t.key,r=t.value;return{key:n,value:w.map((function(t){return S(e,r,t)})).reduce((function(e,t){return(0,u.default)(t,e)}),r)}})):y}return(0,o.default)(w,(function(e){return(0,p.default)(y,e.child)}))?w.map((function(t){return S(e,y,t)})).reduce((function(e,t){return(0,u.default)(t,e)}),y):-1!==v.indexOf("profile")?y:(0,h.default)(y,(function(t,i){var a="ordered"===v[0]?t.key:i,s=(0,_.getPopulateObjs)((0,r.default)(n)?n(a,t):n);return(0,o.default)(s,(function(e){return(0,p.default)(t,e.child)}))?(0,c.default)((0,f.default)(s,(function(n){return S(e,t,n)})),(function(e,t){return(0,u.default)(t,e)}),t):t}))}},function(e,t,n){var r=n(86),i=n(81);e.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){var r=n(416),i=n(62),o=n(32),a=n(417),s=n(11);e.exports=function(e,t,n){var u=s(e)?r:a,c=arguments.length<3;return u(e,o(t,4),n,c,i)}},function(e,t,n){var r=n(418),i=n(419),o=n(32),a=n(11),s=n(147);e.exports=function(e,t,n){var u=a(e)?r:i;return n&&s(e,t,n)&&(t=void 0),u(e,o(t,3))}},function(e,t,n){var r=n(83),i=n(242),o=i?function(e,t){return i.set(e,t),e}:r;e.exports=o},function(e,t,n){var r=n(210),i=r&&new r;e.exports=i},function(e,t,n){var r=n(244),i=n(245),o=n(427),a=n(117),s=n(246),u=n(252),c=n(439),l=n(168),h=n(26);e.exports=function e(t,n,f,d,p,m,v,g,y,b){var _=128&n,w=1&n,x=2&n,T=24&n,S=512&n,E=x?void 0:a(t);return function M(){for(var C=arguments.length,A=Array(C),P=C;P--;)A[P]=arguments[P];if(T)var O=u(M),k=o(A,O);if(d&&(A=r(A,d,p,T)),m&&(A=i(A,m,v,T)),C-=k,T&&C<b){var I=l(A,O);return s(t,n,e,M.placeholder,f,A,I,g,y,b-C)}var R=w?f:this,D=x?R[t]:t;return C=A.length,g?A=c(A,g):S&&C>1&&A.reverse(),_&&y<C&&(A.length=y),this&&this!==h&&this instanceof M&&(D=E||a(D)),D.apply(R,A)}}},function(e,t){var n=Math.max;e.exports=function(e,t,r,i){for(var o=-1,a=e.length,s=r.length,u=-1,c=t.length,l=n(a-s,0),h=Array(c+l),f=!i;++u<c;)h[u]=t[u];for(;++o<s;)(f||o<a)&&(h[r[o]]=e[o]);for(;l--;)h[u++]=e[o++];return h}},function(e,t){var n=Math.max;e.exports=function(e,t,r,i){for(var o=-1,a=e.length,s=-1,u=r.length,c=-1,l=t.length,h=n(a-u,0),f=Array(h+l),d=!i;++o<h;)f[o]=e[o];for(var p=o;++c<l;)f[p+c]=t[c];for(;++s<u;)(d||o<a)&&(f[p+r[s]]=e[o++]);return f}},function(e,t,n){var r=n(428),i=n(250),o=n(251);e.exports=function(e,t,n,a,s,u,c,l,h,f){var d=8&t;t|=d?32:64,4&(t&=~(d?64:32))||(t&=-4);var p=[e,t,s,d?u:void 0,d?c:void 0,d?void 0:u,d?void 0:c,l,h,f],m=n.apply(void 0,p);return r(e)&&i(m,p),m.placeholder=a,o(m,e,t)}},function(e,t,n){var r=n(242),i=n(248),o=r?function(e){return r.get(e)}:i;e.exports=o},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(115),i=n(165);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},function(e,t,n){var r=n(241),i=n(230)(r);e.exports=i},function(e,t,n){var r=n(433),i=n(434),o=n(153),a=n(435);e.exports=function(e,t,n){var s=t+"";return o(e,i(s,a(r(s),n)))}},function(e,t){e.exports=function(e){return e.placeholder}},function(e,t,n){var r=n(442);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},function(e,t,n){var r=n(40),i=n(24);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},function(e,t,n){var r=n(61);e.exports=function(){var e=arguments,t=r(e[0]);return e.length<3?t:t.replace(e[1],e[2])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.unWatchEvents=t.watchEvents=t.unWatchEvent=t.watchEvent=void 0;var r,i=n(11),o=(r=i)&&r.__esModule?r:{default:r},a=n(27),s=n(225);var u=t.watchEvent=function(e,t,n){if(!e.database||"function"!==typeof e.database)throw new Error("Firebase database is required to create watchers");var r=n.type,i=n.path,o=n.populates,u=n.queryParams,c=n.queryId,l=n.isQuery,h=n.storeAs,f=e._.config.logErrors,d=h?i+"@"+h:i,p=c||(0,s.getQueryIdFromPath)(i);if((0,s.getWatcherCount)(e,r,d,p)>0&&p&&(0,s.unsetWatcher)(e,t,r,i,p),(0,s.setWatcher)(e,t,r,d,p),"first_child"===r)return e.database().ref().child(i).orderByKey().limitToFirst(1).once("value").then((function(e){return null===e.val()&&t({type:a.actionTypes.NO_VALUE,path:h||i}),e})).catch((function(e){return t({type:a.actionTypes.ERROR,path:h||i,payload:e}),Promise.reject(e)}));var m=e.database().ref().child(i);if(l&&(m=(0,s.applyParamsToQuery)(u,m)),t({type:a.actionTypes.START,path:h||i}),"once"===r)return m.once("value").then((function(n){return null===n.val()?t({type:a.actionTypes.NO_VALUE,path:h||i}):o?(0,s.populateAndDispatch)(e,t,{path:i,storeAs:h,snapshot:n,data:n.val(),populates:o}):t({type:a.actionTypes.SET,path:h||i,data:n.val(),ordered:(0,s.orderedFromSnapshot)(n)})})).catch((function(e){return t({type:a.actionTypes.UNAUTHORIZED_ERROR,payload:e}),Promise.reject(e)}));m.on(r,(function(n){var u="child_removed"===r?void 0:n.val(),c=h||"value"===r?i:i+"/"+n.key;if(!o){var l="child_added"===r?[{key:n.key,value:n.val()}]:(0,s.orderedFromSnapshot)(n);return t({type:a.actionTypes.SET,path:h||c,data:u,ordered:l})}return(0,s.populateAndDispatch)(e,t,{path:i,storeAs:h,snapshot:n,data:n.val(),populates:o})}),(function(e){f&&console.log("RRF: Error retrieving data for path: "+i+", storeAs: "+h+". Firebase:",e),t({type:a.actionTypes.ERROR,storeAs:h,path:i,payload:e})}))},c=t.unWatchEvent=function(e,t,n){var r=n.type,i=n.path,o=n.storeAs,a=n.queryId,u=o?i+"@"+o:i;(0,s.unsetWatcher)(e,t,r,u,a)},l=t.watchEvents=function(e,t,n){if(!(0,o.default)(n))throw new Error("Events config must be an Array");return n.map((function(n){return u(e,t,n)}))},h=t.unWatchEvents=function(e,t,n){return n.forEach((function(n){return c(e,t,n)}))},f=t.remove=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.dispatchAction,o=void 0===i||i,s=e._.config.dispatchRemoveAction;return e.database().ref(n).remove().then((function(){return s&&o&&t({type:a.actionTypes.REMOVE,path:n}),n})).catch((function(e){return t({type:a.actionTypes.ERROR,payload:e}),Promise.reject(e)}))};t.default={watchEvents:l,unWatchEvents:h,remove:f}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(116)("assign",n(471));r.placeholder=n(91),e.exports=r},function(e,t,n){var r=n(116)("setWith",n(472));r.placeholder=n(91),e.exports=r},function(e,t,n){var r=n(64),i=n(71),o=n(174)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(52),i=n(33),o=n(75);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){e.exports=!n(54)&&!n(75)((function(){return 7!=Object.defineProperty(n(264)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(74),i=n(51).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(479)),i=a(n(491)),o="function"===typeof i.default&&"symbol"===typeof r.default?function(e){return typeof e}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"===typeof i.default&&"symbol"===o(r.default)?function(e){return"undefined"===typeof e?"undefined":o(e)}:function(e){return e&&"function"===typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":"undefined"===typeof e?"undefined":o(e)}},function(e,t,n){"use strict";var r=n(481)(!0);n(267)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){"use strict";var r=n(118),i=n(52),o=n(268),a=n(72),s=n(93),u=n(482),c=n(182),l=n(261),h=n(41)("iterator"),f=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,n,p,m,v,g){u(n,t,p);var y,b,_,w=function(e){if(!f&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",T="values"==m,S=!1,E=e.prototype,M=E[h]||E["@@iterator"]||m&&E[m],C=M||w(m),A=m?T?w("entries"):C:void 0,P="Array"==t&&E.entries||M;if(P&&(_=l(P.call(new e)))!==Object.prototype&&_.next&&(c(_,x,!0),r||"function"==typeof _[h]||a(_,h,d)),T&&M&&"values"!==M.name&&(S=!0,C=function(){return M.call(this)}),r&&!g||!f&&!S&&E[h]||a(E,h,C),s[t]=C,s[x]=d,m)if(y={values:T?C:w("values"),keys:v?C:w("keys"),entries:A},g)for(b in y)b in E||o(E,b,y[b]);else i(i.P+i.F*(f||S),t,y);return y}},function(e,t,n){e.exports=n(72)},function(e,t,n){var r=n(64),i=n(76),o=n(484)(!1),a=n(174)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(180);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(178),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(269),i=n(181).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(120),i=n(92),o=n(76),a=n(177),s=n(64),u=n(263),c=Object.getOwnPropertyDescriptor;t.f=n(54)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(275),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){e.exports={default:n(509),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){for(var o=0,a=e.length;o<a;++o){var s=e[o](t,n,r,i);if(s)return s}},e.exports=t.default},function(e,t,n){"use strict";function r(e,t){-1===e.indexOf(t)&&e.push(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)r(e,t[n]);else r(e,t)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e instanceof Object&&!Array.isArray(e)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,o.default)(e)};var r,i=n(537),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(560)),o=r(n(561)),a=r(n(562)),s=r(n(564)),u=r(n(565)),c=r(n(281)),l=r(n(567)),h=r(n(569)),f=r(n(0));r(n(3)),r(n(570));var d=function(){var e=null;return function(){if(null!==e)return e;var t,n,r,i=!1;try{window.addEventListener("test",null,(t={},n="passive",r={get:function(){i=!0}},Object.defineProperty(t,n,r)))}catch(o){}return e=i,i}()}(),p={capture:!1,passive:!1};function m(e){return h({},p,e)}function v(e,t,n){var r=[e,t];return r.push(d?n:n.capture),r}function g(e,t,n,r){e.addEventListener.apply(e,v(t,n,r))}function y(e,t,n,r){e.removeEventListener.apply(e,v(t,n,r))}function b(e,t){e.children,e.target;var n=l(e,["children","target"]);Object.keys(n).forEach((function(e){if("on"===e.substring(0,2)){var r=n[e],i=c(r),o="object"===i;if(o||"function"===i){var a="capture"===e.substr(-7).toLowerCase(),s=e.substring(2).toLowerCase();s=a?s.substring(0,s.length-7):s,o?t(s,r.handler,r.options):t(s,r,m({capture:a}))}}}))}var _=function(e){function t(){return i(this,t),a(this,s(t).apply(this,arguments))}return u(t,e),o(t,[{key:"componentDidMount",value:function(){this.applyListeners(g)}},{key:"componentDidUpdate",value:function(e){this.applyListeners(y,e),this.applyListeners(g)}},{key:"componentWillUnmount",value:function(){this.applyListeners(y)}},{key:"applyListeners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=t.target;if(n){var r=n;"string"===typeof n&&(r=window[n]),b(t,e.bind(null,r))}}},{key:"render",value:function(){return this.props.children||null}}]),t}(f.PureComponent);_.propTypes={},t.withOptions=function(e,t){return{handler:e,options:m(t)}},t.default=_},function(e,t){function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(21)),i=y(n(22)),o=y(n(17)),a=y(n(15)),s=y(n(18)),u=y(n(19)),c=y(n(20)),l=y(n(14)),h=n(0),f=y(h),d=y(n(3)),p=y(n(25)),m=y(n(574)),v=y(n(584)),g=y(n(589));function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.handleSwitch=function(e){r.props.onCheck&&r.props.onCheck(e,r.props.value)},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"isChecked",value:function(){return this.refs.enhancedSwitch.isSwitched()}},{key:"setChecked",value:function(e){this.refs.enhancedSwitch.setSwitched(e)}},{key:"getValue",value:function(){return this.refs.enhancedSwitch.getValue()}},{key:"render",value:function(){var e=this.props,t=e.checkedIcon,n=e.checked,o=e.iconStyle,a=e.labelStyle,s=e.labelPosition,u=(e.onCheck,e.uncheckedIcon),c=e.disabled,h=(0,i.default)(e,["checkedIcon","checked","iconStyle","labelStyle","labelPosition","onCheck","uncheckedIcon","disabled"]),d=function(e,t){var n=t.muiTheme.radioButton;return{icon:{height:n.size,width:n.size},target:{transition:p.default.easeOut(),position:"absolute",opacity:1,transform:"scale(1)",fill:n.borderColor},fill:{position:"absolute",opacity:1,transform:"scale(0)",transformOrigin:"50% 50%",transition:p.default.easeOut(),fill:n.checkedColor},targetWhenChecked:{opacity:0,transform:"scale(0)"},fillWhenChecked:{opacity:1,transform:"scale(1)"},targetWhenDisabled:{fill:n.disabledColor},fillWhenDisabled:{fill:n.disabledColor},label:{color:e.disabled?n.labelDisabledColor:n.labelColor},ripple:{color:e.checked?n.checkedColor:n.borderColor}}}(this.props,this.context),y=(0,l.default)(d.target,n&&d.targetWhenChecked,o,c&&d.targetWhenDisabled),b=(0,l.default)(d.fill,n&&d.fillWhenChecked,o,c&&d.fillWhenDisabled),_=f.default.isValidElement(u)?f.default.cloneElement(u,{style:(0,l.default)(y,u.props.style)}):f.default.createElement(v.default,{style:y}),w=f.default.isValidElement(t)?f.default.cloneElement(t,{style:(0,l.default)(b,t.props.style)}):f.default.createElement(g.default,{style:b}),x=(0,l.default)(d.icon,o),T=(0,l.default)(d.label,a);return f.default.createElement(m.default,(0,r.default)({},h,{ref:"enhancedSwitch",inputType:"radio",checked:n,switched:n,disabled:c,rippleColor:d.ripple.color,iconStyle:x,labelStyle:T,labelPosition:s,onSwitch:this.handleSwitch,switchElement:f.default.createElement("div",null,_,w)}))}}]),t}(h.Component);b.defaultProps={checked:!1,disabled:!1,labelPosition:"right"},b.contextTypes={muiTheme:d.default.object.isRequired},b.propTypes={},t.default=b},function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return a[e];var n,o=String(e);return(n=r[o.toLowerCase()])?n:(n=i[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var o;if(o=r[t.toLowerCase()])return o===n;if(o=i[t.toLowerCase()])return o===n}else if("number"===typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)r[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)r[o-48]=o;for(o=1;o<13;o++)r["f"+o]=o+111;for(o=0;o<10;o++)r["numpad "+o]=o+96;var a=t.names=t.title={};for(o in r)a[r[o]]=o;for(var s in i)r[s]=i[s]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(17)),i=g(n(15)),o=g(n(18)),a=g(n(19)),s=g(n(20)),u=g(n(14)),c=n(0),l=g(c),h=g(n(3)),f=g(n(46)),d=g(n(95)),p=g(n(189)),m=g(n(25)),v=g(n(575));function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e,n,o,s;(0,i.default)(this,t);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return n=o=(0,a.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(c))),o.pulsate=function(){var e=f.default.findDOMNode(o.refs.innerCircle);if(e){var t="scale(1)"===(e.style.transform||"scale(1)")?"scale(0.85)":"scale(1)";p.default.set(e.style,"transform",t),o.timeout=setTimeout(o.pulsate,750)}},s=n,(0,a.default)(o,s)}return(0,s.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){this.props.show&&(this.setRippleSize(),this.pulsate())}},{key:"shouldComponentUpdate",value:function(e,t){return!(0,d.default)(this.props,e)||!(0,d.default)(this.state,t)}},{key:"componentDidUpdate",value:function(){this.props.show?(this.setRippleSize(),this.pulsate()):this.timeout&&clearTimeout(this.timeout)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"getRippleElement",value:function(e){var t=e.color,n=e.innerStyle,r=e.opacity,i=this.context.muiTheme,o=i.prepareStyles,a=i.ripple,s=(0,u.default)({position:"absolute",height:"100%",width:"100%",borderRadius:"50%",opacity:r||.16,backgroundColor:t||a.color,transition:m.default.easeOut("750ms","transform",null,m.default.easeInOutFunction)},n);return l.default.createElement("div",{ref:"innerCircle",style:o((0,u.default)({},s))})}},{key:"setRippleSize",value:function(){var e=f.default.findDOMNode(this.refs.innerCircle),t=e.offsetHeight,n=e.offsetWidth,r=Math.max(t,n),i=0;-1!==e.style.top.indexOf("px",e.style.top.length-2)&&(i=parseInt(e.style.top)),e.style.height=r+"px",e.style.top=t/2-r/2+i+"px"}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.style,r=(0,u.default)({height:"100%",width:"100%",position:"absolute",top:0,left:0},n),i=t?this.getRippleElement(this.props):null;return l.default.createElement(v.default,{maxScale:.85,style:r},i)}}]),t}(c.Component);y.contextTypes={muiTheme:h.default.object.isRequired},y.propTypes={},t.default=y},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n(576)),o=u(n(0)),a=u(n(3)),s=(u(n(65)),n(577));function u(e){return e&&e.__esModule?e:{default:e}}a.default.any,a.default.func,a.default.node;var c=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,e.call(this,n,i));return o.performAppear=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(o._handleDoneAppearing.bind(o,e,t)):o._handleDoneAppearing(e,t)},o._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performEnter=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(o._handleDoneEntering.bind(o,e,t)):o._handleDoneEntering(e,t)},o._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)||o.performLeave(e,t)},o.performLeave=function(e,t){o.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(o._handleDoneLeaving.bind(o,e,t)):o._handleDoneLeaving(e,t)},o._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete o.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(o.props.children);n&&n.hasOwnProperty(e)?o.keysToEnter.push(e):o.setState((function(t){var n=r({},t.children);return delete n[e],{children:n}}))},o.childRefs=Object.create(null),o.state={children:(0,s.getChildMapping)(n.children)},o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var i=n&&n.hasOwnProperty(r);!t[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var o in n){var a=t&&t.hasOwnProperty(o);!n[o]||a||this.currentlyTransitioningKeys[o]||this.keysToLeave.push(o)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach((function(t){return e.performEnter(t,e.childRefs[t])}));var n=this.keysToLeave;this.keysToLeave=[],n.forEach((function(t){return e.performLeave(t,e.childRefs[t])}))},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var a="string"!==typeof r.ref,s=e.props.childFactory(r),u=function(t){e.childRefs[n]=t};s===r&&a&&(u=(0,i.default)(r.ref,u)),t.push(o.default.cloneElement(s,{key:n,ref:u}))}};for(var a in this.state.children)n(a);var s=r({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,o.default.createElement(this.props.component,s,t)},t}(o.default.Component);c.displayName="TransitionGroup",c.propTypes={},c.defaultProps={component:"span",childFactory:function(e){return e}},t.default=c,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(274)),i=y(n(17)),o=y(n(15)),a=y(n(18)),s=y(n(19)),u=y(n(20)),c=y(n(579)),l=y(n(14)),h=n(0),f=y(h),d=y(n(3)),p=y(n(46)),m=y(n(285)),v=y(n(580)),g=y(n(581));function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){return(0,c.default)(e).slice(1)},_=function(e){function t(e,n){(0,o.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e,n));return a.handleMouseDown=function(e){0===e.button&&a.start(e,!1)},a.handleMouseUp=function(){a.end()},a.handleMouseLeave=function(){a.end()},a.handleTouchStart=function(e){e.stopPropagation(),a.props.abortOnScroll&&e.touches&&(a.startListeningForScrollAbort(e),a.startTime=Date.now()),a.start(e,!0)},a.handleTouchEnd=function(){a.end()},a.handleTouchMove=function(e){if(Math.abs(Date.now()-a.startTime)>300)a.stopListeningForScrollAbort();else{var t=Math.abs(e.touches[0].clientY-a.firstTouchY),n=Math.abs(e.touches[0].clientX-a.firstTouchX);if(t>6||n>6){var i=a.state.ripples,o=i[0],s=f.default.cloneElement(o,{aborted:!0});i=b(i),i=[].concat((0,r.default)(i),[s]),a.setState({ripples:i},(function(){a.end()}))}}},a.ignoreNextMouseDown=!1,a.state={hasRipples:!1,nextKey:0,ripples:[]},a}return(0,u.default)(t,e),(0,a.default)(t,[{key:"start",value:function(e,t){var n=this.context.muiTheme.ripple;if(!this.ignoreNextMouseDown||t){var i=this.state.ripples;i=[].concat((0,r.default)(i),[f.default.createElement(g.default,{key:this.state.nextKey,style:this.props.centerRipple?{}:this.getRippleStyle(e),color:this.props.color||n.color,opacity:this.props.opacity,touchGenerated:t})]),this.ignoreNextMouseDown=t,this.setState({hasRipples:!0,nextKey:this.state.nextKey+1,ripples:i})}else this.ignoreNextMouseDown=!1}},{key:"end",value:function(){var e=this.state.ripples;this.setState({ripples:b(e)}),this.props.abortOnScroll&&this.stopListeningForScrollAbort()}},{key:"startListeningForScrollAbort",value:function(e){this.firstTouchY=e.touches[0].clientY,this.firstTouchX=e.touches[0].clientX,document.body.addEventListener("touchmove",this.handleTouchMove)}},{key:"stopListeningForScrollAbort",value:function(){document.body.removeEventListener("touchmove",this.handleTouchMove)}},{key:"getRippleStyle",value:function(e){var t=p.default.findDOMNode(this),n=t.offsetHeight,r=t.offsetWidth,i=v.default.offset(t),o=e.touches&&e.touches.length,a=o?e.touches[0].pageX:e.pageX,s=o?e.touches[0].pageY:e.pageY,u=a-i.left,c=s-i.top,l=this.calcDiag(u,c),h=this.calcDiag(r-u,c),f=this.calcDiag(r-u,n-c),d=this.calcDiag(u,n-c),m=Math.max(l,h,f,d),g=2*m;return{directionInvariant:!0,height:g,width:g,top:c-m,left:u-m}}},{key:"calcDiag",value:function(e,t){return Math.sqrt(e*e+t*t)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.style,r=this.state,i=r.hasRipples,o=r.ripples,a=this.context.muiTheme.prepareStyles,s=void 0;if(i){var u=(0,l.default)({height:"100%",width:"100%",position:"absolute",top:0,left:0,overflow:"hidden",pointerEvents:"none",zIndex:1},n);s=f.default.createElement(m.default,{style:a(u)},o)}return f.default.createElement("div",{onMouseUp:this.handleMouseUp,onMouseDown:this.handleMouseDown,onMouseLeave:this.handleMouseLeave,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},s,t)}}]),t}(h.Component);_.defaultProps={abortOnScroll:!0},_.contextTypes={muiTheme:d.default.object.isRequired},_.propTypes={},t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(3),o=(r=i)&&r.__esModule?r:{default:r};var a=o.default.oneOf(["left","middle","right"]),s=o.default.oneOf(["top","center","bottom"]);t.default={corners:o.default.oneOf(["bottom-left","bottom-right","top-left","top-right"]),horizontal:a,vertical:s,origin:o.default.shape({horizontal:a,vertical:s}),cornersAndCenter:o.default.oneOf(["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"]),stringOrNumber:o.default.oneOfType([o.default.string,o.default.number]),zDepth:o.default.oneOf([0,1,2,3,4,5])}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(586),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return(0,o.default)("displayName",e)}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(587),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){return t+"("+(0,o.default)(e)+")"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=m(n(592));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.style,o=(0,i.default)(e,["children","style"]),a=this.context.muiTheme.prepareStyles,s=!1,u=h.Children.toArray(t)[0];(0,h.isValidElement)(u)&&u.type===p.default&&(s=!0);var c={root:{padding:(s?0:8)+"px 0px 8px 0px"}};return f.default.createElement("div",(0,r.default)({},o,{style:a((0,l.default)(c.root,n))}),t)}}]),t}(h.Component);v.contextTypes={muiTheme:d.default.object.isRequired},v.propTypes={},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(21)),i=y(n(22)),o=y(n(17)),a=y(n(15)),s=y(n(18)),u=y(n(19)),c=y(n(20)),l=y(n(14)),h=n(0),f=y(h),d=y(n(3)),p=y(n(595)),m=y(n(283)),v=y(n(284)),g=y(n(286));function y(e){return e&&e.__esModule?e:{default:e}}var b=!1,_=!1,w=!1;var x=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={isKeyboardFocused:!1},r.handleKeyDown=function(e){r.props.disabled||r.props.disableKeyboardFocus||"esc"===(0,m.default)(e)&&r.state.isKeyboardFocused&&r.removeKeyboardFocus(e),r.props.onKeyDown(e)},r.handleKeyUp=function(e){r.props.onKeyUp(e)},r.handleBlur=function(e){r.cancelFocusTimeout(),r.removeKeyboardFocus(e),r.props.onBlur(e)},r.handleFocus=function(e){e&&e.persist(),r.props.disabled||r.props.disableKeyboardFocus||(r.focusTimeout=setTimeout((function(){w&&(r.setKeyboardFocus(e),w=!1)}),150),r.props.onFocus(e))},r.handleClick=function(e){r.cancelFocusTimeout(),r.props.disabled||(w=!1,r.removeKeyboardFocus(e),r.props.onClick(e))},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.disabled,n=e.disableKeyboardFocus,r=e.keyboardFocused;t||!r||n||this.setState({isKeyboardFocused:!0})}},{key:"componentDidMount",value:function(){!function(){if(!b){var e=document.createElement("style");e.innerHTML="\n      button::-moz-focus-inner,\n      input::-moz-focus-inner {\n        border: 0;\n        padding: 0;\n      }\n    ",document.body.appendChild(e),b=!0}}(),_||(p.default.on(window,"keydown",(function(e){w="tab"===(0,m.default)(e)})),_=!0),this.state.isKeyboardFocused&&(this.button.focus(),this.props.onKeyboardFocus(null,!0))}},{key:"componentWillReceiveProps",value:function(e){(e.disabled||e.disableKeyboardFocus)&&this.state.isKeyboardFocused&&(this.setState({isKeyboardFocused:!1}),e.onKeyboardFocus&&e.onKeyboardFocus(null,!1))}},{key:"componentWillUnmount",value:function(){this.focusTimeout&&clearTimeout(this.focusTimeout)}},{key:"isKeyboardFocused",value:function(){return this.state.isKeyboardFocused}},{key:"removeKeyboardFocus",value:function(e){this.state.isKeyboardFocused&&(this.setState({isKeyboardFocused:!1}),this.props.onKeyboardFocus(e,!1))}},{key:"setKeyboardFocus",value:function(e){this.state.isKeyboardFocused||(this.setState({isKeyboardFocused:!0}),this.props.onKeyboardFocus(e,!0))}},{key:"cancelFocusTimeout",value:function(){this.focusTimeout&&(clearTimeout(this.focusTimeout),this.focusTimeout=null)}},{key:"createButtonChildren",value:function(){var e=this.props,t=e.centerRipple,n=e.children,r=e.disabled,i=e.disableFocusRipple,o=e.disableKeyboardFocus,a=e.disableTouchRipple,s=e.focusRippleColor,u=e.focusRippleOpacity,c=e.touchRippleColor,l=e.touchRippleOpacity,h=this.state.isKeyboardFocused,d=!h||r||i||o?void 0:f.default.createElement(v.default,{color:s,opacity:u,show:h,style:{overflow:"hidden"},key:"focusRipple"}),p=r||a?void 0:f.default.createElement(g.default,{centerRipple:t,color:c,opacity:l,key:"touchRipple"},n);return[d,p,p?void 0:n]}},{key:"render",value:function(){var e=this,t=this.props,n=(t.centerRipple,t.children),o=t.containerElement,a=t.disabled,s=(t.disableFocusRipple,t.disableKeyboardFocus),u=(t.disableTouchRipple,t.focusRippleColor,t.focusRippleOpacity,t.href),c=(t.keyboardFocused,t.touchRippleColor,t.touchRippleOpacity,t.onBlur,t.onClick,t.onFocus,t.onKeyUp,t.onKeyDown,t.onKeyboardFocus,t.style),h=t.tabIndex,d=t.type,p=(0,i.default)(t,["centerRipple","children","containerElement","disabled","disableFocusRipple","disableKeyboardFocus","disableTouchRipple","focusRippleColor","focusRippleOpacity","href","keyboardFocused","touchRippleColor","touchRippleOpacity","onBlur","onClick","onFocus","onKeyUp","onKeyDown","onKeyboardFocus","style","tabIndex","type"]),m=this.context.muiTheme,v=m.prepareStyles,g=m.enhancedButton,y=(0,l.default)({border:10,boxSizing:"border-box",display:"inline-block",fontFamily:this.context.muiTheme.baseTheme.fontFamily,WebkitTapHighlightColor:g.tapHighlightColor,cursor:a?"default":"pointer",textDecoration:"none",margin:0,padding:0,outline:"none",fontSize:"inherit",fontWeight:"inherit",position:"relative",verticalAlign:u?"middle":null},c);if(y.backgroundColor||y.background||(y.background="none"),a&&u)return f.default.createElement("span",(0,r.default)({},p,{style:y}),n);var b=(0,r.default)({},p,{style:v(y),ref:function(t){return e.button=t},disabled:a,onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyUp:this.handleKeyUp,onKeyDown:this.handleKeyDown,onClick:this.handleClick,tabIndex:a||s?-1:h});u&&(b.href=u);var _=this.createButtonChildren();return f.default.isValidElement(o)?f.default.cloneElement(o,b,_):(u||"button"!==o||(b.type=d),f.default.createElement(u?"a":o,b,_))}}]),t}(h.Component);x.defaultProps={containerElement:"button",onBlur:function(){},onClick:function(){},onFocus:function(){},onKeyDown:function(){},onKeyUp:function(){},onKeyboardFocus:function(){},tabIndex:0,type:"button"},x.contextTypes={muiTheme:d.default.object.isRequired},x.propTypes={},t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(293)),i=c(n(239)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t,n){var c={listeners:{},config:o({defaultConfig:u.defaultConfig},t)};e._=(0,r.default)(c,e._);var h=[{action:a.firestoreActions.deleteRef,name:"delete"},{action:a.firestoreActions.setListener,name:"onSnapshot"}],f=(0,s.mapWithFirebaseAndDispatch)(e,n,a.firestoreActions,h),d=(0,i.default)(u.methodsToAddFromFirestore,(function(t,n){return e.firestore&&"function"===typeof e.firestore()[n]?o({},t,l({},n,e.firestore()[n].bind(e.firestore()))):t}),{});return o(d,e.firestore,{_:e._},t.helpersNamespace?l({},t.helpersNamespace,f):f)};var a=n(294),s=n(295),u=n(38);function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(116)("merge",n(607));r.placeholder=n(91),e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firestoreActions=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(608));t.firestoreActions=r,t.default={firestoreActions:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(151)),i=u(n(23)),o=u(n(16)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=e.payload;return(0,i.default)(n)?n(t):n}t.wrapInDispatch=function(e,t){var n=t.ref,r=t.meta,i=void 0===r?{}:r,a=t.method,u=t.args,l=void 0===u?[]:u,h=t.types,f=s(h,3),d=f[0],p=f[1],m=f[2];return e({type:(0,o.default)(d)?d.type:d,meta:i,payload:(0,o.default)(d)?d.payload:{args:l}}),n[a].apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(l)).then((function(t){var n=(0,o.default)(p),r={type:n?p.type:p,meta:i,payload:n&&p.payload?c(p,t):{args:l}};return n&&p.preserve&&(r.preserve=p.preserve),n&&p.merge&&(r.merge=p.merge),e(r),t})).catch((function(t){return e({type:m,meta:i,payload:t}),Promise.reject(t)}))},t.mapWithFirebaseAndDispatch=function(e,t,n,i){var o=function(e,t){return function(n){return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.apply(e,[e,t].concat(i))}}}(e,t);return a({},(0,r.default)(n,o),i.reduce((function(e,t){var n=t.action,r=t.name;return a({},e,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},r,o(n)))}),{}))}},function(e,t,n){var r=n(167);e.exports=function(e,t){for(var n=-1,i=e.length;++n<i&&r(t,e[n],0)>-1;);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=n(191),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=r.__assign({identifier:"[DEFAULT]",optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(s){if(i)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService("[DEFAULT]")}catch(h){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[0],u=a[1],c=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService(c);u.resolve(l)}catch(h){}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return"[DEFAULT]"===e?void 0:e}(e)),this.instances.set(e,t)),t||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},e}();var s=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=s,t.Provider=a},function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,"LogLevel",(function(){return i})),n.d(t,"Logger",(function(){return u})),n.d(t,"setLogLevel",(function(){return c}));var i,o=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(e,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<e.logLevel)){var a=(new Date).toISOString();switch(t){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+e.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}},u=function(){function e(e){this.name=e,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,r([this,i.ERROR],e))},e}();function c(e){o.forEach((function(t){t.logLevel=e}))}},,,,,,,function(e,t,n){"use strict";(function(t){var n="__global_unique_id__";e.exports=function(){return t[n]=(t[n]||0)+1}}).call(this,n(47))},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(0)),a=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=!1,l=!1,h=!1,f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onScriptLoaded=function(){t.stripeHandler||(t.stripeHandler=StripeCheckout.configure({key:n.props.stripeKey}),n.hasPendingClick&&n.showStripeDialog())},n.onScriptError=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.hideLoadingDialog(),n.props.onScriptError&&n.props.onScriptError.apply(n,t)},n.onClosed=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n._isMounted&&n.setState({open:!1}),n.props.closed&&n.props.closed.apply(n,t)},n.onOpened=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.setState({open:!0}),n.props.opened&&n.props.opened.apply(n,t)},n.getConfig=function(){return["token","image","name","description","amount","locale","currency","panelLabel","zipCode","shippingAddress","billingAddress","email","allowRememberMe","bitcoin","alipay","alipayReusable"].reduce((function(e,t){return r({},e,n.props.hasOwnProperty(t)&&u({},t,n.props[t]))}),{opened:n.onOpened,closed:n.onClosed})},n.onClick=function(){if(!n.props.disabled)if(h)try{throw new Error("Tried to call onClick, but StripeCheckout failed to load")}catch(e){}else t.stripeHandler?n.showStripeDialog():(n.showLoadingDialog(),n.hasPendingClick=!0)},n.handleOnMouseDown=function(){n.setState({buttonActive:!0})},n.handleOnMouseUp=function(){n.setState({buttonActive:!1})},n.state={open:!1,buttonActive:!1},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,!l&&!c){c=!0;var t=document.createElement("script");"function"===typeof this.props.onScriptTagCreated&&this.props.onScriptTagCreated(t),t.src="https://checkout.stripe.com/checkout.js",t.async=1,this.loadPromise=function(){var n=!1,r=new Promise((function(n,r){t.onload=function(){l=!0,c=!1,n(),e.onScriptLoaded()},t.onerror=function(t){h=!0,c=!1,r(t),e.onScriptError(t)}}));return{promise:new Promise((function(e,t){r.then((function(){return n?t({isCanceled:!0}):e()})),r.catch((function(e){return t(n?{isCanceled:!0}:e)}))})),cancel:function(){n=!0}}}(),this.loadPromise.promise.then(this.onScriptLoaded).catch(this.onScriptError),document.body.appendChild(t)}}},{key:"componentDidUpdate",value:function(){c||this.updateStripeHandler()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.loadPromise&&this.loadPromise.cancel(),t.stripeHandler&&this.state.open&&t.stripeHandler.close()}},{key:"updateStripeHandler",value:function(){t.stripeHandler&&!this.props.reconfigureOnUpdate||(t.stripeHandler=StripeCheckout.configure({key:this.props.stripeKey}))}},{key:"showLoadingDialog",value:function(){if(this.props.showLoadingDialog){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props.showLoadingDialog.apply(this,t)}}},{key:"hideLoadingDialog",value:function(){if(this.props.hideLoadingDialog){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.props.hideLoadingDialog.apply(this,t)}}},{key:"showStripeDialog",value:function(){this.hideLoadingDialog(),t.stripeHandler.open(this.getConfig())}},{key:"renderDefaultStripeButton",value:function(){return o.default.createElement("button",r({},u({},this.props.triggerEvent,this.onClick),{className:this.props.className,onMouseDown:this.handleOnMouseDown,onFocus:this.handleOnMouseDown,onMouseUp:this.handleOnMouseUp,onMouseOut:this.handleOnMouseUp,onBlur:this.handleOnMouseUp,style:r({},{overflow:"hidden",display:"inline-block",background:"linear-gradient(#28a0e5,#015e94)",border:0,padding:1,textDecoration:"none",borderRadius:5,boxShadow:"0 1px 0 rgba(0,0,0,0.2)",cursor:"pointer",visibility:"visible",userSelect:"none"},this.state.buttonActive&&{background:"#005d93"},this.props.style)}),o.default.createElement("span",{style:r({},{backgroundImage:"linear-gradient(#7dc5ee,#008cdd 85%,#30a2e4)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",color:"#fff",fontWeight:"bold",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",textShadow:"0 -1px 0 rgba(0,0,0,0.25)",borderRadius:4},this.state.buttonActive&&{color:"#eee",boxShadow:"inset 0 1px 0 rgba(0,0,0,0.1)",backgroundImage:"linear-gradient(#008cdd,#008cdd 85%,#239adf)"},this.props.textStyle)},this.props.label))}},{key:"renderDisabledButton",value:function(){return o.default.createElement("button",{disabled:!0,style:{background:"rgba(0,0,0,0.2)",overflow:"hidden",display:"inline-block",border:0,padding:1,textDecoration:"none",borderRadius:5,userSelect:"none"}},o.default.createElement("span",{style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",borderRadius:4,color:"#999",background:"#f8f9fa",textShadow:"0 1px 0 rgba(255,255,255,0.5)"}},this.props.label))}},{key:"render",value:function(){!0!==this.props.desktopShowModal||this.state.open?!1===this.props.desktopShowModal&&this.state.open&&t.stripeHandler.close():this.onClick();var e=this.props.ComponentClass;return this.props.children?o.default.createElement(e,r({},u({},this.props.triggerEvent,this.onClick),{children:this.props.children})):this.props.disabled?this.renderDisabledButton():this.renderDefaultStripeButton()}}]),t}(o.default.Component);f.defaultProps={className:"StripeCheckout",label:"Pay With Card",locale:"auto",ComponentClass:"span",reconfigureOnUpdate:!1,triggerEvent:"onClick"},f.propTypes={desktopShowModal:a.default.bool,triggerEvent:a.default.oneOf(["onClick","onTouchTap","onTouchStart"]),label:a.default.string,style:a.default.object,textStyle:a.default.object,disabled:a.default.bool,ComponentClass:a.default.string,showLoadingDialog:a.default.func,hideLoadingDialog:a.default.func,onScriptError:a.default.func,onScriptTagCreated:a.default.func,reconfigureOnUpdate:a.default.bool,stripeKey:a.default.string.isRequired,token:a.default.func.isRequired,name:a.default.string,description:a.default.string,image:a.default.string,amount:a.default.number,locale:a.default.oneOf(["auto","zh","da","nl","en","fr","de","it","ja","no","es","sv"]),currency:a.default.oneOf(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BIF","BMD","BND","BOB","BRL","BSD","BWP","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ETB","EUR","FJD","FKP","GBP","GEL","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","ISK","JMD","JPY","KES","KGS","KHR","KMF","KRW","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","MAD","MDL","MGA","MKD","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SZL","THB","TJS","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW"]),panelLabel:a.default.string,zipCode:a.default.bool,billingAddress:a.default.bool,shippingAddress:a.default.bool,email:a.default.string,allowRememberMe:a.default.bool,bitcoin:a.default.bool,alipay:a.default.oneOf(["auto",!0,!1]),alipayReusable:a.default.bool,opened:a.default.func,closed:a.default.func},f._isMounted=!1,t.default=f},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var i=r();i.withExtraArgument=r,t.a=i},function(e,t,n){"use strict";var r=n(1);r.e._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var e=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n},t=function(e,t,n){var r,i,o=e.cycle;for(r in o)i=o[r],e[r]="function"===typeof i?i(n,t[n],t):i[n%i.length];delete e.cycle},n=function(e){if("function"===typeof e)return e;var t="object"===typeof e?e:{each:e},n=t.ease,r=t.from||0,i=t.base||0,o={},a=isNaN(r),s=t.axis,u={center:.5,end:1}[r]||0;return function(e,c,l){var h,f,d,p,m,v,g,y,b,_=(l||t).length,w=o[_];if(!w){if(!(b="auto"===t.grid?0:(t.grid||[1/0])[0])){for(g=-1/0;g<(g=l[b++].getBoundingClientRect().left)&&b<_;);b--}for(w=o[_]=[],h=a?Math.min(b,_)*u-.5:r%b,f=a?_*u/b-.5:r/b|0,g=0,y=1/0,v=0;v<_;v++)d=v%b-h,p=f-(v/b|0),w[v]=m=s?Math.abs("y"===s?p:d):Math.sqrt(d*d+p*p),m>g&&(g=m),m<y&&(y=m);w.max=g-y,w.min=y,w.v=_=t.amount||t.each*(b>_?_-1:s?"y"===s?_/b:b:Math.max(b,_/b))||0,w.b=_<0?i-_:i}return _=(w[e]-w.min)/w.max,w.b+(n?n.getRatio(_):_)*w.v}},i=function e(t,n,i){r.f.call(this,t,n,i),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=e.prototype.render},o=r.f._internals,a=o.isSelector,s=o.isArray,u=i.prototype=r.f.to({},.1,{}),c=[];i.version="2.1.3",u.constructor=i,u.kill()._gc=!1,i.killTweensOf=i.killDelayedCallsTo=r.f.killTweensOf,i.getTweensOf=r.f.getTweensOf,i.lagSmoothing=r.f.lagSmoothing,i.ticker=r.f.ticker,i.render=r.f.render,i.distribute=n,u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),r.f.prototype.invalidate.call(this)},u.updateTo=function(e,t){var n,i=this.ratio,o=this.vars.immediateRender||e.immediateRender;for(n in t&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),e)this.vars[n]=e[n];if(this._initted||o)if(t)this._initted=!1,o&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&r.f._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var a=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(a,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||o)for(var s,u=1/(1-i),c=this._firstPT;c;)s=c.s+c.c,c.c*=u,c.s=s-c.c,c=c._next;return this},u.render=function(e,t,n){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var i,a,s,u,c,l,h,f,d,p=this._dirty?this.totalDuration():this._totalDuration,m=this._time,v=this._totalTime,g=this._cycle,y=this._duration,b=this._rawPrevTime;if(e>=p-1e-8&&e>=0?(this._totalTime=p,this._cycle=this._repeat,this._yoyo&&0!==(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=y,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(i=!0,a="onComplete",n=n||this._timeline.autoRemoveChildren),0===y&&(this._initted||!this.vars.lazy||n)&&(this._startTime===this._timeline._duration&&(e=0),(b<0||e<=0&&e>=-1e-8||1e-8===b&&"isPause"!==this.data)&&b!==e&&(n=!0,b>1e-8&&(a="onReverseComplete")),this._rawPrevTime=f=!t||e||b===e?e:1e-8)):e<1e-8?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==v||0===y&&b>0)&&(a="onReverseComplete",i=this._reversed),e>-1e-8?e=0:e<0&&(this._active=!1,0===y&&(this._initted||!this.vars.lazy||n)&&(b>=0&&(n=!0),this._rawPrevTime=f=!t||e||b===e?e:1e-8)),this._initted||(n=!0)):(this._totalTime=this._time=e,0!==this._repeat&&(u=y+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&v<=e&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!==(1&this._cycle)&&(this._time=y-this._time,(d=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==d||this._initted?this._yoyoEase=d=!0===d?this._ease:d instanceof r.b?d:r.b.map[d]:(d=this.vars.ease,this._yoyoEase=d=d?d instanceof r.b?d:"function"===typeof d?new r.b(d,this.vars.easeParams):r.b.map[d]||r.f.defaultEase:r.f.defaultEase)),this.ratio=d?1-d.getRatio((y-this._time)/y):0)),this._time>y?this._time=y:this._time<0&&(this._time=0)),this._easeType&&!d?(c=this._time/y,(1===(l=this._easeType)||3===l&&c>=.5)&&(c=1-c),3===l&&(c*=2),1===(h=this._easePower)?c*=c:2===h?c*=c*c:3===h?c*=c*c*c:4===h&&(c*=c*c*c*c),this.ratio=1===l?1-c:2===l?c:this._time/y<.5?c/2:1-c/2):d||(this.ratio=this._ease.getRatio(this._time/y))),m!==this._time||n||g!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!n&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=m,this._totalTime=v,this._rawPrevTime=b,this._cycle=g,o.lazyTweens.push(this),void(this._lazy=[e,t]);!this._time||i||d?i&&this._ease._calcEnd&&!d&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/y)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==m&&e>=0&&(this._active=!0),0===v&&(2===this._initted&&e>0&&this._init(),this._startAt&&(e>=0?this._startAt.render(e,!0,n):a||(a="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==y||t||this._callback("onStart"))),s=this._firstPT;s;)s.f?s.t[s.p](s.c*this.ratio+s.s):s.t[s.p]=s.c*this.ratio+s.s,s=s._next;this._onUpdate&&(e<0&&this._startAt&&this._startTime&&this._startAt.render(e,!0,n),t||(this._totalTime!==v||a)&&this._callback("onUpdate")),this._cycle!==g&&(t||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),a&&(this._gc&&!n||(e<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(e,!0,n),i&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[a]&&this._callback(a),0===y&&1e-8===this._rawPrevTime&&1e-8!==f&&(this._rawPrevTime=0)))}else v!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},i.to=function(e,t,n){return new i(e,t,n)},i.from=function(e,t,n){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,new i(e,t,n)},i.fromTo=function(e,t,n,r){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,new i(e,t,r)},i.staggerTo=i.allTo=function(o,u,l,h,f,d,p){var m,v,g,y,b=[],_=n(l.stagger||h),w=l.cycle,x=(l.startAt||c).cycle;for(s(o)||("string"===typeof o&&(o=r.f.selector(o)||o),a(o)&&(o=e(o))),m=(o=o||[]).length-1,g=0;g<=m;g++){for(y in v={},l)v[y]=l[y];if(w&&(t(v,o,g),null!=v.duration&&(u=v.duration,delete v.duration)),x){for(y in x=v.startAt={},l.startAt)x[y]=l.startAt[y];t(v.startAt,o,g)}v.delay=_(g,o[g],o)+(v.delay||0),g===m&&f&&(v.onComplete=function(){l.onComplete&&l.onComplete.apply(l.onCompleteScope||this,arguments),f.apply(p||l.callbackScope||this,d||c)}),b[g]=new i(o[g],u,v)}return b},i.staggerFrom=i.allFrom=function(e,t,n,r,o,a,s){return n.runBackwards=!0,n.immediateRender=0!=n.immediateRender,i.staggerTo(e,t,n,r,o,a,s)},i.staggerFromTo=i.allFromTo=function(e,t,n,r,o,a,s,u){return r.startAt=n,r.immediateRender=0!=r.immediateRender&&0!=n.immediateRender,i.staggerTo(e,t,r,o,a,s,u)},i.delayedCall=function(e,t,n,r,o){return new i(t,0,{delay:e,onComplete:t,onCompleteParams:n,callbackScope:r,onReverseComplete:t,onReverseCompleteParams:n,immediateRender:!1,useFrames:o,overwrite:0})},i.set=function(e,t){return new i(e,0,t)},i.isTweening=function(e){return r.f.getTweensOf(e,!0).length>0};var l=function e(t,n){for(var i=[],o=0,a=t._first;a;)a instanceof r.f?i[o++]=a:(n&&(i[o++]=a),o=(i=i.concat(e(a,n))).length),a=a._next;return i},h=i.getAllTweens=function(e){return l(r.a._rootTimeline,e).concat(l(r.a._rootFramesTimeline,e))};i.killAll=function(e,t,n,i){null==t&&(t=!0),null==n&&(n=!0);var o,a,s,u=h(0!=i),c=u.length,l=t&&n&&i;for(s=0;s<c;s++)a=u[s],(l||a instanceof r.c||(o=a.target===a.vars.onComplete)&&n||t&&!o)&&(e?a.totalTime(a._reversed?0:a.totalDuration()):a._enabled(!1,!1))},i.killChildTweensOf=function(t,n){if(null!=t){var u,c,l,h,f,d=o.tweenLookup;if("string"===typeof t&&(t=r.f.selector(t)||t),a(t)&&(t=e(t)),s(t))for(h=t.length;--h>-1;)i.killChildTweensOf(t[h],n);else{for(l in u=[],d)for(c=d[l].target.parentNode;c;)c===t&&(u=u.concat(d[l].tweens)),c=c.parentNode;for(f=u.length,h=0;h<f;h++)n&&u[h].totalTime(u[h].totalDuration()),u[h]._enabled(!1,!1)}}};var f=function(e,t,n,i){t=!1!==t,n=!1!==n;for(var o,a,s=h(i=!1!==i),u=t&&n&&i,c=s.length;--c>-1;)a=s[c],(u||a instanceof r.c||(o=a.target===a.vars.onComplete)&&n||t&&!o)&&a.paused(e)};return i.pauseAll=function(e,t,n){f(!0,e,t,n)},i.resumeAll=function(e,t,n){f(!1,e,t,n)},i.globalTimeScale=function(e){var t=r.a._rootTimeline,n=r.f.ticker.time;return arguments.length?(e=e||1e-8,t._startTime=n-(n-t._startTime)*t._timeScale/e,t=r.a._rootFramesTimeline,n=r.f.ticker.frame,t._startTime=n-(n-t._startTime)*t._timeScale/e,t._timeScale=r.a._rootTimeline._timeScale=e,e):t._timeScale},u.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this.duration()?this._time/this._duration:this.ratio},u.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()},u.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var n=this._duration,r=this._cycle,i=r*(n+this._repeatDelay);return e>n&&(e=n),this.totalTime(this._yoyo&&1&r?n-e+i:this._repeat?e+i:e,t)},u.duration=function(e){return arguments.length?r.a.prototype.duration.call(this,e):this._duration},u.totalDuration=function(e){return arguments.length?-1===this._repeat?this:this.duration((e-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},u.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},u.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},u.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},i}),!0);var i=r.g.TweenMax;r.e._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],(function(){var e,t,n,i,o=function e(){r.d.call(this,"css"),this._overwriteProps.length=0,this.setRatio=e.prototype.setRatio},a=r.e._gsDefine.globals,s={},u=o.prototype=new r.d("css");u.constructor=o,o.version="2.1.3",o.API=2,o.defaultTransformPerspective=0,o.defaultSkewType="compensated",o.defaultSmoothOrigin=!0,o.suffixMap={top:u="px",right:u,bottom:u,left:u,width:u,height:u,fontSize:u,padding:u,margin:u,perspective:u,lineHeight:""};var c,l,h,f,d,p,m,v,g=/(?:\-|\.|\b)(\d|\.|e\-)+/g,y=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,b=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,_=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b),?/gi,w=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,x=/(?:\d|\-|\+|=|#|\.)*/g,T=/opacity *= *([^)]*)/i,S=/opacity:([^;]*)/i,E=/alpha\(opacity *=.+?\)/i,M=/^(rgb|hsl)/,C=/([A-Z])/g,A=/-([a-z])/gi,P=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,O=function(e,t){return t.toUpperCase()},k=/(?:Left|Right|Width)/i,I=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,R=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,D=/,(?=[^\)]*(?:\(|$))/gi,L=/[\s,\(]/i,N=Math.PI/180,F=180/Math.PI,U={},j={style:{}},B=r.e.document||{createElement:function(){return j}},z=function(e,t){var n=B.createElementNS?B.createElementNS(t||"http://www.w3.org/1999/xhtml",e):B.createElement(e);return n.style?n:B.createElement(e)},V=z("div"),W=z("img"),G=o._internals={_specialProps:s},H=(r.e.navigator||{}).userAgent||"",q=function(){var e=H.indexOf("Android"),t=z("a");return h=-1!==H.indexOf("Safari")&&-1===H.indexOf("Chrome")&&(-1===e||parseFloat(H.substr(e+8,2))>3),d=h&&parseFloat(H.substr(H.indexOf("Version/")+8,2))<6,f=-1!==H.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H))&&(p=parseFloat(RegExp.$1)),!!t&&(t.style.cssText="top:1px;opacity:.55;",/^0.55/.test(t.style.opacity))}(),Y=function(e){return T.test("string"===typeof e?e:(e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100:1},K=function(e){r.e.console&&console.log(e)},X="",Q="",J=function(e,t){var n,r,i=(t=t||V).style;if(void 0!==i[e])return e;for(e=e.charAt(0).toUpperCase()+e.substr(1),n=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===i[n[r]+e];);return r>=0?(X="-"+(Q=3===r?"ms":n[r]).toLowerCase()+"-",Q+e):null},Z="undefined"!==typeof window?window:B.defaultView||{getComputedStyle:function(){}},$=function(e){return Z.getComputedStyle(e)},ee=o.getStyle=function(e,t,n,r,i){var o;return q||"opacity"!==t?(!r&&e.style[t]?o=e.style[t]:(n=n||$(e))?o=n[t]||n.getPropertyValue(t)||n.getPropertyValue(t.replace(C,"-$1").toLowerCase()):e.currentStyle&&(o=e.currentStyle[t]),null==i||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:i):Y(e)},te=G.convertToPixels=function(e,t,n,i,a){if("px"===i||!i&&"lineHeight"!==t)return n;if("auto"===i||!n)return 0;var s,u,c,l=k.test(t),h=e,f=V.style,d=n<0,p=1===n;if(d&&(n=-n),p&&(n*=100),"lineHeight"!==t||i)if("%"===i&&-1!==t.indexOf("border"))s=n/100*(l?e.clientWidth:e.clientHeight);else{if(f.cssText="border:0 solid red;position:"+ee(e,"position")+";line-height:0;","%"!==i&&h.appendChild&&"v"!==i.charAt(0)&&"rem"!==i)f[l?"borderLeftWidth":"borderTopWidth"]=n+i;else{if(h=e.parentNode||B.body,-1!==ee(h,"display").indexOf("flex")&&(f.position="absolute"),u=h._gsCache,c=r.f.ticker.frame,u&&l&&u.time===c)return u.width*n/100;f[l?"width":"height"]=n+i}h.appendChild(V),s=parseFloat(V[l?"offsetWidth":"offsetHeight"]),h.removeChild(V),l&&"%"===i&&!1!==o.cacheWidths&&((u=h._gsCache=h._gsCache||{}).time=c,u.width=s/n*100),0!==s||a||(s=te(e,t,n,i,!0))}else u=$(e).lineHeight,e.style.lineHeight=n,s=parseFloat($(e).lineHeight),e.style.lineHeight=u;return p&&(s/=100),d?-s:s},ne=G.calculateOffset=function(e,t,n){if("absolute"!==ee(e,"position",n))return 0;var r="left"===t?"Left":"Top",i=ee(e,"margin"+r,n);return e["offset"+r]-(te(e,t,parseFloat(i),i.replace(x,""))||0)},re=function(e,t){var n,r,i,o={};if(t=t||$(e))if(n=t.length)for(;--n>-1;)-1!==(i=t[n]).indexOf("-transform")&&Oe!==i||(o[i.replace(A,O)]=t.getPropertyValue(i));else for(n in t)-1!==n.indexOf("Transform")&&Pe!==n||(o[n]=t[n]);else if(t=e.currentStyle||e.style)for(n in t)"string"===typeof n&&void 0===o[n]&&(o[n.replace(A,O)]=t[n]);return q||(o.opacity=Y(e)),r=Ge(e,t,!1),o.rotation=r.rotation,o.skewX=r.skewX,o.scaleX=r.scaleX,o.scaleY=r.scaleY,o.x=r.x,o.y=r.y,Ie&&(o.z=r.z,o.rotationX=r.rotationX,o.rotationY=r.rotationY,o.scaleZ=r.scaleZ),o.filters&&delete o.filters,o},ie=function(e,t,n,r,i){var o,a,s,u={},c=e.style;for(a in n)"cssText"!==a&&"length"!==a&&isNaN(a)&&(t[a]!==(o=n[a])||i&&i[a])&&-1===a.indexOf("Origin")&&("number"!==typeof o&&"string"!==typeof o||(u[a]="auto"!==o||"left"!==a&&"top"!==a?""!==o&&"auto"!==o&&"none"!==o||"string"!==typeof t[a]||""===t[a].replace(w,"")?o:0:ne(e,a),void 0!==c[a]&&(s=new be(c,a,c[a],s))));if(r)for(a in r)"className"!==a&&(u[a]=r[a]);return{difs:u,firstMPT:s}},oe={width:["Left","Right"],height:["Top","Bottom"]},ae=["marginLeft","marginRight","marginTop","marginBottom"],se=function(e,t,n){if("svg"===(e.nodeName+"").toLowerCase())return(n||$(e))[t]||0;if(e.getCTM&&ze(e))return e.getBBox()[t]||0;var r=parseFloat("width"===t?e.offsetWidth:e.offsetHeight),i=oe[t],o=i.length;for(n=n||$(e);--o>-1;)r-=parseFloat(ee(e,"padding"+i[o],n,!0))||0,r-=parseFloat(ee(e,"border"+i[o]+"Width",n,!0))||0;return r},ue=function e(t,n){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var r,i=t.split(" "),o=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":i[0],a=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":i[1];if(i.length>3&&!n){for(i=t.split(", ").join(",").split(","),t=[],r=0;r<i.length;r++)t.push(e(i[r]));return t.join(",")}return null==a?a="center"===o?"50%":"0":"center"===a&&(a="50%"),("center"===o||isNaN(parseFloat(o))&&-1===(o+"").indexOf("="))&&(o="50%"),t=o+" "+a+(i.length>2?" "+i[2]:""),n&&(n.oxp=-1!==o.indexOf("%"),n.oyp=-1!==a.indexOf("%"),n.oxr="="===o.charAt(1),n.oyr="="===a.charAt(1),n.ox=parseFloat(o.replace(w,"")),n.oy=parseFloat(a.replace(w,"")),n.v=t),n||t},ce=function(e,t){return"function"===typeof e&&(e=e(v,m)),"string"===typeof e&&"="===e.charAt(1)?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2)):parseFloat(e)-parseFloat(t)||0},le=function(e,t){"function"===typeof e&&(e=e(v,m));var n="string"===typeof e&&"="===e.charAt(1);return"string"===typeof e&&"v"===e.charAt(e.length-2)&&(e=(n?e.substr(0,2):0)+window["inner"+("vh"===e.substr(-2)?"Height":"Width")]*(parseFloat(n?e.substr(2):e)/100)),null==e?t:n?parseInt(e.charAt(0)+"1",10)*parseFloat(e.substr(2))+t:parseFloat(e)||0},he=function(e,t,n,r){var i,o,a,s;return"function"===typeof e&&(e=e(v,m)),null==e?a=t:"number"===typeof e?a=e:(360,i=e.split("_"),o=((s="="===e.charAt(1))?parseInt(e.charAt(0)+"1",10)*parseFloat(i[0].substr(2)):parseFloat(i[0]))*(-1===e.indexOf("rad")?1:F)-(s?0:t),i.length&&(r&&(r[n]=t+o),-1!==e.indexOf("short")&&(o%=360)!==o%180&&(o=o<0?o+360:o-360),-1!==e.indexOf("_cw")&&o<0?o=(o+3599999999640)%360-360*(o/360|0):-1!==e.indexOf("ccw")&&o>0&&(o=(o-3599999999640)%360-360*(o/360|0))),a=t+o),a<1e-6&&a>-1e-6&&(a=0),a},fe={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},de=function(e,t,n){return 255*(6*(e=e<0?e+1:e>1?e-1:e)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)+.5|0},pe=o.parseColor=function(e,t){var n,r,i,o,a,s,u,c,l,h,f;if(e)if("number"===typeof e)n=[e>>16,e>>8&255,255&e];else{if(","===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),fe[e])n=fe[e];else if("#"===e.charAt(0))4===e.length&&(r=e.charAt(1),i=e.charAt(2),o=e.charAt(3),e="#"+r+r+i+i+o+o),n=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e];else if("hsl"===e.substr(0,3))if(n=f=e.match(g),t){if(-1!==e.indexOf("="))return e.match(y)}else a=Number(n[0])%360/360,s=Number(n[1])/100,r=2*(u=Number(n[2])/100)-(i=u<=.5?u*(s+1):u+s-u*s),n.length>3&&(n[3]=Number(n[3])),n[0]=de(a+1/3,r,i),n[1]=de(a,r,i),n[2]=de(a-1/3,r,i);else n=e.match(g)||fe.transparent;n[0]=Number(n[0]),n[1]=Number(n[1]),n[2]=Number(n[2]),n.length>3&&(n[3]=Number(n[3]))}else n=fe.black;return t&&!f&&(r=n[0]/255,i=n[1]/255,o=n[2]/255,u=((c=Math.max(r,i,o))+(l=Math.min(r,i,o)))/2,c===l?a=s=0:(h=c-l,s=u>.5?h/(2-c-l):h/(c+l),a=c===r?(i-o)/h+(i<o?6:0):c===i?(o-r)/h+2:(r-i)/h+4,a*=60),n[0]=a+.5|0,n[1]=100*s+.5|0,n[2]=100*u+.5|0),n},me=function(e,t){var n,r,i,o=e.match(ve)||[],a=0,s="";if(!o.length)return e;for(n=0;n<o.length;n++)r=o[n],a+=(i=e.substr(a,e.indexOf(r,a)-a)).length+r.length,3===(r=pe(r,t)).length&&r.push(1),s+=i+(t?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return s+e.substr(a)},ve="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(u in fe)ve+="|"+u+"\\b";ve=new RegExp(ve+")","gi"),o.colorStringFilter=function(e){var t,n=e[0]+" "+e[1];ve.test(n)&&(t=-1!==n.indexOf("hsl(")||-1!==n.indexOf("hsla("),e[0]=me(e[0],t),e[1]=me(e[1],t)),ve.lastIndex=0},r.f.defaultStringFilter||(r.f.defaultStringFilter=o.colorStringFilter);var ge=function(e,t,n,r){if(null==e)return function(e){return e};var i,o=t?(e.match(ve)||[""])[0]:"",a=e.split(o).join("").match(b)||[],s=e.substr(0,e.indexOf(a[0])),u=")"===e.charAt(e.length-1)?")":"",c=-1!==e.indexOf(" ")?" ":",",l=a.length,h=l>0?a[0].replace(g,""):"";return l?i=t?function(e){var t,f,d,p;if("number"===typeof e)e+=h;else if(r&&D.test(e)){for(p=e.replace(D,"|").split("|"),d=0;d<p.length;d++)p[d]=i(p[d]);return p.join(",")}if(t=(e.match(ve)||[o])[0],d=(f=e.split(t).join("").match(b)||[]).length,l>d--)for(;++d<l;)f[d]=n?f[(d-1)/2|0]:a[d];return s+f.join(c)+c+t+u+(-1!==e.indexOf("inset")?" inset":"")}:function(e){var t,o,f;if("number"===typeof e)e+=h;else if(r&&D.test(e)){for(o=e.replace(D,"|").split("|"),f=0;f<o.length;f++)o[f]=i(o[f]);return o.join(",")}if(f=(t=e.match(","===c?b:_)||[]).length,l>f--)for(;++f<l;)t[f]=n?t[(f-1)/2|0]:a[f];return(s&&"none"!==e&&e.substr(0,e.indexOf(t[0]))||s)+t.join(c)+u}:function(e){return e}},ye=function(e){return e=e.split(","),function(t,n,r,i,o,a,s){var u,c=(n+"").split(" ");for(s={},u=0;u<4;u++)s[e[u]]=c[u]=c[u]||c[(u-1)/2>>0];return i.parse(t,s,o,a)}},be=(G._setPluginRatio=function(e){this.plugin.setRatio(e);for(var t,n,r,i,o,a=this.data,s=a.proxy,u=a.firstMPT;u;)t=s[u.v],u.r?t=u.r(t):t<1e-6&&t>-1e-6&&(t=0),u.t[u.p]=t,u=u._next;if(a.autoRotate&&(a.autoRotate.rotation=a.mod?a.mod.call(this._tween,s.rotation,this.t,this._tween):s.rotation),1===e||0===e)for(u=a.firstMPT,o=1===e?"e":"b";u;){if((n=u.t).type){if(1===n.type){for(i=n.xs0+n.s+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n[o]=i}}else n[o]=n.s+n.xs0;u=u._next}},function(e,t,n,r,i){this.t=e,this.p=t,this.v=n,this.r=i,r&&(r._prev=this,this._next=r)}),_e=(G._parseToProxy=function(e,t,n,r,i,o){var a,s,u,c,l,h=r,f={},d={},p=n._transform,m=U;for(n._transform=null,U=t,r=l=n.parse(e,t,r,i),U=m,o&&(n._transform=p,h&&(h._prev=null,h._prev&&(h._prev._next=null)));r&&r!==h;){if(r.type<=1&&(d[s=r.p]=r.s+r.c,f[s]=r.s,o||(c=new be(r,"s",s,c,r.r),r.c=0),1===r.type))for(a=r.l;--a>0;)u="xn"+a,d[s=r.p+"_"+u]=r.data[u],f[s]=r[u],o||(c=new be(r,u,s,c,r.rxp[u]));r=r._next}return{proxy:f,end:d,firstMPT:c,pt:l}},G.CSSPropTween=function(t,n,r,o,a,s,u,c,l,h,f){this.t=t,this.p=n,this.s=r,this.c=o,this.n=u||n,t instanceof _e||i.push(this.n),this.r=c?"function"===typeof c?c:Math.round:c,this.type=s||0,l&&(this.pr=l,e=!0),this.b=void 0===h?r:h,this.e=void 0===f?r+o:f,a&&(this._next=a,a._prev=this)}),we=function(e,t,n,r,i,o){var a=new _e(e,t,n,r-n,i,-1,o);return a.b=n,a.e=a.xs0=r,a},xe=o.parseComplex=function(e,t,n,r,i,a,s,u,l,h){n=n||a||"","function"===typeof r&&(r=r(v,m)),s=new _e(e,t,0,0,s,h?2:1,null,!1,u,n,r),r+="",i&&ve.test(r+n)&&(o.colorStringFilter(r=[n,r]),n=r[0],r=r[1]);var f,d,p,b,_,w,x,T,S,E,M,C,A,P=n.split(", ").join(",").split(" "),O=r.split(", ").join(",").split(" "),k=P.length,I=!1!==c;for(-1===r.indexOf(",")&&-1===n.indexOf(",")||(-1!==(r+n).indexOf("rgb")||-1!==(r+n).indexOf("hsl")?(P=P.join(" ").replace(D,", ").split(" "),O=O.join(" ").replace(D,", ").split(" ")):(P=P.join(" ").split(",").join(", ").split(" "),O=O.join(" ").split(",").join(", ").split(" ")),k=P.length),k!==O.length&&(k=(P=(a||"").split(" ")).length),s.plugin=l,s.setRatio=h,ve.lastIndex=0,f=0;f<k;f++)if(b=P[f],_=O[f]+"",(T=parseFloat(b))||0===T)s.appendXtra("",T,ce(_,T),_.replace(y,""),!(!I||-1===_.indexOf("px"))&&Math.round,!0);else if(i&&ve.test(b))C=")"+((C=_.indexOf(")")+1)?_.substr(C):""),A=-1!==_.indexOf("hsl")&&q,E=_,b=pe(b,A),_=pe(_,A),(S=b.length+_.length>6)&&!q&&0===_[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(O[f]).join("transparent")):(q||(S=!1),A?s.appendXtra(E.substr(0,E.indexOf("hsl"))+(S?"hsla(":"hsl("),b[0],ce(_[0],b[0]),",",!1,!0).appendXtra("",b[1],ce(_[1],b[1]),"%,",!1).appendXtra("",b[2],ce(_[2],b[2]),S?"%,":"%"+C,!1):s.appendXtra(E.substr(0,E.indexOf("rgb"))+(S?"rgba(":"rgb("),b[0],_[0]-b[0],",",Math.round,!0).appendXtra("",b[1],_[1]-b[1],",",Math.round).appendXtra("",b[2],_[2]-b[2],S?",":C,Math.round),S&&(b=b.length<4?1:b[3],s.appendXtra("",b,(_.length<4?1:_[3])-b,C,!1))),ve.lastIndex=0;else if(w=b.match(g)){if(!(x=_.match(y))||x.length!==w.length)return s;for(p=0,d=0;d<w.length;d++)M=w[d],E=b.indexOf(M,p),s.appendXtra(b.substr(p,E-p),Number(M),ce(x[d],M),"",!(!I||"px"!==b.substr(E+M.length,2))&&Math.round,0===d),p=E+M.length;s["xs"+s.l]+=b.substr(p)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+_:_;if(-1!==r.indexOf("=")&&s.data){for(C=s.xs0+s.data.s,f=1;f<s.l;f++)C+=s["xs"+f]+s.data["xn"+f];s.e=C+s["xs"+f]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},Te=9;for((u=_e.prototype).l=u.pr=0;--Te>0;)u["xn"+Te]=0,u["xs"+Te]="";u.xs0="",u._next=u._prev=u.xfirst=u.data=u.plugin=u.setRatio=u.rxp=null,u.appendXtra=function(e,t,n,r,i,o){var a=this,s=a.l;return a["xs"+s]+=o&&(s||a["xs"+s])?" "+e:e||"",n||0===s||a.plugin?(a.l++,a.type=a.setRatio?2:1,a["xs"+a.l]=r||"",s>0?(a.data["xn"+s]=t+n,a.rxp["xn"+s]=i,a["xn"+s]=t,a.plugin||(a.xfirst=new _e(a,"xn"+s,t,n,a.xfirst||a,0,a.n,i,a.pr),a.xfirst.xs0=0),a):(a.data={s:t+n},a.rxp={},a.s=t,a.c=n,a.r=i,a)):(a["xs"+s]+=t+(r||""),a)};var Se=function(e,t){t=t||{},this.p=t.prefix&&J(e)||e,s[e]=s[this.p]=this,this.format=t.formatter||ge(t.defaultValue,t.color,t.collapsible,t.multi),t.parser&&(this.parse=t.parser),this.clrs=t.color,this.multi=t.multi,this.keyword=t.keyword,this.dflt=t.defaultValue,this.allowFunc=t.allowFunc,this.pr=t.priority||0},Ee=G._registerComplexSpecialProp=function(e,t,n){"object"!==typeof t&&(t={parser:n});var r,i=e.split(","),o=t.defaultValue;for(n=n||[o],r=0;r<i.length;r++)t.prefix=0===r&&t.prefix,t.defaultValue=n[r]||o,new Se(i[r],t)},Me=G._registerPluginProp=function(e){if(!s[e]){var t=e.charAt(0).toUpperCase()+e.substr(1)+"Plugin";Ee(e,{parser:function(e,n,r,i,o,u,c){var l=a.com.greensock.plugins[t];return l?(l._cssRegister(),s[r].parse(e,n,r,i,o,u,c)):(K("Error: "+t+" js file not loaded."),o)}})}};(u=Se.prototype).parseComplex=function(e,t,n,r,i,o){var a,s,u,c,l,h,f=this.keyword;if(this.multi&&(D.test(n)||D.test(t)?(s=t.replace(D,"|").split("|"),u=n.replace(D,"|").split("|")):f&&(s=[t],u=[n])),u){for(c=u.length>s.length?u.length:s.length,a=0;a<c;a++)t=s[a]=s[a]||this.dflt,n=u[a]=u[a]||this.dflt,f&&(l=t.indexOf(f))!==(h=n.indexOf(f))&&(-1===h?s[a]=s[a].split(f).join(""):-1===l&&(s[a]+=" "+f));t=s.join(", "),n=u.join(", ")}return xe(e,this.p,t,n,this.clrs,this.dflt,r,this.pr,i,o)},u.parse=function(e,t,r,i,o,a,s){return this.parseComplex(e.style,this.format(ee(e,this.p,n,!1,this.dflt)),this.format(t),o,a)},o.registerSpecialProp=function(e,t,n){Ee(e,{parser:function(e,r,i,o,a,s,u){var c=new _e(e,i,0,0,a,2,i,!1,n);return c.plugin=s,c.setRatio=t(e,r,o._tween,i),c},priority:n})},o.useSVGTransformAttr=!0;var Ce,Ae="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Pe=J("transform"),Oe=X+"transform",ke=J("transformOrigin"),Ie=null!==J("perspective"),Re=G.Transform=function(){this.perspective=parseFloat(o.defaultTransformPerspective)||0,this.force3D=!(!1===o.defaultForce3D||!Ie)&&(o.defaultForce3D||"auto")},De=r.e.SVGElement,Le=function(e,t,n){var r,i=B.createElementNS("http://www.w3.org/2000/svg",e),o=/([a-z])([A-Z])/g;for(r in n)i.setAttributeNS(null,r.replace(o,"$1-$2").toLowerCase(),n[r]);return t.appendChild(i),i},Ne=B.documentElement||{},Fe=function(){var e,t,n,i=p||/Android/i.test(H)&&!r.e.chrome;return B.createElementNS&&Ne.appendChild&&!i&&(e=Le("svg",Ne),n=(t=Le("rect",e,{width:100,height:50,x:100})).getBoundingClientRect().width,t.style[ke]="50% 50%",t.style[Pe]="scaleX(0.5)",i=n===t.getBoundingClientRect().width&&!(f&&Ie),Ne.removeChild(e)),i}(),Ue=function(e,t,n,r,i,a){var s,u,c,l,h,f,d,p,m,v,g,y,b,_,w=e._gsTransform,x=We(e,!0);w&&(b=w.xOrigin,_=w.yOrigin),(!r||(s=r.split(" ")).length<2)&&(0===(d=e.getBBox()).x&&0===d.y&&d.width+d.height===0&&(d={x:parseFloat(e.hasAttribute("x")?e.getAttribute("x"):e.hasAttribute("cx")?e.getAttribute("cx"):0)||0,y:parseFloat(e.hasAttribute("y")?e.getAttribute("y"):e.hasAttribute("cy")?e.getAttribute("cy"):0)||0,width:0,height:0}),s=[(-1!==(t=ue(t).split(" "))[0].indexOf("%")?parseFloat(t[0])/100*d.width:parseFloat(t[0]))+d.x,(-1!==t[1].indexOf("%")?parseFloat(t[1])/100*d.height:parseFloat(t[1]))+d.y]),n.xOrigin=l=parseFloat(s[0]),n.yOrigin=h=parseFloat(s[1]),r&&x!==Ve&&(f=x[0],d=x[1],p=x[2],m=x[3],v=x[4],g=x[5],(y=f*m-d*p)&&(u=l*(m/y)+h*(-p/y)+(p*g-m*v)/y,c=l*(-d/y)+h*(f/y)-(f*g-d*v)/y,l=n.xOrigin=s[0]=u,h=n.yOrigin=s[1]=c)),w&&(a&&(n.xOffset=w.xOffset,n.yOffset=w.yOffset,w=n),i||!1!==i&&!1!==o.defaultSmoothOrigin?(u=l-b,c=h-_,w.xOffset+=u*x[0]+c*x[2]-u,w.yOffset+=u*x[1]+c*x[3]-c):w.xOffset=w.yOffset=0),a||e.setAttribute("data-svg-origin",s.join(" "))},je=function e(t){var n,r=z("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,o=this.nextSibling,a=this.style.cssText;if(Ne.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=e}catch(s){}else this._originalGetBBox&&(n=this._originalGetBBox());return o?i.insertBefore(this,o):i.appendChild(this),Ne.removeChild(r),this.style.cssText=a,n},Be=function(e){try{return e.getBBox()}catch(t){return je.call(e,!0)}},ze=function(e){return!(!De||!e.getCTM||e.parentNode&&!e.ownerSVGElement||!Be(e))},Ve=[1,0,0,1,0,0],We=function(e,t){var n,r,i,o,a,s,u,c=e._gsTransform||new Re,l=e.style;if(Pe?r=ee(e,Oe,null,!0):e.currentStyle&&(r=(r=e.currentStyle.filter.match(I))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),c.x||0,c.y||0].join(","):""),n=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,Pe&&n&&!e.offsetParent&&e!==Ne&&(o=l.display,l.display="block",(u=e.parentNode)&&e.offsetParent||(a=1,s=e.nextSibling,Ne.appendChild(e)),n=!(r=ee(e,Oe,null,!0))||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,o?l.display=o:Ke(l,"display"),a&&(s?u.insertBefore(e,s):u?u.appendChild(e):Ne.removeChild(e))),(c.svg||e.getCTM&&ze(e))&&(n&&-1!==(l[Pe]+"").indexOf("matrix")&&(r=l[Pe],n=0),i=e.getAttribute("transform"),n&&i&&(r="matrix("+(i=e.transform.baseVal.consolidate().matrix).a+","+i.b+","+i.c+","+i.d+","+i.e+","+i.f+")",n=0)),n)return Ve;for(i=(r||"").match(g)||[],Te=i.length;--Te>-1;)o=Number(i[Te]),i[Te]=(a=o-(o|=0))?(1e5*a+(a<0?-.5:.5)|0)/1e5+o:o;return t&&i.length>6?[i[0],i[1],i[4],i[5],i[12],i[13]]:i},Ge=G.getTransform=function(e,t,n,i){if(e._gsTransform&&n&&!i)return e._gsTransform;var a,s,u,c,l,h,f=n&&e._gsTransform||new Re,d=f.scaleX<0,p=Ie&&(parseFloat(ee(e,ke,t,!1,"0 0 0").split(" ")[2])||f.zOrigin)||0,m=parseFloat(o.defaultTransformPerspective)||0;if(f.svg=!(!e.getCTM||!ze(e)),f.svg&&(Ue(e,ee(e,ke,t,!1,"50% 50%")+"",f,e.getAttribute("data-svg-origin")),Ce=o.useSVGTransformAttr||Fe),(a=We(e))!==Ve){if(16===a.length){var v,g,y,b,_,w=a[0],x=a[1],T=a[2],S=a[3],E=a[4],M=a[5],C=a[6],A=a[7],P=a[8],O=a[9],k=a[10],I=a[12],R=a[13],D=a[14],L=a[11],N=Math.atan2(C,k);f.zOrigin&&(I=P*(D=-f.zOrigin)-a[12],R=O*D-a[13],D=k*D+f.zOrigin-a[14]),f.rotationX=N*F,N&&(v=E*(b=Math.cos(-N))+P*(_=Math.sin(-N)),g=M*b+O*_,y=C*b+k*_,P=E*-_+P*b,O=M*-_+O*b,k=C*-_+k*b,L=A*-_+L*b,E=v,M=g,C=y),N=Math.atan2(-T,k),f.rotationY=N*F,N&&(g=x*(b=Math.cos(-N))-O*(_=Math.sin(-N)),y=T*b-k*_,O=x*_+O*b,k=T*_+k*b,L=S*_+L*b,w=v=w*b-P*_,x=g,T=y),N=Math.atan2(x,w),f.rotation=N*F,N&&(v=w*(b=Math.cos(N))+x*(_=Math.sin(N)),g=E*b+M*_,y=P*b+O*_,x=x*b-w*_,M=M*b-E*_,O=O*b-P*_,w=v,E=g,P=y),f.rotationX&&Math.abs(f.rotationX)+Math.abs(f.rotation)>359.9&&(f.rotationX=f.rotation=0,f.rotationY=180-f.rotationY),N=Math.atan2(E,M),f.scaleX=(1e5*Math.sqrt(w*w+x*x+T*T)+.5|0)/1e5,f.scaleY=(1e5*Math.sqrt(M*M+C*C)+.5|0)/1e5,f.scaleZ=(1e5*Math.sqrt(P*P+O*O+k*k)+.5|0)/1e5,w/=f.scaleX,E/=f.scaleY,x/=f.scaleX,M/=f.scaleY,Math.abs(N)>2e-5?(f.skewX=N*F,E=0,"simple"!==f.skewType&&(f.scaleY*=1/Math.cos(N))):f.skewX=0,f.perspective=L?1/(L<0?-L:L):0,f.x=I,f.y=R,f.z=D,f.svg&&(f.x-=f.xOrigin-(f.xOrigin*w-f.yOrigin*E),f.y-=f.yOrigin-(f.yOrigin*x-f.xOrigin*M))}else if(!Ie||i||!a.length||f.x!==a[4]||f.y!==a[5]||!f.rotationX&&!f.rotationY){var U=a.length>=6,j=U?a[0]:1,B=a[1]||0,z=a[2]||0,V=U?a[3]:1;f.x=a[4]||0,f.y=a[5]||0,u=Math.sqrt(j*j+B*B),c=Math.sqrt(V*V+z*z),l=j||B?Math.atan2(B,j)*F:f.rotation||0,h=z||V?Math.atan2(z,V)*F+l:f.skewX||0,f.scaleX=u,f.scaleY=c,f.rotation=l,f.skewX=h,Ie&&(f.rotationX=f.rotationY=f.z=0,f.perspective=m,f.scaleZ=1),f.svg&&(f.x-=f.xOrigin-(f.xOrigin*j+f.yOrigin*z),f.y-=f.yOrigin-(f.xOrigin*B+f.yOrigin*V))}for(s in Math.abs(f.skewX)>90&&Math.abs(f.skewX)<270&&(d?(f.scaleX*=-1,f.skewX+=f.rotation<=0?180:-180,f.rotation+=f.rotation<=0?180:-180):(f.scaleY*=-1,f.skewX+=f.skewX<=0?180:-180)),f.zOrigin=p,f)f[s]<2e-5&&f[s]>-2e-5&&(f[s]=0)}return n&&(e._gsTransform=f,f.svg&&(Ce&&e.style[Pe]?r.f.delayedCall(.001,(function(){Ke(e.style,Pe)})):!Ce&&e.getAttribute("transform")&&r.f.delayedCall(.001,(function(){e.removeAttribute("transform")})))),f},He=function(e){var t,n,r=this.data,i=-r.rotation*N,o=i+r.skewX*N,a=(Math.cos(i)*r.scaleX*1e5|0)/1e5,s=(Math.sin(i)*r.scaleX*1e5|0)/1e5,u=(Math.sin(o)*-r.scaleY*1e5|0)/1e5,c=(Math.cos(o)*r.scaleY*1e5|0)/1e5,l=this.t.style,h=this.t.currentStyle;if(h){n=s,s=-u,u=-n,t=h.filter,l.filter="";var f,d,m=this.t.offsetWidth,v=this.t.offsetHeight,g="absolute"!==h.position,y="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+s+", M21="+u+", M22="+c,b=r.x+m*r.xPercent/100,_=r.y+v*r.yPercent/100;if(null!=r.ox&&(b+=(f=(r.oxp?m*r.ox*.01:r.ox)-m/2)-(f*a+(d=(r.oyp?v*r.oy*.01:r.oy)-v/2)*s),_+=d-(f*u+d*c)),y+=g?", Dx="+((f=m/2)-(f*a+(d=v/2)*s)+b)+", Dy="+(d-(f*u+d*c)+_)+")":", sizingMethod='auto expand')",-1!==t.indexOf("DXImageTransform.Microsoft.Matrix(")?l.filter=t.replace(R,y):l.filter=y+" "+t,0!==e&&1!==e||1===a&&0===s&&0===u&&1===c&&(g&&-1===y.indexOf("Dx=0, Dy=0")||T.test(t)&&100!==parseFloat(RegExp.$1)||-1===t.indexOf(t.indexOf("Alpha"))&&l.removeAttribute("filter")),!g){var w,S,E,M=p<8?1:-1;for(f=r.ieOffsetX||0,d=r.ieOffsetY||0,r.ieOffsetX=Math.round((m-((a<0?-a:a)*m+(s<0?-s:s)*v))/2+b),r.ieOffsetY=Math.round((v-((c<0?-c:c)*v+(u<0?-u:u)*m))/2+_),Te=0;Te<4;Te++)E=(n=-1!==(w=h[S=ae[Te]]).indexOf("px")?parseFloat(w):te(this.t,S,parseFloat(w),w.replace(x,""))||0)!==r[S]?Te<2?-r.ieOffsetX:-r.ieOffsetY:Te<2?f-r.ieOffsetX:d-r.ieOffsetY,l[S]=(r[S]=Math.round(n-E*(0===Te||2===Te?1:M)))+"px"}}},qe=G.set3DTransformRatio=G.setTransformRatio=function(e){var t,n,r,i,o,a,s,u,c,l,h,d,p,m,v,g,y,b,_,w,x=this.data,T=this.t.style,S=x.rotation,E=x.rotationX,M=x.rotationY,C=x.scaleX,A=x.scaleY,P=x.scaleZ,O=x.x,k=x.y,I=x.z,R=x.svg,D=x.perspective,L=x.force3D,F=x.skewY,U=x.skewX;if(F&&(U+=F,S+=F),!((1!==e&&0!==e||"auto"!==L||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&L||I||D||M||E||1!==P)||Ce&&R||!Ie)S||U||R?(S*=N,w=U*N,1e5,n=Math.cos(S)*C,o=Math.sin(S)*C,r=Math.sin(S-w)*-A,a=Math.cos(S-w)*A,w&&"simple"===x.skewType&&(t=Math.tan(w-F*N),r*=t=Math.sqrt(1+t*t),a*=t,F&&(t=Math.tan(F*N),n*=t=Math.sqrt(1+t*t),o*=t)),R&&(O+=x.xOrigin-(x.xOrigin*n+x.yOrigin*r)+x.xOffset,k+=x.yOrigin-(x.xOrigin*o+x.yOrigin*a)+x.yOffset,Ce&&(x.xPercent||x.yPercent)&&(v=this.t.getBBox(),O+=.01*x.xPercent*v.width,k+=.01*x.yPercent*v.height),O<(v=1e-6)&&O>-v&&(O=0),k<v&&k>-v&&(k=0)),_=(1e5*n|0)/1e5+","+(1e5*o|0)/1e5+","+(1e5*r|0)/1e5+","+(1e5*a|0)/1e5+","+O+","+k+")",R&&Ce?this.t.setAttribute("transform","matrix("+_):T[Pe]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix(":"matrix(")+_):T[Pe]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+A+","+O+","+k+")";else{if(f&&(C<(v=1e-4)&&C>-v&&(C=P=2e-5),A<v&&A>-v&&(A=P=2e-5),!D||x.z||x.rotationX||x.rotationY||(D=0)),S||U)S*=N,g=n=Math.cos(S),y=o=Math.sin(S),U&&(S-=U*N,g=Math.cos(S),y=Math.sin(S),"simple"===x.skewType&&(t=Math.tan((U-F)*N),g*=t=Math.sqrt(1+t*t),y*=t,x.skewY&&(t=Math.tan(F*N),n*=t=Math.sqrt(1+t*t),o*=t))),r=-y,a=g;else{if(!(M||E||1!==P||D||R))return void(T[Pe]=(x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) translate3d(":"translate3d(")+O+"px,"+k+"px,"+I+"px)"+(1!==C||1!==A?" scale("+C+","+A+")":""));n=a=1,r=o=0}l=1,i=s=u=c=h=d=0,p=D?-1/D:0,m=x.zOrigin,v=1e-6,",","0",(S=M*N)&&(g=Math.cos(S),u=-(y=Math.sin(S)),h=p*-y,i=n*y,s=o*y,l=g,p*=g,n*=g,o*=g),(S=E*N)&&(t=r*(g=Math.cos(S))+i*(y=Math.sin(S)),b=a*g+s*y,c=l*y,d=p*y,i=r*-y+i*g,s=a*-y+s*g,l*=g,p*=g,r=t,a=b),1!==P&&(i*=P,s*=P,l*=P,p*=P),1!==A&&(r*=A,a*=A,c*=A,d*=A),1!==C&&(n*=C,o*=C,u*=C,h*=C),(m||R)&&(m&&(O+=i*-m,k+=s*-m,I+=l*-m+m),R&&(O+=x.xOrigin-(x.xOrigin*n+x.yOrigin*r)+x.xOffset,k+=x.yOrigin-(x.xOrigin*o+x.yOrigin*a)+x.yOffset),O<v&&O>-v&&(O="0"),k<v&&k>-v&&(k="0"),I<v&&I>-v&&(I=0)),_=x.xPercent||x.yPercent?"translate("+x.xPercent+"%,"+x.yPercent+"%) matrix3d(":"matrix3d(",_+=(n<v&&n>-v?"0":n)+","+(o<v&&o>-v?"0":o)+","+(u<v&&u>-v?"0":u),_+=","+(h<v&&h>-v?"0":h)+","+(r<v&&r>-v?"0":r)+","+(a<v&&a>-v?"0":a),E||M||1!==P?(_+=","+(c<v&&c>-v?"0":c)+","+(d<v&&d>-v?"0":d)+","+(i<v&&i>-v?"0":i),_+=","+(s<v&&s>-v?"0":s)+","+(l<v&&l>-v?"0":l)+","+(p<v&&p>-v?"0":p)+","):_+=",0,0,0,0,1,0,",_+=O+","+k+","+I+","+(D?1+-I/D:1)+")",T[Pe]=_}};(u=Re.prototype).x=u.y=u.z=u.skewX=u.skewY=u.rotation=u.rotationX=u.rotationY=u.zOrigin=u.xPercent=u.yPercent=u.xOffset=u.yOffset=0,u.scaleX=u.scaleY=u.scaleZ=1,Ee("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(e,t,r,i,a,s,u){if(i._lastParsedTransform===u)return a;i._lastParsedTransform=u;var c=u.scale&&"function"===typeof u.scale?u.scale:0;c&&(u.scale=c(v,e));var l,h,f,d,p,g,y,b,_,w=e._gsTransform,x=e.style,T=Ae.length,S=u,E={},M=Ge(e,n,!0,S.parseTransform),C=S.transform&&("function"===typeof S.transform?S.transform(v,m):S.transform);if(M.skewType=S.skewType||M.skewType||o.defaultSkewType,i._transform=M,"rotationZ"in S&&(S.rotation=S.rotationZ),C&&"string"===typeof C&&Pe)(h=V.style)[Pe]=C,h.display="block",h.position="absolute",-1!==C.indexOf("%")&&(h.width=ee(e,"width"),h.height=ee(e,"height")),B.body.appendChild(V),l=Ge(V,null,!1),"simple"===M.skewType&&(l.scaleY*=Math.cos(l.skewX*N)),M.svg&&(g=M.xOrigin,y=M.yOrigin,l.x-=M.xOffset,l.y-=M.yOffset,(S.transformOrigin||S.svgOrigin)&&(C={},Ue(e,ue(S.transformOrigin),C,S.svgOrigin,S.smoothOrigin,!0),g=C.xOrigin,y=C.yOrigin,l.x-=C.xOffset-M.xOffset,l.y-=C.yOffset-M.yOffset),(g||y)&&(b=We(V,!0),l.x-=g-(g*b[0]+y*b[2]),l.y-=y-(g*b[1]+y*b[3]))),B.body.removeChild(V),l.perspective||(l.perspective=M.perspective),null!=S.xPercent&&(l.xPercent=le(S.xPercent,M.xPercent)),null!=S.yPercent&&(l.yPercent=le(S.yPercent,M.yPercent));else if("object"===typeof S){if(l={scaleX:le(null!=S.scaleX?S.scaleX:S.scale,M.scaleX),scaleY:le(null!=S.scaleY?S.scaleY:S.scale,M.scaleY),scaleZ:le(S.scaleZ,M.scaleZ),x:le(S.x,M.x),y:le(S.y,M.y),z:le(S.z,M.z),xPercent:le(S.xPercent,M.xPercent),yPercent:le(S.yPercent,M.yPercent),perspective:le(S.transformPerspective,M.perspective)},null!=(p=S.directionalRotation))if("object"===typeof p)for(h in p)S[h]=p[h];else S.rotation=p;"string"===typeof S.x&&-1!==S.x.indexOf("%")&&(l.x=0,l.xPercent=le(S.x,M.xPercent)),"string"===typeof S.y&&-1!==S.y.indexOf("%")&&(l.y=0,l.yPercent=le(S.y,M.yPercent)),l.rotation=he("rotation"in S?S.rotation:"shortRotation"in S?S.shortRotation+"_short":M.rotation,M.rotation,"rotation",E),Ie&&(l.rotationX=he("rotationX"in S?S.rotationX:"shortRotationX"in S?S.shortRotationX+"_short":M.rotationX||0,M.rotationX,"rotationX",E),l.rotationY=he("rotationY"in S?S.rotationY:"shortRotationY"in S?S.shortRotationY+"_short":M.rotationY||0,M.rotationY,"rotationY",E)),l.skewX=he(S.skewX,M.skewX),l.skewY=he(S.skewY,M.skewY)}for(Ie&&null!=S.force3D&&(M.force3D=S.force3D,d=!0),(f=M.force3D||M.z||M.rotationX||M.rotationY||l.z||l.rotationX||l.rotationY||l.perspective)||null==S.scale||(l.scaleZ=1);--T>-1;)((C=l[_=Ae[T]]-M[_])>1e-6||C<-1e-6||null!=S[_]||null!=U[_])&&(d=!0,a=new _e(M,_,M[_],C,a),_ in E&&(a.e=E[_]),a.xs0=0,a.plugin=s,i._overwriteProps.push(a.n));return C="function"===typeof S.transformOrigin?S.transformOrigin(v,m):S.transformOrigin,M.svg&&(C||S.svgOrigin)&&(g=M.xOffset,y=M.yOffset,Ue(e,ue(C),l,S.svgOrigin,S.smoothOrigin),a=we(M,"xOrigin",(w?M:l).xOrigin,l.xOrigin,a,"transformOrigin"),a=we(M,"yOrigin",(w?M:l).yOrigin,l.yOrigin,a,"transformOrigin"),g===M.xOffset&&y===M.yOffset||(a=we(M,"xOffset",w?g:M.xOffset,M.xOffset,a,"transformOrigin"),a=we(M,"yOffset",w?y:M.yOffset,M.yOffset,a,"transformOrigin")),C="0px 0px"),(C||Ie&&f&&M.zOrigin)&&(Pe?(d=!0,_=ke,C||(C=(C=(ee(e,_,n,!1,"50% 50%")+"").split(" "))[0]+" "+C[1]+" "+M.zOrigin+"px"),C+="",(a=new _e(x,_,0,0,a,-1,"transformOrigin")).b=x[_],a.plugin=s,Ie?(h=M.zOrigin,C=C.split(" "),M.zOrigin=(C.length>2?parseFloat(C[2]):h)||0,a.xs0=a.e=C[0]+" "+(C[1]||"50%")+" 0px",(a=new _e(M,"zOrigin",0,0,a,-1,a.n)).b=h,a.xs0=a.e=M.zOrigin):a.xs0=a.e=C):ue(C+"",M)),d&&(i._transformType=M.svg&&Ce||!f&&3!==this._transformType?2:3),c&&(u.scale=c),a},allowFunc:!0,prefix:!0}),Ee("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),Ee("clipPath",{defaultValue:"inset(0%)",prefix:!0,multi:!0,formatter:ge("inset(0% 0% 0% 0%)",!1,!0)}),Ee("borderRadius",{defaultValue:"0px",parser:function(e,r,i,o,a,s){r=this.format(r);var u,c,l,h,f,d,p,m,v,g,y,b,_,w,x,T,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],E=e.style;for(v=parseFloat(e.offsetWidth),g=parseFloat(e.offsetHeight),u=r.split(" "),c=0;c<S.length;c++)this.p.indexOf("border")&&(S[c]=J(S[c])),-1!==(f=h=ee(e,S[c],n,!1,"0px")).indexOf(" ")&&(h=f.split(" "),f=h[0],h=h[1]),d=l=u[c],p=parseFloat(f),b=f.substr((p+"").length),(_="="===d.charAt(1))?(m=parseInt(d.charAt(0)+"1",10),d=d.substr(2),m*=parseFloat(d),y=d.substr((m+"").length-(m<0?1:0))||""):(m=parseFloat(d),y=d.substr((m+"").length)),""===y&&(y=t[i]||b),y!==b&&(w=te(e,"borderLeft",p,b),x=te(e,"borderTop",p,b),"%"===y?(f=w/v*100+"%",h=x/g*100+"%"):"em"===y?(f=w/(T=te(e,"borderLeft",1,"em"))+"em",h=x/T+"em"):(f=w+"px",h=x+"px"),_&&(d=parseFloat(f)+m+y,l=parseFloat(h)+m+y)),a=xe(E,S[c],f+" "+h,d+" "+l,!1,"0px",a);return a},prefix:!0,formatter:ge("0px 0px 0px 0px",!1,!0)}),Ee("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(e,t,r,i,o,a){return xe(e.style,r,this.format(ee(e,r,n,!1,"0px 0px")),this.format(t),!1,"0px",o)},prefix:!0,formatter:ge("0px 0px",!1,!0)}),Ee("backgroundPosition",{defaultValue:"0 0",parser:function(e,t,r,i,o,a){var s,u,c,l,h,f,d="background-position",m=n||$(e),v=this.format((m?p?m.getPropertyValue(d+"-x")+" "+m.getPropertyValue(d+"-y"):m.getPropertyValue(d):e.currentStyle.backgroundPositionX+" "+e.currentStyle.backgroundPositionY)||"0 0"),g=this.format(t);if(-1!==v.indexOf("%")!==(-1!==g.indexOf("%"))&&g.split(",").length<2&&(f=ee(e,"backgroundImage").replace(P,""))&&"none"!==f){for(s=v.split(" "),u=g.split(" "),W.setAttribute("src",f),c=2;--c>-1;)(l=-1!==(v=s[c]).indexOf("%"))!==(-1!==u[c].indexOf("%"))&&(h=0===c?e.offsetWidth-W.width:e.offsetHeight-W.height,s[c]=l?parseFloat(v)/100*h+"px":parseFloat(v)/h*100+"%");v=s.join(" ")}return this.parseComplex(e.style,v,g,o,a)},formatter:ue}),Ee("backgroundSize",{defaultValue:"0 0",formatter:function(e){return"co"===(e+="").substr(0,2)?e:ue(-1===e.indexOf(" ")?e+" "+e:e)}}),Ee("perspective",{defaultValue:"0px",prefix:!0}),Ee("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),Ee("transformStyle",{prefix:!0}),Ee("backfaceVisibility",{prefix:!0}),Ee("userSelect",{prefix:!0}),Ee("margin",{parser:ye("marginTop,marginRight,marginBottom,marginLeft")}),Ee("padding",{parser:ye("paddingTop,paddingRight,paddingBottom,paddingLeft")}),Ee("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(e,t,r,i,o,a){var s,u,c;return p<9?(u=e.currentStyle,c=p<8?" ":",",s="rect("+u.clipTop+c+u.clipRight+c+u.clipBottom+c+u.clipLeft+")",t=this.format(t).split(",").join(c)):(s=this.format(ee(e,this.p,n,!1,this.dflt)),t=this.format(t)),this.parseComplex(e.style,s,t,o,a)}}),Ee("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),Ee("autoRound,strictUnits",{parser:function(e,t,n,r,i){return i}}),Ee("border",{defaultValue:"0px solid #000",parser:function(e,t,r,i,o,a){var s=ee(e,"borderTopWidth",n,!1,"0px"),u=this.format(t).split(" "),c=u[0].replace(x,"");return"px"!==c&&(s=parseFloat(s)/te(e,"borderTopWidth",1,c)+c),this.parseComplex(e.style,this.format(s+" "+ee(e,"borderTopStyle",n,!1,"solid")+" "+ee(e,"borderTopColor",n,!1,"#000")),u.join(" "),o,a)},color:!0,formatter:function(e){var t=e.split(" ");return t[0]+" "+(t[1]||"solid")+" "+(e.match(ve)||["#000"])[0]}}),Ee("borderWidth",{parser:ye("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),Ee("float,cssFloat,styleFloat",{parser:function(e,t,n,r,i,o){var a=e.style,s="cssFloat"in a?"cssFloat":"styleFloat";return new _e(a,s,0,0,i,-1,n,!1,0,a[s],t)}});var Ye=function(e){var t,n=this.t,r=n.filter||ee(this.data,"filter")||"",i=this.s+this.c*e|0;100===i&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(n.removeAttribute("filter"),t=!ee(this.data,"filter")):(n.filter=r.replace(E,""),t=!0)),t||(this.xn1&&(n.filter=r=r||"alpha(opacity="+i+")"),-1===r.indexOf("pacity")?0===i&&this.xn1||(n.filter=r+" alpha(opacity="+i+")"):n.filter=r.replace(T,"opacity="+i))};Ee("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(e,t,r,i,o,a){var s=parseFloat(ee(e,"opacity",n,!1,"1")),u=e.style,c="autoAlpha"===r;return"string"===typeof t&&"="===t.charAt(1)&&(t=("-"===t.charAt(0)?-1:1)*parseFloat(t.substr(2))+s),c&&1===s&&"hidden"===ee(e,"visibility",n)&&0!==t&&(s=0),q?o=new _e(u,"opacity",s,t-s,o):((o=new _e(u,"opacity",100*s,100*(t-s),o)).xn1=c?1:0,u.zoom=1,o.type=2,o.b="alpha(opacity="+o.s+")",o.e="alpha(opacity="+(o.s+o.c)+")",o.data=e,o.plugin=a,o.setRatio=Ye),c&&((o=new _e(u,"visibility",0,0,o,-1,null,!1,0,0!==s?"inherit":"hidden",0===t?"hidden":"inherit")).xs0="inherit",i._overwriteProps.push(o.n),i._overwriteProps.push(r)),o}});var Ke=function(e,t){t&&(e.removeProperty?("ms"!==t.substr(0,2)&&"webkit"!==t.substr(0,6)||(t="-"+t),e.removeProperty(t.replace(C,"-$1").toLowerCase())):e.removeAttribute(t))},Xe=function(e){if(this.t._gsClassPT=this,1===e||0===e){this.t.setAttribute("class",0===e?this.b:this.e);for(var t=this.data,n=this.t.style;t;)t.v?n[t.p]=t.v:Ke(n,t.p),t=t._next;1===e&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};Ee("className",{parser:function(t,r,i,o,a,s,u){var c,l,h,f,d,p=t.getAttribute("class")||"",m=t.style.cssText;if((a=o._classNamePT=new _e(t,i,0,0,a,2)).setRatio=Xe,a.pr=-11,e=!0,a.b=p,l=re(t,n),h=t._gsClassPT){for(f={},d=h.data;d;)f[d.p]=1,d=d._next;h.setRatio(1)}return t._gsClassPT=a,a.e="="!==r.charAt(1)?r:p.replace(new RegExp("(?:\\s|^)"+r.substr(2)+"(?![\\w-])"),"")+("+"===r.charAt(0)?" "+r.substr(2):""),t.setAttribute("class",a.e),c=ie(t,l,re(t),u,f),t.setAttribute("class",p),a.data=c.firstMPT,t.style.cssText!==m&&(t.style.cssText=m),a=a.xfirst=o.parse(t,c.difs,a,s)}});var Qe=function(e){if((1===e||0===e)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var t,n,r,i,o,a=this.t.style,u=s.transform.parse;if("all"===this.e)a.cssText="",i=!0;else for(r=(t=this.e.split(" ").join("").split(",")).length;--r>-1;)n=t[r],s[n]&&(s[n].parse===u?i=!0:n="transformOrigin"===n?ke:s[n].p),Ke(a,n);i&&(Ke(a,Pe),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(Ee("clearProps",{parser:function(t,n,r,i,o){return(o=new _e(t,r,0,0,o,2)).setRatio=Qe,o.e=n,o.pr=-10,o.data=i._tween,e=!0,o}}),u="bezier,throwProps,physicsProps,physics2D".split(","),Te=u.length;Te--;)Me(u[Te]);(u=o.prototype)._firstPT=u._lastParsedTransform=u._transform=null,u._onInitTween=function(r,a,u,f){if(!r.nodeType)return!1;this._target=m=r,this._tween=u,this._vars=a,v=f,c=a.autoRound,e=!1,t=a.suffixMap||o.suffixMap,n=$(r),i=this._overwriteProps;var p,g,y,b,_,w,x,T,E,M=r.style;if(l&&""===M.zIndex&&("auto"!==(p=ee(r,"zIndex",n))&&""!==p||this._addLazySet(M,"zIndex",0)),"string"===typeof a&&(b=M.cssText,p=re(r,n),M.cssText=b+";"+a,p=ie(r,p,re(r)).difs,!q&&S.test(a)&&(p.opacity=parseFloat(RegExp.$1)),a=p,M.cssText=b),a.className?this._firstPT=g=s.className.parse(r,a.className,"className",this,null,null,a):this._firstPT=g=this.parse(r,a,null),this._transformType){for(E=3===this._transformType,Pe?h&&(l=!0,""===M.zIndex&&("auto"!==(x=ee(r,"zIndex",n))&&""!==x||this._addLazySet(M,"zIndex",0)),d&&this._addLazySet(M,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(E?"visible":"hidden"))):M.zoom=1,y=g;y&&y._next;)y=y._next;T=new _e(r,"transform",0,0,null,2),this._linkCSSP(T,null,y),T.setRatio=Pe?qe:He,T.data=this._transform||Ge(r,n,!0),T.tween=u,T.pr=-1,i.pop()}if(e){for(;g;){for(w=g._next,y=b;y&&y.pr>g.pr;)y=y._next;(g._prev=y?y._prev:_)?g._prev._next=g:b=g,(g._next=y)?y._prev=g:_=g,g=w}this._firstPT=b}return!0},u.parse=function(e,r,i,o){var a,u,l,h,f,d,p,g,y,b,_=e.style;for(a in r){if(d=r[a],u=s[a],"function"!==typeof d||u&&u.allowFunc||(d=d(v,m)),u)i=u.parse(e,d,a,this,i,o,r);else{if("--"===a.substr(0,2)){this._tween._propLookup[a]=this._addTween.call(this._tween,e.style,"setProperty",$(e).getPropertyValue(a)+"",d+"",a,!1,a);continue}f=ee(e,a,n)+"",y="string"===typeof d,"color"===a||"fill"===a||"stroke"===a||-1!==a.indexOf("Color")||y&&M.test(d)?(y||(d=((d=pe(d)).length>3?"rgba(":"rgb(")+d.join(",")+")"),i=xe(_,a,f,d,!0,"transparent",i,0,o)):y&&L.test(d)?i=xe(_,a,f,d,!0,null,i,0,o):(p=(l=parseFloat(f))||0===l?f.substr((l+"").length):"",""!==f&&"auto"!==f||("width"===a||"height"===a?(l=se(e,a,n),p="px"):"left"===a||"top"===a?(l=ne(e,a,n),p="px"):(l="opacity"!==a?0:1,p="")),(b=y&&"="===d.charAt(1))?(h=parseInt(d.charAt(0)+"1",10),d=d.substr(2),h*=parseFloat(d),g=d.replace(x,"")):(h=parseFloat(d),g=y?d.replace(x,""):""),""===g&&(g=a in t?t[a]:p),d=h||0===h?(b?h+l:h)+g:r[a],p!==g&&(""===g&&"lineHeight"!==a||(h||0===h)&&l&&(l=te(e,a,l,p),"%"===g?(l/=te(e,a,100,"%")/100,!0!==r.strictUnits&&(f=l+"%")):"em"===g||"rem"===g||"vw"===g||"vh"===g?l/=te(e,a,1,g):"px"!==g&&(h=te(e,a,h,g),g="px"),b&&(h||0===h)&&(d=h+l+g))),b&&(h+=l),!l&&0!==l||!h&&0!==h?void 0!==_[a]&&(d||d+""!=="NaN"&&null!=d)?(i=new _e(_,a,h||l||0,0,i,-1,a,!1,0,f,d)).xs0="none"!==d||"display"!==a&&-1===a.indexOf("Style")?d:f:K("invalid "+a+" tween value: "+r[a]):(i=new _e(_,a,l,h-l,i,0,a,!1!==c&&("px"===g||"zIndex"===a),0,f,d)).xs0=g)}o&&i&&!i.plugin&&(i.plugin=o)}return i},u.setRatio=function(e){var t,n,r,i=this._firstPT;if(1!==e||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(e||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;i;){if(t=i.c*e+i.s,i.r?t=i.r(t):t<1e-6&&t>-1e-6&&(t=0),i.type)if(1===i.type)if(2===(r=i.l))i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2;else if(3===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3;else if(4===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4;else if(5===r)i.t[i.p]=i.xs0+t+i.xs1+i.xn1+i.xs2+i.xn2+i.xs3+i.xn3+i.xs4+i.xn4+i.xs5;else{for(n=i.xs0+t+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.t[i.p]=n}else-1===i.type?i.t[i.p]=i.xs0:i.setRatio&&i.setRatio(e);else i.t[i.p]=t+i.xs0;i=i._next}else for(;i;)2!==i.type?i.t[i.p]=i.b:i.setRatio(e),i=i._next;else for(;i;){if(2!==i.type)if(i.r&&-1!==i.type)if(t=i.r(i.s+i.c),i.type){if(1===i.type){for(r=i.l,n=i.xs0+t+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i.t[i.p]=n}}else i.t[i.p]=t+i.xs0;else i.t[i.p]=i.e;else i.setRatio(e);i=i._next}},u._enableTransforms=function(e){this._transform=this._transform||Ge(this._target,n,!0),this._transformType=this._transform.svg&&Ce||!e&&3!==this._transformType?2:3};var Je=function(e){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};u._addLazySet=function(e,t,n){var r=this._firstPT=new _e(e,t,0,0,this._firstPT,2);r.e=n,r.setRatio=Je,r.data=this},u._linkCSSP=function(e,t,n,r){return e&&(t&&(t._prev=e),e._next&&(e._next._prev=e._prev),e._prev?e._prev._next=e._next:this._firstPT===e&&(this._firstPT=e._next,r=!0),n?n._next=e:r||null!==this._firstPT||(this._firstPT=e),e._next=t,e._prev=n),e},u._mod=function(e){for(var t=this._firstPT;t;)"function"===typeof e[t.p]&&(t.r=e[t.p]),t=t._next},u._kill=function(e){var t,n,i,o=e;if(e.autoAlpha||e.alpha){for(n in o={},e)o[n]=e[n];o.opacity=1,o.autoAlpha&&(o.visibility=1)}for(e.className&&(t=this._classNamePT)&&((i=t.xfirst)&&i._prev?this._linkCSSP(i._prev,t._next,i._prev._prev):i===this._firstPT&&(this._firstPT=t._next),t._next&&this._linkCSSP(t._next,t._next._next,i._prev),this._classNamePT=null),t=this._firstPT;t;)t.plugin&&t.plugin!==n&&t.plugin._kill&&(t.plugin._kill(e),n=t.plugin),t=t._next;return r.d.prototype._kill.call(this,o)};var Ze=function e(t,n,r){var i,o,a,s;if(t.slice)for(o=t.length;--o>-1;)e(t[o],n,r);else for(o=(i=t.childNodes).length;--o>-1;)s=(a=i[o]).type,a.style&&(n.push(re(a)),r&&r.push(a)),1!==s&&9!==s&&11!==s||!a.childNodes.length||e(a,n,r)};return o.cascadeTo=function(e,t,n){var i,o,a,s,u=r.f.to(e,t,n),c=[u],l=[],h=[],f=[],d=r.f._internals.reservedProps;for(e=u._targets||u.target,Ze(e,l,f),u.render(t,!0,!0),Ze(e,h),u.render(0,!0,!0),u._enabled(!0),i=f.length;--i>-1;)if((o=ie(f[i],l[i],h[i])).firstMPT){for(a in o=o.difs,n)d[a]&&(o[a]=n[a]);for(a in s={},o)s[a]=l[i][a];c.push(r.f.fromTo(f[i],t,s,o))}return c},r.d.activate([o]),o}),!0);var o=r.g.CSSPlugin,a=r.e._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(e,t,n,r){var i,o;if("function"!==typeof e.setAttribute)return!1;for(i in t)"function"===typeof(o=t[i])&&(o=o(r,e)),this._addTween(e,"setAttribute",e.getAttribute(i)+"",o+"",i,!1,i),this._overwriteProps.push(i);return!0}}),s=r.e._gsDefine.plugin({propName:"roundProps",version:"1.7.0",priority:-1,API:2,init:function(e,t,n){return this._tween=n,!0}}),u=function(e){var t=e<1?Math.pow(10,(e+"").length-2):1;return function(n){return(Math.round(n/e)*e*t|0)/t}},c=function(e,t){for(;e;)e.f||e.blob||(e.m=t||Math.round),e=e._next},l=s.prototype;l._onInitAllProps=function(){var e,t,n,r,i=this._tween,o=i.vars.roundProps,a={},s=i._propLookup.roundProps;if("object"!==typeof o||o.push)for("string"===typeof o&&(o=o.split(",")),n=o.length;--n>-1;)a[o[n]]=Math.round;else for(r in o)a[r]=u(o[r]);for(r in a)for(e=i._firstPT;e;)t=e._next,e.pg?e.t._mod(a):e.n===r&&(2===e.f&&e.t?c(e.t._firstPT,a[r]):(this._add(e.t,r,e.s,e.c,a[r]),t&&(t._prev=e._prev),e._prev?e._prev._next=t:i._firstPT===e&&(i._firstPT=t),e._next=e._prev=null,i._propLookup[r]=s)),e=t;return!1},l._add=function(e,t,n,r,i){this._addTween(e,t,n,n+r,t,i||Math.round),this._overwriteProps.push(t)};var h=r.e._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(e,t,n,r){"object"!==typeof t&&(t={rotation:t}),this.finals={};var i,o,a,s,u,c,l=!0===t.useRadians?2*Math.PI:360;for(i in t)"useRadians"!==i&&("function"===typeof(s=t[i])&&(s=s(r,e)),o=(c=(s+"").split("_"))[0],a=parseFloat("function"!==typeof e[i]?e[i]:e[i.indexOf("set")||"function"!==typeof e["get"+i.substr(3)]?i:"get"+i.substr(3)]()),u=(s=this.finals[i]="string"===typeof o&&"="===o.charAt(1)?a+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0)-a,c.length&&(-1!==(o=c.join("_")).indexOf("short")&&(u%=l)!==u%(l/2)&&(u=u<0?u+l:u-l),-1!==o.indexOf("_cw")&&u<0?u=(u+9999999999*l)%l-(u/l|0)*l:-1!==o.indexOf("ccw")&&u>0&&(u=(u-9999999999*l)%l-(u/l|0)*l)),(u>1e-6||u<-1e-6)&&(this._addTween(e,i,a,a+u,i),this._overwriteProps.push(i)));return!0},set:function(e){var t;if(1!==e)this._super.setRatio.call(this,e);else for(t=this._firstPT;t;)t.f?t.t[t.p](this.finals[t.p]):t.t[t.p]=this.finals[t.p],t=t._next}});h._autoCSS=!0,r.e._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],(function(){var e=function(e){r.c.call(this,e);var t,n,i=this.vars;for(n in this._labels={},this.autoRemoveChildren=!!i.autoRemoveChildren,this.smoothChildTiming=!!i.smoothChildTiming,this._sortChildren=!0,this._onUpdate=i.onUpdate,i)t=i[n],o(t)&&-1!==t.join("").indexOf("{self}")&&(i[n]=this._swapSelfInParams(t));o(i.tweens)&&this.add(i.tweens,0,i.align,i.stagger)},t=r.f._internals,n=e._internals={},i=t.isSelector,o=t.isArray,a=t.lazyTweens,s=t.lazyRender,u=r.e._gsDefine.globals,c=function(e){var t,n={};for(t in e)n[t]=e[t];return n},l=function(e,t,n){var r,i,o=e.cycle;for(r in o)i=o[r],e[r]="function"===typeof i?i(n,t[n],t):i[n%i.length];delete e.cycle},h=n.pauseCallback=function(){},f=function(e,t,n,r){var i="immediateRender";return i in t||(t[i]=!(n&&!1===n[i]||r)),t},d=function(e){if("function"===typeof e)return e;var t="object"===typeof e?e:{each:e},n=t.ease,r=t.from||0,i=t.base||0,o={},a=isNaN(r),s=t.axis,u={center:.5,end:1}[r]||0;return function(e,c,l){var h,f,d,p,m,v,g,y,b,_=(l||t).length,w=o[_];if(!w){if(!(b="auto"===t.grid?0:(t.grid||[1/0])[0])){for(g=-1/0;g<(g=l[b++].getBoundingClientRect().left)&&b<_;);b--}for(w=o[_]=[],h=a?Math.min(b,_)*u-.5:r%b,f=a?_*u/b-.5:r/b|0,g=0,y=1/0,v=0;v<_;v++)d=v%b-h,p=f-(v/b|0),w[v]=m=s?Math.abs("y"===s?p:d):Math.sqrt(d*d+p*p),m>g&&(g=m),m<y&&(y=m);w.max=g-y,w.min=y,w.v=_=t.amount||t.each*(b>_?_-1:s?"y"===s?_/b:b:Math.max(b,_/b))||0,w.b=_<0?i-_:i}return _=(w[e]-w.min)/w.max,w.b+(n?n.getRatio(_):_)*w.v}},p=e.prototype=new r.c;return e.version="2.1.3",e.distribute=d,p.constructor=e,p.kill()._gc=p._forcingPlayhead=p._hasPause=!1,p.to=function(e,t,n,i){var o=n.repeat&&u.TweenMax||r.f;return t?this.add(new o(e,t,n),i):this.set(e,n,i)},p.from=function(e,t,n,i){return this.add((n.repeat&&u.TweenMax||r.f).from(e,t,f(0,n)),i)},p.fromTo=function(e,t,n,i,o){var a=i.repeat&&u.TweenMax||r.f;return i=f(0,i,n),t?this.add(a.fromTo(e,t,n,i),o):this.set(e,i,o)},p.staggerTo=function(t,n,o,a,s,u,h,f){var p,m,v=new e({onComplete:u,onCompleteParams:h,callbackScope:f,smoothChildTiming:this.smoothChildTiming}),g=d(o.stagger||a),y=o.startAt,b=o.cycle;for("string"===typeof t&&(t=r.f.selector(t)||t),i(t=t||[])&&(t=function(e){var t,n=[],r=e.length;for(t=0;t!==r;n.push(e[t++]));return n}(t)),m=0;m<t.length;m++)p=c(o),y&&(p.startAt=c(y),y.cycle&&l(p.startAt,t,m)),b&&(l(p,t,m),null!=p.duration&&(n=p.duration,delete p.duration)),v.to(t[m],n,p,g(m,t[m],t));return this.add(v,s)},p.staggerFrom=function(e,t,n,r,i,o,a,s){return n.runBackwards=!0,this.staggerTo(e,t,f(0,n),r,i,o,a,s)},p.staggerFromTo=function(e,t,n,r,i,o,a,s,u){return r.startAt=n,this.staggerTo(e,t,f(0,r,n),i,o,a,s,u)},p.call=function(e,t,n,i){return this.add(r.f.delayedCall(0,e,t,n),i)},p.set=function(e,t,n){return this.add(new r.f(e,0,f(0,t,null,!0)),n)},e.exportRoot=function(t,n){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var i,o,a,s,u=new e(t),c=u._timeline;for(null==n&&(n=!0),c._remove(u,!0),u._startTime=0,u._rawPrevTime=u._time=u._totalTime=c._time,a=c._first;a;)s=a._next,n&&a instanceof r.f&&a.target===a.vars.onComplete||((o=a._startTime-a._delay)<0&&(i=1),u.add(a,o)),a=s;return c.add(u,0),i&&u.totalDuration(),u},p.add=function(t,n,i,a){var s,u,c,l,h,f;if("number"!==typeof n&&(n=this._parseTimeOrLabel(n,0,!0,t)),!(t instanceof r.a)){if(t instanceof Array||t&&t.push&&o(t)){for(i=i||"normal",a=a||0,s=n,u=t.length,c=0;c<u;c++)o(l=t[c])&&(l=new e({tweens:l})),this.add(l,s),"string"!==typeof l&&"function"!==typeof l&&("sequence"===i?s=l._startTime+l.totalDuration()/l._timeScale:"start"===i&&(l._startTime-=l.delay())),s+=a;return this._uncache(!0)}if("string"===typeof t)return this.addLabel(t,n);if("function"!==typeof t)throw"Cannot add "+t+" into the timeline; it is not a tween, timeline, function, or string.";t=r.f.delayedCall(0,t)}if(r.c.prototype.add.call(this,t,n),(t._time||!t._duration&&t._initted)&&(s=(this.rawTime()-t._startTime)*t._timeScale,(!t._duration||Math.abs(Math.max(0,Math.min(t.totalDuration(),s)))-t._totalTime>1e-5)&&t.render(s,!1,!1)),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(f=(h=this).rawTime()>t._startTime;h._timeline;)f&&h._timeline.smoothChildTiming?h.totalTime(h._totalTime,!0):h._gc&&h._enabled(!0,!1),h=h._timeline;return this},p.remove=function(e){if(e instanceof r.a){this._remove(e,!1);var t=e._timeline=e.vars.useFrames?r.a._rootFramesTimeline:r.a._rootTimeline;return e._startTime=(e._paused?e._pauseTime:t._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&o(e)){for(var n=e.length;--n>-1;)this.remove(e[n]);return this}return"string"===typeof e?this.removeLabel(e):this.kill(null,e)},p._remove=function(e,t){return r.c.prototype._remove.call(this,e,t),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},p.append=function(e,t){return this.add(e,this._parseTimeOrLabel(null,t,!0,e))},p.insert=p.insertMultiple=function(e,t,n,r){return this.add(e,t||0,n,r)},p.appendMultiple=function(e,t,n,r){return this.add(e,this._parseTimeOrLabel(null,t,!0,e),n,r)},p.addLabel=function(e,t){return this._labels[e]=this._parseTimeOrLabel(t),this},p.addPause=function(e,t,n,i){var o=r.f.delayedCall(0,h,n,i||this);return o.vars.onComplete=o.vars.onReverseComplete=t,o.data="isPause",this._hasPause=!0,this.add(o,e)},p.removeLabel=function(e){return delete this._labels[e],this},p.getLabelTime=function(e){return null!=this._labels[e]?this._labels[e]:-1},p._parseTimeOrLabel=function(e,t,n,i){var a,s;if(i instanceof r.a&&i.timeline===this)this.remove(i);else if(i&&(i instanceof Array||i.push&&o(i)))for(s=i.length;--s>-1;)i[s]instanceof r.a&&i[s].timeline===this&&this.remove(i[s]);if(a="number"!==typeof e||t?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"===typeof t)return this._parseTimeOrLabel(t,n&&"number"===typeof e&&null==this._labels[t]?e-a:0,n);if(t=t||0,"string"!==typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=a);else{if(-1===(s=e.indexOf("=")))return null==this._labels[e]?n?this._labels[e]=a+t:t:this._labels[e]+t;t=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,n):a}return Number(e)+t},p.seek=function(e,t){return this.totalTime("number"===typeof e?e:this._parseTimeOrLabel(e),!1!==t)},p.stop=function(){return this.paused(!0)},p.gotoAndPlay=function(e,t){return this.play(e,t)},p.gotoAndStop=function(e,t){return this.pause(e,t)},p.render=function(e,t,n){this._gc&&this._enabled(!0,!1);var r,i,o,u,c,l,h,f,d=this._time,p=this._dirty?this.totalDuration():this._totalDuration,m=this._startTime,v=this._timeScale,g=this._paused;if(d!==this._time&&(e+=this._time-d),this._hasPause&&!this._forcingPlayhead&&!t){if(e>d)for(r=this._first;r&&r._startTime<=e&&!l;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(l=r),r=r._next;else for(r=this._last;r&&r._startTime>=e&&!l;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(l=r),r=r._prev;l&&(this._time=this._totalTime=e=l._startTime,f=this._startTime+(this._reversed?this._duration-e:e)/this._timeScale)}if(e>=p-1e-8&&e>=0)this._totalTime=this._time=p,this._reversed||this._hasPausedChild()||(i=!0,u="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-8||this._rawPrevTime<0||1e-8===this._rawPrevTime)&&this._rawPrevTime!==e&&this._first&&(c=!0,this._rawPrevTime>1e-8&&(u="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-8,e=p+1e-4;else if(e<1e-8)if(this._totalTime=this._time=0,e>-1e-8&&(e=0),(0!==d||0===this._duration&&1e-8!==this._rawPrevTime&&(this._rawPrevTime>0||e<0&&this._rawPrevTime>=0))&&(u="onReverseComplete",i=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=i=!0,u="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(c=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-8,0===e&&i)for(r=this._first;r&&0===r._startTime;)r._duration||(i=!1),r=r._next;e=0,this._initted||(c=!0)}else this._totalTime=this._time=this._rawPrevTime=e;if(this._time!==d&&this._first||n||c||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==d&&e>0&&(this._active=!0),0===d&&this.vars.onStart&&(0===this._time&&this._duration||t||this._callback("onStart")),(h=this._time)>=d)for(r=this._first;r&&(o=r._next,h===this._time&&(!this._paused||g));)(r._active||r._startTime<=h&&!r._paused&&!r._gc)&&(l===r&&(this.pause(),this._pauseTime=f),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)),r=o;else for(r=this._last;r&&(o=r._prev,h===this._time&&(!this._paused||g));){if(r._active||r._startTime<=d&&!r._paused&&!r._gc){if(l===r){for(l=r._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(e-l._startTime)*l._timeScale:(e-l._startTime)*l._timeScale,t,n),l=l._prev;l=null,this.pause(),this._pauseTime=f}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(e-r._startTime)*r._timeScale,t,n):r.render((e-r._startTime)*r._timeScale,t,n)}r=o}this._onUpdate&&(t||(a.length&&s(),this._callback("onUpdate"))),u&&(this._gc||m!==this._startTime&&v===this._timeScale||(0===this._time||p>=this.totalDuration())&&(i&&(a.length&&s(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[u]&&this._callback(u)))}},p._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof e&&t._hasPausedChild())return!0;t=t._next}return!1},p.getChildren=function(e,t,n,i){i=i||-9999999999;for(var o=[],a=this._first,s=0;a;)a._startTime<i||(a instanceof r.f?!1!==t&&(o[s++]=a):(!1!==n&&(o[s++]=a),!1!==e&&(s=(o=o.concat(a.getChildren(!0,t,n))).length))),a=a._next;return o},p.getTweensOf=function(e,t){var n,i,o=this._gc,a=[],s=0;for(o&&this._enabled(!0,!0),i=(n=r.f.getTweensOf(e)).length;--i>-1;)(n[i].timeline===this||t&&this._contains(n[i]))&&(a[s++]=n[i]);return o&&this._enabled(!1,!0),a},p.recent=function(){return this._recent},p._contains=function(e){for(var t=e.timeline;t;){if(t===this)return!0;t=t.timeline}return!1},p.shiftChildren=function(e,t,n){n=n||0;for(var r,i=this._first,o=this._labels;i;)i._startTime>=n&&(i._startTime+=e),i=i._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return this._uncache(!0)},p._kill=function(e,t){if(!e&&!t)return this._enabled(!1,!1);for(var n=t?this.getTweensOf(t):this.getChildren(!0,!0,!1),r=n.length,i=!1;--r>-1;)n[r]._kill(e,t)&&(i=!0);return i},p.clear=function(e){var t=this.getChildren(!1,!0,!0),n=t.length;for(this._time=this._totalTime=0;--n>-1;)t[n]._enabled(!1,!1);return!1!==e&&(this._labels={}),this._uncache(!0)},p.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return r.a.prototype.invalidate.call(this)},p._enabled=function(e,t){if(e===this._gc)for(var n=this._first;n;)n._enabled(e,!0),n=n._next;return r.c.prototype._enabled.call(this,e,t)},p.totalTime=function(e,t,n){this._forcingPlayhead=!0;var i=r.a.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,i},p.duration=function(e){return arguments.length?(0!==this.duration()&&0!==e&&this.timeScale(this._duration/e),this):(this._dirty&&this.totalDuration(),this._duration)},p.totalDuration=function(e){if(!arguments.length){if(this._dirty){for(var t,n,r=0,i=this,o=i._last,a=999999999999;o;)t=o._prev,o._dirty&&o.totalDuration(),o._startTime>a&&i._sortChildren&&!o._paused&&!i._calculatingDuration?(i._calculatingDuration=1,i.add(o,o._startTime-o._delay),i._calculatingDuration=0):a=o._startTime,o._startTime<0&&!o._paused&&(r-=o._startTime,i._timeline.smoothChildTiming&&(i._startTime+=o._startTime/i._timeScale,i._time-=o._startTime,i._totalTime-=o._startTime,i._rawPrevTime-=o._startTime),i.shiftChildren(-o._startTime,!1,-9999999999),a=0),(n=o._startTime+o._totalDuration/o._timeScale)>r&&(r=n),o=t;i._duration=i._totalDuration=r,i._dirty=!1}return this._totalDuration}return e&&this.totalDuration()?this.timeScale(this._totalDuration/e):this},p.paused=function(e){if(!1===e&&this._paused)for(var t=this._first;t;)t._startTime===this._time&&"isPause"===t.data&&(t._rawPrevTime=0),t=t._next;return r.a.prototype.paused.apply(this,arguments)},p.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===r.a._rootFramesTimeline},p.rawTime=function(e){return e&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(e)-this._startTime)*this._timeScale},e}),!0);var f=r.g.TimelineLite;r.e._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],(function(){var e=function(e){f.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!!this.vars.yoyo,this._dirty=!0},t=r.f._internals,n=t.lazyTweens,i=t.lazyRender,o=r.e._gsDefine.globals,a=new r.b(null,null,1,0),s=e.prototype=new f;return s.constructor=e,s.kill()._gc=!1,e.version="2.1.3",s.invalidate=function(){return this._yoyo=!!this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),f.prototype.invalidate.call(this)},s.addCallback=function(e,t,n,i){return this.add(r.f.delayedCall(0,e,n,i),t)},s.removeCallback=function(e,t){if(e)if(null==t)this._kill(null,e);else for(var n=this.getTweensOf(e,!1),r=n.length,i=this._parseTimeOrLabel(t);--r>-1;)n[r]._startTime===i&&n[r]._enabled(!1,!1);return this},s.removePause=function(e){return this.removeCallback(f._internals.pauseCallback,e)},s.tweenTo=function(e,t){t=t||{};var n,i,s,u={ease:a,useFrames:this.usesFrames(),immediateRender:!1,lazy:!1},c=t.repeat&&o.TweenMax||r.f;for(i in t)u[i]=t[i];return u.time=this._parseTimeOrLabel(e),n=Math.abs(Number(u.time)-this._time)/this._timeScale||.001,s=new c(this,n,u),u.onStart=function(){s.target.paused(!0),s.vars.time===s.target.time()||n!==s.duration()||s.isFromTo||s.duration(Math.abs(s.vars.time-s.target.time())/s.target._timeScale).render(s.time(),!0,!0),t.onStart&&t.onStart.apply(t.onStartScope||t.callbackScope||s,t.onStartParams||[])},s},s.tweenFromTo=function(e,t,n){n=n||{},e=this._parseTimeOrLabel(e),n.startAt={onComplete:this.seek,onCompleteParams:[e],callbackScope:this},n.immediateRender=!1!==n.immediateRender;var r=this.tweenTo(t,n);return r.isFromTo=1,r.duration(Math.abs(r.vars.time-e)/this._timeScale||.001)},s.render=function(e,t,r){this._gc&&this._enabled(!0,!1);var o,a,s,u,c,l,h,f,d,p=this._time,m=this._dirty?this.totalDuration():this._totalDuration,v=this._duration,g=this._totalTime,y=this._startTime,b=this._timeScale,_=this._rawPrevTime,w=this._paused,x=this._cycle;if(p!==this._time&&(e+=this._time-p),e>=m-1e-8&&e>=0)this._locked||(this._totalTime=m,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(a=!0,u="onComplete",c=!!this._timeline.autoRemoveChildren,0===this._duration&&(e<=0&&e>=-1e-8||_<0||1e-8===_)&&_!==e&&this._first&&(c=!0,_>1e-8&&(u="onReverseComplete"))),this._rawPrevTime=this._duration||!t||e||this._rawPrevTime===e?e:1e-8,this._yoyo&&1&this._cycle?this._time=e=0:(this._time=v,e=v+1e-4);else if(e<1e-8)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,e>-1e-8&&(e=0),(0!==p||0===v&&1e-8!==_&&(_>0||e<0&&_>=0)&&!this._locked)&&(u="onReverseComplete",a=this._reversed),e<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(c=a=!0,u="onReverseComplete"):_>=0&&this._first&&(c=!0),this._rawPrevTime=e;else{if(this._rawPrevTime=v||!t||e||this._rawPrevTime===e?e:1e-8,0===e&&a)for(o=this._first;o&&0===o._startTime;)o._duration||(a=!1),o=o._next;e=0,this._initted||(c=!0)}else 0===v&&_<0&&(c=!0),this._time=this._rawPrevTime=e,this._locked||(this._totalTime=e,0!==this._repeat&&(l=v+this._repeatDelay,this._cycle=this._totalTime/l>>0,this._cycle&&this._cycle===this._totalTime/l&&g<=e&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&1&this._cycle&&(this._time=v-this._time),this._time>v?(this._time=v,e=v+1e-4):this._time<0?this._time=e=0:e=this._time));if(this._hasPause&&!this._forcingPlayhead&&!t){if((e=this._time)>p||this._repeat&&x!==this._cycle)for(o=this._first;o&&o._startTime<=e&&!h;)o._duration||"isPause"!==o.data||o.ratio||0===o._startTime&&0===this._rawPrevTime||(h=o),o=o._next;else for(o=this._last;o&&o._startTime>=e&&!h;)o._duration||"isPause"===o.data&&o._rawPrevTime>0&&(h=o),o=o._prev;h&&(d=this._startTime+(this._reversed?this._duration-h._startTime:h._startTime)/this._timeScale,h._startTime<v&&(this._time=this._rawPrevTime=e=h._startTime,this._totalTime=e+this._cycle*(this._totalDuration+this._repeatDelay)))}if(this._cycle!==x&&!this._locked){var T=this._yoyo&&0!==(1&x),S=T===(this._yoyo&&0!==(1&this._cycle)),E=this._totalTime,M=this._cycle,C=this._rawPrevTime,A=this._time;if(this._totalTime=x*v,this._cycle<x?T=!T:this._totalTime+=v,this._time=p,this._rawPrevTime=0===v?_-1e-4:_,this._cycle=x,this._locked=!0,p=T?0:v,this.render(p,t,0===v),t||this._gc||this.vars.onRepeat&&(this._cycle=M,this._locked=!1,this._callback("onRepeat")),p!==this._time)return;if(S&&(this._cycle=x,this._locked=!0,p=T?v+1e-4:-1e-4,this.render(p,!0,!1)),this._locked=!1,this._paused&&!w)return;this._time=A,this._totalTime=E,this._cycle=M,this._rawPrevTime=C}if(this._time!==p&&this._first||r||c||h){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==g&&e>0&&(this._active=!0),0===g&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||t||this._callback("onStart")),(f=this._time)>=p)for(o=this._first;o&&(s=o._next,f===this._time&&(!this._paused||w));)(o._active||o._startTime<=this._time&&!o._paused&&!o._gc)&&(h===o&&(this.pause(),this._pauseTime=d),o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(e-o._startTime)*o._timeScale,t,r):o.render((e-o._startTime)*o._timeScale,t,r)),o=s;else for(o=this._last;o&&(s=o._prev,f===this._time&&(!this._paused||w));){if(o._active||o._startTime<=p&&!o._paused&&!o._gc){if(h===o){for(h=o._prev;h&&h.endTime()>this._time;)h.render(h._reversed?h.totalDuration()-(e-h._startTime)*h._timeScale:(e-h._startTime)*h._timeScale,t,r),h=h._prev;h=null,this.pause(),this._pauseTime=d}o._reversed?o.render((o._dirty?o.totalDuration():o._totalDuration)-(e-o._startTime)*o._timeScale,t,r):o.render((e-o._startTime)*o._timeScale,t,r)}o=s}this._onUpdate&&(t||(n.length&&i(),this._callback("onUpdate"))),u&&(this._locked||this._gc||y!==this._startTime&&b===this._timeScale||(0===this._time||m>=this.totalDuration())&&(a&&(n.length&&i(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!t&&this.vars[u]&&this._callback(u)))}else g!==this._totalTime&&this._onUpdate&&(t||this._callback("onUpdate"))},s.getActive=function(e,t,n){var r,i,o=[],a=this.getChildren(e||null==e,t||null==e,!!n),s=0,u=a.length;for(r=0;r<u;r++)(i=a[r]).isActive()&&(o[s++]=i);return o},s.getLabelAfter=function(e){e||0!==e&&(e=this._time);var t,n=this.getLabelsArray(),r=n.length;for(t=0;t<r;t++)if(n[t].time>e)return n[t].name;return null},s.getLabelBefore=function(e){null==e&&(e=this._time);for(var t=this.getLabelsArray(),n=t.length;--n>-1;)if(t[n].time<e)return t[n].name;return null},s.getLabelsArray=function(){var e,t=[],n=0;for(e in this._labels)t[n++]={time:this._labels[e],name:e};return t.sort((function(e,t){return e.time-t.time})),t},s.invalidate=function(){return this._locked=!1,f.prototype.invalidate.call(this)},s.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!==(1&this._cycle)?1-e:e)+this._cycle*(this._duration+this._repeatDelay),t):this._time/this.duration()||0},s.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this._totalTime/this.totalDuration()||0},s.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(f.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},s.time=function(e,t){if(!arguments.length)return this._time;this._dirty&&this.totalDuration();var n=this._duration,r=this._cycle,i=r*(n+this._repeatDelay);return e>n&&(e=n),this.totalTime(this._yoyo&&1&r?n-e+i:this._repeat?e+i:e,t)},s.repeat=function(e){return arguments.length?(this._repeat=e,this._uncache(!0)):this._repeat},s.repeatDelay=function(e){return arguments.length?(this._repeatDelay=e,this._uncache(!0)):this._repeatDelay},s.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},s.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.getLabelBefore(this._time+1e-8)},e}),!0);var d=r.g.TimelineMax,p=180/Math.PI,m=[],v=[],g=[],y={},b=r.e._gsDefine.globals,_=function(e,t,n,r){n===r&&(n=r-(r-t)/1e6),e===t&&(t=e+(n-e)/1e6),this.a=e,this.b=t,this.c=n,this.d=r,this.da=r-e,this.ca=n-e,this.ba=t-e},w=function(e,t,n,r){var i={a:e},o={},a={},s={c:r},u=(e+t)/2,c=(t+n)/2,l=(n+r)/2,h=(u+c)/2,f=(c+l)/2,d=(f-h)/8;return i.b=u+(e-u)/4,o.b=h+d,i.c=o.a=(i.b+o.b)/2,o.c=a.a=(h+f)/2,a.b=f-d,s.b=l+(r-l)/4,a.c=s.a=(a.b+s.b)/2,[i,o,a,s]},x=function(e,t,n,r,i){var o,a,s,u,c,l,h,f,d,p,y,b,_,x=e.length-1,T=0,S=e[0].a;for(o=0;o<x;o++)a=(c=e[T]).a,s=c.d,u=e[T+1].d,i?(y=m[o],_=((b=v[o])+y)*t*.25/(r?.5:g[o]||.5),f=s-((l=s-(s-a)*(r?.5*t:0!==y?_/y:0))+(((h=s+(u-s)*(r?.5*t:0!==b?_/b:0))-l)*(3*y/(y+b)+.5)/4||0))):f=s-((l=s-(s-a)*t*.5)+(h=s+(u-s)*t*.5))/2,l+=f,h+=f,c.c=d=l,c.b=0!==o?S:S=c.a+.6*(c.c-c.a),c.da=s-a,c.ca=d-a,c.ba=S-a,n?(p=w(a,S,d,s),e.splice(T,1,p[0],p[1],p[2],p[3]),T+=4):T++,S=h;(c=e[T]).b=S,c.c=S+.4*(c.d-S),c.da=c.d-c.a,c.ca=c.c-c.a,c.ba=S-c.a,n&&(p=w(c.a,S,c.c,c.d),e.splice(T,1,p[0],p[1],p[2],p[3]))},T=function(e,t,n,r){var i,o,a,s,u,c,l=[];if(r)for(o=(e=[r].concat(e)).length;--o>-1;)"string"===typeof(c=e[o][t])&&"="===c.charAt(1)&&(e[o][t]=r[t]+Number(c.charAt(0)+c.substr(2)));if((i=e.length-2)<0)return l[0]=new _(e[0][t],0,0,e[0][t]),l;for(o=0;o<i;o++)a=e[o][t],s=e[o+1][t],l[o]=new _(a,0,0,s),n&&(u=e[o+2][t],m[o]=(m[o]||0)+(s-a)*(s-a),v[o]=(v[o]||0)+(u-s)*(u-s));return l[o]=new _(e[o][t],0,0,e[o+1][t]),l},S=function(e,t,n,r,i,o){var a,s,u,c,l,h,f,d,p={},b=[],_=o||e[0];for(s in i="string"===typeof i?","+i+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==t&&(t=1),e[0])b.push(s);if(e.length>1){for(d=e[e.length-1],f=!0,a=b.length;--a>-1;)if(s=b[a],Math.abs(_[s]-d[s])>.05){f=!1;break}f&&(e=e.concat(),o&&e.unshift(o),e.push(e[1]),o=e[e.length-3])}for(m.length=v.length=g.length=0,a=b.length;--a>-1;)s=b[a],y[s]=-1!==i.indexOf(","+s+","),p[s]=T(e,s,y[s],o);for(a=m.length;--a>-1;)m[a]=Math.sqrt(m[a]),v[a]=Math.sqrt(v[a]);if(!r){for(a=b.length;--a>-1;)if(y[s])for(h=(u=p[b[a]]).length-1,c=0;c<h;c++)l=u[c+1].da/v[c]+u[c].da/m[c]||0,g[c]=(g[c]||0)+l*l;for(a=g.length;--a>-1;)g[a]=Math.sqrt(g[a])}for(a=b.length,c=n?4:1;--a>-1;)u=p[s=b[a]],x(u,t,n,r,y[s]),f&&(u.splice(0,c),u.splice(u.length-c,c));return p},E=function(e,t,n){for(var r,i,o,a,s,u,c,l,h,f,d,p=1/n,m=e.length;--m>-1;)for(o=(f=e[m]).a,a=f.d-o,s=f.c-o,u=f.b-o,r=i=0,l=1;l<=n;l++)r=i-(i=((c=p*l)*c*a+3*(h=1-c)*(c*s+h*u))*c),t[d=m*n+l-1]=(t[d]||0)+r*r},M=r.e._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.9",API:2,global:!0,init:function(e,t,n){this._target=e,t instanceof Array&&(t={values:t}),this._func={},this._mod={},this._props=[],this._timeRes=null==t.timeResolution?6:parseInt(t.timeResolution,10);var r,i,o,a,s,u=t.values||[],c={},l=u[0],h=t.autoRotate||n.vars.orientToBezier;for(r in this._autoRotate=h?h instanceof Array?h:[["x","y","rotation",!0===h?0:Number(h)||0]]:null,l)this._props.push(r);for(o=this._props.length;--o>-1;)r=this._props[o],this._overwriteProps.push(r),i=this._func[r]="function"===typeof e[r],c[r]=i?e[r.indexOf("set")||"function"!==typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(e[r]),s||c[r]!==u[0][r]&&(s=c);if(this._beziers="cubic"!==t.type&&"quadratic"!==t.type&&"soft"!==t.type?S(u,isNaN(t.curviness)?1:t.curviness,!1,"thruBasic"===t.type,t.correlate,s):function(e,t,n){var r,i,o,a,s,u,c,l,h,f,d,p={},m="cubic"===(t=t||"soft")?3:2,v="soft"===t,g=[];if(v&&n&&(e=[n].concat(e)),null==e||e.length<m+1)throw"invalid Bezier data";for(h in e[0])g.push(h);for(u=g.length;--u>-1;){for(p[h=g[u]]=s=[],f=0,l=e.length,c=0;c<l;c++)r=null==n?e[c][h]:"string"===typeof(d=e[c][h])&&"="===d.charAt(1)?n[h]+Number(d.charAt(0)+d.substr(2)):Number(d),v&&c>1&&c<l-1&&(s[f++]=(r+s[f-2])/2),s[f++]=r;for(l=f-m+1,f=0,c=0;c<l;c+=m)r=s[c],i=s[c+1],o=s[c+2],a=2===m?0:s[c+3],s[f++]=d=3===m?new _(r,i,o,a):new _(r,(2*i+r)/3,(2*i+o)/3,o);s.length=f}return p}(u,t.type,c),this._segCount=this._beziers[r].length,this._timeRes){var f=function(e,t){var n,r,i,o,a=[],s=[],u=0,c=0,l=(t=t>>0||6)-1,h=[],f=[];for(n in e)E(e[n],a,t);for(i=a.length,r=0;r<i;r++)u+=Math.sqrt(a[r]),f[o=r%t]=u,o===l&&(c+=u,h[o=r/t>>0]=f,s[o]=c,u=0,f=[]);return{length:c,lengths:s,segments:h}}(this._beziers,this._timeRes);this._length=f.length,this._lengths=f.lengths,this._segments=f.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(h=this._autoRotate)for(this._initialRotations=[],h[0]instanceof Array||(this._autoRotate=h=[h]),o=h.length;--o>-1;){for(a=0;a<3;a++)r=h[o][a],this._func[r]="function"===typeof e[r]&&e[r.indexOf("set")||"function"!==typeof e["get"+r.substr(3)]?r:"get"+r.substr(3)];r=h[o][2],this._initialRotations[o]=(this._func[r]?this._func[r].call(this._target):this._target[r])||0,this._overwriteProps.push(r)}return this._startRatio=n.vars.runBackwards?1:0,!0},set:function(e){var t,n,r,i,o,a,s,u,c,l,h,f=this._segCount,d=this._func,m=this._target,v=e!==this._startRatio;if(this._timeRes){if(c=this._lengths,l=this._curSeg,h=e*this._length,r=this._li,h>this._l2&&r<f-1){for(u=f-1;r<u&&(this._l2=c[++r])<=h;);this._l1=c[r-1],this._li=r,this._curSeg=l=this._segments[r],this._s2=l[this._s1=this._si=0]}else if(h<this._l1&&r>0){for(;r>0&&(this._l1=c[--r])>=h;);0===r&&h<this._l1?this._l1=0:r++,this._l2=c[r],this._li=r,this._curSeg=l=this._segments[r],this._s1=l[(this._si=l.length-1)-1]||0,this._s2=l[this._si]}if(t=r,h-=this._l1,r=this._si,h>this._s2&&r<l.length-1){for(u=l.length-1;r<u&&(this._s2=l[++r])<=h;);this._s1=l[r-1],this._si=r}else if(h<this._s1&&r>0){for(;r>0&&(this._s1=l[--r])>=h;);0===r&&h<this._s1?this._s1=0:r++,this._s2=l[r],this._si=r}a=1===e?1:(r+(h-this._s1)/(this._s2-this._s1))*this._prec||0}else a=(e-(t=e<0?0:e>=1?f-1:f*e>>0)*(1/f))*f;for(n=1-a,r=this._props.length;--r>-1;)i=this._props[r],s=(a*a*(o=this._beziers[i][t]).da+3*n*(a*o.ca+n*o.ba))*a+o.a,this._mod[i]&&(s=this._mod[i](s,m)),d[i]?m[i](s):m[i]=s;if(this._autoRotate){var g,y,b,_,w,x,T,S=this._autoRotate;for(r=S.length;--r>-1;)i=S[r][2],x=S[r][3]||0,T=!0===S[r][4]?1:p,o=this._beziers[S[r][0]],g=this._beziers[S[r][1]],o&&g&&(o=o[t],g=g[t],y=o.a+(o.b-o.a)*a,y+=((_=o.b+(o.c-o.b)*a)-y)*a,_+=(o.c+(o.d-o.c)*a-_)*a,b=g.a+(g.b-g.a)*a,b+=((w=g.b+(g.c-g.b)*a)-b)*a,w+=(g.c+(g.d-g.c)*a-w)*a,s=v?Math.atan2(w-b,_-y)*T+x:this._initialRotations[r],this._mod[i]&&(s=this._mod[i](s,m)),d[i]?m[i](s):m[i]=s)}}}),C=M.prototype;M.bezierThrough=S,M.cubicToQuadratic=w,M._autoCSS=!0,M.quadraticToCubic=function(e,t,n){return new _(e,(2*t+e)/3,(2*t+n)/3,n)},M._cssRegister=function(){var e=b.CSSPlugin;if(e){var t=e._internals,n=t._parseToProxy,r=t._setPluginRatio,i=t.CSSPropTween;t._registerComplexSpecialProp("bezier",{parser:function(e,t,o,a,s,u){t instanceof Array&&(t={values:t}),u=new M;var c,l,h,f=t.values,d=f.length-1,p=[],m={};if(d<0)return s;for(c=0;c<=d;c++)h=n(e,f[c],a,s,u,d!==c),p[c]=h.end;for(l in t)m[l]=t[l];return m.values=p,(s=new i(e,"bezier",0,0,h.pt,2)).data=h,s.plugin=u,s.setRatio=r,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(c=!0===m.autoRotate?0:Number(m.autoRotate),m.autoRotate=null!=h.end.left?[["left","top","rotation",c,!1]]:null!=h.end.x&&[["x","y","rotation",c,!1]]),m.autoRotate&&(a._transform||a._enableTransforms(!1),h.autoRotate=a._target._gsTransform,h.proxy.rotation=h.autoRotate.rotation||0,a._overwriteProps.push("rotation")),u._onInitTween(h.proxy,m,a._tween),s}})}},C._mod=function(e){for(var t,n=this._overwriteProps,r=n.length;--r>-1;)(t=e[n[r]])&&"function"===typeof t&&(this._mod[n[r]]=t)},C._kill=function(e){var t,n,r=this._props;for(t in this._beziers)if(t in e)for(delete this._beziers[t],delete this._func[t],n=r.length;--n>-1;)r[n]===t&&r.splice(n,1);if(r=this._autoRotate)for(n=r.length;--n>-1;)e[r[n][2]]&&r.splice(n,1);return this._super._kill.call(this,e)},r.e._gsDefine("easing.Back",["easing.Ease"],(function(){var e,t,n,i,o=r.e.GreenSockGlobals||r.e,a=o.com.greensock,s=2*Math.PI,u=Math.PI/2,c=a._class,l=function(e,t){var n=c("easing."+e,(function(){}),!0),i=n.prototype=new r.b;return i.constructor=n,i.getRatio=t,n},h=r.b.register||function(){},f=function(e,t,n,r,i){var o=c("easing."+e,{easeOut:new t,easeIn:new n,easeInOut:new r},!0);return h(o,e),o},d=function(e,t,n){this.t=e,this.v=t,n&&(this.next=n,n.prev=this,this.c=n.v-t,this.gap=n.t-e)},p=function(e,t){var n=c("easing."+e,(function(e){this._p1=e||0===e?e:1.70158,this._p2=1.525*this._p1}),!0),i=n.prototype=new r.b;return i.constructor=n,i.getRatio=t,i.config=function(e){return new n(e)},n},m=f("Back",p("BackOut",(function(e){return(e-=1)*e*((this._p1+1)*e+this._p1)+1})),p("BackIn",(function(e){return e*e*((this._p1+1)*e-this._p1)})),p("BackInOut",(function(e){return(e*=2)<1?.5*e*e*((this._p2+1)*e-this._p2):.5*((e-=2)*e*((this._p2+1)*e+this._p2)+2)}))),v=c("easing.SlowMo",(function(e,t,n){t=t||0===t?t:.7,null==e?e=.7:e>1&&(e=1),this._p=1!==e?t:0,this._p1=(1-e)/2,this._p2=e,this._p3=this._p1+this._p2,this._calcEnd=!0===n}),!0),g=v.prototype=new r.b;return g.constructor=v,g.getRatio=function(e){var t=e+(.5-e)*this._p;return e<this._p1?this._calcEnd?1-(e=1-e/this._p1)*e:t-(e=1-e/this._p1)*e*e*e*t:e>this._p3?this._calcEnd?1===e?0:1-(e=(e-this._p3)/this._p1)*e:t+(e-t)*(e=(e-this._p3)/this._p1)*e*e*e:this._calcEnd?1:t},v.ease=new v(.7,.7),g.config=v.config=function(e,t,n){return new v(e,t,n)},(g=(e=c("easing.SteppedEase",(function(e,t){e=e||1,this._p1=1/e,this._p2=e+(t?0:1),this._p3=t?1:0}),!0)).prototype=new r.b).constructor=e,g.getRatio=function(e){return e<0?e=0:e>=1&&(e=.999999999),((this._p2*e|0)+this._p3)*this._p1},g.config=e.config=function(t,n){return new e(t,n)},(g=(t=c("easing.ExpoScaleEase",(function(e,t,n){this._p1=Math.log(t/e),this._p2=t-e,this._p3=e,this._ease=n}),!0)).prototype=new r.b).constructor=t,g.getRatio=function(e){return this._ease&&(e=this._ease.getRatio(e)),(this._p3*Math.exp(this._p1*e)-this._p3)/this._p2},g.config=t.config=function(e,n,r){return new t(e,n,r)},(g=(n=c("easing.RoughEase",(function(e){for(var t,n,i,o,a,s,u=(e=e||{}).taper||"none",c=[],l=0,h=0|(e.points||20),f=h,p=!1!==e.randomize,m=!0===e.clamp,v=e.template instanceof r.b?e.template:null,g="number"===typeof e.strength?.4*e.strength:.4;--f>-1;)t=p?Math.random():1/h*f,n=v?v.getRatio(t):t,i="none"===u?g:"out"===u?(o=1-t)*o*g:"in"===u?t*t*g:t<.5?(o=2*t)*o*.5*g:(o=2*(1-t))*o*.5*g,p?n+=Math.random()*i-.5*i:f%2?n+=.5*i:n-=.5*i,m&&(n>1?n=1:n<0&&(n=0)),c[l++]={x:t,y:n};for(c.sort((function(e,t){return e.x-t.x})),s=new d(1,1,null),f=h;--f>-1;)a=c[f],s=new d(a.x,a.y,s);this._prev=new d(0,0,0!==s.t?s:s.next)}),!0)).prototype=new r.b).constructor=n,g.getRatio=function(e){var t=this._prev;if(e>t.t){for(;t.next&&e>=t.t;)t=t.next;t=t.prev}else for(;t.prev&&e<=t.t;)t=t.prev;return this._prev=t,t.v+(e-t.t)/t.gap*t.c},g.config=function(e){return new n(e)},n.ease=new n,f("Bounce",l("BounceOut",(function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375})),l("BounceIn",(function(e){return(e=1-e)<1/2.75?1-7.5625*e*e:e<2/2.75?1-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?1-(7.5625*(e-=2.25/2.75)*e+.9375):1-(7.5625*(e-=2.625/2.75)*e+.984375)})),l("BounceInOut",(function(e){var t=e<.5;return(e=t?1-2*e:2*e-1)<1/2.75?e*=7.5625*e:e=e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,t?.5*(1-e):.5*e+.5}))),f("Circ",l("CircOut",(function(e){return Math.sqrt(1-(e-=1)*e)})),l("CircIn",(function(e){return-(Math.sqrt(1-e*e)-1)})),l("CircInOut",(function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}))),f("Elastic",(i=function(e,t,n){var i=c("easing."+e,(function(e,t){this._p1=e>=1?e:1,this._p2=(t||n)/(e<1?e:1),this._p3=this._p2/s*(Math.asin(1/this._p1)||0),this._p2=s/this._p2}),!0),o=i.prototype=new r.b;return o.constructor=i,o.getRatio=t,o.config=function(e,t){return new i(e,t)},i})("ElasticOut",(function(e){return this._p1*Math.pow(2,-10*e)*Math.sin((e-this._p3)*this._p2)+1}),.3),i("ElasticIn",(function(e){return-this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)}),.3),i("ElasticInOut",(function(e){return(e*=2)<1?this._p1*Math.pow(2,10*(e-=1))*Math.sin((e-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(e-=1))*Math.sin((e-this._p3)*this._p2)*.5+1}),.45)),f("Expo",l("ExpoOut",(function(e){return 1-Math.pow(2,-10*e)})),l("ExpoIn",(function(e){return Math.pow(2,10*(e-1))-.001})),l("ExpoInOut",(function(e){return(e*=2)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*(e-1)))}))),f("Sine",l("SineOut",(function(e){return Math.sin(e*u)})),l("SineIn",(function(e){return 1-Math.cos(e*u)})),l("SineInOut",(function(e){return-.5*(Math.cos(Math.PI*e)-1)}))),c("easing.EaseLookup",{find:function(e){return r.b.map[e]}},!0),h(o.SlowMo,"SlowMo","ease,"),h(n,"RoughEase","ease,"),h(e,"SteppedEase","ease,"),m}),!0);var A=r.g.Back,P=r.g.Elastic,O=r.g.Bounce,k=r.g.RoughEase,I=r.g.SlowMo,R=r.g.SteppedEase,D=r.g.Circ,L=r.g.Expo,N=r.g.Sine,F=r.g.ExpoScaleEase,U=i;U._autoActivated=[f,d,o,a,M,s,h,A,P,O,k,I,R,D,L,N,F],n.d(t,"a",(function(){return U}))},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,"a",(function(){return r}))},,function(e,t,n){"use strict";var r=n(196),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,d=i?Symbol.for("react.suspense"):60113;i&&Symbol.for("react.suspense_list");var p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder"),i&&Symbol.for("react.scope");var v="function"===typeof Symbol&&Symbol.iterator;function g(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}function w(){}function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||y}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(g(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=_.prototype;var T=x.prototype=new w;T.constructor=x,r(T,_.prototype),T.isPureReactComponent=!0;var S={current:null},E={current:null},M=Object.prototype.hasOwnProperty,C={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)M.call(t,r)&&!C.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:E.current}}function P(e){return"object"===typeof e&&null!==e&&e.$$typeof===o}var O=/\/+/g,k=[];function I(e,t,n,r){if(k.length){var i=k.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>k.length&&k.push(e)}function D(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+L(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+L(s=t[c],c);u+=e(s,l,r,i)}else if(null===t||"object"!==typeof t?l=null:l="function"===typeof(l=v&&t[v]||t["@@iterator"])?l:null,"function"===typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+L(s,c++),r,i);else if("object"===s)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return u}(e,"",t,n)}function L(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function N(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,(function(e){return e})):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(O,"$&/")+"/"),D(e,F,t=I(t,o,r,i)),R(t)}function j(){var e=S.current;if(null===e)throw Error(g(321));return e}var B={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;D(e,N,t=I(null,null,t,n)),R(t)},count:function(e){return D(e,(function(){return null}),null)},toArray:function(e){var t=[];return U(e,t,null,(function(e){return e})),t},only:function(e){if(!P(e))throw Error(g(143));return e}},createRef:function(){return{current:null}},Component:_,PureComponent:x,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return j().useCallback(e,t)},useContext:function(e,t){return j().useContext(e,t)},useEffect:function(e,t){return j().useEffect(e,t)},useImperativeHandle:function(e,t,n){return j().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return j().useLayoutEffect(e,t)},useMemo:function(e,t){return j().useMemo(e,t)},useReducer:function(e,t,n){return j().useReducer(e,t,n)},useRef:function(e){return j().useRef(e)},useState:function(e){return j().useState(e)},Fragment:s,Profiler:c,StrictMode:u,Suspense:d,createElement:A,cloneElement:function(e,t,n){if(null===e||void 0===e)throw Error(g(267,e));var i=r({},e.props),a=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=E.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)M.call(t,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:u}},createFactory:function(e){var t=A.bind(null,e);return t.type=e,t},isValidElement:P,version:"16.12.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:r}},z={default:B},V=z&&B||z;e.exports=V.default||V},function(e,t,n){"use strict";var r=n(0),i=n(196),o=n(315);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=null,u={};function c(){if(s)for(var e in u){var t=u[e],n=s.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!h[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in h[n]=t,n=t.eventTypes){var i=void 0,o=n[r],c=t,d=r;if(f.hasOwnProperty(d))throw Error(a(99,d));f[d]=o;var p=o.phasedRegistrationNames;if(p){for(i in p)p.hasOwnProperty(i)&&l(p[i],c,d);i=!0}else o.registrationName?(l(o.registrationName,c,d),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function l(e,t,n){if(d[e])throw Error(a(100,e));d[e]=t,p[e]=t.eventTypes[n].dependencies}var h=[],f={},d={},p={};function m(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var v=!1,g=null,y=!1,b=null,_={onError:function(e){v=!0,g=e}};function w(e,t,n,r,i,o,a,s,u){v=!1,g=null,m.apply(_,arguments)}var x=null,T=null,S=null;function E(e,t,n){var r=e.type||"unknown-event";e.currentTarget=S(n),function(e,t,n,r,i,o,s,u,c){if(w.apply(this,arguments),v){if(!v)throw Error(a(198));var l=g;v=!1,g=null,y||(y=!0,b=l)}}(r,t,void 0,e),e.currentTarget=null}function M(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var A=null;function P(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)E(e,t[r],n[r]);else t&&E(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function O(e){if(null!==e&&(A=M(A,e)),e=A,A=null,e){if(C(e,P),A)throw Error(a(95));if(y)throw e=b,y=!1,b=null,e}}var k={injectEventPluginOrder:function(e){if(s)throw Error(a(101));s=Array.prototype.slice.call(e),c()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!u.hasOwnProperty(t)||u[t]!==r){if(u[t])throw Error(a(102,t));u[t]=r,n=!0}}n&&c()}};function I(e,t){var n=e.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;R.hasOwnProperty("ReactCurrentDispatcher")||(R.ReactCurrentDispatcher={current:null}),R.hasOwnProperty("ReactCurrentBatchConfig")||(R.ReactCurrentBatchConfig={suspense:null});var D=/^(.*)[\\\/]/,L="function"===typeof Symbol&&Symbol.for,N=L?Symbol.for("react.element"):60103,F=L?Symbol.for("react.portal"):60106,U=L?Symbol.for("react.fragment"):60107,j=L?Symbol.for("react.strict_mode"):60108,B=L?Symbol.for("react.profiler"):60114,z=L?Symbol.for("react.provider"):60109,V=L?Symbol.for("react.context"):60110,W=L?Symbol.for("react.concurrent_mode"):60111,G=L?Symbol.for("react.forward_ref"):60112,H=L?Symbol.for("react.suspense"):60113,q=L?Symbol.for("react.suspense_list"):60120,Y=L?Symbol.for("react.memo"):60115,K=L?Symbol.for("react.lazy"):60116;L&&Symbol.for("react.fundamental"),L&&Symbol.for("react.responder"),L&&Symbol.for("react.scope");var X="function"===typeof Symbol&&Symbol.iterator;function Q(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=X&&e[X]||e["@@iterator"])?e:null}function J(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case U:return"Fragment";case F:return"Portal";case B:return"Profiler";case j:return"StrictMode";case H:return"Suspense";case q:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case V:return"Context.Consumer";case z:return"Context.Provider";case G:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Y:return J(e.type);case K:if(e=1===e._status?e._result:null)return J(e)}return null}function Z(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=J(e.type);n=null,r&&(n=J(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(D,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var $=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),ee=null,te=null,ne=null;function re(e){if(e=T(e)){if("function"!==typeof ee)throw Error(a(280));var t=x(e.stateNode);ee(e.stateNode,e.type,t)}}function ie(e){te?ne?ne.push(e):ne=[e]:te=e}function oe(){if(te){var e=te,t=ne;if(ne=te=null,re(e),t)for(e=0;e<t.length;e++)re(t[e])}}function ae(e,t){return e(t)}function se(e,t,n,r){return e(t,n,r)}function ue(){}var ce=ae,le=!1,he=!1;function fe(){null===te&&null===ne||(ue(),oe())}new Map;var de=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pe=Object.prototype.hasOwnProperty,me={},ve={};function ge(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){ye[e]=new ge(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];ye[t]=new ge(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){ye[e]=new ge(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){ye[e]=new ge(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){ye[e]=new ge(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){ye[e]=new ge(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){ye[e]=new ge(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){ye[e]=new ge(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){ye[e]=new ge(e,5,!1,e.toLowerCase(),null,!1)}));var be=/[\-:]([a-z])/g;function _e(e){return e[1].toUpperCase()}function we(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function xe(e,t,n,r){var i=ye.hasOwnProperty(t)?ye[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!pe.call(ve,e)||!pe.call(me,e)&&(de.test(e)?ve[e]=!0:(me[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Se(e){e._valueTracker||(e._valueTracker=function(e){var t=Te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Te(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Me(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ce(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=we(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ae(e,t){null!=(t=t.checked)&&xe(e,"checked",t,!1)}function Pe(e,t){Ae(e,t);var n=we(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ke(e,t.type,n):t.hasOwnProperty("defaultValue")&&ke(e,t.type,we(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Oe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ke(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ie(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+we(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function De(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Le(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(a(92));if(Array.isArray(t)){if(!(1>=t.length))throw Error(a(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:we(n)}}function Ne(e,t){var n=we(t.value),r=we(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(be,_e);ye[t]=new ge(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(be,_e);ye[t]=new ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(be,_e);ye[t]=new ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){ye[e]=new ge(e,1,!1,e.toLowerCase(),null,!1)})),ye.xlinkHref=new ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){ye[e]=new ge(e,1,!1,e.toLowerCase(),null,!0)}));var Ue="http://www.w3.org/1999/xhtml",je="http://www.w3.org/2000/svg";function Be(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Be(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Ve,We=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==je||"innerHTML"in e)e.innerHTML=t;else{for((Ve=Ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function Ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function He(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qe={animationend:He("Animation","AnimationEnd"),animationiteration:He("Animation","AnimationIteration"),animationstart:He("Animation","AnimationStart"),transitionend:He("Transition","TransitionEnd")},Ye={},Ke={};function Xe(e){if(Ye[e])return Ye[e];if(!qe[e])return e;var t,n=qe[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ke)return Ye[e]=n[t];return e}$&&(Ke=document.createElement("div").style,"AnimationEvent"in window||(delete qe.animationend.animation,delete qe.animationiteration.animation,delete qe.animationstart.animation),"TransitionEvent"in window||delete qe.transitionend.transition);var Qe=Xe("animationend"),Je=Xe("animationiteration"),Ze=Xe("animationstart"),$e=Xe("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function tt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function nt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function rt(e){if(tt(e)!==e)throw Error(a(188))}function it(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=tt(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return rt(i),e;if(o===r)return rt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ot,at,st,ut=!1,ct=[],lt=null,ht=null,ft=null,dt=new Map,pt=new Map,mt=[],vt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),gt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function yt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function bt(e,t){switch(e){case"focus":case"blur":lt=null;break;case"dragenter":case"dragleave":ht=null;break;case"mouseover":case"mouseout":ft=null;break;case"pointerover":case"pointerout":dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(t.pointerId)}}function _t(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=yt(t,n,r,i),null!==t&&(null!==(t=cr(t))&&at(t)),e):(e.eventSystemFlags|=r,e)}function wt(e){var t=ur(e.target);if(null!==t){var n=tt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=nt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){st(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xt(e){if(null!==e.blockedOn)return!1;var t=kn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null!==t){var n=cr(t);return null!==n&&at(n),e.blockedOn=t,!1}return!0}function Tt(e,t,n){xt(e)&&n.delete(t)}function St(){for(ut=!1;0<ct.length;){var e=ct[0];if(null!==e.blockedOn){null!==(e=cr(e.blockedOn))&&ot(e);break}var t=kn(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:ct.shift()}null!==lt&&xt(lt)&&(lt=null),null!==ht&&xt(ht)&&(ht=null),null!==ft&&xt(ft)&&(ft=null),dt.forEach(Tt),pt.forEach(Tt)}function Et(e,t){e.blockedOn===t&&(e.blockedOn=null,ut||(ut=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,St)))}function Mt(e){function t(t){return Et(t,e)}if(0<ct.length){Et(ct[0],e);for(var n=1;n<ct.length;n++){var r=ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==lt&&Et(lt,e),null!==ht&&Et(ht,e),null!==ft&&Et(ft,e),dt.forEach(t),pt.forEach(t),n=0;n<mt.length;n++)(r=mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<mt.length&&null===(n=mt[0]).blockedOn;)wt(n),null===n.blockedOn&&mt.shift()}function Ct(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function At(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Pt(e,t,n){(t=I(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=M(n._dispatchListeners,t),n._dispatchInstances=M(n._dispatchInstances,e))}function Ot(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=At(t);for(t=n.length;0<t--;)Pt(n[t],"captured",e);for(t=0;t<n.length;t++)Pt(n[t],"bubbled",e)}}function kt(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=I(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=M(n._dispatchListeners,t),n._dispatchInstances=M(n._dispatchInstances,e))}function It(e){e&&e.dispatchConfig.registrationName&&kt(e._targetInst,null,e)}function Rt(e){C(e,Ot)}function Dt(){return!0}function Lt(){return!1}function Nt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Dt:Lt,this.isPropagationStopped=Lt,this}function Ft(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ut(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function jt(e){e.eventPool=[],e.getPooled=Ft,e.release=Ut}i(Nt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Dt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Dt)},persist:function(){this.isPersistent=Dt},isPersistent:Lt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Lt,this._dispatchInstances=this._dispatchListeners=null}}),Nt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Nt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,jt(n),n},jt(Nt);var Bt=Nt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),zt=Nt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vt=Nt.extend({view:null,detail:null}),Wt=Vt.extend({relatedTarget:null});function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Ht={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Yt[e])&&!!t[e]}function Xt(){return Kt}for(var Qt=Vt.extend({key:function(e){if(e.key){var t=Ht[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?qt[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Xt,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Jt=0,Zt=0,$t=!1,en=!1,tn=Vt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Xt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Jt;return Jt=e.screenX,$t?"mousemove"===e.type?e.screenX-t:0:($t=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Zt;return Zt=e.screenY,en?"mousemove"===e.type?e.screenY-t:0:(en=!0,0)}}),nn=tn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),rn=tn.extend({dataTransfer:null}),on=Vt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Xt}),an=Nt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sn=tn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),un=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Qe,"animationEnd",2],[Je,"animationIteration",2],[Ze,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[$e,"transitionEnd",2],["waiting","waiting",2]],cn={},ln={},hn=0;hn<un.length;hn++){var fn=un[hn],dn=fn[0],pn=fn[1],mn=fn[2],vn="on"+(pn[0].toUpperCase()+pn.slice(1)),gn={phasedRegistrationNames:{bubbled:vn,captured:vn+"Capture"},dependencies:[dn],eventPriority:mn};cn[pn]=gn,ln[dn]=gn}var yn={eventTypes:cn,getEventPriority:function(e){return void 0!==(e=ln[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=ln[e];if(!i)return null;switch(e){case"keypress":if(0===Gt(n))return null;case"keydown":case"keyup":e=Qt;break;case"blur":case"focus":e=Wt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=on;break;case Qe:case Je:case Ze:e=Bt;break;case $e:e=an;break;case"scroll":e=Vt;break;case"wheel":e=sn;break;case"copy":case"cut":case"paste":e=zt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=nn;break;default:e=Nt}return Rt(t=e.getPooled(i,t,n,r)),t}},bn=o.unstable_UserBlockingPriority,_n=o.unstable_runWithPriority,wn=yn.getEventPriority,xn=[];function Tn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=ur(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Ct(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,u=0;u<h.length;u++){var c=h[u];c&&(c=c.extractEvents(r,t,o,i,a))&&(s=M(s,c))}O(s)}}var Sn=!0;function En(e,t){Mn(t,e,!1)}function Mn(e,t,n){switch(wn(t)){case 0:var r=Cn.bind(null,t,1);break;case 1:r=An.bind(null,t,1);break;default:r=On.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Cn(e,t,n){le||ue();var r=On,i=le;le=!0;try{se(r,e,t,n)}finally{(le=i)||fe()}}function An(e,t,n){_n(bn,On.bind(null,e,t,n))}function Pn(e,t,n,r){if(xn.length){var i=xn.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=Tn,n=e,he)t(n,void 0);else{he=!0;try{ce(t,n,void 0)}finally{he=!1,fe()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,xn.length<10&&xn.push(e)}}function On(e,t,n){if(Sn)if(0<ct.length&&-1<vt.indexOf(e))e=yt(null,e,t,n),ct.push(e);else{var r=kn(e,t,n);null===r?bt(e,n):-1<vt.indexOf(e)?(e=yt(r,e,t,n),ct.push(e)):function(e,t,n,r){switch(t){case"focus":return lt=_t(lt,e,t,n,r),!0;case"dragenter":return ht=_t(ht,e,t,n,r),!0;case"mouseover":return ft=_t(ft,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return dt.set(i,_t(dt.get(i)||null,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,pt.set(i,_t(pt.get(i)||null,e,t,n,r)),!0}return!1}(r,e,t,n)||(bt(e,n),Pn(e,t,n,null))}}function kn(e,t,n){var r=Ct(n);if(null!==(r=ur(r))){var i=tt(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=nt(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Pn(e,t,n,r),null}function In(e){if(!$)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var Rn=new("function"===typeof WeakMap?WeakMap:Map);function Dn(e){var t=Rn.get(e);return void 0===t&&(t=new Set,Rn.set(e,t)),t}function Ln(e,t,n){if(!n.has(e)){switch(e){case"scroll":Mn(t,"scroll",!0);break;case"focus":case"blur":Mn(t,"focus",!0),Mn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":In(e)&&Mn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(e)&&En(e,t)}n.add(e)}}var Nn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fn=["Webkit","ms","Moz","O"];function Un(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Nn.hasOwnProperty(e)&&Nn[e]?(""+t).trim():t+"px"}function jn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Un(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Nn).forEach((function(e){Fn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nn[t]=Nn[e]}))}));var Bn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zn(e,t){if(t){if(Bn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if(!("object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62,""))}}function Vn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Wn(e,t){var n=Dn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=p[t];for(var r=0;r<t.length;r++)Ln(t[r],e,n)}function Gn(){}function Hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function qn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yn(e,t){var n,r=qn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=qn(r)}}function Kn(){for(var e=window,t=Hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Hn((e=t.contentWindow).document)}return t}function Xn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Qn=null,Jn=null;function Zn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function $n(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var er="function"===typeof setTimeout?setTimeout:void 0,tr="function"===typeof clearTimeout?clearTimeout:void 0;function nr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function rr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ir=Math.random().toString(36).slice(2),or="__reactInternalInstance$"+ir,ar="__reactEventHandlers$"+ir,sr="__reactContainere$"+ir;function ur(e){var t=e[or];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sr]||n[or]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=rr(e);null!==e;){if(n=e[or])return n;e=rr(e)}return t}n=(e=n).parentNode}return null}function cr(e){return!(e=e[or]||e[sr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function lr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function hr(e){return e[ar]||null}var fr=null,dr=null,pr=null;function mr(){if(pr)return pr;var e,t,n=dr,r=n.length,i="value"in fr?fr.value:fr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return pr=i.slice(e,1<t?1-t:void 0)}var vr=Nt.extend({data:null}),gr=Nt.extend({data:null}),yr=[9,13,27,32],br=$&&"CompositionEvent"in window,_r=null;$&&"documentMode"in document&&(_r=document.documentMode);var wr=$&&"TextEvent"in window&&!_r,xr=$&&(!br||_r&&8<_r&&11>=_r),Tr=String.fromCharCode(32),Sr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Er=!1;function Mr(e,t){switch(e){case"keyup":return-1!==yr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Cr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ar=!1;var Pr={eventTypes:Sr,extractEvents:function(e,t,n,r){var i;if(br)e:{switch(e){case"compositionstart":var o=Sr.compositionStart;break e;case"compositionend":o=Sr.compositionEnd;break e;case"compositionupdate":o=Sr.compositionUpdate;break e}o=void 0}else Ar?Mr(e,n)&&(o=Sr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=Sr.compositionStart);return o?(xr&&"ko"!==n.locale&&(Ar||o!==Sr.compositionStart?o===Sr.compositionEnd&&Ar&&(i=mr()):(dr="value"in(fr=r)?fr.value:fr.textContent,Ar=!0)),o=vr.getPooled(o,t,n,r),i?o.data=i:null!==(i=Cr(n))&&(o.data=i),Rt(o),i=o):i=null,(e=wr?function(e,t){switch(e){case"compositionend":return Cr(t);case"keypress":return 32!==t.which?null:(Er=!0,Tr);case"textInput":return(e=t.data)===Tr&&Er?null:e;default:return null}}(e,n):function(e,t){if(Ar)return"compositionend"===e||!br&&Mr(e,t)?(e=mr(),pr=dr=fr=null,Ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=gr.getPooled(Sr.beforeInput,t,n,r)).data=e,Rt(t)):t=null,null===i?t:null===t?i:[i,t]}},Or={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Or[e.type]:"textarea"===t}var Ir={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Rr(e,t,n){return(e=Nt.getPooled(Ir.change,e,t,n)).type="change",ie(n),Rt(e),e}var Dr=null,Lr=null;function Nr(e){O(e)}function Fr(e){if(Ee(lr(e)))return e}function Ur(e,t){if("change"===e)return t}var jr=!1;function Br(){Dr&&(Dr.detachEvent("onpropertychange",zr),Lr=Dr=null)}function zr(e){if("value"===e.propertyName&&Fr(Lr))if(e=Rr(Lr,e,Ct(e)),le)O(e);else{le=!0;try{ae(Nr,e)}finally{le=!1,fe()}}}function Vr(e,t,n){"focus"===e?(Br(),Lr=n,(Dr=t).attachEvent("onpropertychange",zr)):"blur"===e&&Br()}function Wr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fr(Lr)}function Gr(e,t){if("click"===e)return Fr(t)}function Hr(e,t){if("input"===e||"change"===e)return Fr(t)}$&&(jr=In("input")&&(!document.documentMode||9<document.documentMode));var qr,Yr={eventTypes:Ir,_isInputEventSupported:jr,extractEvents:function(e,t,n,r){var i=t?lr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=Ur;else if(kr(i))if(jr)a=Hr;else{a=Wr;var s=Vr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Gr);if(a&&(a=a(e,t)))return Rr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&ke(i,"number",i.value)}},Kr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Xr={eventTypes:Kr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?ur(t):null)&&(t!==(o=tt(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=tn,u=Kr.mouseLeave,c=Kr.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=nn,u=Kr.pointerLeave,c=Kr.pointerEnter,l="pointer");if(e=null==a?i:lr(a),i=null==t?i:lr(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=i,(r=s.getPooled(c,t,n,r)).type=l+"enter",r.target=i,r.relatedTarget=e,l=t,(s=a)&&l)e:{for(e=l,a=0,t=c=s;t;t=At(t))a++;for(t=0,i=e;i;i=At(i))t++;for(;0<a-t;)c=At(c),a--;for(;0<t-a;)e=At(e),t--;for(;a--;){if(c===e||c===e.alternate)break e;c=At(c),e=At(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)c.push(s),s=At(s);for(s=[];l&&l!==e&&(null===(a=l.alternate)||a!==e);)s.push(l),l=At(l);for(l=0;l<c.length;l++)kt(c[l],"bubbled",u);for(l=s.length;0<l--;)kt(s[l],"captured",r);return n===qr?(qr=null,[u]):(qr=n,[u,r])}};var Qr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Jr=Object.prototype.hasOwnProperty;function Zr(e,t){if(Qr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Jr.call(t,n[r])||!Qr(e[n[r]],t[n[r]]))return!1;return!0}var $r=$&&"documentMode"in document&&11>=document.documentMode,ei={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ti=null,ni=null,ri=null,ii=!1;function oi(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return ii||null==ti||ti!==Hn(n)?null:("selectionStart"in(n=ti)&&Xn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ri&&Zr(ri,n)?null:(ri=n,(e=Nt.getPooled(ei.select,ni,e,t)).type="select",e.target=ti,Rt(e),e))}var ai={eventTypes:ei,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=Dn(o),i=p.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?lr(t):window,e){case"focus":(kr(o)||"true"===o.contentEditable)&&(ti=o,ni=t,ri=null);break;case"blur":ri=ni=ti=null;break;case"mousedown":ii=!0;break;case"contextmenu":case"mouseup":case"dragend":return ii=!1,oi(n,r);case"selectionchange":if($r)break;case"keydown":case"keyup":return oi(n,r)}return null}};k.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=hr,T=cr,S=lr,k.injectEventPluginsByName({SimpleEventPlugin:yn,EnterLeaveEventPlugin:Xr,ChangeEventPlugin:Yr,SelectEventPlugin:ai,BeforeInputEventPlugin:Pr}),new Set;var si=[],ui=-1;function ci(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function li(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},fi={current:hi},di={current:!1},pi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function vi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(e){ci(di),ci(fi)}function yi(e){ci(di),ci(fi)}function bi(e,t,n){if(fi.current!==hi)throw Error(a(168));li(fi,t),li(di,n)}function _i(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,J(t)||"Unknown",o));return i({},n,{},r)}function wi(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||hi,pi=fi.current,li(fi,t),li(di,di.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(t=_i(e,t,pi),r.__reactInternalMemoizedMergedChildContext=t,ci(di),ci(fi),li(fi,t)):ci(di),li(di,n)}var Ti=o.unstable_runWithPriority,Si=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Mi=o.unstable_shouldYield,Ci=o.unstable_requestPaint,Ai=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,Oi=o.unstable_ImmediatePriority,ki=o.unstable_UserBlockingPriority,Ii=o.unstable_NormalPriority,Ri=o.unstable_LowPriority,Di=o.unstable_IdlePriority,Li={},Ni=void 0!==Ci?Ci:function(){},Fi=null,Ui=null,ji=!1,Bi=Ai(),zi=1e4>Bi?Ai:function(){return Ai()-Bi};function Vi(){switch(Pi()){case Oi:return 99;case ki:return 98;case Ii:return 97;case Ri:return 96;case Di:return 95;default:throw Error(a(332))}}function Wi(e){switch(e){case 99:return Oi;case 98:return ki;case 97:return Ii;case 96:return Ri;case 95:return Di;default:throw Error(a(332))}}function Gi(e,t){return e=Wi(e),Ti(e,t)}function Hi(e,t,n){return e=Wi(e),Si(e,t,n)}function qi(e){return null===Fi?(Fi=[e],Ui=Si(Oi,Ki)):Fi.push(e),Li}function Yi(){if(null!==Ui){var e=Ui;Ui=null,Ei(e)}Ki()}function Ki(){if(!ji&&null!==Fi){ji=!0;var e=0;try{var t=Fi;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Fi=null}catch(n){throw null!==Fi&&(Fi=Fi.slice(e+1)),Si(Oi,Yi),n}finally{ji=!1}}}var Xi=3;function Qi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Ji(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Zi={current:null},$i=null,eo=null,to=null;function no(){to=eo=$i=null}function ro(e,t){var n=e.type._context;li(Zi,n._currentValue),n._currentValue=t}function io(e){var t=Zi.current;ci(Zi),e.type._context._currentValue=t}function oo(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ao(e,t){$i=e,to=eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(za=!0),e.firstContext=null)}function so(e,t){if(to!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(to=e,t=1073741823),t={context:e,observedBits:t,next:null},null===eo){if(null===$i)throw Error(a(308));eo=t,$i.dependencies={expirationTime:0,firstContext:t,responders:null}}else eo=eo.next=t;return e._currentValue}var uo=!1;function co(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function lo(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function ho(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function fo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function po(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=co(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=co(e.memoizedState),i=n.updateQueue=co(n.memoizedState)):r=e.updateQueue=lo(i):null===i&&(i=n.updateQueue=lo(r));null===i||r===i?fo(r,t):null===r.lastUpdate||null===i.lastUpdate?(fo(r,t),fo(i,t)):(fo(r,t),i.lastUpdate=t)}function mo(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=co(e.memoizedState):vo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function vo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=lo(t)),t}function go(e,t,n,r,o,a){switch(n.tag){case 1:return"function"===typeof(e=n.payload)?e.call(a,r,o):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null===(o="function"===typeof(e=n.payload)?e.call(a,r,o):e)||void 0===o)break;return i({},r,o);case 2:uo=!0}return r}function yo(e,t,n,r,i){uo=!1;for(var o=(t=vo(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(hu(l,u.suspenseConfig),c=go(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=go(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,u.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,fu(s),e.expirationTime=s,e.memoizedState=c}function bo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),_o(t.firstEffect,n),t.firstEffect=t.lastEffect=null,_o(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function _o(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!==typeof n)throw Error(a(191,n));n.call(r)}e=e.nextEffect}}var wo=R.ReactCurrentBatchConfig,xo=(new r.Component).refs;function To(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var So={isMounted:function(e){return!!(e=e._reactInternalFiber)&&tt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Zs(),i=wo.suspense;(i=ho(r=$s(r,e,i),i)).payload=t,void 0!==n&&null!==n&&(i.callback=n),po(e,i),eu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Zs(),i=wo.suspense;(i=ho(r=$s(r,e,i),i)).tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),po(e,i),eu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Zs(),r=wo.suspense;(r=ho(n=$s(n,e,r),r)).tag=2,void 0!==t&&null!==t&&(r.callback=t),po(e,r),eu(e,n)}};function Eo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Zr(n,r)||!Zr(i,o))}function Mo(e,t,n){var r=!1,i=hi,o=t.contextType;return"object"===typeof o&&null!==o?o=so(o):(i=vi(t)?pi:fi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=So,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Co(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&So.enqueueReplaceState(t,t.state,null)}function Ao(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=xo;var o=t.contextType;"object"===typeof o&&null!==o?i.context=so(o):(o=vi(t)?pi:fi.current,i.context=mi(e,o)),null!==(o=e.updateQueue)&&(yo(e,o,n,i,r),i.state=e.memoizedState),"function"===typeof(o=t.getDerivedStateFromProps)&&(To(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&So.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(yo(e,o,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Po=Array.isArray;function Oo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===xo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ko(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Io(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Iu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Lu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Oo(e,t,n),r.return=e,r):((r=Ru(n.type,n.key,n.props,null,e.mode,r)).ref=Oo(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Du(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Lu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case N:return(n=Ru(t.type,t.key,t.props,null,e.mode,n)).ref=Oo(e,null,t),n.return=e,n;case F:return(t=Nu(t,e.mode,n)).return=e,t}if(Po(t)||Q(t))return(t=Du(t,e.mode,n,null)).return=e,t;ko(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case N:return n.key===i?n.type===U?h(e,t,n.props.children,r,i):c(e,t,n,r):null;case F:return n.key===i?l(e,t,n,r):null}if(Po(n)||Q(n))return null!==i?null:h(e,t,n,r,null);ko(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case N:return e=e.get(null===r.key?n:r.key)||null,r.type===U?h(t,e,r.props.children,i,r.key):c(t,e,r,i);case F:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Po(r)||Q(r))return h(t,e=e.get(n)||null,r,i,null);ko(t,r)}return null}function m(i,a,s,u){for(var c=null,l=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=d(i,h,s[m],u);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===l?c=g:l.sibling=g,l=g,h=v}if(m===s.length)return n(i,h),c;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);m<s.length;m++)null!==(v=p(h,i,m,s[m],u))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===l?c=v:l.sibling=v,l=v);return e&&h.forEach((function(e){return t(i,e)})),c}function v(i,s,u,c){var l=Q(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=d(i,m,y.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,v),null===h?l=b:h.sibling=b,h=b,m=g}if(y.done)return n(i,m),l;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=f(i,y.value,c))&&(s=o(y,s,v),null===h?l=y:h.sibling=y,h=y);return l}for(m=r(i,m);!y.done;v++,y=u.next())null!==(y=p(m,i,v,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?l=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),l}return function(e,r,o,u){var c="object"===typeof o&&null!==o&&o.type===U&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case N:e:{for(l=o.key,c=r;null!==c;){if(c.key===l){if(7===c.tag?o.type===U:c.elementType===o.type){n(e,c.sibling),(r=i(c,o.type===U?o.props.children:o.props)).ref=Oo(e,c,o),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}o.type===U?((r=Du(o.props.children,e.mode,u,o.key)).return=e,e=r):((u=Ru(o.type,o.key,o.props,null,e.mode,u)).ref=Oo(e,r,o),u.return=e,e=u)}return s(e);case F:e:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Nu(o,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Lu(o,e.mode,u)).return=e,e=r),s(e);if(Po(o))return m(e,r,o,u);if(Q(o))return v(e,r,o,u);if(l&&ko(e,o),"undefined"===typeof o&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var Ro=Io(!0),Do=Io(!1),Lo={},No={current:Lo},Fo={current:Lo},Uo={current:Lo};function jo(e){if(e===Lo)throw Error(a(174));return e}function Bo(e,t){li(Uo,t),li(Fo,e),li(No,Lo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ze(null,"");break;default:t=ze(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}ci(No),li(No,t)}function zo(e){ci(No),ci(Fo),ci(Uo)}function Vo(e){jo(Uo.current);var t=jo(No.current),n=ze(t,e.type);t!==n&&(li(Fo,e),li(No,n))}function Wo(e){Fo.current===e&&(ci(No),ci(Fo))}var Go={current:0};function Ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qo(e,t){return{responder:e,props:t}}var Yo=R.ReactCurrentDispatcher,Ko=R.ReactCurrentBatchConfig,Xo=0,Qo=null,Jo=null,Zo=null,$o=null,ea=null,ta=null,na=0,ra=null,ia=0,oa=!1,aa=null,sa=0;function ua(){throw Error(a(321))}function ca(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qr(e[n],t[n]))return!1;return!0}function la(e,t,n,r,i,o){if(Xo=o,Qo=t,Zo=null!==e?e.memoizedState:null,Yo.current=null===Zo?Pa:Oa,t=n(r,i),oa){do{oa=!1,sa+=1,Zo=null!==e?e.memoizedState:null,ta=$o,ra=ea=Jo=null,Yo.current=Oa,t=n(r,i)}while(oa);aa=null,sa=0}if(Yo.current=Aa,(e=Qo).memoizedState=$o,e.expirationTime=na,e.updateQueue=ra,e.effectTag|=ia,e=null!==Jo&&null!==Jo.next,Xo=0,ta=ea=$o=Zo=Jo=Qo=null,na=0,ra=null,ia=0,e)throw Error(a(300));return t}function ha(){Yo.current=Aa,Xo=0,ta=ea=$o=Zo=Jo=Qo=null,na=0,ra=null,ia=0,oa=!1,aa=null,sa=0}function fa(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ea?$o=ea=e:ea=ea.next=e,ea}function da(){if(null!==ta)ta=(ea=ta).next,Zo=null!==(Jo=Zo)?Jo.next:null;else{if(null===Zo)throw Error(a(310));var e={memoizedState:(Jo=Zo).memoizedState,baseState:Jo.baseState,queue:Jo.queue,baseUpdate:Jo.baseUpdate,next:null};ea=null===ea?$o=e:ea.next=e,Zo=Jo.next}return ea}function pa(e,t){return"function"===typeof t?t(e):t}function ma(e){var t=da(),n=t.queue;if(null===n)throw Error(a(311));if(n.lastRenderedReducer=e,0<sa){var r=n.dispatch;if(null!==aa){var i=aa.get(n);if(void 0!==i){aa.delete(n);var o=t.memoizedState;do{o=e(o,i.action),i=i.next}while(null!==i);return Qr(o,t.memoizedState)||(za=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),n.lastRenderedState=o,[o,r]}}return[t.memoizedState,r]}r=n.last;var s=t.baseUpdate;if(o=t.baseState,null!==s?(null!==r&&(r.next=null),r=s.next):r=null!==r?r.next:null,null!==r){var u=i=null,c=r,l=!1;do{var h=c.expirationTime;h<Xo?(l||(l=!0,u=s,i=o),h>na&&fu(na=h)):(hu(h,c.suspenseConfig),o=c.eagerReducer===e?c.eagerState:e(o,c.action)),s=c,c=c.next}while(null!==c&&c!==r);l||(u=s,i=o),Qr(o,t.memoizedState)||(za=!0),t.memoizedState=o,t.baseUpdate=u,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function va(e){var t=fa();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:pa,lastRenderedState:e}).dispatch=Ca.bind(null,Qo,e),[t.memoizedState,e]}function ga(e){return ma(pa)}function ya(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===ra?(ra={lastEffect:null}).lastEffect=e.next=e:null===(t=ra.lastEffect)?ra.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,ra.lastEffect=e),e}function ba(e,t,n,r){var i=fa();ia|=e,i.memoizedState=ya(t,n,void 0,void 0===r?null:r)}function _a(e,t,n,r){var i=da();r=void 0===r?null:r;var o=void 0;if(null!==Jo){var a=Jo.memoizedState;if(o=a.destroy,null!==r&&ca(r,a.deps))return void ya(0,n,o,r)}ia|=e,i.memoizedState=ya(t,n,o,r)}function wa(e,t){return ba(516,192,e,t)}function xa(e,t){return _a(516,192,e,t)}function Ta(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Sa(){}function Ea(e,t){return fa().memoizedState=[e,void 0===t?null:t],e}function Ma(e,t){var n=da();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ca(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ca(e,t,n){if(!(25>sa))throw Error(a(301));var r=e.alternate;if(e===Qo||null!==r&&r===Qo)if(oa=!0,e={expirationTime:Xo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===aa&&(aa=new Map),void 0===(n=aa.get(t)))aa.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=Zs(),o=wo.suspense;o={expirationTime:i=$s(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var s=t.last;if(null===s)o.next=o;else{var u=s.next;null!==u&&(o.next=u),s.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var c=t.lastRenderedState,l=r(c,n);if(o.eagerReducer=r,o.eagerState=l,Qr(l,c))return}catch(h){}eu(e,i)}}var Aa={readContext:so,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useLayoutEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useResponder:ua,useDeferredValue:ua,useTransition:ua},Pa={readContext:so,useCallback:Ea,useContext:so,useEffect:wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ba(4,36,Ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ba(4,36,e,t)},useMemo:function(e,t){var n=fa();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fa();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ca.bind(null,Qo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},fa().memoizedState=e},useState:va,useDebugValue:Sa,useResponder:qo,useDeferredValue:function(e,t){var n=va(e),r=n[0],i=n[1];return wa((function(){o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===t?null:t;try{i(e)}finally{Ko.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=va(!1),n=t[0],r=t[1];return[Ea((function(t){r(!0),o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===e?null:e;try{r(!1),t()}finally{Ko.suspense=n}}))}),[e,n]),n]}},Oa={readContext:so,useCallback:Ma,useContext:so,useEffect:xa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,_a(4,36,Ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _a(4,36,e,t)},useMemo:function(e,t){var n=da();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ca(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ma,useRef:function(){return da().memoizedState},useState:ga,useDebugValue:Sa,useResponder:qo,useDeferredValue:function(e,t){var n=ga(),r=n[0],i=n[1];return xa((function(){o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===t?null:t;try{i(e)}finally{Ko.suspense=n}}))}),[e,t]),r},useTransition:function(e){var t=ga(),n=t[0],r=t[1];return[Ma((function(t){r(!0),o.unstable_next((function(){var n=Ko.suspense;Ko.suspense=void 0===e?null:e;try{r(!1),t()}finally{Ko.suspense=n}}))}),[e,n]),n]}},ka=null,Ia=null,Ra=!1;function Da(e,t){var n=Ou(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function La(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Na(e){if(Ra){var t=Ia;if(t){var n=t;if(!La(e,t)){if(!(t=nr(n.nextSibling))||!La(e,t))return e.effectTag=-1025&e.effectTag|2,Ra=!1,void(ka=e);Da(ka,n)}ka=e,Ia=nr(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,Ra=!1,ka=e}}function Fa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ka=e}function Ua(e){if(e!==ka)return!1;if(!Ra)return Fa(e),Ra=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!$n(t,e.memoizedProps))for(t=Ia;t;)Da(e,t),t=nr(t.nextSibling);if(Fa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ia=nr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ia=null}}else Ia=ka?nr(e.stateNode.nextSibling):null;return!0}function ja(){Ia=ka=null,Ra=!1}var Ba=R.ReactCurrentOwner,za=!1;function Va(e,t,n,r){t.child=null===e?Do(t,null,n,r):Ro(t,e.child,n,r)}function Wa(e,t,n,r,i){n=n.render;var o=t.ref;return ao(t,i),r=la(e,t,n,r,o,i),null===e||za?(t.effectTag|=1,Va(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),os(e,t,i))}function Ga(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!==typeof a||ku(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ru(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ha(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Zr)(i,r)&&e.ref===t.ref)?os(e,t,o):(t.effectTag|=1,(e=Iu(a,r)).ref=t.ref,e.return=t,t.child=e)}function Ha(e,t,n,r,i,o){return null!==e&&Zr(e.memoizedProps,r)&&e.ref===t.ref&&(za=!1,i<o)?os(e,t,o):Ya(e,t,n,r,o)}function qa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ya(e,t,n,r,i){var o=vi(n)?pi:fi.current;return o=mi(t,o),ao(t,i),n=la(e,t,n,r,o,i),null===e||za?(t.effectTag|=1,Va(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),os(e,t,i))}function Ka(e,t,n,r,i){if(vi(n)){var o=!0;wi(t)}else o=!1;if(ao(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Mo(t,n,r),Ao(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=so(c):c=mi(t,c=vi(n)?pi:fi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Co(t,a,r,c),uo=!1;var f=t.memoizedState;u=a.state=f;var d=t.updateQueue;null!==d&&(yo(t,d,r,a,i),u=t.memoizedState),s!==r||f!==u||di.current||uo?("function"===typeof l&&(To(t,n,l,r),u=t.memoizedState),(s=uo||Eo(t,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.effectTag|=4)):("function"===typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:Ji(t.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=so(c):c=mi(t,c=vi(n)?pi:fi.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Co(t,a,r,c),uo=!1,u=t.memoizedState,f=a.state=u,null!==(d=t.updateQueue)&&(yo(t,d,r,a,i),f=t.memoizedState),s!==r||u!==f||di.current||uo?("function"===typeof l&&(To(t,n,l,r),f=t.memoizedState),(l=uo||Eo(t,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(t.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),r=!1);return Xa(e,t,n,r,o,i)}function Xa(e,t,n,r,i,o){qa(e,t);var a=0!==(64&t.effectTag);if(!r&&!a)return i&&xi(t,n,!1),os(e,t,o);r=t.stateNode,Ba.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Ro(t,e.child,null,o),t.child=Ro(t,null,s,o)):Va(e,t,s,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function Qa(e){var t=e.stateNode;t.pendingContext?bi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&bi(0,t.context,!1),Bo(e,t.containerInfo)}var Ja,Za,$a,es={dehydrated:null,retryTime:0};function ts(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Go.current,s=!1;if((r=0!==(64&t.effectTag))||(r=0!==(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),li(Go,1&a),null===e){if(void 0!==o.fallback&&Na(t),s){if(s=o.fallback,(o=Du(null,i,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Du(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=es,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Do(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=Iu(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Iu(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=es,t.child=n,i}return n=Ro(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Du(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Du(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=es,t.child=o,n}return t.memoizedState=null,t.child=Ro(t,e,o.children,n)}function ns(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),oo(e.return,t)}function rs(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Va(e,t,r.children,n),0!==(2&(r=Go.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Go,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ho(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ho(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,o,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function os(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&fu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function as(e){e.effectTag|=4}function ss(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function us(e){switch(e.tag){case 1:vi(e.type)&&gi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(zo(),yi(),0!==(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Wo(e),null;case 13:return ci(Go),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return ci(Go),null;case 4:return zo(),null;case 10:return io(e),null;default:return null}}function cs(e,t){return{value:e,source:t,stack:Z(t)}}Ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Za=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,u,c=t.stateNode;switch(jo(No.current),e=null,n){case"input":a=Me(c,a),r=Me(c,r),e=[];break;case"option":a=Ie(c,a),r=Ie(c,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=De(c,a),r=De(c,r),e=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=Gn)}for(s in zn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(d.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(e||(e=[]),e.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(e=e||[]).push(s,""+l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(e=e||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(d.hasOwnProperty(s)?(null!=l&&Wn(o,s),e||c===l||(e=[])):(e=e||[]).push(s,l))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&as(t)}},$a=function(e,t,n,r){n!==r&&as(t)};var ls="function"===typeof WeakSet?WeakSet:Set;function hs(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=Z(n)),null!==n&&J(n.type),t=t.value,null!==e&&1===e.tag&&J(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function fs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Su(e,n)}else t.current=null}function ds(e,t){switch(t.tag){case 0:case 11:case 15:ps(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Ji(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}function ps(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!==(r.tag&e)){var i=r.destroy;r.destroy=void 0,void 0!==i&&i()}0!==(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function ms(e,t,n){switch("function"===typeof Au&&Au(t),t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;Gi(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(o){Su(i,o)}}e=e.next}while(e!==r)}))}break;case 1:fs(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Su(e,n)}}(t,n);break;case 5:fs(t);break;case 4:bs(e,t,n)}}function vs(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,null!==t&&vs(t)}function gs(e){return 5===e.tag||3===e.tag||4===e.tag}function ys(e){e:{for(var t=e.return;null!==t;){if(gs(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Ge(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var s=o?i.stateNode:i.stateNode.instance;if(n)if(r){var u=s;s=n,8===(o=t).nodeType?o.parentNode.insertBefore(u,s):o.insertBefore(u,s)}else t.insertBefore(s,n);else r?(8===(u=t).nodeType?(o=u.parentNode).insertBefore(s,u):(o=u).appendChild(s),null!==(u=u._reactRootContainer)&&void 0!==u||null!==o.onclick||(o.onclick=Gn)):t.appendChild(s)}else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function bs(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var u=e,c=o,l=n,h=c;;)if(ms(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break;for(;null===h.sibling;){if(null===h.return||h.return===c)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(ms(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function _s(e,t){switch(t.tag){case 0:case 11:case 14:case 15:ps(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[ar]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ae(n,r),Vn(e,i),t=Vn(e,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?jn(n,u):"dangerouslySetInnerHTML"===s?We(n,u):"children"===s?Ge(n,u):xe(n,s,u,t)}switch(e){case"input":Pe(n,r);break;case"textarea":Ne(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Re(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Re(n,!!r.multiple,r.defaultValue,!0):Re(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(a(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,Mt(t.containerInfo));break;case 12:break;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Bs=zi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=void 0!==(i=e.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=Un("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}ws(t);break;case 19:ws(t);break;case 17:case 20:case 21:break;default:throw Error(a(163))}}function ws(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ls),t.forEach((function(t){var r=Mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var xs="function"===typeof WeakMap?WeakMap:Map;function Ts(e,t,n){(n=ho(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vs||(Vs=!0,Ws=r),hs(e,t)},n}function Ss(e,t,n){(n=ho(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return hs(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Gs?Gs=new Set([this]):Gs.add(this),hs(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Es,Ms=Math.ceil,Cs=R.ReactCurrentDispatcher,As=R.ReactCurrentOwner,Ps=0,Os=null,ks=null,Is=0,Rs=0,Ds=null,Ls=1073741823,Ns=1073741823,Fs=null,Us=0,js=!1,Bs=0,zs=null,Vs=!1,Ws=null,Gs=null,Hs=!1,qs=null,Ys=90,Ks=null,Xs=0,Qs=null,Js=0;function Zs(){return 0!==(48&Ps)?1073741821-(zi()/10|0):0!==Js?Js:Js=1073741821-(zi()/10|0)}function $s(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var r=Vi();if(0===(4&t))return 99===r?1073741823:1073741822;if(0!==(16&Ps))return Is;if(null!==n)e=Qi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Qi(e,150,100);break;case 97:case 96:e=Qi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Os&&e===Is&&--e,e}function eu(e,t){if(50<Xs)throw Xs=0,Qs=null,Error(a(185));if(null!==(e=tu(e,t))){var n=Vi();1073741823===t?0!==(8&Ps)&&0===(48&Ps)?ou(e):(ru(e),0===Ps&&Yi()):ru(e),0===(4&Ps)||98!==n&&99!==n||(null===Ks?Ks=new Map([[e,t]]):(void 0===(n=Ks.get(e))||n>t)&&Ks.set(e,t))}}function tu(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Os===i&&(fu(t),4===Rs&&ju(i,Is)),Bu(i,t)),i}function nu(e){var t=e.lastExpiredTime;return 0!==t?t:Uu(e,t=e.firstPendingTime)?(t=e.lastPingedTime)>(e=e.nextKnownPendingLevel)?t:e:t}function ru(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=qi(ou.bind(null,e));else{var t=nu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Zs();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Li&&Ei(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?qi(ou.bind(null,e)):Hi(r,iu.bind(null,e),{timeout:10*(1073741821-t)-zi()}),e.callbackNode=t}}}function iu(e,t){if(Js=0,t)return zu(e,t=Zs()),ru(e),null;var n=nu(e);if(0!==n){if(t=e.callbackNode,0!==(48&Ps))throw Error(a(327));if(wu(),e===Os&&n===Is||uu(e,n),null!==ks){var r=Ps;Ps|=16;for(var i=lu();;)try{pu();break}catch(u){cu(e,u)}if(no(),Ps=r,Cs.current=i,1===Rs)throw t=Ds,uu(e,n),ju(e,n),ru(e),t;if(null===ks)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Rs,Os=null,r){case 0:case 1:throw Error(a(345));case 2:zu(e,2<n?2:n);break;case 3:if(ju(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=gu(i)),1073741823===Ls&&10<(i=Bs+500-zi())){if(js){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,uu(e,n);break}}if(0!==(o=nu(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=er(yu.bind(null,e),i);break}yu(e);break;case 4:if(ju(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=gu(i)),js&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,uu(e,n);break}if(0!==(i=nu(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Ns?r=10*(1073741821-Ns)-zi():1073741823===Ls?r=0:(r=10*(1073741821-Ls)-5e3,0>(r=(i=zi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ms(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=er(yu.bind(null,e),r);break}yu(e);break;case 5:if(1073741823!==Ls&&null!==Fs){o=Ls;var s=Fs;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=zi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){ju(e,n),e.timeoutHandle=er(yu.bind(null,e),r);break}}yu(e);break;default:throw Error(a(329))}if(ru(e),e.callbackNode===t)return iu.bind(null,e)}}return null}function ou(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,e.finishedExpirationTime===t)yu(e);else{if(0!==(48&Ps))throw Error(a(327));if(wu(),e===Os&&t===Is||uu(e,t),null!==ks){var n=Ps;Ps|=16;for(var r=lu();;)try{du();break}catch(i){cu(e,i)}if(no(),Ps=n,Cs.current=r,1===Rs)throw n=Ds,uu(e,t),ju(e,t),ru(e),n;if(null!==ks)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Os=null,yu(e),ru(e)}}return null}function au(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&Yi()}}function su(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&Yi()}}function uu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,tr(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!==i&&void 0!==i&&gi();break;case 3:zo(),yi();break;case 5:Wo(r);break;case 4:zo();break;case 13:case 19:ci(Go);break;case 10:io(r)}n=n.return}Os=e,ks=Iu(e.current,null),Is=t,Rs=0,Ds=null,Ns=Ls=1073741823,Fs=null,Us=0,js=!1}function cu(e,t){for(;;){try{if(no(),ha(),null===ks||null===ks.return)return Rs=1,Ds=t,null;e:{var n=e,r=ks.return,i=ks,o=t;if(t=Is,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"===typeof o&&"function"===typeof o.then){var a=o,s=0!==(1&Go.current),u=r;do{var c;if(c=13===u.tag){var l=u.memoizedState;if(null!==l)c=null!==l.dehydrated;else{var h=u.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(c){var f=u.updateQueue;if(null===f){var d=new Set;d.add(a),u.updateQueue=d}else f.add(a);if(0===(2&u.mode)){if(u.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var p=ho(1073741823,null);p.tag=2,po(i,p)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new xs,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var v=Eu.bind(null,n,a,i);a.then(v,v)}u.effectTag|=4096,u.expirationTime=t;break e}u=u.return}while(null!==u);o=Error((J(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Z(i))}5!==Rs&&(Rs=2),o=cs(o,i),u=r;do{switch(u.tag){case 3:a=o,u.effectTag|=4096,u.expirationTime=t,mo(u,Ts(u,a,t));break e;case 1:a=o;var g=u.type,y=u.stateNode;if(0===(64&u.effectTag)&&("function"===typeof g.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Gs||!Gs.has(y)))){u.effectTag|=4096,u.expirationTime=t,mo(u,Ss(u,a,t));break e}}u=u.return}while(null!==u)}ks=vu(ks)}catch(b){t=b;continue}break}}function lu(){var e=Cs.current;return Cs.current=Aa,null===e?Aa:e}function hu(e,t){e<Ls&&2<e&&(Ls=e),null!==t&&e<Ns&&2<e&&(Ns=e,Fs=t)}function fu(e){e>Us&&(Us=e)}function du(){for(;null!==ks;)ks=mu(ks)}function pu(){for(;null!==ks&&!Mi();)ks=mu(ks)}function mu(e){var t=Es(e.alternate,e,Is);return e.memoizedProps=e.pendingProps,null===t&&(t=vu(e)),As.current=null,t}function vu(e){ks=e;do{var t=ks.alternate;if(e=ks.return,0===(2048&ks.effectTag)){e:{var n=t,r=Is,o=(t=ks).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:vi(t.type)&&gi();break;case 3:zo(),yi(),(o=t.stateNode).pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(null===n||null===n.child)&&Ua(t)&&as(t);break;case 5:Wo(t),r=jo(Uo.current);var s=t.type;if(null!==n&&null!=t.stateNode)Za(n,t,s,o,r),n.ref!==t.ref&&(t.effectTag|=128);else if(o){var u=jo(No.current);if(Ua(t)){var c=(o=t).stateNode;n=o.type;var l=o.memoizedProps,h=r;switch(c[or]=o,c[ar]=l,s=void 0,r=c,n){case"iframe":case"object":case"embed":En("load",r);break;case"video":case"audio":for(c=0;c<et.length;c++)En(et[c],r);break;case"source":En("error",r);break;case"img":case"image":case"link":En("error",r),En("load",r);break;case"form":En("reset",r),En("submit",r);break;case"details":En("toggle",r);break;case"input":Ce(r,l),En("invalid",r),Wn(h,"onChange");break;case"select":r._wrapperState={wasMultiple:!!l.multiple},En("invalid",r),Wn(h,"onChange");break;case"textarea":Le(r,l),En("invalid",r),Wn(h,"onChange")}for(s in zn(n,l),c=null,l)l.hasOwnProperty(s)&&(u=l[s],"children"===s?"string"===typeof u?r.textContent!==u&&(c=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(c=["children",""+u]):d.hasOwnProperty(s)&&null!=u&&Wn(h,s));switch(n){case"input":Se(r),Oe(r,l,!0);break;case"textarea":Se(r),Fe(r);break;case"select":case"option":break;default:"function"===typeof l.onClick&&(r.onclick=Gn)}s=c,o.updateQueue=s,(o=null!==s)&&as(t)}else{n=t,h=s,l=o,c=9===r.nodeType?r:r.ownerDocument,u===Ue&&(u=Be(h)),u===Ue?"script"===h?((l=c.createElement("div")).innerHTML="<script><\/script>",c=l.removeChild(l.firstChild)):"string"===typeof l.is?c=c.createElement(h,{is:l.is}):(c=c.createElement(h),"select"===h&&(h=c,l.multiple?h.multiple=!0:l.size&&(h.size=l.size))):c=c.createElementNS(u,h),(l=c)[or]=n,l[ar]=o,Ja(l,t),t.stateNode=l;var f=r,p=Vn(h=s,n=o);switch(h){case"iframe":case"object":case"embed":En("load",l),r=n;break;case"video":case"audio":for(r=0;r<et.length;r++)En(et[r],l);r=n;break;case"source":En("error",l),r=n;break;case"img":case"image":case"link":En("error",l),En("load",l),r=n;break;case"form":En("reset",l),En("submit",l),r=n;break;case"details":En("toggle",l),r=n;break;case"input":Ce(l,n),r=Me(l,n),En("invalid",l),Wn(f,"onChange");break;case"option":r=Ie(l,n);break;case"select":l._wrapperState={wasMultiple:!!n.multiple},r=i({},n,{value:void 0}),En("invalid",l),Wn(f,"onChange");break;case"textarea":Le(l,n),r=De(l,n),En("invalid",l),Wn(f,"onChange");break;default:r=n}zn(h,r),c=void 0,u=h;var m=l,v=r;for(c in v)if(v.hasOwnProperty(c)){var g=v[c];"style"===c?jn(m,g):"dangerouslySetInnerHTML"===c?null!=(g=g?g.__html:void 0)&&We(m,g):"children"===c?"string"===typeof g?("textarea"!==u||""!==g)&&Ge(m,g):"number"===typeof g&&Ge(m,""+g):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(d.hasOwnProperty(c)?null!=g&&Wn(f,c):null!=g&&xe(m,c,g,p))}switch(h){case"input":Se(l),Oe(l,n,!1);break;case"textarea":Se(l),Fe(l);break;case"option":null!=n.value&&l.setAttribute("value",""+we(n.value));break;case"select":(r=l).multiple=!!n.multiple,null!=(l=n.value)?Re(r,!!n.multiple,l,!1):null!=n.defaultValue&&Re(r,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof r.onClick&&(l.onclick=Gn)}(o=Zn(s,o))&&as(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(a(166));break;case 6:if(n&&null!=t.stateNode)$a(0,t,n.memoizedProps,o);else{if("string"!==typeof o&&null===t.stateNode)throw Error(a(166));r=jo(Uo.current),jo(No.current),Ua(t)?(s=(o=t).stateNode,r=o.memoizedProps,s[or]=o,(o=s.nodeValue!==r)&&as(t)):(s=t,(o=(9===r.nodeType?r:r.ownerDocument).createTextNode(o))[or]=s,t.stateNode=o)}break;case 11:break;case 13:if(ci(Go),o=t.memoizedState,0!==(64&t.effectTag)){t.expirationTime=r;break e}o=null!==o,s=!1,null===n?void 0!==t.memoizedProps.fallback&&Ua(t):(s=null!==(r=n.memoizedState),o||null===r||null!==(r=n.child.sibling)&&(null!==(l=t.firstEffect)?(t.firstEffect=r,r.nextEffect=l):(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),o&&!s&&0!==(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Go.current)?0===Rs&&(Rs=3):(0!==Rs&&3!==Rs||(Rs=4),0!==Us&&null!==Os&&(ju(Os,Is),Bu(Os,Us)))),(o||s)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:zo();break;case 10:io(t);break;case 9:case 14:break;case 17:vi(t.type)&&gi();break;case 19:if(ci(Go),null===(o=t.memoizedState))break;if(s=0!==(64&t.effectTag),null===(l=o.rendering)){if(s)ss(o,!1);else if(0!==Rs||null!==n&&0!==(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(l=Ho(n))){for(t.effectTag|=64,ss(o,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.effectTag|=4),null===o.lastEffect&&(t.firstEffect=null),t.lastEffect=o.lastEffect,o=r,s=t.child;null!==s;)n=o,(r=s).effectTag&=2,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null,null===(l=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=l.childExpirationTime,r.expirationTime=l.expirationTime,r.child=l.child,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,n=l.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),s=s.sibling;li(Go,1&Go.current|2),t=t.child;break e}n=n.sibling}}else{if(!s)if(null!==(n=Ho(l))){if(t.effectTag|=64,s=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),ss(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate){null!==(t=t.lastEffect=o.lastEffect)&&(t.nextEffect=null);break}}else zi()>o.tailExpiration&&1<r&&(t.effectTag|=64,s=!0,ss(o,!1),t.expirationTime=t.childExpirationTime=r-1);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=o.last)?r.sibling=l:t.child=l,o.last=l)}if(null!==o.tail){0===o.tailExpiration&&(o.tailExpiration=zi()+500),r=o.tail,o.rendering=r,o.tail=r.sibling,o.lastEffect=t.lastEffect,r.sibling=null,o=Go.current,li(Go,o=s?1&o|2:1&o),t=r;break e}break;case 20:case 21:break;default:throw Error(a(156,t.tag))}t=null}if(o=ks,1===Is||1!==o.childExpirationTime){for(s=0,r=o.child;null!==r;)(n=r.expirationTime)>s&&(s=n),(l=r.childExpirationTime)>s&&(s=l),r=r.sibling;o.childExpirationTime=s}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=ks.firstEffect),null!==ks.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=ks.firstEffect),e.lastEffect=ks.lastEffect),1<ks.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=ks:e.firstEffect=ks,e.lastEffect=ks))}else{if(null!==(t=us(ks)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=ks.sibling))return t;ks=e}while(null!==ks);return 0===Rs&&(Rs=5),null}function gu(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function yu(e){var t=Vi();return Gi(99,bu.bind(null,e,t)),null}function bu(e,t){do{wu()}while(null!==qs);if(0!==(48&Ps))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=gu(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Os&&(ks=Os=null,Is=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ps;Ps|=32,As.current=null,Qn=Sn;var s=Kn();if(Xn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(L){u=null;break e}var f=0,d=-1,p=-1,m=0,v=0,g=s,y=null;t:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(d=f+l),g!==h||0!==c&&3!==g.nodeType||(p=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)y=g,g=b;for(;;){if(g===s)break t;if(y===u&&++m===l&&(d=f),y===h&&++v===c&&(p=f),null!==(b=g.nextSibling))break;y=(g=y).parentNode}g=b}u=-1===d||-1===p?null:{start:d,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;Jn={focusedElem:s,selectionRange:u},Sn=!1,zs=i;do{try{_u()}catch(L){if(null===zs)throw Error(a(330));Su(zs,L),zs=zs.nextEffect}}while(null!==zs);zs=i;do{try{for(s=e,u=t;null!==zs;){var _=zs.effectTag;if(16&_&&Ge(zs.stateNode,""),128&_){var w=zs.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&_){case 2:ys(zs),zs.effectTag&=-3;break;case 6:ys(zs),zs.effectTag&=-3,_s(zs.alternate,zs);break;case 1024:zs.effectTag&=-1025;break;case 1028:zs.effectTag&=-1025,_s(zs.alternate,zs);break;case 4:_s(zs.alternate,zs);break;case 8:bs(s,l=zs,u),vs(l)}zs=zs.nextEffect}}catch(L){if(null===zs)throw Error(a(330));Su(zs,L),zs=zs.nextEffect}}while(null!==zs);if(x=Jn,w=Kn(),_=x.focusedElem,u=x.selectionRange,w!==_&&_&&_.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(_.ownerDocument.documentElement,_)){null!==u&&Xn(_)&&(w=u.start,void 0===(x=u.end)&&(x=w),"selectionStart"in _?(_.selectionStart=w,_.selectionEnd=Math.min(x,_.value.length)):(x=(w=_.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),l=_.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!x.extend&&s>u&&(l=u,u=s,s=l),l=Yn(_,s),h=Yn(_,u),l&&h&&(1!==x.rangeCount||x.anchorNode!==l.node||x.anchorOffset!==l.offset||x.focusNode!==h.node||x.focusOffset!==h.offset)&&((w=w.createRange()).setStart(l.node,l.offset),x.removeAllRanges(),s>u?(x.addRange(w),x.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),x.addRange(w))))),w=[];for(x=_;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof _.focus&&_.focus(),_=0;_<w.length;_++)(x=w[_]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Jn=null,Sn=!!Qn,Qn=null,e.current=n,zs=i;do{try{for(_=r;null!==zs;){var T=zs.effectTag;if(36&T){var S=zs.alternate;switch(x=_,(w=zs).tag){case 0:case 11:case 15:ps(16,32,w);break;case 1:var E=w.stateNode;if(4&w.effectTag)if(null===S)E.componentDidMount();else{var M=w.elementType===w.type?S.memoizedProps:Ji(w.type,S.memoizedProps);E.componentDidUpdate(M,S.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var C=w.updateQueue;null!==C&&bo(0,C,E);break;case 3:var A=w.updateQueue;if(null!==A){if(s=null,null!==w.child)switch(w.child.tag){case 5:s=w.child.stateNode;break;case 1:s=w.child.stateNode}bo(0,A,s)}break;case 5:var P=w.stateNode;null===S&&4&w.effectTag&&Zn(w.type,w.memoizedProps)&&P.focus();break;case 6:case 4:case 12:break;case 13:if(null===w.memoizedState){var O=w.alternate;if(null!==O){var k=O.memoizedState;if(null!==k){var I=k.dehydrated;null!==I&&Mt(I)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(a(163))}}if(128&T){w=void 0;var R=zs.ref;if(null!==R){var D=zs.stateNode;switch(zs.tag){case 5:w=D;break;default:w=D}"function"===typeof R?R(w):R.current=w}}zs=zs.nextEffect}}catch(L){if(null===zs)throw Error(a(330));Su(zs,L),zs=zs.nextEffect}}while(null!==zs);zs=null,Ni(),Ps=o}else e.current=n;if(Hs)Hs=!1,qs=e,Ys=t;else for(zs=i;null!==zs;)t=zs.nextEffect,zs.nextEffect=null,zs=t;if(0===(t=e.firstPendingTime)&&(Gs=null),1073741823===t?e===Qs?Xs++:(Xs=0,Qs=e):Xs=0,"function"===typeof Cu&&Cu(n.stateNode,r),ru(e),Vs)throw Vs=!1,e=Ws,Ws=null,e;return 0!==(8&Ps)?null:(Yi(),null)}function _u(){for(;null!==zs;){var e=zs.effectTag;0!==(256&e)&&ds(zs.alternate,zs),0===(512&e)||Hs||(Hs=!0,Hi(97,(function(){return wu(),null}))),zs=zs.nextEffect}}function wu(){if(90!==Ys){var e=97<Ys?97:Ys;return Ys=90,Gi(e,xu)}}function xu(){if(null===qs)return!1;var e=qs;if(qs=null,0!==(48&Ps))throw Error(a(331));var t=Ps;for(Ps|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:ps(128,0,n),ps(0,64,n)}}catch(r){if(null===e)throw Error(a(330));Su(e,r)}n=e.nextEffect,e.nextEffect=null,e=n}return Ps=t,Yi(),!0}function Tu(e,t,n){po(e,t=Ts(e,t=cs(n,t),1073741823)),null!==(e=tu(e,1073741823))&&ru(e)}function Su(e,t){if(3===e.tag)Tu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Tu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gs||!Gs.has(r))){po(n,e=Ss(n,e=cs(t,e),1073741823)),null!==(n=tu(n,1073741823))&&ru(n);break}}n=n.return}}function Eu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Os===e&&Is===n?4===Rs||3===Rs&&1073741823===Ls&&zi()-Bs<500?uu(e,Is):js=!0:Uu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),ru(e)))}function Mu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=$s(t=Zs(),e,null)),null!==(e=tu(e,t))&&ru(e)}Es=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||di.current)za=!0;else{if(r<n){switch(za=!1,t.tag){case 3:Qa(t),ja();break;case 5:if(Vo(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:vi(t.type)&&wi(t);break;case 4:Bo(t,t.stateNode.containerInfo);break;case 10:ro(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?ts(e,t,n):(li(Go,1&Go.current),null!==(t=os(e,t,n))?t.sibling:null);li(Go,1&Go.current);break;case 19:if(r=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(r)return is(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),li(Go,Go.current),!r)return null}return os(e,t,n)}za=!1}}else za=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=mi(t,fi.current),ao(t,n),i=la(null,t,r,e,i,n),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,ha(),vi(r)){var o=!0;wi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var s=r.getDerivedStateFromProps;"function"===typeof s&&To(t,r,s,e),i.updater=So,t.stateNode=i,i._reactInternalFiber=t,Ao(t,r,e,n),t=Xa(null,t,r,!0,o,n)}else t.tag=0,Va(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"===typeof e)return ku(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===G)return 11;if(e===Y)return 14}return 2}(i),e=Ji(i,e),o){case 0:t=Ya(null,t,i,e,n);break;case 1:t=Ka(null,t,i,e,n);break;case 11:t=Wa(null,t,i,e,n);break;case 14:t=Ga(null,t,i,Ji(i.type,e),r,n);break;default:throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ya(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ka(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 3:if(Qa(t),null===(r=t.updateQueue))throw Error(a(282));if(i=null!==(i=t.memoizedState)?i.element:null,yo(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)ja(),t=os(e,t,n);else{if((i=t.stateNode.hydrate)&&(Ia=nr(t.stateNode.containerInfo.firstChild),ka=t,i=Ra=!0),i)for(n=Do(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Va(e,t,r,n),ja();t=t.child}return t;case 5:return Vo(t),null===e&&Na(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,$n(r,i)?s=null:null!==o&&$n(r,o)&&(t.effectTag|=16),qa(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Va(e,t,s,n),t=t.child),t;case 6:return null===e&&Na(t),null;case 13:return ts(e,t,n);case 4:return Bo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ro(t,null,r,n):Va(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Wa(e,t,r,i=t.elementType===r?i:Ji(r,i),n);case 7:return Va(e,t,t.pendingProps,n),t.child;case 8:case 12:return Va(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,ro(t,o=i.value),null!==s){var u=s.value;if(0===(o=Qr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!di.current){t=os(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=ho(n,null)).tag=2,po(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),oo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}}Va(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,ao(t,n),r=r(i=so(i,o.unstable_observedBits)),t.effectTag|=1,Va(e,t,r,n),t.child;case 14:return o=Ji(i=t.type,t.pendingProps),Ga(e,t,i,o=Ji(i.type,o),r,n);case 15:return Ha(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ji(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,vi(r)?(e=!0,wi(t)):e=!1,ao(t,n),Mo(t,r,i),Ao(t,r,i,n),Xa(null,t,r,!0,e,n);case 19:return is(e,t,n)}throw Error(a(156,t.tag))};var Cu=null,Au=null;function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Ou(e,t,n,r){return new Pu(e,t,n,r)}function ku(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=Ou(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ru(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)ku(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case U:return Du(n.children,i,o,t);case W:s=8,i|=7;break;case j:s=8,i|=1;break;case B:return(e=Ou(12,n,t,8|i)).elementType=B,e.type=B,e.expirationTime=o,e;case H:return(e=Ou(13,n,t,i)).type=H,e.elementType=H,e.expirationTime=o,e;case q:return(e=Ou(19,n,t,i)).elementType=q,e.expirationTime=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case z:s=10;break e;case V:s=9;break e;case G:s=11;break e;case Y:s=14;break e;case K:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ou(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Du(e,t,n,r){return(e=Ou(7,e,r,t)).expirationTime=n,e}function Lu(e,t,n){return(e=Ou(6,e,null,t)).expirationTime=n,e}function Nu(e,t,n){return(t=Ou(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Uu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function ju(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Bu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function zu(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Vu(e,t,n,r){var i=t.current,o=Zs(),s=wo.suspense;o=$s(o,i,s);e:if(n){t:{if(tt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(vi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=_i(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=ho(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),po(i,t),eu(i,o),o}function Wu(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Gu(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function Hu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function qu(e,t,n){var r=new Fu(e,t,n=null!=n&&!0===n.hydrate),i=Ou(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,e[sr]=r.current,n&&0!==t&&function(e){var t=Dn(e);vt.forEach((function(n){Ln(n,e,t)})),gt.forEach((function(n){Ln(n,e,t)}))}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ku(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=Wu(a);s.call(e)}}Vu(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new qu(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var e=Wu(a);u.call(e)}}su((function(){Vu(t,a,e,i)}))}return Wu(a)}function Xu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:F,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Qu(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(a(200));return Xu(e,t,null,n)}qu.prototype.render=function(e,t){Vu(e,this._internalRoot,null,void 0===t?null:t)},qu.prototype.unmount=function(e){var t=this._internalRoot,n=void 0===e?null:e,r=t.containerInfo;Vu(null,t,null,(function(){r[sr]=null,null!==n&&n()}))},ot=function(e){if(13===e.tag){var t=Qi(Zs(),150,100);eu(e,t),Hu(e,t)}},at=function(e){if(13===e.tag){Zs();var t=Xi++;eu(e,t),Hu(e,t)}},st=function(e){if(13===e.tag){var t=Zs();eu(e,t=$s(t,e,null)),Hu(e,t)}},ee=function(e,t,n){switch(t){case"input":if(Pe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=hr(r);if(!i)throw Error(a(90));Ee(r),Pe(r,i)}}}break;case"textarea":Ne(e,n);break;case"select":null!=(t=n.value)&&Re(e,!!n.multiple,t,!1)}},ae=au,se=function(e,t,n,r){var i=Ps;Ps|=4;try{return Gi(98,e.bind(null,t,n,r))}finally{0===(Ps=i)&&Yi()}},ue=function(){0===(49&Ps)&&(function(){if(null!==Ks){var e=Ks;Ks=null,e.forEach((function(e,t){zu(t,e),ru(t)})),Yi()}}(),wu())},ce=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&Yi()}};var Ju={createPortal:Qu,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=it(t))?null:e.stateNode},hydrate:function(e,t,n){if(!Yu(t))throw Error(a(200));return Ku(null,e,t,!0,n)},render:function(e,t,n){if(!Yu(t))throw Error(a(200));return Ku(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!Yu(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return Ku(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!Yu(e))throw Error(a(40));return!!e._reactRootContainer&&(su((function(){Ku(null,null,e,!1,(function(){e._reactRootContainer=null,e[sr]=null}))})),!0)},unstable_createPortal:function(){return Qu.apply(void 0,arguments)},unstable_batchedUpdates:au,flushSync:function(e,t){if(0!==(48&Ps))throw Error(a(187));var n=Ps;Ps|=1;try{return Gi(99,e.bind(null,t))}finally{Ps=n,Yi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[cr,lr,hr,k.injectEventPluginsByName,f,Rt,function(e){C(e,It)},ie,oe,On,O,wu,{current:!1}]}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Cu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(r){}},Au=function(e){try{t.onCommitFiberUnmount(n,e)}catch(r){}}}catch(r){}})(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=it(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:ur,bundleType:0,version:"16.12.0",rendererPackageName:"react-dom"});var Zu={default:Ju},$u=Zu&&Ju||Zu;e.exports=$u.default||$u},function(e,t,n){"use strict";e.exports=n(316)},function(e,t,n){"use strict";var r,i,o,a,s;if(Object.defineProperty(t,"__esModule",{value:!0}),"undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function e(){if(null!==u)try{var n=t.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(e,0),r}},h=Date.now();t.unstable_now=function(){return Date.now()-h},r=function(e){null!==u?setTimeout(r,0,e):(u=e,setTimeout(l,0))},i=function(e,t){c=setTimeout(e,t)},o=function(){clearTimeout(c)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.performance,d=window.Date,p=window.setTimeout,m=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)t.unstable_now=function(){return f.now()};else{var g=d.now();t.unstable_now=function(){return d.now()-g}}var y=!1,b=null,_=-1,w=5,x=0;a=function(){return t.unstable_now()>=x},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var T=new MessageChannel,S=T.port2;T.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();x=e+w;try{b(!0,e)?S.postMessage(null):(y=!1,b=null)}catch(n){throw S.postMessage(null),n}}else y=!1},r=function(e){b=e,y||(y=!0,S.postMessage(null))},i=function(e,n){_=p((function(){e(t.unstable_now())}),n)},o=function(){m(_),_=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function M(e){return void 0===(e=e[0])?null:e}function C(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>A(a,n))void 0!==u&&0>A(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>A(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=[],O=[],k=1,I=null,R=3,D=!1,L=!1,N=!1;function F(e){for(var t=M(O);null!==t;){if(null===t.callback)C(O);else{if(!(t.startTime<=e))break;C(O),t.sortIndex=t.expirationTime,E(P,t)}t=M(O)}}function U(e){if(N=!1,F(e),!L)if(null!==M(P))L=!0,r(j);else{var t=M(O);null!==t&&i(U,t.startTime-e)}}function j(e,n){L=!1,N&&(N=!1,o()),D=!0;var r=R;try{for(F(n),I=M(P);null!==I&&(!(I.expirationTime>n)||e&&!a());){var s=I.callback;if(null!==s){I.callback=null,R=I.priorityLevel;var u=s(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?I.callback=u:I===M(P)&&C(P),F(n)}else C(P);I=M(P)}if(null!==I)var c=!0;else{var l=M(O);null!==l&&i(U,l.startTime-n),c=!1}return c}finally{I=null,R=r,D=!1}}function B(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var z=s;t.unstable_ImmediatePriority=1,t.unstable_UserBlockingPriority=2,t.unstable_NormalPriority=3,t.unstable_IdlePriority=5,t.unstable_LowPriority=4,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:B(e)}else a=B(e),u=s;return e={id:k++,callback:n,priorityLevel:e,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(e.sortIndex=u,E(O,e),null===M(P)&&e===M(O)&&(N?o():N=!0,i(U,u-s))):(e.sortIndex=a,E(P,e),L||D||(L=!0,r(j))),e},t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=M(P);return n!==I&&null!==I&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<I.expirationTime||a()},t.unstable_requestPaint=z,t.unstable_continueExecution=function(){L||D||(L=!0,r(j))},t.unstable_pauseExecution=function(){},t.unstable_getFirstCallbackNode=function(){return M(P)},t.unstable_Profiling=null},,,function(e,t,n){!function(e){"use strict";var t="stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_");function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!==1}function i(e,t,n){var i=e+" ";switch(n){case"ss":return i+(r(e)?"sekundy":"sekund");case"m":return t?"minuta":"minut\u0119";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzin\u0119";case"hh":return i+(r(e)?"godziny":"godzin");case"MM":return i+(r(e)?"miesi\u0105ce":"miesi\u0119cy");case"yy":return i+(r(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,r){return e?""===r?"("+n[e.month()]+"|"+t[e.month()]+")":/D MMMM/.test(r)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),weekdays:"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi\u015b o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel\u0119 o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W \u015brod\u0119 o] LT";case 6:return"[W sobot\u0119 o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz\u0142\u0105 niedziel\u0119 o] LT";case 3:return"[W zesz\u0142\u0105 \u015brod\u0119 o] LT";case 6:return"[W zesz\u0142\u0105 sobot\u0119 o] LT";default:return"[W zesz\u0142y] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:i,m:i,mm:i,h:i,hh:i,d:"1 dzie\u0144",dd:"%d dni",M:"miesi\u0105c",MM:i,y:"rok",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(126))},function(e,t,n){"use strict";var r=n(321);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,v=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,_=r?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case u:case s:case p:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case v:case c:return e;default:return t}}case o:return t}}}function x(e){return w(e)===f}t.typeOf=w,t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=g,t.Memo=v,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=p,t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===s||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===v||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===_)},t.isAsyncMode=function(e){return x(e)||w(e)===h},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===g},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===o},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===s},t.isSuspense=function(e){return w(e)===p}},function(e,t,n){var r=n(66),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(u){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEventsFromInput=t.pathStrToObj=void 0;var r=h(n(327)),i=h(n(50)),o=h(n(16)),a=h(n(11)),s=h(n(377)),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(108),l=n(225);function h(e){return e&&e.__esModule?e:{default:e}}var f=t.pathStrToObj=function(e){var t={path:e,type:"value",isQuery:!1},n=(0,l.getQueryIdFromPath)(e);if(n){var i=e.split("#");t=u({},t,{queryId:n,isQuery:!0,path:i[0],queryParams:i[1].split("&")}),(0,c.getPopulates)(i[1].split("&"))&&(t.populates=(0,c.getPopulates)(i[1].split("&")),t.queryParams=(0,r.default)(i[1].split("&"),(function(e){return-1===e.indexOf("populate")})))}return t},d=t.getEventsFromInput=function(e){return(0,s.default)(e,(function(e){if((0,i.default)(e))return[f(e)];if((0,a.default)(e))return[{type:"first_child",path:e[0]},{type:"child_added",path:e[0]},{type:"child_removed",path:e[0]},{type:"child_moved",path:e[0]},{type:"child_changed",path:e[0]}];if((0,o.default)(e)){if(!e.path)throw new Error("Path is a required parameter within definition object");var t=e.path;return e.storeAs&&(t+="@"+e.storeAs),e.queryParams&&(t+="#"+e.queryParams.join("&")),[e=u({},f(t),e)]}throw new Error("Invalid Path Definition: "+e+". Only strings, objects, and arrays accepted.")}))};t.default={getEventsFromInput:d}},function(e,t,n){var r=n(32),i=n(376);e.exports=function(e,t){var n=[];if(!e||!e.length)return n;var o=-1,a=[],s=e.length;for(t=r(t,3);++o<s;){var u=e[o];t(u,o,e)&&(n.push(u),a.push(o))}return i(e,a),n}},function(e,t,n){var r=n(329),i=n(369),o=n(212);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(97),i=n(132);e.exports=function(e,t,n,o){var a=n.length,s=a,u=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var l=(c=n[a])[0],h=e[l],f=c[1];if(u&&c[2]){if(void 0===h&&!(l in e))return!1}else{var d=new r;if(o)var p=o(h,f,l,e,t,d);if(!(void 0===p?i(f,h,3,o,d):p))return!1}}return!0}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(99),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},function(e,t,n){var r=n(99);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(99);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(99);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(98);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(98),i=n(130),o=n(131);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(23),i=n(341),o=n(16),a=n(200),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?f:s).test(a(e))}},function(e,t,n){var r=n(342),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},function(e,t,n){var r=n(26)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(345),i=n(98),o=n(130);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(346),i=n(347),o=n(348),a=n(349),s=n(350);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(100);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(100),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(100),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(100);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,n){var r=n(101);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(101);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(101);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(101);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(97),i=n(201),o=n(359),a=n(361),s=n(69),u=n(11),c=n(103),l=n(139),h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,d,p,m){var v=u(e),g=u(t),y=v?"[object Array]":s(e),b=g?"[object Array]":s(t),_=(y="[object Arguments]"==y?h:y)==h,w=(b="[object Arguments]"==b?h:b)==h,x=y==b;if(x&&c(e)){if(!c(t))return!1;v=!0,_=!1}if(x&&!_)return m||(m=new r),v||l(e)?i(e,t,n,d,p,m):o(e,t,y,n,d,p,m);if(!(1&n)){var T=_&&f.call(e,"__wrapped__"),S=w&&f.call(t,"__wrapped__");if(T||S){var E=T?e.value():e,M=S?t.value():t;return m||(m=new r),p(E,M,n,d,m)}}return!!x&&(m||(m=new r),a(e,t,n,d,p,m))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(66),i=n(203),o=n(81),a=n(201),s=n(360),u=n(135),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,f){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var d=s;case"[object Set]":var p=1&r;if(d||(d=u),e.size!=t.size&&!p)return!1;var m=f.get(e);if(m)return m==t;r|=2,f.set(e,t);var v=a(d(e),d(t),r,c,h,f);return f.delete(e),v;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(204),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var h=l;h--;){var f=c[h];if(!(u?f in t:i.call(t,f)))return!1}var d=s.get(e);if(d&&s.get(t))return d==t;var p=!0;s.set(e,t),s.set(t,e);for(var m=u;++h<l;){var v=e[f=c[h]],g=t[f];if(o)var y=u?o(g,v,f,t,e,s):o(v,g,f,e,t,s);if(!(void 0===y?v===g||a(v,g,n,o,s):y)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var b=e.constructor,_=t.constructor;b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _)&&(p=!1)}return s.delete(e),s.delete(t),p}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(40),i=n(24);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(40),i=n(140),o=n(24),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(208)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(58)(n(26),"DataView");e.exports=r},function(e,t,n){var r=n(58)(n(26),"Promise");e.exports=r},function(e,t,n){var r=n(211),i=n(67);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(132),i=n(59),o=n(214),a=n(143),s=n(211),u=n(212),c=n(49);e.exports=function(e,t){return a(e)&&s(t)?u(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},function(e,t,n){var r=n(372);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},function(e,t,n){var r=n(131);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(216),i=n(375),o=n(143),a=n(49);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t,n){var r=n(106);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(145),i=n(68),o=Array.prototype.splice;e.exports=function(e,t){for(var n=e?t.length:0,a=n-1;n--;){var s=t[n];if(n==a||s!==u){var u=s;i(s)?o.call(e,s,1):r(e,s)}}return e}},function(e,t,n){var r=n(107),i=n(85);e.exports=function(e,t){return r(i(e,t),1)}},function(e,t,n){var r=n(66),i=n(102),o=n(11),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(62),i=n(48);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},function(e,t){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}},function(e,t,n){var r=n(48);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(e,t,n){var r=n(62);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},function(e,t,n){var r=n(83);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(386),i=n(150),o=n(387);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){var r=n(216)("length");e.exports=r},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[o+r+"?",r,a,s,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+l+c,"g");e.exports=function(e){for(var t=h.lastIndex=0;h.test(e);)++t;return t}},function(e,t,n){var r=n(389);e.exports=function(e){return r(e)&&e!=+e}},function(e,t,n){var r=n(40),i=n(24);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.signInWithPhoneNumber=t.linkWithCredential=t.reloadAuth=t.updateEmail=t.updateAuth=t.updateProfile=t.verifyPasswordResetCode=t.confirmPasswordReset=t.resetPassword=t.createUser=t.logout=t.login=t.init=t.handleRedirectResult=t.createUserProfile=t.watchUserProfile=t.handleProfileWatchResponse=t.unWatchUserProfile=void 0;var r=p(n(112)),i=p(n(113)),o=p(n(110)),a=p(n(23)),s=p(n(50)),u=p(n(11)),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.linkAndRetrieveDataWithCredential=function(e,t,n){return D(t.auth().currentUser.linkAndRetrieveDataWithCredential,[n],e,t)},t.linkWithPopup=function(e,t,n){return D(t.auth().currentUser.linkWithPopup,[n],e,t)},t.linkWithRedirect=function(e,t,n){return D(t.auth().currentUser.linkWithRedirect,[n],e,t)};var l=n(27),h=n(236),f=n(169),d=n(108);function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v=function(e,t){return e({type:l.actionTypes.LOGIN_ERROR,authError:t})},g=t.unWatchUserProfile=function(e){var t=e._,n=t.authUid,r=t.config,i=r.userProfile,o=r.useFirestoreForProfile;e._.profileWatch&&(o&&e.firestore?e._.profileWatch():e.database().ref().child(i+"/"+n).off("value",e._.profileWatch),e._.profileWatch=null)},y=t.handleProfileWatchResponse=function(e,t,n,r){var i,a=t._.config,f=a.profileParamsToPopulate,p=a.autoPopulateProfile,m=a.useFirestoreForProfile,v=a.logErrors,g=(i=n)&&i.val?i.val():i&&i.data&&i.exists?i.data():null;!f||m||!(0,u.default)(f)&&!(0,s.default)(f)?(m&&f&&console.warn("Profile population is not yet supported for Firestore"),e({type:l.actionTypes.SET_PROFILE,profile:r?c({},g,{token:r}):g})):(0,d.promisesForPopulate)(t,n.key,g,f).then((function(t){if((0,o.default)(t,(function(t,n){e({type:l.actionTypes.SET,path:n,data:t,timestamp:Date.now(),requesting:!1,requested:!0})})),p){var i=(0,d.getPopulateObjs)(f),a=n.val();e({type:l.actionTypes.SET_PROFILE,profile:(0,h.populate)({profile:r?c({},a,{token:r}):a,data:t},"profile",i)})}else e({type:l.actionTypes.SET_PROFILE,profile:g})})).catch((function(t){v&&console.error("RRF: Error retrieving data for profile population. Firebase:",t),e({type:l.actionTypes.UNAUTHORIZED_ERROR,authError:"Error during profile population: "+t.message}),e({type:l.actionTypes.SET_PROFILE,profile:g})}))};function b(e,t){var n=t._.config,r=n.onProfileListenerError,i=n.logErrors;return function(e){if(i&&console.error("Error with profile listener: "+(e.message||""),e),(0,a.default)(r)){var n=r(e,t);if((0,a.default)(n.then))return n}return Promise.reject(e)}}var _=t.watchUserProfile=function(e,t){var n=t._,r=n.authUid,i=n.config,o=i.userProfile,a=i.useFirestoreForProfile,s=i.enableClaims;if(g(t),o)if(a&&t.firestore)t._.profileWatch=t.firestore().collection(o).doc(r).onSnapshot((function(n){return s?t.auth().currentUser.getIdTokenResult(!0).then((function(r){return y(e,t,n,r)})):y(e,t,n)}),b(0,t));else{if(!t.database)throw new Error("Real Time Database or Firestore must be included to enable user profile");t._.profileWatch=t.database().ref().child(o+"/"+r).on("value",(function(n){return s?t.auth().currentUser.getIdTokenResult(!0).then((function(r){return y(e,t,n,r)})):y(e,t,n)}),b(0,t))}},w=t.createUserProfile=function(e,t,n,o){var s=t._.config;if(!s.userProfile||!t.database&&!t.firestore)return Promise.resolve(n);if((0,a.default)(s.profileFactory))try{o=s.profileFactory(n,o)}catch(h){return console.error("Error occured within profileFactory function:",h.message||h),Promise.reject(h)}return s.useFirestoreForProfile?t.firestore().collection(s.userProfile).doc(n.uid||n.user.uid).get().then((function(e){if(!s.updateProfileOnLogin&&e.exists)return e.data();var t=o;if(!t){var a=n.uid?n.toJSON?n.toJSON():n:n.user.toJSON?n.user.toJSON():n.user;t=c({},(0,i.default)(a,s.keysToRemoveFromAuth),{avatarUrl:a.photoURL})}return(0,u.default)(t.providerData)&&t.providerData.length&&(t.providerData=t.providerData.map((function(e){return(0,r.default)(e,s.keysToPreserveFromProviderData)}))),e.ref.set(t,{merge:!0}).then((function(){return t}))})).catch((function(t){return e({type:l.actionTypes.UNAUTHORIZED_ERROR,authError:t}),Promise.reject(t)})):t.database().ref().child(s.userProfile+"/"+(n.user?n.user.uid:n.uid)).once("value").then((function(e){return s.updateProfileOnLogin||null===e.val()?e.ref.update(o).then((function(){return o})):e.val()})).catch((function(n){return e({type:l.actionTypes.UNAUTHORIZED_ERROR,authError:n}),(0,a.default)(s.onProfileWriteError)&&s.onProfileWriteError(n,t),Promise.reject(n)}))},x=t.handleRedirectResult=function(e,t,n){if("function"===typeof t._.config.onRedirectResult&&t._.config.onRedirectResult(n,t,e),n&&n.user){var r=n.user;return t._.authUid=r.uid,_(e,t),e({type:l.actionTypes.LOGIN,auth:r,preserve:t._.config.preserveOnLogin}),w(e,t,r,{email:r.email,displayName:r.providerData[0].displayName||r.email,avatarUrl:r.providerData[0].photoURL,providerData:r.providerData})}},T=t.init=function(e,t){t.auth&&(e({type:l.actionTypes.AUTHENTICATION_INIT_STARTED}),t.auth().onAuthStateChanged((function(n){return function(e,t,n){var r=t._.config;n?(t._.authUid=n.uid,r.presence&&(0,f.setupPresence)(e,t),e({type:l.actionTypes.LOGIN,auth:n,preserve:r.preserveOnLogin}),_(e,t),(0,a.default)(r.onAuthStateChanged)&&r.onAuthStateChanged(n,t,e)):((0,a.default)(r.onAuthStateChanged)&&t._.config.onAuthStateChanged(n,t,e),e({type:l.actionTypes.AUTH_EMPTY_CHANGE,preserve:r.preserveOnEmptyAuthChange}))}(e,t,n)})),t._.config.enableRedirectHandling&&(0,a.default)(t.auth().getRedirectResult)&&"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("http")&&t.auth().getRedirectResult().then((function(n){return x(e,t,n)})).catch((function(t){return v(e,t),Promise.reject(t)})),t.auth().currentUser,e({type:l.actionTypes.AUTHENTICATION_INIT_FINISHED}))},S=t.login=function(e,t,n){var r;t._.config.resetBeforeLogin&&v(e,null);var i=(0,f.getLoginMethodAndParams)(t,n),o=i.method,a=i.params;return(r=t.auth())[o].apply(r,m(a)).then((function(r){if(!r)return Promise.resolve(null);if(["signInWithEmailAndPassword","signInAndRetrieveDataWithEmailAndPassword"].includes(o))return{user:r};if(["signInWithCustomToken","signInAndRetrieveDataWithCustomToken"].includes(o))return t._.config.updateProfileOnLogin?w(e,t,r,n.profile):{user:r};if("signInWithPhoneNumber"===o)return c({},r,{confirm:function(n){return r.confirm(n).then((function(n){var r=n.user,i=n.additionalUserInfo;return w(e,t,r,{phoneNumber:r.providerData[0].phoneNumber,providerData:r.providerData}).then((function(e){return{profile:e,user:r,additionalUserInfo:i}}))}))}});var i=r.user||r;return w(e,t,i,n.profile||{email:i.email,displayName:i.providerData[0].displayName||i.email,avatarUrl:i.providerData[0].photoURL,providerData:i.providerData}).then((function(e){return c({profile:e},r)}))})).catch((function(t){return v(e,t),Promise.reject(t)}))},E=t.logout=function(e,t){return g(t),t.auth().signOut().then((function(){var n={type:l.actionTypes.LOGOUT};return t._.config.preserveOnLogout&&(n.preserve=t._.config.preserveOnLogout),e(n),t._.authUid=null,t}))},M=t.createUser=function(e,t,n,r){var i=n.email,o=n.password,a=n.signIn;if(v(e,null),!i||!o){var s=new Error("Email and Password are required to create user");return v(e,s),Promise.reject(s)}return t.auth().createUserWithEmailAndPassword(i,o).then((function(n){return t.auth().currentUser||a&&!1===a?w(e,t,n,r||{email:i}):S(e,t,{email:i,password:o}).then((function(){return w(e,t,n,r||{email:i})})).catch((function(t){if(t)switch(t.code){case"auth/user-not-found":v(e,new Error("The specified user account does not exist."));break;default:v(e,t)}return Promise.reject(t)}))})).catch((function(t){return v(e,t),Promise.reject(t)}))},C=t.resetPassword=function(e,t,n){return v(e,null),t.auth().sendPasswordResetEmail(n).catch((function(t){if(t){switch(t.code){case"auth/user-not-found":v(e,new Error("The specified user account does not exist."));break;default:v(e,t)}return Promise.reject(t)}}))},A=t.confirmPasswordReset=function(e,t,n,r){return v(e,null),t.auth().confirmPasswordReset(n,r).catch((function(t){if(t){switch(t.code){case"auth/expired-action-code":v(e,new Error("The action code has expired."));break;case"auth/invalid-action-code":v(e,new Error("The action code is invalid."));break;case"auth/user-disabled":v(e,new Error("The user is disabled."));break;case"auth/user-not-found":v(e,new Error("The user is not found."));break;case"auth/weak-password":v(e,new Error("The password is not strong enough."));break;default:v(e,t)}return Promise.reject(t)}}))},P=t.verifyPasswordResetCode=function(e,t,n){return v(e,null),t.auth().verifyPasswordResetCode(n).catch((function(t){return t&&v(e,t),Promise.reject(t)}))},O=t.updateProfile=function(e,t,n,r){var i=t._.config;return e({type:l.actionTypes.PROFILE_UPDATE_START,payload:n}),(i.useFirestoreForProfile?f.updateProfileOnFirestore:f.updateProfileOnRTDB)(t,n,r).then((function(t){return e({type:l.actionTypes.PROFILE_UPDATE_SUCCESS,payload:i.useFirestoreForProfile?t.data():t.val()}),t})).catch((function(t){return e({type:l.actionTypes.PROFILE_UPDATE_ERROR,error:t}),Promise.reject(t)}))},k=t.updateAuth=function(e,t,n,r){if(e({type:l.actionTypes.AUTH_UPDATE_START,payload:n}),!t.auth().currentUser){var i=new Error("User must be logged in to update auth.");return e({type:l.actionTypes.AUTH_UPDATE_ERROR,payload:i}),Promise.reject(i)}return t.auth().currentUser.updateProfile(n).then((function(i){return e({type:l.actionTypes.AUTH_UPDATE_SUCCESS,auth:t.auth().currentUser}),r?O(e,t,n):i})).catch((function(t){return e({type:l.actionTypes.AUTH_UPDATE_ERROR,error:t}),Promise.reject(t)}))},I=t.updateEmail=function(e,t,n,r){if(e({type:l.actionTypes.EMAIL_UPDATE_START,payload:n}),!t.auth().currentUser){var i=new Error("User must be logged in to update email.");return e({type:l.actionTypes.EMAIL_UPDATE_ERROR,error:i}),Promise.reject(i)}return t.auth().currentUser.updateEmail(n).then((function(i){return e({type:l.actionTypes.EMAIL_UPDATE_SUCCESS,payload:n}),r?O(e,t,{email:n}):i})).catch((function(t){return e({type:l.actionTypes.EMAIL_UPDATE_ERROR,error:t}),Promise.reject(t)}))},R=t.reloadAuth=function(e,t){if(e({type:l.actionTypes.AUTH_RELOAD_START}),!t.auth().currentUser){var n=new Error("User must be logged in to reload auth.");return e({type:l.actionTypes.AUTH_RELOAD_ERROR,error:n}),Promise.reject(n)}return t.auth().currentUser.reload().then((function(){var n=t.auth().currentUser;return e({type:l.actionTypes.AUTH_RELOAD_SUCCESS,payload:n}),n})).catch((function(t){return e({type:l.actionTypes.AUTH_RELOAD_ERROR,error:t}),Promise.reject(t)}))};t.linkWithCredential=function(e,t,n){if(e({type:l.actionTypes.AUTH_LINK_START}),!t.auth().currentUser){var r=new Error("User must be logged in to link with credential.");return e({type:l.actionTypes.AUTH_LINK_ERROR,error:r}),Promise.reject(r)}return t.auth().currentUser.linkWithCredential(n).then((function(t){return e({type:l.actionTypes.AUTH_LINK_SUCCESS,payload:t}),t})).catch((function(t){return e({type:l.actionTypes.AUTH_LINK_ERROR,error:t}),Promise.reject(t)}))};function D(e,t,n,r){if(n({type:l.actionTypes.AUTH_LINK_START}),!r.auth().currentUser){var i=new Error("User must be logged in to link with credential.");return n({type:l.actionTypes.AUTH_LINK_ERROR,error:i}),Promise.reject(i)}return e.apply(void 0,m(t)).then((function(e){return n({type:l.actionTypes.AUTH_LINK_SUCCESS,payload:e}),e})).catch((function(e){return n({type:l.actionTypes.AUTH_LINK_ERROR,error:e}),Promise.reject(e)}))}var L=t.signInWithPhoneNumber=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return S(t,e,c({phoneNumber:n,applicationVerifier:r},i))};t.default={dispatchLoginError:v,unWatchUserProfile:g,watchUserProfile:_,init:T,createUserProfile:w,login:S,logout:E,createUser:M,resetPassword:C,confirmPasswordReset:A,verifyPasswordResetCode:P,updateAuth:k,updateProfile:O,updateEmail:I,reloadAuth:R,signInWithPhoneNumber:L}},function(e,t,n){var r=n(228),i=n(214);e.exports=function(e,t){return r(e,t,(function(t,n){return i(e,n)}))}},function(e,t,n){var r=n(107);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){var r=n(394),i=n(222),o=n(83),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(63),i=n(114);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(16),i=n(105),o=n(397),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(63),i=n(137);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(63),i=n(233);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(157),i=n(402),o=n(403),a=n(404),s=n(234);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return o(e);case"[object Set]":return new u;case"[object Symbol]":return a(e)}}},function(e,t,n){var r=n(157);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(66),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(406),i=n(104),o=n(141),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(69),i=n(24);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(408),i=n(104),o=n(141),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(69),i=n(24);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},function(e,t,n){var r=n(158);e.exports=function(e){return r(e)?void 0:e}},function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}},function(e,t,n){var r=n(88),i=n(90),o=n(412),a=n(415),s=i((function(e){return e.push(void 0,o),r(a,void 0,e)}));e.exports=s},function(e,t,n){var r=n(159),i=n(16);e.exports=function e(t,n,o,a,s,u){return i(t)&&i(n)&&(u.set(n,t),r(t,n,void 0,e,u),u.delete(n)),t}},function(e,t,n){var r=n(237),i=n(232),o=n(234),a=n(89),s=n(235),u=n(102),c=n(11),l=n(160),h=n(103),f=n(23),d=n(16),p=n(158),m=n(139),v=n(238),g=n(414);e.exports=function(e,t,n,y,b,_,w){var x=v(e,n),T=v(t,n),S=w.get(T);if(S)r(e,n,S);else{var E=_?_(x,T,n+"",e,t,w):void 0,M=void 0===E;if(M){var C=c(T),A=!C&&h(T),P=!C&&!A&&m(T);E=T,C||A||P?c(x)?E=x:l(x)?E=a(x):A?(M=!1,E=i(T,!0)):P?(M=!1,E=o(T,!0)):E=[]:p(T)||u(T)?(E=x,u(x)?E=g(x):d(x)&&!f(x)||(E=s(T))):M=!1}M&&(w.set(T,E),b(E,T,y,_,w),w.delete(T)),r(e,n,E)}}},function(e,t,n){var r=n(63),i=n(114);e.exports=function(e){return r(e,i(e))}},function(e,t,n){var r=n(159),i=n(161)((function(e,t,n,i){r(e,t,n,i)}));e.exports=i},function(e,t){e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},function(e,t){e.exports=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},function(e,t,n){var r=n(62);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},function(e,t,n){var r=n(116)("unset",n(451));r.placeholder=n(91),e.exports=r},function(e,t,n){var r=n(422),i=n(91),o=Array.prototype.push;function a(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function s(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function u(e,t){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=t.apply(void 0,r);return e.apply(void 0,r),i}}}e.exports=function e(t,n,c,l){var h="function"==typeof n,f=n===Object(n);if(f&&(l=c,c=n,n=void 0),null==c)throw new TypeError;l||(l={});var d=!("cap"in l)||l.cap,p=!("curry"in l)||l.curry,m=!("fixed"in l)||l.fixed,v=!("immutable"in l)||l.immutable,g=!("rearg"in l)||l.rearg,y=h?c:i,b="curry"in l&&l.curry,_="fixed"in l&&l.fixed,w="rearg"in l&&l.rearg,x=h?c.runInContext():void 0,T=h?c:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},S=T.ary,E=T.assign,M=T.clone,C=T.curry,A=T.forEach,P=T.isArray,O=T.isError,k=T.isFunction,I=T.isWeakMap,R=T.keys,D=T.rearg,L=T.toInteger,N=T.toPath,F=R(r.aryMethod),U={castArray:function(e){return function(){var t=arguments[0];return P(t)?e(s(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[0],n=arguments[1],r=e(t,n),i=r.length;return d&&"number"==typeof n?(n=n>2?n-2:1,i&&i<=n?r:a(r,n)):r}},mixin:function(e){return function(t){var n=this;if(!k(n))return e(n,Object(t));var r=[];return A(R(t),(function(e){k(t[e])&&r.push([e,n.prototype[e]])})),e(n,Object(t)),A(r,(function(e){var t=e[1];k(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]})),n}},nthArg:function(e){return function(t){var n=t<0?1:L(t)+1;return C(e(t),n)}},rearg:function(e){return function(t,n){var r=n?n.length:0;return C(e(t,n),r)}},runInContext:function(n){return function(r){return e(t,n(r),l)}}};function j(e,t){if(d){var n=r.iterateeRearg[e];if(n)return function(e,t){return G(e,(function(e){var n=t.length;return function(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(D(a(e,n),t),n)}))}(t,n);var i=!h&&r.iterateeAry[e];if(i)return function(e,t){return G(e,(function(e){return"function"==typeof e?a(e,t):e}))}(t,i)}return t}function B(e,t,n){if(m&&(_||!r.skipFixed[e])){var i=r.methodSpread[e],a=i&&i.start;return void 0===a?S(t,n):function(e,t){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var a=i[t],s=i.slice(0,t);return a&&o.apply(s,a),t!=r&&o.apply(s,i.slice(t+1)),e.apply(this,s)}}(t,a)}return t}function z(e,t,n){return g&&n>1&&(w||!r.skipRearg[e])?D(t,r.methodRearg[e]||r.aryRearg[n]):t}function V(e,t){for(var n=-1,r=(t=N(t)).length,i=r-1,o=M(Object(e)),a=o;null!=a&&++n<r;){var s=t[n],u=a[s];null==u||k(u)||O(u)||I(u)||(a[s]=M(n==i?u:Object(u))),a=a[s]}return o}function W(t,n){var i=r.aliasToReal[t]||t,o=r.remap[i]||i,a=l;return function(t){var r=h?x:T,s=h?x[o]:n,u=E(E({},a),t);return e(r,i,s,u)}}function G(e,t){return function(){var n=arguments.length;if(!n)return e();for(var r=Array(n);n--;)r[n]=arguments[n];var i=g?0:n-1;return r[i]=t(r[i]),e.apply(void 0,r)}}function H(e,t,n){var i,o=r.aliasToReal[e]||e,a=t,c=U[o];return c?a=c(t):v&&(r.mutate.array[o]?a=u(t,s):r.mutate.object[o]?a=u(t,function(e){return function(t){return e({},t)}}(t)):r.mutate.set[o]&&(a=u(t,V))),A(F,(function(e){return A(r.aryMethod[e],(function(t){if(o==t){var n=r.methodSpread[o],s=n&&n.afterRearg;return i=s?B(o,z(o,a,e),e):z(o,B(o,a,e),e),i=function(e,t,n){return b||p&&n>1?C(t,n):t}(0,i=j(o,i),e),!1}})),!i})),i||(i=a),i==t&&(i=b?C(i,1):function(){return t.apply(this,arguments)}),i.convert=W(o,t),i.placeholder=t.placeholder=n,i}if(!f)return H(n,c,y);var q=c,Y=[];return A(F,(function(e){A(r.aryMethod[e],(function(e){var t=q[r.remap[e]||e];t&&Y.push([e,H(e,t,q)])}))})),A(R(q),(function(e){var t=q[e];if("function"==typeof t){for(var n=Y.length;n--;)if(Y[n][0]==e)return;t.convert=W(e,t),Y.push([e,t])}})),A(Y,(function(e){q[e[0]]=e[1]})),q.convert=function(e){return q.runInContext.convert(e)(void 0)},q.placeholder=q,A(R(q),(function(e){A(r.realToAlias[e]||[],(function(t){q[t]=q[e]}))})),q}},function(e,t){t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var i in n){var o=n[i];e.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},function(e,t,n){e.exports={ary:n(424),assign:n(231),clone:n(444),curry:n(445),forEach:n(111),isArray:n(11),isError:n(446),isFunction:n(23),isWeakMap:n(447),iteratee:n(448),keys:n(142),rearg:n(449),toInteger:n(253),toPath:n(450)}},function(e,t,n){var r=n(163);e.exports=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,r(e,128,void 0,void 0,void 0,void 0,t)}},function(e,t,n){var r=n(117),i=n(26);e.exports=function(e,t,n){var o=1&t,a=r(e);return function t(){var r=this&&this!==i&&this instanceof t?a:e;return r.apply(o?n:this,arguments)}}},function(e,t,n){var r=n(88),i=n(117),o=n(243),a=n(246),s=n(252),u=n(168),c=n(26);e.exports=function(e,t,n){var l=i(e);return function i(){for(var h=arguments.length,f=Array(h),d=h,p=s(i);d--;)f[d]=arguments[d];var m=h<3&&f[0]!==p&&f[h-1]!==p?[]:u(f,p);if((h-=m.length)<n)return a(e,t,o,i.placeholder,void 0,f,m,void 0,void 0,n-h);var v=this&&this!==c&&this instanceof i?l:e;return r(v,this,f)}}},function(e,t){e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},function(e,t,n){var r=n(164),i=n(247),o=n(429),a=n(431);e.exports=function(e){var t=o(e),n=a[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var s=i(n);return!!s&&e===s[0]}},function(e,t,n){var r=n(430),i=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],o=i.call(r,t)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==e)return a.name}return t}},function(e,t){e.exports={}},function(e,t,n){var r=n(164),i=n(249),o=n(165),a=n(11),s=n(24),u=n(432),c=Object.prototype.hasOwnProperty;function l(e){if(s(e)&&!a(e)&&!(e instanceof r)){if(e instanceof i)return e;if(c.call(e,"__wrapped__"))return u(e)}return new i(e)}l.prototype=o.prototype,l.prototype.constructor=l,e.exports=l},function(e,t,n){var r=n(164),i=n(249),o=n(89);e.exports=function(e){if(e instanceof r)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},function(e,t){var n=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(e){var t=e.match(n);return t?t[1].split(r):[]}},function(e,t){var n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,t){var r=t.length;if(!r)return e;var i=r-1;return t[i]=(r>1?"& ":"")+t[i],t=t.join(r>2?", ":" "),e.replace(n,"{\n/* [wrapped with "+t+"] */\n")}},function(e,t,n){var r=n(111),i=n(166),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(o,(function(n){var r="_."+n[0];t&n[1]&&!i(e,r)&&e.push(r)})),e.sort()}},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t){e.exports=function(e){return e!==e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(89),i=n(68),o=Math.min;e.exports=function(e,t){for(var n=e.length,a=o(t.length,n),s=r(e);a--;){var u=t[a];e[a]=i(u,n)?s[u]:void 0}return e}},function(e,t,n){var r=n(88),i=n(117),o=n(26);e.exports=function(e,t,n,a){var s=1&t,u=i(e);return function t(){for(var i=-1,c=arguments.length,l=-1,h=a.length,f=Array(h+c),d=this&&this!==o&&this instanceof t?u:e;++l<h;)f[l]=a[l];for(;c--;)f[l++]=arguments[++i];return r(d,s?n:this,f)}}},function(e,t,n){var r=n(244),i=n(245),o=n(168),a=Math.min;e.exports=function(e,t){var n=e[1],s=t[1],u=n|s,c=u<131,l=128==s&&8==n||128==s&&256==n&&e[7].length<=t[8]||384==s&&t[7].length<=t[8]&&8==n;if(!c&&!l)return e;1&s&&(e[2]=t[2],u|=1&n?0:4);var h=t[3];if(h){var f=e[3];e[3]=f?r(f,h,t[4]):h,e[4]=f?o(e[3],"__lodash_placeholder__"):t[4]}return(h=t[5])&&(f=e[5],e[5]=f?i(f,h,t[6]):h,e[6]=f?o(e[5],"__lodash_placeholder__"):t[6]),(h=t[7])&&(e[7]=h),128&s&&(e[8]=null==e[8]?t[8]:a(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}},function(e,t,n){var r=n(443);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},function(e,t,n){var r=n(16),i=n(82),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return NaN;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},function(e,t,n){var r=n(154);e.exports=function(e){return r(e,4)}},function(e,t,n){var r=n(163);function i(e,t,n){var o=r(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return o.placeholder=i.placeholder,o}i.placeholder={},e.exports=i},function(e,t,n){var r=n(40),i=n(24),o=n(158);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!o(e)}},function(e,t,n){var r=n(69),i=n(24);e.exports=function(e){return i(e)&&"[object WeakMap]"==r(e)}},function(e,t,n){var r=n(154),i=n(32);e.exports=function(e){return i("function"==typeof e?e:r(e,1))}},function(e,t,n){var r=n(163),i=n(152),o=i((function(e,t){return r(e,256,void 0,void 0,void 0,t)}));e.exports=o},function(e,t,n){var r=n(70),i=n(89),o=n(11),a=n(82),s=n(213),u=n(49),c=n(61);e.exports=function(e){return o(e)?r(e,u):a(e)?[e]:i(s(c(e)))}},function(e,t,n){var r=n(145);e.exports=function(e,t){return null==e||r(e,t)}},function(e,t,n){var r=n(61),i=n(453);e.exports=function(e){return i(r(e).toLowerCase())}},function(e,t,n){var r=n(454)("toUpperCase");e.exports=r},function(e,t,n){var r=n(170),i=n(150),o=n(171),a=n(61);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return s[e]()+u}}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[o+r+"?",r,a,s,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+l+c,"g");e.exports=function(e){return e.match(h)||[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFile=t.uploadFiles=t.uploadFile=void 0;var r=c(n(23)),i=c(n(85)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(27),s=n(226),u=n(458);function c(e){return e&&e.__esModule?e:{default:e}}var l=a.actionTypes.FILE_UPLOAD_START,h=a.actionTypes.FILE_UPLOAD_ERROR,f=a.actionTypes.FILE_UPLOAD_COMPLETE,d=a.actionTypes.FILE_DELETE_START,p=a.actionTypes.FILE_DELETE_ERROR,m=a.actionTypes.FILE_DELETE_COMPLETE,v=t.uploadFile=function(e,t,n){if(!t.storage)throw new Error("Firebase storage is required to upload files");var i=n||{},a=i.path,s=i.file,c=i.dbPath,d=i.options,p=void 0===d?{progress:!1}:d,m=p.metadata,v=t._.config.logErrors,g=((0,r.default)(p.name)?p.name(s,t,n):p.name)||s.name,y=o({},n,{filename:g});e({type:l,payload:o({},n,{filename:g})});return(p.progress?(0,u.uploadFileWithProgress)(e,t,{path:a,file:s,filename:g,meta:y,fileMetadata:m}):t.storage().ref(a+"/"+g).put(s,m)).then((function(r){return c&&(t.database||t.firestore)?(0,u.writeMetadataToDb)({firebase:t,uploadTaskSnapshot:r,dbPath:c,options:p}).then((function(t){return e({type:f,meta:o({},n,{filename:g}),payload:t}),t})):(e({type:f,meta:o({},n,{filename:g}),payload:{uploadTaskSnapshot:r,uploadTaskSnaphot:r}}),{uploadTaskSnapshot:r,uploadTaskSnaphot:r})})).catch((function(t){return v&&console.error&&console.error("RRF: Error uploading file: "+(t.message||t),t),e({type:h,path:a,payload:t}),Promise.reject(t)}))};t.uploadFiles=function(e,t,n){var r=n.files,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["files"]);return Promise.all((0,i.default)(r,(function(n){return v(e,t,o({file:n},a))})))};t.deleteFile=function(e,t,n){var r=n.path,i=n.dbPath;return(0,s.wrapInDispatch)(e,{method:u.deleteFile,args:[t,{path:r,dbPath:i}],types:[d,m,p]})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(459)),i=s(n(460)),o=s(n(23));t.deleteFile=function(e,t){var n=t.path,r=t.dbPath;return e.storage().ref(n).delete().then((function(){if(!r||!e.database&&!e.firestore)return{path:n};return(e._.config.useFirestoreForStorageMeta?e.firestore().doc(r).delete():e.database().ref(r).remove()).then((function(){return{path:n,dbPath:r}}))}))},t.writeMetadataToDb=function(e){var t=e.firebase,n=e.uploadTaskSnapshot,a=e.dbPath,s=e.options,u=t._.config,c=u.fileMetadataFactory,l=u.useFirestoreForStorageMeta,h=s.metadataFactory||c;return function(e){if(e.ref&&"function"===typeof e.ref.getDownloadURL)return e.ref.getDownloadURL();return Promise.resolve(e.downloadURLs&&e.downloadURLs[0])}(n).then((function(e){var s=(0,o.default)(h)?h(n,t,n.metadata,e):(0,i.default)(n.metadata,r.default),u=function(e){var t=e.fileData,n=e.firebase,r=e.uploadTaskSnapshot,i=e.downloadURL;return function(e){var o=n._.config.useFirestoreForStorageMeta,a={snapshot:e,key:e.key||e.id,File:t,metaDataSnapshot:e,uploadTaskSnapshot:r,uploadTaskSnaphot:r,createdAt:o?n.firestore.FieldValue.serverTimestamp():n.database.ServerValue.TIMESTAMP};return e.id&&(a.id=e.id),i&&(a.downloadURL=i),a}}({fileData:s,firebase:t,uploadTaskSnapshot:n,downloadURL:e});return function(e){if(l)return t.firestore().collection(a).add(e);var n=t.database().ref(a).push();return n.set(e).then((function(e){return n}))}(s).then(u)}))},t.uploadFileWithProgress=function(e,t,n){var r=n.path,i=n.file,o=n.filename,a=n.meta,s=n.fileMetadata,l=t.storage().ref(r+"/"+o).put(i,s),h=l.on(t.storage.TaskEvent.STATE_CHANGED,{next:function(t){e({type:c,meta:a,payload:{snapshot:t,percent:Math.floor(t.bytesTransferred/t.totalBytes*100)}})},error:function(t){e({type:u,meta:a,payload:t}),h()},complete:function(){h()}});return l};var a=n(27);function s(e){return e&&e.__esModule?e:{default:e}}var u=a.actionTypes.FILE_UPLOAD_ERROR,c=a.actionTypes.FILE_UPLOAD_PROGRESS},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(32),i=n(257),o=n(461);e.exports=function(e,t){return o(e,i(r(t)))}},function(e,t,n){var r=n(70),i=n(32),o=n(228),a=n(156);e.exports=function(e,t){if(null==e)return{};var n=r(a(e),(function(e){return[e]}));return t=i(t),o(e,n,(function(e,n){return t(e,n[0])}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFirebaseConnect=void 0;var r=p(n(463)),i=p(n(172)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),u=p(s),c=p(n(3)),l=p(n(55)),h=n(256),f=n(80),d=n(27);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=t.createFirebaseConnect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(n){var p=function(s){function c(){var t,n,r;v(this,c);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=g(this,(t=c.__proto__||Object.getPrototypeOf(c)).call.apply(t,[this].concat(o))),r.firebaseEvents=[],r.firebase=null,r.prevData=null,r.store=r.context[e],g(r,n)}return y(c,s),a(c,[{key:"componentWillMount",value:function(){if(!this.context||!this.context[e])throw new Error(d.v3ErrorMessage);var n=this.store,r=n.firebase,i=n.dispatch,a=(0,f.createCallable)(t);this.prevData=a(this.props,this.store);var s=r.ref,u=r.helpers,c=r.storage,l=r.database,p=r.auth;this.firebase=o({ref:s,storage:c,database:l,auth:p},u),this._firebaseEvents=(0,f.getEventsFromInput)(this.prevData),(0,h.watchEvents)(r,i,this._firebaseEvents)}},{key:"componentWillUnmount",value:function(){var e=this.store,t=e.firebase,n=e.dispatch;(0,h.unWatchEvents)(t,n,this._firebaseEvents)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var n=this.store,o=n.firebase,a=n.dispatch,s=(0,f.createCallable)(t)(e,this.store);if(!(0,i.default)(s,this.prevData)){var u=(0,r.default)(s,this.prevData,i.default),c=(0,r.default)(this.prevData,s,i.default);this.prevData=s,(0,h.unWatchEvents)(o,a,(0,f.getEventsFromInput)(c)),this._firebaseEvents=(0,f.getEventsFromInput)(s),(0,h.watchEvents)(o,a,(0,f.getEventsFromInput)(u))}}},{key:"render",value:function(){return u.default.createElement(n,o({},this.props,this.state,{firebase:this.firebase}))}}]),c}(s.Component);return p.displayName="FirebaseConnect("+(0,f.getDisplayName)(n)+")",p.wrappedComponent=n,p.contextTypes=m({},e,c.default.object.isRequired),(0,l.default)(p,n)}}};t.default=b()},function(e,t,n){var r=n(464),i=n(107),o=n(90),a=n(160),s=n(84),u=o((function(e,t){var n=s(t);return a(n)&&(n=void 0),a(e)?r(e,i(t,1,a,!0),void 0,n):[]}));e.exports=u},function(e,t,n){var r=n(133),i=n(166),o=n(258),a=n(70),s=n(104),u=n(134);e.exports=function(e,t,n,c){var l=-1,h=i,f=!0,d=e.length,p=[],m=t.length;if(!d)return p;n&&(t=a(t,s(n))),c?(h=o,f=!1):t.length>=200&&(h=u,f=!1,t=new r(t));e:for(;++l<d;){var v=e[l],g=null==n?v:n(v);if(v=c||0!==v?v:0,f&&g===g){for(var y=m;y--;)if(t[y]===g)continue e;p.push(v)}else h(t,g,c)||p.push(v)}return p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFirestoreConnect=void 0;var r=p(n(223)),i=p(n(146)),o=p(n(172)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),c=p(u),l=p(n(3)),h=p(n(55)),f=n(80),d=n(27);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function y(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=t.createFirestoreConnect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(n){var p=function(u){function l(){var t,n,r;v(this,l);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=g(this,(t=l.__proto__||Object.getPrototypeOf(l)).call.apply(t,[this].concat(o))),r.prevData=null,r.store=r.context[e],g(r,n)}return y(l,u),s(l,[{key:"componentWillMount",value:function(){if(!this.context||!this.context[e])throw new Error(d.v3ErrorMessage);var n=this.store.firestore;if(this.firestoreIsEnabled){var r=(0,f.createCallable)(t);this.prevData=r(this.props,this.store),n.setListeners(this.prevData)}}},{key:"componentWillUnmount",value:function(){var e=this.store.firestore;this.firestoreIsEnabled&&this.prevData&&e.unsetListeners(this.prevData)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var n=this.store.firestore,r=(0,f.createCallable)(t)(e,this.store);if(this.firestoreIsEnabled&&!(0,o.default)(r,this.prevData)){var i=this.getChanges(r,this.prevData);this.prevData=r,n.unsetListeners(i.removed),n.setListeners(i.added)}}},{key:"getChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return n.added=(0,r.default)(e,(function(e){return!(0,i.default)(t,(function(t){return(0,o.default)(e,t)}))})),n.removed=(0,r.default)(t,(function(t){return!(0,i.default)(e,(function(e){return(0,o.default)(t,e)}))})),n}},{key:"render",value:function(){var e=this.store,t=e.firebase,r=e.firestore,i=a({},this.props,{firestore:r});return t&&(i.firebase=a({},t,t.helpers)),c.default.createElement(n,i)}},{key:"firestoreIsEnabled",get:function(){return!!this.store.firestore}}]),l}(u.Component);return p.wrappedComponent=n,p.displayName=(0,f.wrapDisplayName)(n,"FirestoreConnect"),p.contextTypes=m({},e,l.default.object.isRequired),(0,h.default)(p,n)}}};t.default=b()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWithFirebase=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=h(o),s=h(n(3)),u=h(n(55)),c=n(80),l=n(27);function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=t.createWithFirebase=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(t){var n=function(n){function o(){var t,n,r;d(this,o);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=p(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this].concat(a))),r.store=r.context[e],p(r,n)}return m(o,n),i(o,[{key:"render",value:function(){if(!this.context||!this.context[e])throw new Error(l.v3ErrorMessage);return a.default.createElement(t,r({},this.props,this.state,{dispatch:this.store.dispatch,firebase:this.store.firebase}))}}]),o}(o.Component);return n.wrappedComponent=t,n.displayName=(0,c.wrapDisplayName)(t,"withFirebase"),n.contextTypes=f({},e,s.default.object.isRequired),(0,u.default)(n,t)}};t.default=v()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWithFirestore=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=h(o),s=h(n(3)),u=h(n(55)),c=n(80),l=n(27);function h(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=t.createWithFirestore=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store";return function(t){var n=function(n){function o(){var t,n,r;d(this,o);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=p(this,(t=o.__proto__||Object.getPrototypeOf(o)).call.apply(t,[this].concat(a))),r.store=r.context[e],p(r,n)}return m(o,n),i(o,[{key:"render",value:function(){if(!this.context||!this.context[e])throw new Error(l.v3ErrorMessage);return a.default.createElement(t,r({},this.props,{dispatch:this.store.dispatch,firestore:this.store.firestore,firebase:this.store.firebase}))}}]),o}(o.Component);return n.wrappedComponent=t,n.displayName=(0,c.wrapDisplayName)(t,"withFirestore"),n.contextTypes=f({},e,s.default.object.isRequired),(0,u.default)(n,t)}};t.default=v()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirebase=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(198),o=n(169),a=n(27),s=n(227),u=void 0;t.default=function(e,t){return function(n){return function(c,l,h){var f=n(c,l,h);if(!e.SDK_VERSION&&!e.firebase_&&!e.database)throw new Error("v2.0.0-beta and higher require passing a firebase app instance or a firebase library instance. View the migration guide for details.");var d=e&&e._||{},p=r({},d,a.defaultConfig,t);return u=(0,i.createFirebaseInstance)(e.firebase_||e,p,f.dispatch),s.authActions.init(f.dispatch,u),f.firebase=u,p.attachAuthIsReady&&(f.firebaseAuthIsReady=(0,o.createAuthIsReady)(f,p)),f}}};t.getFirebase=function(){if(!u)throw new Error("Firebase instance does not yet exist. Check your compose function.");return u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(162),i=n(470);t.default=(0,r.combineReducers)({requesting:i.requestingReducer,requested:i.requestedReducer,timestamps:i.timestampsReducer,data:i.dataReducer,ordered:i.orderedReducer,auth:i.authReducer,authError:i.authErrorReducer,profile:i.profileReducer,listeners:i.listenersReducer,isInitializing:i.isInitializingReducer,errors:i.errorsReducer}),e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.orderedReducer=t.dataReducer=t.listenersReducer=t.errorsReducer=t.profileReducer=t.authErrorReducer=t.authReducer=t.timestampsReducer=t.requestedReducer=t.requestingReducer=t.isInitializingReducer=void 0;var r=d(n(259)),i=d(n(260)),o=d(n(16)),a=d(n(11)),s=d(n(59)),u=d(n(113)),c=d(n(112)),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=n(27),f=n(162);function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=h.actionTypes.START,g=h.actionTypes.SET,y=h.actionTypes.SET_PROFILE,b=h.actionTypes.MERGE,_=h.actionTypes.LOGIN,w=h.actionTypes.LOGOUT,x=h.actionTypes.LOGIN_ERROR,T=h.actionTypes.CLEAR_ERRORS,S=h.actionTypes.REMOVE,E=h.actionTypes.NO_VALUE,M=h.actionTypes.SET_LISTENER,C=h.actionTypes.UNSET_LISTENER,A=h.actionTypes.AUTHENTICATION_INIT_STARTED,P=h.actionTypes.AUTHENTICATION_INIT_FINISHED,O=h.actionTypes.AUTH_EMPTY_CHANGE,k=h.actionTypes.AUTH_LINK_SUCCESS,I=h.actionTypes.UNAUTHORIZED_ERROR,R=h.actionTypes.AUTH_UPDATE_SUCCESS,D=h.actionTypes.AUTH_RELOAD_SUCCESS,L=h.actionTypes.PROFILE_UPDATE_SUCCESS,N=(t.isInitializingReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1];switch(t.type){case A:return!0;case P:return!1;default:return e}},t.requestingReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.path;switch(n){case v:return l({},e,m({},(0,f.getSlashStrPath)(r),!0));case E:case g:return l({},e,m({},(0,f.getSlashStrPath)(r),!1));default:return e}},t.requestedReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.path;switch(n){case v:return l({},e,m({},(0,f.getSlashStrPath)(r),!1));case E:case g:return l({},e,m({},(0,f.getSlashStrPath)(r),!0));default:return e}},t.timestampsReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.path;switch(n){case v:case E:case g:return l({},e,m({},(0,f.getSlashStrPath)(r),Date.now()));default:return e}},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"data";return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];switch(n.type){case g:return(0,i.default)(Object,(0,f.getDotStrPath)(n.path),n[e],t);case b:var u=(0,s.default)(t,(0,f.getDotStrPath)(n.path),{}),l=(0,r.default)(u,n[e]);return(0,i.default)(Object,(0,f.getDotStrPath)(n.path),l,t);case E:return(0,i.default)(Object,(0,f.getDotStrPath)(n.path),null,t);case S:return"data"===e?(0,f.recursiveUnset)((0,f.getDotStrPath)(n.path),t):t;case w:if(n.preserve){if((0,a.default)(n.preserve))return(0,c.default)(t,n.preserve);if((0,o.default)(n.preserve))return n.preserve[e]?(0,f.preserveValuesFromState)(t,n.preserve[e],{}):{};throw new Error("Invalid preserve parameter. It must be an Object or an Array")}return{};default:return t}}});t.authReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoaded:!1,isEmpty:!0},t=arguments[1];switch(t.type){case _:case R:if(!t.auth)return{isEmpty:!0,isLoaded:!0};var n=t.auth.toJSON?t.auth.toJSON():t.auth;return t.preserve&&t.preserve.auth?(0,f.preserveValuesFromState)(e,t.preserve.auth,l({},n,{isEmpty:!1,isLoaded:!0})):l({},n,{isEmpty:!1,isLoaded:!0});case k:case D:return t.payload?l({},t.payload.toJSON?t.payload.toJSON():t.payload,{isEmpty:!1,isLoaded:!0}):{isEmpty:!0,isLoaded:!0};case x:case O:case w:return t.preserve&&t.preserve.auth?(0,f.preserveValuesFromState)(e,t.preserve.auth,{isLoaded:!0,isEmpty:!0}):{isLoaded:!0,isEmpty:!0};default:return e}},t.authErrorReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments[1];switch(t.type){case _:case w:return null;case x:case I:return t.authError;default:return e}},t.profileReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoaded:!1,isEmpty:!0},t=arguments[1];switch(t.type){case y:return t.profile?l({},t.profile,{isEmpty:!1,isLoaded:!0}):l({},e,{isEmpty:!0,isLoaded:!0});case L:return l({},e,t.payload);case _:return t.preserve&&t.preserve.profile?(0,f.preserveValuesFromState)(e,t.preserve.profile,{isLoaded:!0,isEmpty:!0}):{isEmpty:!0,isLoaded:!1};case w:case O:return t.preserve&&t.preserve.profile?(0,f.preserveValuesFromState)(e,t.preserve.profile,{isLoaded:!0,isEmpty:!0}):{isLoaded:!0,isEmpty:!0};default:return e}},t.errorsReducer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case x:case I:if(!(0,a.default)(e))throw new Error("Errors state must be an array");return[].concat(p(e),[t.authError]);case w:case T:if(t.preserve&&t.preserve.errors){if("function"!==typeof t.preserve.errors)throw new Error("Preserve for the errors state currently only supports functions");return e.filter(t.preserve.errors)}return[];default:return e}},t.listenersReducer=(0,f.combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.path,i=t.payload;switch(n){case M:return l({},e,m({},i.id,{id:i.id,path:r}));case C:return(0,u.default)(e,[i.id]);default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.type,r=(t.path,t.payload);switch(n){case M:return[].concat(p(e),[r.id]);case C:return e.filter((function(e){return e!==r.id}));default:return e}}}),t.dataReducer=N(),t.orderedReducer=N("ordered")},function(e,t,n){var r=n(109),i=n(63),o=n(161),a=n(48),s=n(105),u=n(67),c=Object.prototype.hasOwnProperty,l=o((function(e,t){if(s(t)||a(t))i(t,u(t),e);else for(var n in t)c.call(t,n)&&r(e,n,t[n])}));e.exports=l},function(e,t,n){var r=n(149);e.exports=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:r(e,t,n,i)}},function(e,t,n){n(474),e.exports=n(33).Object.getPrototypeOf},function(e,t,n){var r=n(71),i=n(261);n(262)("getPrototypeOf",(function(){return function(e){return i(r(e))}}))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports={default:n(477),__esModule:!0}},function(e,t,n){n(478);var r=n(33).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(52);r(r.S+r.F*!n(54),"Object",{defineProperty:n(53).f})},function(e,t,n){e.exports={default:n(480),__esModule:!0}},function(e,t,n){n(266),n(487),e.exports=n(183).f("iterator")},function(e,t,n){var r=n(178),i=n(173);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(179),i=n(92),o=n(182),a={};n(72)(a,n(41)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(53),i=n(73),o=n(94);e.exports=n(54)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(76),i=n(271),o=n(485);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(178),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(51).document;e.exports=r&&r.documentElement},function(e,t,n){n(488);for(var r=n(51),i=n(72),o=n(93),a=n(41)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],h=l&&l.prototype;h&&!h[a]&&i(h,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(489),i=n(490),o=n(93),a=n(76);e.exports=n(267)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(492),__esModule:!0}},function(e,t,n){n(493),n(498),n(499),n(500),e.exports=n(33).Symbol},function(e,t,n){"use strict";var r=n(51),i=n(64),o=n(54),a=n(52),s=n(268),u=n(494).KEY,c=n(75),l=n(175),h=n(182),f=n(119),d=n(41),p=n(183),m=n(184),v=n(495),g=n(496),y=n(73),b=n(74),_=n(71),w=n(76),x=n(177),T=n(92),S=n(179),E=n(497),M=n(273),C=n(185),A=n(53),P=n(94),O=M.f,k=A.f,I=E.f,R=r.Symbol,D=r.JSON,L=D&&D.stringify,N=d("_hidden"),F=d("toPrimitive"),U={}.propertyIsEnumerable,j=l("symbol-registry"),B=l("symbols"),z=l("op-symbols"),V=Object.prototype,W="function"==typeof R&&!!C.f,G=r.QObject,H=!G||!G.prototype||!G.prototype.findChild,q=o&&c((function(){return 7!=S(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=O(V,t);r&&delete V[t],k(e,t,n),r&&e!==V&&k(V,t,r)}:k,Y=function(e){var t=B[e]=S(R.prototype);return t._k=e,t},K=W&&"symbol"==typeof R.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof R},X=function(e,t,n){return e===V&&X(z,t,n),y(e),t=x(t,!0),y(n),i(B,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=S(n,{enumerable:T(0,!1)})):(i(e,N)||k(e,N,T(1,{})),e[N][t]=!0),q(e,t,n)):k(e,t,n)},Q=function(e,t){y(e);for(var n,r=v(t=w(t)),i=0,o=r.length;o>i;)X(e,n=r[i++],t[n]);return e},J=function(e){var t=U.call(this,e=x(e,!0));return!(this===V&&i(B,e)&&!i(z,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,N)&&this[N][e])||t)},Z=function(e,t){if(e=w(e),t=x(t,!0),e!==V||!i(B,t)||i(z,t)){var n=O(e,t);return!n||!i(B,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},$=function(e){for(var t,n=I(w(e)),r=[],o=0;n.length>o;)i(B,t=n[o++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=I(n?z:w(e)),o=[],a=0;r.length>a;)!i(B,t=r[a++])||n&&!i(V,t)||o.push(B[t]);return o};W||(s((R=function(){if(this instanceof R)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function t(n){this===V&&t.call(z,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),q(this,e,T(1,n))};return o&&H&&q(V,e,{configurable:!0,set:t}),Y(e)}).prototype,"toString",(function(){return this._k})),M.f=Z,A.f=X,n(272).f=E.f=$,n(120).f=J,C.f=ee,o&&!n(118)&&s(V,"propertyIsEnumerable",J,!0),p.f=function(e){return Y(d(e))}),a(a.G+a.W+a.F*!W,{Symbol:R});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var re=P(d.store),ie=0;re.length>ie;)m(re[ie++]);a(a.S+a.F*!W,"Symbol",{for:function(e){return i(j,e+="")?j[e]:j[e]=R(e)},keyFor:function(e){if(!K(e))throw TypeError(e+" is not a symbol!");for(var t in j)if(j[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!W,"Object",{create:function(e,t){return void 0===t?S(e):Q(S(e),t)},defineProperty:X,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var oe=c((function(){C.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return C.f(_(e))}}),D&&a(a.S+a.F*(!W||c((function(){var e=R();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!K(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!K(t))return t}),r[1]=t,L.apply(D,r)}}),R.prototype[F]||n(72)(R.prototype,F,R.prototype.valueOf),h(R,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(e,t,n){var r=n(119)("meta"),i=n(74),o=n(64),a=n(53).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(75)((function(){return u(Object.preventExtensions({}))})),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&h.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t,n){var r=n(94),i=n(185),o=n(120);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(180);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(76),i=n(272).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(t){return a.slice()}}(e):i(r(e))}},function(e,t){},function(e,t,n){n(184)("asyncIterator")},function(e,t,n){n(184)("observable")},function(e,t,n){e.exports={default:n(502),__esModule:!0}},function(e,t,n){n(503),e.exports=n(33).Object.setPrototypeOf},function(e,t,n){var r=n(52);r(r.S,"Object",{setPrototypeOf:n(504).set})},function(e,t,n){var r=n(74),i=n(73),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(176)(Function.call,n(273).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(i){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(506),__esModule:!0}},function(e,t,n){n(507);var r=n(33).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(52);r(r.S,"Object",{create:n(179)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(274));t.default=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),p=1;p<t;p++)n[p-1]=arguments[p];var m=e=i.default.apply(void 0,[{zIndex:s.default,isRtl:!1,userAgent:void 0},a.default,e].concat(n)),v=m.spacing,g=m.fontFamily,y=m.palette,b={spacing:v,fontFamily:g,palette:y};e=(0,i.default)({appBar:{color:y.primary1Color,textColor:y.alternateTextColor,height:v.desktopKeylineIncrement,titleFontWeight:f.default.fontWeightNormal,padding:v.desktopGutter},avatar:{color:y.canvasColor,backgroundColor:(0,o.emphasize)(y.canvasColor,.26)},badge:{color:y.alternateTextColor,textColor:y.textColor,primaryColor:y.primary1Color,primaryTextColor:y.alternateTextColor,secondaryColor:y.accent1Color,secondaryTextColor:y.alternateTextColor,fontWeight:f.default.fontWeightMedium},bottomNavigation:{backgroundColor:y.canvasColor,unselectedColor:(0,o.fade)(y.textColor,.54),selectedColor:y.primary1Color,height:56,unselectedFontSize:12,selectedFontSize:14},button:{height:36,minWidth:88,iconButtonSize:2*v.iconSize},card:{titleColor:(0,o.fade)(y.textColor,.87),subtitleColor:(0,o.fade)(y.textColor,.54),fontWeight:f.default.fontWeightMedium},cardMedia:{color:d.darkWhite,overlayContentBackground:d.lightBlack,titleColor:d.darkWhite,subtitleColor:d.lightWhite},cardText:{textColor:y.textColor},checkbox:{boxColor:y.textColor,checkedColor:y.primary1Color,requiredColor:y.primary1Color,disabledColor:y.disabledColor,labelColor:y.textColor,labelDisabledColor:y.disabledColor},chip:{backgroundColor:(0,o.emphasize)(y.canvasColor,.12),deleteIconColor:(0,o.fade)(y.textColor,.26),textColor:(0,o.fade)(y.textColor,.87),fontSize:14,fontWeight:f.default.fontWeightNormal,shadow:"0 1px 6px "+(0,o.fade)(y.shadowColor,.12)+",\n        0 1px 4px "+(0,o.fade)(y.shadowColor,.12)},datePicker:{color:y.primary1Color,textColor:y.alternateTextColor,calendarTextColor:y.textColor,selectColor:y.primary2Color,selectTextColor:y.alternateTextColor,calendarYearBackgroundColor:y.canvasColor,headerColor:y.pickerHeaderColor||y.primary1Color},dialog:{titleFontSize:22,bodyFontSize:16,bodyColor:(0,o.fade)(y.textColor,.6)},dropDownMenu:{accentColor:y.borderColor},enhancedButton:{tapHighlightColor:d.transparent},flatButton:{color:d.transparent,buttonFilterColor:"#999999",disabledTextColor:(0,o.fade)(y.textColor,.3),textColor:y.textColor,primaryTextColor:y.primary1Color,secondaryTextColor:y.accent1Color,fontSize:f.default.fontStyleButtonFontSize,fontWeight:f.default.fontWeightMedium},floatingActionButton:{buttonSize:56,miniSize:40,color:y.primary1Color,iconColor:y.alternateTextColor,secondaryColor:y.accent1Color,secondaryIconColor:y.alternateTextColor,disabledTextColor:y.disabledColor,disabledColor:(0,o.emphasize)(y.canvasColor,.12)},gridTile:{textColor:d.white},icon:{color:y.canvasColor,backgroundColor:y.primary1Color},inkBar:{backgroundColor:y.accent1Color},drawer:{width:4*v.desktopKeylineIncrement,color:y.canvasColor},listItem:{nestedLevelDepth:18,secondaryTextColor:y.secondaryTextColor,leftIconColor:d.grey600,rightIconColor:d.grey600},menu:{backgroundColor:y.canvasColor,containerBackgroundColor:y.canvasColor},menuItem:{dataHeight:32,height:48,hoverColor:(0,o.fade)(y.textColor,.1),padding:v.desktopGutter,selectedTextColor:y.accent1Color,rightIconDesktopFill:d.grey600},menuSubheader:{padding:v.desktopGutter,borderColor:y.borderColor,textColor:y.primary1Color},overlay:{backgroundColor:d.lightBlack},paper:{color:y.textColor,backgroundColor:y.canvasColor,zDepthShadows:[[1,6,.12,1,4,.12],[3,10,.16,3,10,.23],[10,30,.19,6,10,.23],[14,45,.25,10,18,.22],[19,60,.3,15,20,.22]].map((function(e){return"0 "+e[0]+"px "+e[1]+"px "+(0,o.fade)(y.shadowColor,e[2])+",\n         0 "+e[3]+"px "+e[4]+"px "+(0,o.fade)(y.shadowColor,e[5])}))},radioButton:{borderColor:y.textColor,backgroundColor:y.alternateTextColor,checkedColor:y.primary1Color,requiredColor:y.primary1Color,disabledColor:y.disabledColor,size:24,labelColor:y.textColor,labelDisabledColor:y.disabledColor},raisedButton:{color:y.alternateTextColor,textColor:y.textColor,primaryColor:y.primary1Color,primaryTextColor:y.alternateTextColor,secondaryColor:y.accent1Color,secondaryTextColor:y.alternateTextColor,disabledColor:(0,o.darken)(y.alternateTextColor,.1),disabledTextColor:(0,o.fade)(y.textColor,.3),fontSize:f.default.fontStyleButtonFontSize,fontWeight:f.default.fontWeightMedium},refreshIndicator:{strokeColor:y.borderColor,loadingStrokeColor:y.primary1Color},ripple:{color:(0,o.fade)(y.textColor,.87)},slider:{trackSize:2,trackColor:y.primary3Color,trackColorSelected:y.accent3Color,handleSize:12,handleSizeDisabled:8,handleSizeActive:18,handleColorZero:y.primary3Color,handleFillColor:y.alternateTextColor,selectionColor:y.primary1Color,rippleColor:y.primary1Color},snackbar:{textColor:y.alternateTextColor,backgroundColor:y.textColor,actionColor:y.accent1Color},subheader:{color:(0,o.fade)(y.textColor,.54),fontWeight:f.default.fontWeightMedium},stepper:{backgroundColor:"transparent",hoverBackgroundColor:(0,o.fade)(d.black,.06),iconColor:y.primary1Color,hoveredIconColor:d.grey700,inactiveIconColor:d.grey500,textColor:(0,o.fade)(d.black,.87),disabledTextColor:(0,o.fade)(d.black,.26),connectorLineColor:d.grey400},svgIcon:{color:y.textColor},table:{backgroundColor:y.canvasColor},tableFooter:{borderColor:y.borderColor,textColor:y.accent3Color},tableHeader:{borderColor:y.borderColor},tableHeaderColumn:{textColor:y.accent3Color,height:56,spacing:24},tableRow:{hoverColor:y.accent2Color,stripeColor:(0,o.fade)((0,o.lighten)(y.primary1Color,.5),.4),selectedColor:y.borderColor,textColor:y.textColor,borderColor:y.borderColor,height:48},tableRowColumn:{height:48,spacing:24},tabs:{backgroundColor:y.primary1Color,textColor:(0,o.fade)(y.alternateTextColor,.7),selectedTextColor:y.alternateTextColor},textField:{textColor:y.textColor,hintColor:y.disabledColor,floatingLabelColor:y.disabledColor,disabledTextColor:y.disabledColor,errorColor:d.red500,focusColor:y.primary1Color,backgroundColor:"transparent",borderColor:y.borderColor},timePicker:{color:y.alternateTextColor,textColor:y.alternateTextColor,accentColor:y.primary1Color,clockColor:y.textColor,clockCircleColor:y.clockCircleColor,headerColor:y.pickerHeaderColor||y.primary1Color,selectColor:y.primary2Color,selectTextColor:y.alternateTextColor},toggle:{thumbOnColor:y.primary1Color,thumbOffColor:y.accent2Color,thumbDisabledColor:y.borderColor,thumbRequiredColor:y.primary1Color,trackOnColor:(0,o.fade)(y.primary1Color,.5),trackOffColor:y.primary3Color,trackDisabledColor:y.primary3Color,labelColor:y.textColor,labelDisabledColor:y.disabledColor,trackRequiredColor:(0,o.fade)(y.primary1Color,.5)},toolbar:{color:(0,o.fade)(y.textColor,.54),hoverColor:(0,o.fade)(y.textColor,.87),backgroundColor:(0,o.darken)(y.accent2Color,.05),height:56,titleFontSize:20,iconColor:(0,o.fade)(y.textColor,.4),separatorColor:(0,o.fade)(y.textColor,.175),menuHoverColor:(0,o.fade)(y.textColor,.1)},tooltip:{color:d.white,rippleBackgroundColor:d.grey700,opacity:.9}},e,{baseTheme:b,rawTheme:b});var _=[u.default,l.default,c.default].map((function(t){return t(e)})).filter((function(e){return e}));return e.prepareStyles=h.default.apply(void 0,(0,r.default)(_)),e};var i=p(n(517)),o=n(121),a=p(n(518)),s=p(n(520)),u=p(n(521)),c=p(n(546)),l=p(n(547)),h=p(n(551)),f=p(n(552)),d=n(186);function p(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){n(266),n(510),e.exports=n(33).Array.from},function(e,t,n){"use strict";var r=n(176),i=n(52),o=n(71),a=n(511),s=n(512),u=n(271),c=n(513),l=n(514);i(i.S+i.F*!n(516)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,h,f=o(e),d="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,g=0,y=l(f);if(v&&(m=r(m,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(n=new d(t=u(f.length));t>g;g++)c(n,g,v?m(f[g],g):f[g]);else for(h=y.call(f),n=new d;!(i=h.next()).done;g++)c(n,g,v?a(h,m,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){var r=n(73);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(a){var o=e.return;throw void 0!==o&&r(o.call(e)),a}}},function(e,t,n){var r=n(93),i=n(41)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){"use strict";var r=n(53),i=n(92);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(515),i=n(41)("iterator"),o=n(93);e.exports=n(33).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(180),i=n(41)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(n){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(41)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(a){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],s=o[r]();s.next=function(){return{done:n=!0}},o[r]=function(){return s},e(o)}catch(a){}return n}},function(e,t,n){(function(e,n){var r=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,u=a||s||Function("return this")(),c=t&&!t.nodeType&&t,l=c&&"object"==typeof n&&n&&!n.nodeType&&n,h=l&&l.exports===c,f=h&&a.process,d=function(){try{var e=l&&l.require&&l.require("util").types;return e||f&&f.binding&&f.binding("util")}catch(t){}}(),p=d&&d.isTypedArray;function m(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var v,g,y=Array.prototype,b=Function.prototype,_=Object.prototype,w=u["__core-js_shared__"],x=b.toString,T=_.hasOwnProperty,S=function(){var e=/[^.]+$/.exec(w&&w.keys&&w.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),E=_.toString,M=x.call(Object),C=RegExp("^"+x.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=h?u.Buffer:void 0,P=u.Symbol,O=u.Uint8Array,k=A?A.allocUnsafe:void 0,I=(v=Object.getPrototypeOf,g=Object,function(e){return v(g(e))}),R=Object.create,D=_.propertyIsEnumerable,L=y.splice,N=P?P.toStringTag:void 0,F=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),U=A?A.isBuffer:void 0,j=Math.max,B=Date.now,z=ue(u,"Map"),V=ue(Object,"create"),W=function(){function e(){}return function(t){if(!_e(t))return{};if(R)return R(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function G(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function H(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function q(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Y(e){var t=this.__data__=new H(e);this.size=t.size}function K(e,t){var n=me(e),r=!n&&pe(e),i=!n&&!r&&ge(e),o=!n&&!r&&!i&&xe(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],u=s.length;for(var c in e)!t&&!T.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ce(c,u))||s.push(c);return s}function X(e,t,n){(void 0===n||de(e[t],n))&&(void 0!==n||t in e)||Z(e,t,n)}function Q(e,t,n){var r=e[t];T.call(e,t)&&de(r,n)&&(void 0!==n||t in e)||Z(e,t,n)}function J(e,t){for(var n=e.length;n--;)if(de(e[n][0],t))return n;return-1}function Z(e,t,n){"__proto__"==t&&F?F(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}G.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},G.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},G.prototype.get=function(e){var t=this.__data__;if(V){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(t,e)?t[e]:void 0},G.prototype.has=function(e){var t=this.__data__;return V?void 0!==t[e]:T.call(t,e)},G.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=V&&void 0===t?"__lodash_hash_undefined__":t,this},H.prototype.clear=function(){this.__data__=[],this.size=0},H.prototype.delete=function(e){var t=this.__data__,n=J(t,e);return!(n<0)&&(n==t.length-1?t.pop():L.call(t,n,1),--this.size,!0)},H.prototype.get=function(e){var t=this.__data__,n=J(t,e);return n<0?void 0:t[n][1]},H.prototype.has=function(e){return J(this.__data__,e)>-1},H.prototype.set=function(e,t){var n=this.__data__,r=J(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},q.prototype.clear=function(){this.size=0,this.__data__={hash:new G,map:new(z||H),string:new G}},q.prototype.delete=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t},q.prototype.get=function(e){return se(this,e).get(e)},q.prototype.has=function(e){return se(this,e).has(e)},q.prototype.set=function(e,t){var n=se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Y.prototype.clear=function(){this.__data__=new H,this.size=0},Y.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Y.prototype.get=function(e){return this.__data__.get(e)},Y.prototype.has=function(e){return this.__data__.has(e)},Y.prototype.set=function(e,t){var n=this.__data__;if(n instanceof H){var r=n.__data__;if(!z||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new q(r)}return n.set(e,t),this.size=n.size,this};var $,ee=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[$?a:++r];if(!1===t(i[s],s,i))break}return e};function te(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":N&&N in Object(e)?function(e){var t=T.call(e,N),n=e[N];try{e[N]=void 0;var r=!0}catch(o){}var i=E.call(e);r&&(t?e[N]=n:delete e[N]);return i}(e):function(e){return E.call(e)}(e)}function ne(e){return we(e)&&"[object Arguments]"==te(e)}function re(e){return!(!_e(e)||function(e){return!!S&&S in e}(e))&&(ye(e)?C:r).test(function(e){if(null!=e){try{return x.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function ie(e){if(!_e(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=le(e),n=[];for(var r in e)("constructor"!=r||!t&&T.call(e,r))&&n.push(r);return n}function oe(e,t,n,r,i){e!==t&&ee(t,(function(o,a){if(i||(i=new Y),_e(o))!function(e,t,n,r,i,o,a){var s=he(e,n),u=he(t,n),c=a.get(u);if(c)return void X(e,n,c);var l=o?o(s,u,n+"",e,t,a):void 0,h=void 0===l;if(h){var f=me(u),d=!f&&ge(u),p=!f&&!d&&xe(u);l=u,f||d||p?me(s)?l=s:we(m=s)&&ve(m)?l=function(e,t){var n=-1,r=e.length;t||(t=Array(r));for(;++n<r;)t[n]=e[n];return t}(s):d?(h=!1,l=function(e,t){if(t)return e.slice();var n=e.length,r=k?k(n):new e.constructor(n);return e.copy(r),r}(u,!0)):p?(h=!1,l=function(e,t){var n=t?function(e){var t=new e.constructor(e.byteLength);return new O(t).set(new O(e)),t}(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(u,!0)):l=[]:function(e){if(!we(e)||"[object Object]"!=te(e))return!1;var t=I(e);if(null===t)return!0;var n=T.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&x.call(n)==M}(u)||pe(u)?(l=s,pe(s)?l=function(e){return function(e,t,n,r){var i=!n;n||(n={});var o=-1,a=t.length;for(;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Z(n,s,u):Q(n,s,u)}return n}(e,Te(e))}(s):_e(s)&&!ye(s)||(l=function(e){return"function"!=typeof e.constructor||le(e)?{}:W(I(e))}(u))):h=!1}var m;h&&(a.set(u,l),i(l,u,r,o,a),a.delete(u));X(e,n,l)}(e,t,a,n,oe,r,i);else{var s=r?r(he(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),X(e,a,s)}}),Te)}function ae(e,t){return fe(function(e,t,n){return t=j(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=j(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),m(e,this,s)}}(e,t,Me),e+"")}function se(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function ue(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return re(n)?n:void 0}function ce(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}function le(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||_)}function he(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var fe=function(e){var t=0,n=0;return function(){var r=B(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(F?function(e,t){return F(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Me);function de(e,t){return e===t||e!==e&&t!==t}var pe=ne(function(){return arguments}())?ne:function(e){return we(e)&&T.call(e,"callee")&&!D.call(e,"callee")},me=Array.isArray;function ve(e){return null!=e&&be(e.length)&&!ye(e)}var ge=U||function(){return!1};function ye(e){if(!_e(e))return!1;var t=te(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function _e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function we(e){return null!=e&&"object"==typeof e}var xe=p?function(e){return function(t){return e(t)}}(p):function(e){return we(e)&&be(e.length)&&!!o[te(e)]};function Te(e){return ve(e)?K(e,!0):ie(e)}var Se,Ee=(Se=function(e,t,n){oe(e,t,n)},ae((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Se.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!_e(n))return!1;var r=typeof t;return!!("number"==r?ve(n)&&ce(t,n.length):"string"==r&&t in n)&&de(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Se(e,a,n,i)}return e})));function Me(e){return e}n.exports=Ee}).call(this,n(47),n(79)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(186),o=n(121),a=n(519),s=(r=a)&&r.__esModule?r:{default:r};t.default={spacing:s.default,fontFamily:"Roboto, sans-serif",borderRadius:2,palette:{primary1Color:i.cyan500,primary2Color:i.cyan700,primary3Color:i.grey400,accent1Color:i.pinkA200,accent2Color:i.grey100,accent3Color:i.grey500,textColor:i.darkBlack,secondaryTextColor:(0,o.fade)(i.darkBlack,.54),alternateTextColor:i.white,canvasColor:i.white,borderColor:i.grey300,disabledColor:(0,o.fade)(i.darkBlack,.3),pickerHeaderColor:i.cyan500,clockCircleColor:(0,o.fade)(i.darkBlack,.07),shadowColor:i.fullBlack}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={iconSize:24,desktopGutter:24,desktopGutterMore:32,desktopGutterLess:16,desktopGutterMini:8,desktopKeylineIncrement:64,desktopDropDownMenuItemHeight:32,desktopDropDownMenuFontSize:15,desktopDrawerMenuItemHeight:48,desktopSubheaderHeight:48,desktopToolbarHeight:56}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={menu:1e3,appBar:1100,drawerOverlay:1200,drawer:1300,dialogOverlay:1400,dialog:1500,layer:2e3,popover:2100,snackbar:2900,tooltip:3e3}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t="undefined"!==typeof navigator,n=e.userAgent;void 0===n&&t&&(n=navigator.userAgent),void 0!==n||u||(u=!0);var s=(0,r.default)(a.default);if(!1===n)return null;if("all"===n||void 0===n)return function(e){var n=-1!==["flex","inline-flex"].indexOf(e.display),r=s(e);if(n){var i=r.display;r.display=t?i[i.length-1]:i.join("; display: ")}return r};var c=new((0,i.default)(o.default,s))({userAgent:n});return function(e){return c.prefix(e)}};var r=s(n(522)),i=s(n(524)),o=s(n(529)),a=s(n(538));s(n(65));function s(e){return e&&e.__esModule?e:{default:e}}var u=!1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.prefixMap,n=e.plugins;return function e(s){for(var u in s){var c=s[u];if((0,a.default)(c))s[u]=e(c);else if(Array.isArray(c)){for(var l=[],h=0,f=c.length;h<f;++h){var d=(0,i.default)(n,u,c[h],s,t);(0,o.default)(l,d||c[h])}l.length>0&&(s[u]=l)}else{var p=(0,i.default)(n,u,c,s,t);p&&(s[u]=p),(0,r.default)(t,u,s)}}return s}};var r=s(n(523)),i=s(n(276)),o=s(n(277)),a=s(n(278));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(e.hasOwnProperty(t))for(var r=e[t],i=0,a=r.length;i<a;++i)n[r[i]+(0,o.default)(t)]=n[t]};var r,i=n(187),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=e.prefixMap,n=e.plugins,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e);var r="undefined"!==typeof navigator?navigator.userAgent:void 0;if(this._userAgent=n.userAgent||r,this._keepUnprefixed=n.keepUnprefixed||!1,this._userAgent&&(this._browserInfo=(0,i.default)(this._userAgent)),!this._browserInfo||!this._browserInfo.cssPrefix)return this._useFallback=!0,!1;this.prefixedKeyframes=(0,o.default)(this._browserInfo.browserName,this._browserInfo.browserVersion,this._browserInfo.cssPrefix);var a=this._browserInfo.browserName&&t[this._browserInfo.browserName];if(a){for(var s in this._requiresPrefix={},a)a[s]>=this._browserInfo.browserVersion&&(this._requiresPrefix[s]=!0);this._hasPropsRequiringPrefix=Object.keys(this._requiresPrefix).length>0}else this._useFallback=!0;this._metaData={browserVersion:this._browserInfo.browserVersion,browserName:this._browserInfo.browserName,cssPrefix:this._browserInfo.cssPrefix,jsPrefix:this._browserInfo.jsPrefix,keepUnprefixed:this._keepUnprefixed,requiresPrefix:this._requiresPrefix}}return r(e,[{key:"prefix",value:function(e){return this._useFallback?l(e):this._hasPropsRequiringPrefix?this._prefixStyle(e):e}},{key:"_prefixStyle",value:function(e){for(var t in e){var r=e[t];if((0,u.default)(r))e[t]=this.prefix(r);else if(Array.isArray(r)){for(var i=[],o=0,l=r.length;o<l;++o){var h=(0,c.default)(n,t,r[o],e,this._metaData);(0,s.default)(i,h||r[o])}i.length>0&&(e[t]=i)}else{var f=(0,c.default)(n,t,r,e,this._metaData);f&&(e[t]=f),this._requiresPrefix.hasOwnProperty(t)&&(e[this._browserInfo.jsPrefix+(0,a.default)(t)]=r,this._keepUnprefixed||delete e[t])}}return e}}],[{key:"prefixAll",value:function(e){return l(e)}}]),e}()};var i=l(n(525)),o=l(n(528)),a=l(n(187)),s=l(n(277)),u=l(n(278)),c=l(n(276));function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=o.default._detect(e);t.yandexbrowser&&(t=o.default._detect(e.replace(/YaBrowser\/[0-9.]*/,"")));for(var n in a)if(t.hasOwnProperty(n)){var r=a[n];t.jsPrefix=r,t.cssPrefix="-"+r.toLowerCase()+"-";break}t.browserName=function(e){if(e.firefox)return"firefox";if(e.mobile||e.tablet){if(e.ios)return"ios_saf";if(e.android)return"android";if(e.opera)return"op_mini"}for(var t in s)if(e.hasOwnProperty(t))return s[t]}(t),t.version?t.browserVersion=parseFloat(t.version):t.browserVersion=parseInt(parseFloat(t.osversion),10);t.osVersion=parseFloat(t.osversion),"ios_saf"===t.browserName&&t.browserVersion>t.osVersion&&(t.browserVersion=t.osVersion);"android"===t.browserName&&t.chrome&&t.browserVersion>37&&(t.browserName="and_chr");"android"===t.browserName&&t.osVersion<5&&(t.browserVersion=t.osVersion);"android"===t.browserName&&t.samsungBrowser&&(t.browserName="and_chr",t.browserVersion=44);return t};var r,i=n(526),o=(r=i)&&r.__esModule?r:{default:r};var a={chrome:"Webkit",safari:"Webkit",ios:"Webkit",android:"Webkit",phantom:"Webkit",opera:"Webkit",webos:"Webkit",blackberry:"Webkit",bada:"Webkit",tizen:"Webkit",chromium:"Webkit",vivaldi:"Webkit",firefox:"Moz",seamoney:"Moz",sailfish:"Moz",msie:"ms",msedge:"ms"},s={chrome:"chrome",chromium:"chrome",safari:"safari",firfox:"firefox",msedge:"edge",opera:"opera",vivaldi:"opera",msie:"ie"};e.exports=t.default},function(e,t,n){var r;r=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var i,a=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(t)&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),h=/silk/i.test(t),f=/sailfish/i.test(t),d=/tizen/i.test(t),p=/(web|hpw)(o|0)s/i.test(t),m=/windows phone/i.test(t),v=(/SamsungBrowser/i.test(t),!m&&/windows/i.test(t)),g=!a&&!h&&/macintosh/i.test(t),y=!s&&!f&&!d&&!p&&/linux/i.test(t),b=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),_=n(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t)&&!/tablet pc/i.test(t),x=!w&&/[^-]mobi/i.test(t),T=/xbox/i.test(t);/opera/i.test(t)?i={name:"Opera",opera:e,version:_||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?i={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||_}:/SamsungBrowser/i.test(t)?i={name:"Samsung Internet for Android",samsungBrowser:e,version:_||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?i={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?i={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?i={name:"Opera Coast",coast:e,version:_||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?i={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?i={name:"Yandex Browser",yandexbrowser:e,version:_||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?i={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?i={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?i={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?i={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?i={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?i={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(i={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},b?(i.msedge=e,i.version=b):(i.msie=e,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?i={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?i={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?i={name:"Microsoft Edge",msedge:e,version:b}:/vivaldi/i.test(t)?i={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||_}:f?i={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?i={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(i={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(i.firefoxos=e,i.osname="Firefox OS")):h?i={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?i={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?i={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?i={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:_||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(i={name:"WebOS",osname:"WebOS",webos:e,version:_||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(i.touchpad=e)):/bada/i.test(t)?i={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:d?i={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||_}:/qupzilla/i.test(t)?i={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||_}:/chromium/i.test(t)?i={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||_}:/chrome|crios|crmo/i.test(t)?i={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?i={name:"Android",version:_}:/safari|applewebkit/i.test(t)?(i={name:"Safari",safari:e},_&&(i.version=_)):a?(i={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},_&&(i.version=_)):i=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||_}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(i.name=i.name||"Blink",i.blink=e):(i.name=i.name||"Webkit",i.webkit=e),!i.version&&_&&(i.version=_)):!i.opera&&/gecko\//i.test(t)&&(i.name=i.name||"Gecko",i.gecko=e,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.windowsphone||!s&&!i.silk?!i.windowsphone&&a?(i[a]=e,i.ios=e,i.osname="iOS"):g?(i.mac=e,i.osname="macOS"):T?(i.xbox=e,i.osname="Xbox"):v?(i.windows=e,i.osname="Windows"):y&&(i.linux=e,i.osname="Linux"):(i.android=e,i.osname="Android");var S="";i.windows?S=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):i.windowsphone?S=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i.mac?S=(S=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):a?S=(S=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?S=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?S=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?S=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?S=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(S=n(/tizen[\/\s](\d+(\.\d+)*)/i)),S&&(i.osversion=S);var E=!i.windows&&S.split(".")[0];return w||c||"ipad"==a||s&&(3==E||E>=4&&!x)||i.silk?i.tablet=e:(x||"iphone"==a||"ipod"==a||s||u||i.blackberry||i.webos||i.bada)&&(i.mobile=e),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.vivaldi&&i.version>=1||i.chrome&&i.version>=20||i.samsungBrowser&&i.version>=4||i.whale&&1===o([i.version,"1.0"])||i.mzbrowser&&1===o([i.version,"6.0"])||i.focus&&1===o([i.version,"1.0"])||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1||i.chromium&&i.version>=20?i.a=e:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6||i.chromium&&i.version<20?i.c=e:i.x=e,i}var n=t("undefined"!==typeof navigator&&navigator.userAgent||"");function r(e){return e.split(".").length}function i(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)r.push(t(e[n]));return r}function o(e){for(var t=Math.max(r(e[0]),r(e[1])),n=i(e,(function(e){var n=t-r(e);return i((e+=new Array(n+1).join(".0")).split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function a(e,r,i){var a=n;"string"===typeof r&&(i=r,r=void 0),void 0===r&&(r=!1),i&&(a=t(i));var s=""+a.version;for(var u in e)if(e.hasOwnProperty(u)&&a[u]){if("string"!==typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return o([s,e[u]])<0}return r}return n.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"===typeof r&&r in n)return!0}return!1},n.isUnsupportedBrowser=a,n.compareVersions=o,n.check=function(e,t,n){return!a(e,t,n)},n._detect=t,n.detect=t,n},e.exports?e.exports=r():n(527)("bowser",r)},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if("chrome"===e&&t<43||("safari"===e||"ios_saf"===e)&&t<9||"opera"===e&&t<30||"android"===e&&t<=4.4||"and_uc"===e)return n+"keyframes";return"keyframes"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(530)),i=l(n(531)),o=l(n(532)),a=l(n(533)),s=l(n(534)),u=l(n(535)),c=l(n(536));function l(e){return e&&e.__esModule?e:{default:e}}t.default={plugins:[r.default,i.default,o.default,a.default,s.default,u.default,c.default],prefixMap:{chrome:{transform:35,transformOrigin:35,transformOriginX:35,transformOriginY:35,backfaceVisibility:35,perspective:35,perspectiveOrigin:35,transformStyle:35,transformOriginZ:35,animation:42,animationDelay:42,animationDirection:42,animationFillMode:42,animationDuration:42,animationIterationCount:42,animationName:42,animationPlayState:42,animationTimingFunction:42,appearance:60,userSelect:53,fontKerning:32,textEmphasisPosition:60,textEmphasis:60,textEmphasisStyle:60,textEmphasisColor:60,boxDecorationBreak:60,clipPath:54,maskImage:60,maskMode:60,maskRepeat:60,maskPosition:60,maskClip:60,maskOrigin:60,maskSize:60,maskComposite:60,mask:60,maskBorderSource:60,maskBorderMode:60,maskBorderSlice:60,maskBorderWidth:60,maskBorderOutset:60,maskBorderRepeat:60,maskBorder:60,maskType:60,textDecorationStyle:56,textDecorationSkip:56,textDecorationLine:56,textDecorationColor:56,filter:52,fontFeatureSettings:47,breakAfter:49,breakBefore:49,breakInside:49,columnCount:49,columnFill:49,columnGap:49,columnRule:49,columnRuleColor:49,columnRuleStyle:49,columnRuleWidth:49,columns:49,columnSpan:49,columnWidth:49},safari:{flex:8,flexBasis:8,flexDirection:8,flexGrow:8,flexFlow:8,flexShrink:8,flexWrap:8,alignContent:8,alignItems:8,alignSelf:8,justifyContent:8,order:8,transition:6,transitionDelay:6,transitionDuration:6,transitionProperty:6,transitionTimingFunction:6,transform:8,transformOrigin:8,transformOriginX:8,transformOriginY:8,backfaceVisibility:8,perspective:8,perspectiveOrigin:8,transformStyle:8,transformOriginZ:8,animation:8,animationDelay:8,animationDirection:8,animationFillMode:8,animationDuration:8,animationIterationCount:8,animationName:8,animationPlayState:8,animationTimingFunction:8,appearance:10.1,userSelect:10.1,backdropFilter:10.1,fontKerning:9,scrollSnapType:10,scrollSnapPointsX:10,scrollSnapPointsY:10,scrollSnapDestination:10,scrollSnapCoordinate:10,textEmphasisPosition:7,textEmphasis:7,textEmphasisStyle:7,textEmphasisColor:7,boxDecorationBreak:10.1,clipPath:10.1,maskImage:10.1,maskMode:10.1,maskRepeat:10.1,maskPosition:10.1,maskClip:10.1,maskOrigin:10.1,maskSize:10.1,maskComposite:10.1,mask:10.1,maskBorderSource:10.1,maskBorderMode:10.1,maskBorderSlice:10.1,maskBorderWidth:10.1,maskBorderOutset:10.1,maskBorderRepeat:10.1,maskBorder:10.1,maskType:10.1,textDecorationStyle:10.1,textDecorationSkip:10.1,textDecorationLine:10.1,textDecorationColor:10.1,shapeImageThreshold:10,shapeImageMargin:10,shapeImageOutside:10,filter:9,hyphens:10.1,flowInto:10.1,flowFrom:10.1,breakBefore:8,breakAfter:8,breakInside:8,regionFragment:10.1,columnCount:8,columnFill:8,columnGap:8,columnRule:8,columnRuleColor:8,columnRuleStyle:8,columnRuleWidth:8,columns:8,columnSpan:8,columnWidth:8},firefox:{appearance:55,userSelect:55,boxSizing:28,textAlignLast:48,textDecorationStyle:35,textDecorationSkip:35,textDecorationLine:35,textDecorationColor:35,tabSize:55,hyphens:42,fontFeatureSettings:33,breakAfter:51,breakBefore:51,breakInside:51,columnCount:51,columnFill:51,columnGap:51,columnRule:51,columnRuleColor:51,columnRuleStyle:51,columnRuleWidth:51,columns:51,columnSpan:51,columnWidth:51},opera:{flex:16,flexBasis:16,flexDirection:16,flexGrow:16,flexFlow:16,flexShrink:16,flexWrap:16,alignContent:16,alignItems:16,alignSelf:16,justifyContent:16,order:16,transform:22,transformOrigin:22,transformOriginX:22,transformOriginY:22,backfaceVisibility:22,perspective:22,perspectiveOrigin:22,transformStyle:22,transformOriginZ:22,animation:29,animationDelay:29,animationDirection:29,animationFillMode:29,animationDuration:29,animationIterationCount:29,animationName:29,animationPlayState:29,animationTimingFunction:29,appearance:45,userSelect:40,fontKerning:19,textEmphasisPosition:45,textEmphasis:45,textEmphasisStyle:45,textEmphasisColor:45,boxDecorationBreak:45,clipPath:41,maskImage:45,maskMode:45,maskRepeat:45,maskPosition:45,maskClip:45,maskOrigin:45,maskSize:45,maskComposite:45,mask:45,maskBorderSource:45,maskBorderMode:45,maskBorderSlice:45,maskBorderWidth:45,maskBorderOutset:45,maskBorderRepeat:45,maskBorder:45,maskType:45,textDecorationStyle:43,textDecorationSkip:43,textDecorationLine:43,textDecorationColor:43,filter:39,fontFeatureSettings:34,breakAfter:36,breakBefore:36,breakInside:36,columnCount:36,columnFill:36,columnGap:36,columnRule:36,columnRuleColor:36,columnRuleStyle:36,columnRuleWidth:36,columns:36,columnSpan:36,columnWidth:36},ie:{flex:10,flexDirection:10,flexFlow:10,flexWrap:10,transform:9,transformOrigin:9,transformOriginX:9,transformOriginY:9,userSelect:11,wrapFlow:11,wrapThrough:11,wrapMargin:11,scrollSnapType:11,scrollSnapPointsX:11,scrollSnapPointsY:11,scrollSnapDestination:11,scrollSnapCoordinate:11,touchAction:10,hyphens:11,flowInto:11,flowFrom:11,breakBefore:11,breakAfter:11,breakInside:11,regionFragment:11,gridTemplateColumns:11,gridTemplateRows:11,gridTemplateAreas:11,gridTemplate:11,gridAutoColumns:11,gridAutoRows:11,gridAutoFlow:11,grid:11,gridRowStart:11,gridColumnStart:11,gridRowEnd:11,gridRow:11,gridColumn:11,gridColumnEnd:11,gridColumnGap:11,gridRowGap:11,gridArea:11,gridGap:11,textSizeAdjust:11},edge:{userSelect:15,wrapFlow:15,wrapThrough:15,wrapMargin:15,scrollSnapType:15,scrollSnapPointsX:15,scrollSnapPointsY:15,scrollSnapDestination:15,scrollSnapCoordinate:15,hyphens:15,flowInto:15,flowFrom:15,breakBefore:15,breakAfter:15,breakInside:15,regionFragment:15,gridTemplateColumns:15,gridTemplateRows:15,gridTemplateAreas:15,gridTemplate:15,gridAutoColumns:15,gridAutoRows:15,gridAutoFlow:15,grid:15,gridRowStart:15,gridColumnStart:15,gridRowEnd:15,gridRow:15,gridColumn:15,gridColumnEnd:15,gridColumnGap:15,gridRowGap:15,gridArea:15,gridGap:15},ios_saf:{flex:8.1,flexBasis:8.1,flexDirection:8.1,flexGrow:8.1,flexFlow:8.1,flexShrink:8.1,flexWrap:8.1,alignContent:8.1,alignItems:8.1,alignSelf:8.1,justifyContent:8.1,order:8.1,transition:6,transitionDelay:6,transitionDuration:6,transitionProperty:6,transitionTimingFunction:6,transform:8.1,transformOrigin:8.1,transformOriginX:8.1,transformOriginY:8.1,backfaceVisibility:8.1,perspective:8.1,perspectiveOrigin:8.1,transformStyle:8.1,transformOriginZ:8.1,animation:8.1,animationDelay:8.1,animationDirection:8.1,animationFillMode:8.1,animationDuration:8.1,animationIterationCount:8.1,animationName:8.1,animationPlayState:8.1,animationTimingFunction:8.1,appearance:10,userSelect:10,backdropFilter:10,fontKerning:10,scrollSnapType:10,scrollSnapPointsX:10,scrollSnapPointsY:10,scrollSnapDestination:10,scrollSnapCoordinate:10,boxDecorationBreak:10,clipPath:10,maskImage:10,maskMode:10,maskRepeat:10,maskPosition:10,maskClip:10,maskOrigin:10,maskSize:10,maskComposite:10,mask:10,maskBorderSource:10,maskBorderMode:10,maskBorderSlice:10,maskBorderWidth:10,maskBorderOutset:10,maskBorderRepeat:10,maskBorder:10,maskType:10,textSizeAdjust:10,textDecorationStyle:10,textDecorationSkip:10,textDecorationLine:10,textDecorationColor:10,shapeImageThreshold:10,shapeImageMargin:10,shapeImageOutside:10,filter:9,hyphens:10,flowInto:10,flowFrom:10,breakBefore:8.1,breakAfter:8.1,breakInside:8.1,regionFragment:10,columnCount:8.1,columnFill:8.1,columnGap:8.1,columnRule:8.1,columnRuleColor:8.1,columnRuleStyle:8.1,columnRuleWidth:8.1,columns:8.1,columnSpan:8.1,columnWidth:8.1},android:{borderImage:4.2,borderImageOutset:4.2,borderImageRepeat:4.2,borderImageSlice:4.2,borderImageSource:4.2,borderImageWidth:4.2,flex:4.2,flexBasis:4.2,flexDirection:4.2,flexGrow:4.2,flexFlow:4.2,flexShrink:4.2,flexWrap:4.2,alignContent:4.2,alignItems:4.2,alignSelf:4.2,justifyContent:4.2,order:4.2,transition:4.2,transitionDelay:4.2,transitionDuration:4.2,transitionProperty:4.2,transitionTimingFunction:4.2,transform:4.4,transformOrigin:4.4,transformOriginX:4.4,transformOriginY:4.4,backfaceVisibility:4.4,perspective:4.4,perspectiveOrigin:4.4,transformStyle:4.4,transformOriginZ:4.4,animation:4.4,animationDelay:4.4,animationDirection:4.4,animationFillMode:4.4,animationDuration:4.4,animationIterationCount:4.4,animationName:4.4,animationPlayState:4.4,animationTimingFunction:4.4,appearance:53,userSelect:53,fontKerning:4.4,textEmphasisPosition:53,textEmphasis:53,textEmphasisStyle:53,textEmphasisColor:53,boxDecorationBreak:53,clipPath:53,maskImage:53,maskMode:53,maskRepeat:53,maskPosition:53,maskClip:53,maskOrigin:53,maskSize:53,maskComposite:53,mask:53,maskBorderSource:53,maskBorderMode:53,maskBorderSlice:53,maskBorderWidth:53,maskBorderOutset:53,maskBorderRepeat:53,maskBorder:53,maskType:53,filter:4.4,fontFeatureSettings:4.4,breakAfter:53,breakBefore:53,breakInside:53,columnCount:53,columnFill:53,columnGap:53,columnRule:53,columnRuleColor:53,columnRuleStyle:53,columnRuleWidth:53,columns:53,columnSpan:53,columnWidth:53},and_chr:{appearance:56,textEmphasisPosition:56,textEmphasis:56,textEmphasisStyle:56,textEmphasisColor:56,boxDecorationBreak:56,maskImage:56,maskMode:56,maskRepeat:56,maskPosition:56,maskClip:56,maskOrigin:56,maskSize:56,maskComposite:56,mask:56,maskBorderSource:56,maskBorderMode:56,maskBorderSlice:56,maskBorderWidth:56,maskBorderOutset:56,maskBorderRepeat:56,maskBorder:56,maskType:56,textDecorationStyle:56,textDecorationSkip:56,textDecorationLine:56,textDecorationColor:56},and_uc:{flex:11,flexBasis:11,flexDirection:11,flexGrow:11,flexFlow:11,flexShrink:11,flexWrap:11,alignContent:11,alignItems:11,alignSelf:11,justifyContent:11,order:11,transition:11,transitionDelay:11,transitionDuration:11,transitionProperty:11,transitionTimingFunction:11,transform:11,transformOrigin:11,transformOriginX:11,transformOriginY:11,backfaceVisibility:11,perspective:11,perspectiveOrigin:11,transformStyle:11,transformOriginZ:11,animation:11,animationDelay:11,animationDirection:11,animationFillMode:11,animationDuration:11,animationIterationCount:11,animationName:11,animationPlayState:11,animationTimingFunction:11,appearance:11,userSelect:11,fontKerning:11,textEmphasisPosition:11,textEmphasis:11,textEmphasisStyle:11,textEmphasisColor:11,maskImage:11,maskMode:11,maskRepeat:11,maskPosition:11,maskClip:11,maskOrigin:11,maskSize:11,maskComposite:11,mask:11,maskBorderSource:11,maskBorderMode:11,maskBorderSlice:11,maskBorderWidth:11,maskBorderOutset:11,maskBorderRepeat:11,maskBorder:11,maskType:11,textSizeAdjust:11,filter:11,hyphens:11,flowInto:11,flowFrom:11,breakBefore:11,breakAfter:11,breakInside:11,regionFragment:11,fontFeatureSettings:11,columnCount:11,columnFill:11,columnGap:11,columnRule:11,columnRuleColor:11,columnRuleStyle:11,columnRuleWidth:11,columns:11,columnSpan:11,columnWidth:11},op_mini:{}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r.browserName,a=r.browserVersion,s=r.cssPrefix,u=r.keepUnprefixed;if("string"===typeof t&&t.indexOf("calc(")>-1&&("firefox"===i&&a<15||"chrome"===i&&a<25||"safari"===i&&a<6.1||"ios_saf"===i&&a<7))return(0,o.default)(t.replace(/calc\(/g,s+"calc("),t,u)};var r,i=n(77),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r.browserName,s=r.browserVersion,u=r.cssPrefix,c=r.keepUnprefixed;if("display"===e&&a[t]&&("chrome"===i&&s<29&&s>20||("safari"===i||"ios_saf"===i)&&s<9&&s>6||"opera"===i&&(15===s||16===s)))return(0,o.default)(u+t,t,c)};var r,i=n(77),o=(r=i)&&r.__esModule?r:{default:r};var a={flex:!0,"inline-flex":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r.browserName,u=r.browserVersion,c=r.cssPrefix,l=r.keepUnprefixed,h=r.requiresPrefix;if((s.hasOwnProperty(e)||"display"===e&&"string"===typeof t&&t.indexOf("flex")>-1)&&("ie_mob"===i||"ie"===i)&&10===u){if(delete h[e],l||Array.isArray(n[e])||delete n[e],"display"===e&&a.hasOwnProperty(t))return(0,o.default)(c+a[t],t,l);s.hasOwnProperty(e)&&(n[s[e]]=a[t]||t)}};var r,i=n(77),o=(r=i)&&r.__esModule?r:{default:r};var a={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end",flex:"flexbox","inline-flex":"inline-flexbox"},s={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r.browserName,c=r.browserVersion,l=r.cssPrefix,h=r.keepUnprefixed,f=r.requiresPrefix;if((u.indexOf(e)>-1||"display"===e&&"string"===typeof t&&t.indexOf("flex")>-1)&&("firefox"===i&&c<22||"chrome"===i&&c<21||("safari"===i||"ios_saf"===i)&&c<=6.1||"android"===i&&c<4.4||"and_uc"===i)){if(delete f[e],h||Array.isArray(n[e])||delete n[e],"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),"display"===e&&a.hasOwnProperty(t))return(0,o.default)(l+a[t],t,h);s.hasOwnProperty(e)&&(n[s[e]]=a[t]||t)}};var r,i=n(77),o=(r=i)&&r.__esModule?r:{default:r};var a={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple",flex:"box","inline-flex":"inline-box"},s={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"},u=Object.keys(s).concat(["alignContent","alignSelf","order","flexGrow","flexShrink","flexBasis","flexDirection"]);e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r.browserName,s=r.browserVersion,u=r.cssPrefix,c=r.keepUnprefixed;if("string"===typeof t&&a.test(t)&&("firefox"===i&&s<16||"chrome"===i&&s<26||("safari"===i||"ios_saf"===i)&&s<7||("opera"===i||"op_mini"===i)&&s<12.1||"android"===i&&s<4.4||"and_uc"===i))return(0,o.default)(u+t,t,c)};var r,i=n(77),o=(r=i)&&r.__esModule?r:{default:r};var a=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r.cssPrefix,u=r.keepUnprefixed;if(a.hasOwnProperty(e)&&s.hasOwnProperty(t))return(0,o.default)(i+t,t,u)};var r,i=n(77),o=(r=i)&&r.__esModule?r:{default:r};var a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},s={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=r.cssPrefix,u=r.keepUnprefixed,c=r.requiresPrefix;if("string"===typeof t&&a.hasOwnProperty(e)){s||(s=Object.keys(c).map((function(e){return(0,o.default)(e)})));var l=t.split(/,(?![^()]*(?:\([^()]*\))?\))/g);return s.forEach((function(e){l.forEach((function(t,n){t.indexOf(e)>-1&&"order"!==e&&(l[n]=t.replace(e,i+e)+(u?","+t:""))}))})),l.join(",")}};var r,i=n(279),o=(r=i)&&r.__esModule?r:{default:r};var a={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},s=void 0;e.exports=t.default},function(e,t,n){"use strict";n.r(t);var r=/[A-Z]/g,i=/^ms-/,o={};function a(e){return"-"+e.toLowerCase()}t.default=function(e){if(o.hasOwnProperty(e))return o[e];var t=e.replace(r,a);return o[e]=i.test(t)?"-"+t:t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(539)),i=l(n(540)),o=l(n(541)),a=l(n(542)),s=l(n(543)),u=l(n(544)),c=l(n(545));function l(e){return e&&e.__esModule?e:{default:e}}t.default={plugins:[r.default,i.default,o.default,a.default,s.default,u.default,c.default],prefixMap:{transform:["Webkit","ms"],transformOrigin:["Webkit","ms"],transformOriginX:["Webkit","ms"],transformOriginY:["Webkit","ms"],backfaceVisibility:["Webkit"],perspective:["Webkit"],perspectiveOrigin:["Webkit"],transformStyle:["Webkit"],transformOriginZ:["Webkit"],animation:["Webkit"],animationDelay:["Webkit"],animationDirection:["Webkit"],animationFillMode:["Webkit"],animationDuration:["Webkit"],animationIterationCount:["Webkit"],animationName:["Webkit"],animationPlayState:["Webkit"],animationTimingFunction:["Webkit"],appearance:["Webkit","Moz"],userSelect:["Webkit","Moz","ms"],fontKerning:["Webkit"],textEmphasisPosition:["Webkit"],textEmphasis:["Webkit"],textEmphasisStyle:["Webkit"],textEmphasisColor:["Webkit"],boxDecorationBreak:["Webkit"],clipPath:["Webkit"],maskImage:["Webkit"],maskMode:["Webkit"],maskRepeat:["Webkit"],maskPosition:["Webkit"],maskClip:["Webkit"],maskOrigin:["Webkit"],maskSize:["Webkit"],maskComposite:["Webkit"],mask:["Webkit"],maskBorderSource:["Webkit"],maskBorderMode:["Webkit"],maskBorderSlice:["Webkit"],maskBorderWidth:["Webkit"],maskBorderOutset:["Webkit"],maskBorderRepeat:["Webkit"],maskBorder:["Webkit"],maskType:["Webkit"],textDecorationStyle:["Webkit","Moz"],textDecorationSkip:["Webkit","Moz"],textDecorationLine:["Webkit","Moz"],textDecorationColor:["Webkit","Moz"],filter:["Webkit"],fontFeatureSettings:["Webkit","Moz"],breakAfter:["Webkit","Moz","ms"],breakBefore:["Webkit","Moz","ms"],breakInside:["Webkit","Moz","ms"],columnCount:["Webkit","Moz"],columnFill:["Webkit","Moz"],columnGap:["Webkit","Moz"],columnRule:["Webkit","Moz"],columnRuleColor:["Webkit","Moz"],columnRuleStyle:["Webkit","Moz"],columnRuleWidth:["Webkit","Moz"],columns:["Webkit","Moz"],columnSpan:["Webkit","Moz"],columnWidth:["Webkit","Moz"],flex:["Webkit","ms"],flexBasis:["Webkit"],flexDirection:["Webkit","ms"],flexGrow:["Webkit"],flexFlow:["Webkit","ms"],flexShrink:["Webkit"],flexWrap:["Webkit","ms"],alignContent:["Webkit"],alignItems:["Webkit"],alignSelf:["Webkit"],justifyContent:["Webkit"],order:["Webkit"],transitionDelay:["Webkit"],transitionDuration:["Webkit"],transitionProperty:["Webkit"],transitionTimingFunction:["Webkit"],backdropFilter:["Webkit"],scrollSnapType:["Webkit","ms"],scrollSnapPointsX:["Webkit","ms"],scrollSnapPointsY:["Webkit","ms"],scrollSnapDestination:["Webkit","ms"],scrollSnapCoordinate:["Webkit","ms"],shapeImageThreshold:["Webkit"],shapeImageMargin:["Webkit"],shapeImageOutside:["Webkit"],hyphens:["Webkit","Moz","ms"],flowInto:["Webkit","ms"],flowFrom:["Webkit","ms"],regionFragment:["Webkit","ms"],boxSizing:["Moz"],textAlignLast:["Moz"],tabSize:["Moz"],wrapFlow:["ms"],wrapThrough:["ms"],wrapMargin:["ms"],touchAction:["ms"],gridTemplateColumns:["ms"],gridTemplateRows:["ms"],gridTemplateAreas:["ms"],gridTemplate:["ms"],gridAutoColumns:["ms"],gridAutoRows:["ms"],gridAutoFlow:["ms"],grid:["ms"],gridRowStart:["ms"],gridColumnStart:["ms"],gridRowEnd:["ms"],gridRow:["ms"],gridColumn:["ms"],gridColumnEnd:["ms"],gridColumnGap:["ms"],gridRowGap:["ms"],gridArea:["ms"],gridGap:["ms"],textSizeAdjust:["Webkit","ms"],borderImage:["Webkit"],borderImageOutset:["Webkit"],borderImageRepeat:["Webkit"],borderImageSlice:["Webkit"],borderImageSource:["Webkit"],borderImageWidth:["Webkit"]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,o.default)(t)&&t.indexOf("calc(")>-1)return a.map((function(e){return t.replace(/calc\(/g,e+"calc(")}))};var r,i=n(188),o=(r=i)&&r.__esModule?r:{default:r};var a=["-webkit-","-moz-",""];e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("display"===e&&r.hasOwnProperty(t))return r[t]};var r={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){i.hasOwnProperty(e)&&(n[i[e]]=r[t]||t)};var r={"space-around":"distribute","space-between":"justify","flex-start":"start","flex-end":"end"},i={alignContent:"msFlexLinePack",alignSelf:"msFlexItemAlign",alignItems:"msFlexAlign",justifyContent:"msFlexPack",order:"msFlexOrder",flexGrow:"msFlexPositive",flexShrink:"msFlexNegative",flexBasis:"msFlexPreferredSize"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal");i.hasOwnProperty(e)&&(n[i[e]]=r[t]||t)};var r={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},i={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof t&&!(0,o.default)(t)&&s.test(t))return a.map((function(e){return e+t}))};var r,i=n(188),o=(r=i)&&r.__esModule?r:{default:r};var a=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(i.hasOwnProperty(e)&&o.hasOwnProperty(t))return r.map((function(e){return e+t}))};var r=["-webkit-","-moz-",""],i={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},o={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){if("string"===typeof t&&s.hasOwnProperty(e)){var c=function(e,t){if((0,i.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),o=0,a=n.length;o<a;++o){var s=n[o],c=[s];for(var l in t){var h=(0,r.default)(l);if(s.indexOf(h)>-1&&"order"!==h)for(var f=t[l],d=0,p=f.length;d<p;++d)c.unshift(s.replace(h,u[f[d]]+h))}n[o]=c.join(",")}return n.join(",")}(t,a),l=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-moz-|-ms-/.test(e)})).join(",");if(e.indexOf("Webkit")>-1)return l;var h=c.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter((function(e){return!/-webkit-|-ms-/.test(e)})).join(",");return e.indexOf("Moz")>-1?h:(n["Webkit"+(0,o.default)(e)]=l,n["Moz"+(0,o.default)(e)]=h,c)}};var r=a(n(279)),i=a(n(188)),o=a(n(187));function a(e){return e&&e.__esModule?e:{default:e}}var s={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},u={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0};var r,i=n(65);(r=i)&&r.__esModule},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(548),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){if(e.isRtl)return function(e){if(!0===e.directionInvariant)return e;var t={right:"left",left:"right",marginRight:"marginLeft",marginLeft:"marginRight",paddingRight:"paddingLeft",paddingLeft:"paddingRight",borderRight:"borderLeft",borderLeft:"borderRight"},n={};return(0,o.default)(e).forEach((function(r){var i=e[r],o=r;switch(t.hasOwnProperty(r)&&(o=t[r]),r){case"float":case"textAlign":"right"===i?i="left":"left"===i&&(i="right");break;case"direction":"ltr"===i?i="rtl":"rtl"===i&&(i="ltr");break;case"transform":if(!i)break;var u=void 0;(u=i.match(a))&&(i=i.replace(u[0],u[1]+-parseFloat(u[4]))),(u=i.match(s))&&(i=i.replace(u[0],u[1]+-parseFloat(u[4])+u[5]+u[6]?", "+(-parseFloat(u[7])+u[8]):""));break;case"transformOrigin":if(!i)break;i.indexOf("right")>-1?i=i.replace("right","left"):i.indexOf("left")>-1&&(i=i.replace("left","right"))}n[o]=i})),n}};var a=/((^|\s)translate(3d|X)?\()(\-?[\d]+)/,s=/((^|\s)skew(x|y)?\()\s*(\-?[\d]+)(deg|rad|grad)(,\s*(\-?[\d]+)(deg|rad|grad))?/},function(e,t,n){e.exports={default:n(549),__esModule:!0}},function(e,t,n){n(550),e.exports=n(33).Object.keys},function(e,t,n){var r=n(71),i=n(94);n(262)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return function(e){return e};if(1===t.length)return t[0];return t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(15),o=(r=i)&&r.__esModule?r:{default:r},a=n(186);t.default=new function e(){(0,o.default)(this,e),this.textFullBlack=a.fullBlack,this.textDarkBlack=a.darkBlack,this.textLightBlack=a.lightBlack,this.textMinBlack=a.minBlack,this.textFullWhite=a.fullWhite,this.textDarkWhite=a.darkWhite,this.textLightWhite=a.lightWhite,this.fontWeightLight=300,this.fontWeightNormal=400,this.fontWeightMedium=500,this.fontStyleButtonFontSize=14}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=w(n(21)),i=w(n(22)),o=w(n(17)),a=w(n(15)),s=w(n(18)),u=w(n(19)),c=w(n(20)),l=w(n(14)),h=n(0),f=w(h),d=w(n(3)),p=w(n(46)),m=w(n(95)),v=w(n(25)),g=w(n(559)),y=w(n(571)),b=w(n(572)),_=w(n(573));w(n(65));function w(e){return e&&e.__esModule?e:{default:e}}function x(e){return""!==e&&void 0!==e&&null!==e&&!(Array.isArray(e)&&0===e.length)}var T=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={isFocused:!1,errorText:void 0,hasValue:!1},r.handleInputBlur=function(e){r.setState({isFocused:!1}),r.props.onBlur&&r.props.onBlur(e)},r.handleInputChange=function(e){r.props.hasOwnProperty("value")||r.setState({hasValue:x(e.target.value)}),r.props.onChange&&r.props.onChange(e,e.target.value)},r.handleInputFocus=function(e){r.props.disabled||(r.setState({isFocused:!0}),r.props.onFocus&&r.props.onFocus(e))},r.handleHeightChange=function(e,t){var n=t+24;r.props.floatingLabelText&&(n+=24),p.default.findDOMNode(r).style.height=n+"px"},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.children,n=e.name,r=e.hintText,i=e.floatingLabelText,o=(e.id,t?t.props:this.props);this.setState({errorText:this.props.errorText,hasValue:x(o.value)||x(o.defaultValue)});var a=n+"-"+r+"-"+i+"-"+Math.floor(65535*Math.random());this.uniqueId=a.replace(/[^A-Za-z0-9-]/gi,"")}},{key:"componentWillReceiveProps",value:function(e){if(e.disabled&&!this.props.disabled&&this.setState({isFocused:!1}),e.errorText!==this.props.errorText&&this.setState({errorText:e.errorText}),e.children&&e.children.props&&(e=e.children.props),e.hasOwnProperty("value")){var t=x(e.value);this.setState({hasValue:t})}}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,m.default)(this.props,e)||!(0,m.default)(this.state,t)||!(0,m.default)(this.context,n)}},{key:"blur",value:function(){this.input&&this.getInputNode().blur()}},{key:"focus",value:function(){this.input&&this.getInputNode().focus()}},{key:"select",value:function(){this.input&&this.getInputNode().select()}},{key:"getValue",value:function(){return this.input?this.getInputNode().value:void 0}},{key:"getInputNode",value:function(){return this.props.children||this.props.multiLine?this.input.getInputNode():p.default.findDOMNode(this.input)}},{key:"_isControlled",value:function(){return this.props.hasOwnProperty("value")}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,o=t.className,a=t.disabled,s=t.errorStyle,u=(t.errorText,t.floatingLabelFixed),c=t.floatingLabelFocusStyle,h=t.floatingLabelShrinkStyle,d=t.floatingLabelStyle,p=t.floatingLabelText,m=(t.fullWidth,t.hintText),w=t.hintStyle,x=t.id,T=t.inputStyle,S=t.multiLine,E=(t.onBlur,t.onChange,t.onFocus,t.style),M=t.type,C=t.underlineDisabledStyle,A=t.underlineFocusStyle,P=t.underlineShow,O=t.underlineStyle,k=t.rows,I=t.rowsMax,R=t.textareaStyle,D=(0,i.default)(t,["children","className","disabled","errorStyle","errorText","floatingLabelFixed","floatingLabelFocusStyle","floatingLabelShrinkStyle","floatingLabelStyle","floatingLabelText","fullWidth","hintText","hintStyle","id","inputStyle","multiLine","onBlur","onChange","onFocus","style","type","underlineDisabledStyle","underlineFocusStyle","underlineShow","underlineStyle","rows","rowsMax","textareaStyle"]),L=this.context.muiTheme.prepareStyles,N=function(e,t,n){var r=t.muiTheme,i=r.baseTheme,o=r.textField,a=o.floatingLabelColor,s=o.focusColor,u=o.textColor,c=o.disabledTextColor,h=o.backgroundColor,f=o.errorColor,d={root:{fontSize:16,lineHeight:"24px",width:e.fullWidth?"100%":256,height:24*(e.rows-1)+(e.floatingLabelText?72:48),display:"inline-block",position:"relative",backgroundColor:h,fontFamily:i.fontFamily,transition:v.default.easeOut("200ms","height"),cursor:e.disabled?"not-allowed":"auto"},error:{position:"relative",bottom:2,fontSize:12,lineHeight:"12px",color:f,transition:v.default.easeOut()},floatingLabel:{color:e.disabled?c:a,pointerEvents:"none"},input:{padding:0,position:"relative",width:"100%",border:"none",outline:"none",backgroundColor:"rgba(0,0,0,0)",color:e.disabled?c:u,cursor:"inherit",font:"inherit",WebkitOpacity:1,WebkitTapHighlightColor:"rgba(0,0,0,0)"},inputNative:{appearance:"textfield"}};return d.textarea=(0,l.default)({},d.input,{marginTop:e.floatingLabelText?36:12,marginBottom:e.floatingLabelText?-36:-12,boxSizing:"border-box",font:"inherit"}),d.input.height="100%",n.isFocused&&(d.floatingLabel.color=s),e.floatingLabelText&&(d.input.boxSizing="border-box",e.multiLine||(d.input.marginTop=14),n.errorText&&(d.error.bottom=e.multiLine?3:d.error.fontSize+3)),n.errorText&&n.isFocused&&(d.floatingLabel.color=d.error.color),d}(this.props,this.context,this.state),F=x||this.uniqueId,U=this.state.errorText&&f.default.createElement("div",{style:L((0,l.default)(N.error,s))},this.state.errorText),j=p&&f.default.createElement(b.default,{muiTheme:this.context.muiTheme,style:(0,l.default)(N.floatingLabel,d,this.state.isFocused?c:null),shrinkStyle:h,htmlFor:F,shrink:this.state.hasValue||this.state.isFocused||u,disabled:a},p),B={id:F,ref:function(t){return e.input=t},disabled:this.props.disabled,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onFocus:this.handleInputFocus},z=(0,l.default)(N.input,T),V=void 0;V=n?f.default.cloneElement(n,(0,r.default)({},B,n.props,{style:(0,l.default)(z,n.props.style)})):S?f.default.createElement(g.default,(0,r.default)({style:z,textareaStyle:(0,l.default)(N.textarea,N.inputNative,R),rows:k,rowsMax:I,hintText:m},D,B,{onHeightChange:this.handleHeightChange})):f.default.createElement("input",(0,r.default)({type:M,style:L((0,l.default)(N.inputNative,z))},D,B));var W={};return n&&(W=D),f.default.createElement("div",(0,r.default)({},W,{className:o,style:L((0,l.default)(N.root,E))}),j,m?f.default.createElement(y.default,{muiTheme:this.context.muiTheme,show:!(this.state.hasValue||p&&!this.state.isFocused)||!this.state.hasValue&&p&&u&&!this.state.isFocused,style:w,text:m}):null,V,P?f.default.createElement(_.default,{disabled:a,disabledStyle:C,error:!!this.state.errorText,errorStyle:s,focus:this.state.isFocused,focusStyle:A,muiTheme:this.context.muiTheme,style:O}):null,U)}}]),t}(h.Component);T.defaultProps={disabled:!1,floatingLabelFixed:!1,multiLine:!1,fullWidth:!1,type:"text",underlineShow:!0,rows:1},T.contextTypes={muiTheme:d.default.object.isRequired},T.propTypes={},t.default=T},function(e,t,n){e.exports={default:n(555),__esModule:!0}},function(e,t,n){n(556),e.exports=n(33).Object.assign},function(e,t,n){var r=n(52);r(r.S+r.F,"Object",{assign:n(557)})},function(e,t,n){"use strict";var r=n(54),i=n(94),o=n(185),a=n(120),s=n(71),u=n(270),c=Object.assign;e.exports=!c||n(75)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=s(e),c=arguments.length,l=1,h=o.f,f=a.f;c>l;)for(var d,p=u(arguments[l++]),m=h?i(p).concat(h(p)):i(p),v=m.length,g=0;v>g;)d=m[g++],r&&!f.call(p,d)||(n[d]=p[d]);return n}:c},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}e.exports=function(e,t){if(i(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!r.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=m(n(280));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={height:null},r.handleResize=function(e){r.syncHeightWithShadow(r.props.value,e)},r.handleChange=function(e){r.props.hasOwnProperty("value")||r.syncHeightWithShadow(e.target.value),r.props.hasOwnProperty("valueLink")&&r.props.valueLink.requestChange(e.target.value),r.props.onChange&&r.props.onChange(e)},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.setState({height:24*this.props.rows})}},{key:"componentDidMount",value:function(){this.syncHeightWithShadow(this.props.value)}},{key:"componentWillReceiveProps",value:function(e){e.value===this.props.value&&e.rowsMax===this.props.rowsMax||this.syncHeightWithShadow(e.value,null,e)}},{key:"getInputNode",value:function(){return this.refs.input}},{key:"setValue",value:function(e){this.getInputNode().value=e,this.syncHeightWithShadow(e)}},{key:"syncHeightWithShadow",value:function(e,t,n){var r=this.refs.shadow,i=!this.props.hintText||""!==e&&void 0!==e&&null!==e?e:this.props.hintText;void 0!==i&&(r.value=i);var o=r.scrollHeight;if(void 0!==o&&((n=n||this.props).rowsMax>=n.rows&&(o=Math.min(24*n.rowsMax,o)),o=Math.max(o,24),this.state.height!==o)){var a=this.refs.input,s=a.selectionEnd;this.setState({height:o},(function(){a.setSelectionRange(s,s)})),n.onHeightChange&&n.onHeightChange(t,o)}}},{key:"render",value:function(){var e=this.props,t=(e.onChange,e.onHeightChange,e.rows,e.rowsMax,e.shadowStyle),n=e.style,o=(e.hintText,e.textareaStyle),a=e.valueLink,s=(0,i.default)(e,["onChange","onHeightChange","rows","rowsMax","shadowStyle","style","hintText","textareaStyle","valueLink"]),u=this.context.muiTheme.prepareStyles,c=(this.props,this.context,{root:{position:"relative"},textarea:{height:this.state.height,width:"100%",resize:"none",font:"inherit",padding:0,cursor:"inherit"},shadow:{resize:"none",overflow:"hidden",visibility:"hidden",position:"absolute",height:"auto"}}),h=(0,l.default)(c.root,n),d=(0,l.default)(c.textarea,o),m=(0,l.default)({},d,c.shadow,t),v={};return this.props.hasOwnProperty("valueLink")&&(s.value=a.value,v.valueLink=a),f.default.createElement("div",{style:u(h)},f.default.createElement(p.default,{target:"window",onResize:this.handleResize}),f.default.createElement("textarea",(0,r.default)({ref:"shadow",style:u(m),tabIndex:"-1",rows:this.props.rows,defaultValue:this.props.defaultValue,readOnly:!0,value:this.props.value},v)),f.default.createElement("textarea",(0,r.default)({},s,{ref:"input",rows:this.props.rows,style:u(d),onChange:this.handleChange})))}}]),t}(h.Component);v.defaultProps={rows:1},v.contextTypes={muiTheme:d.default.object.isRequired},v.propTypes={},t.default=v},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){var r=n(281),i=n(563);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?i(e):t}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var r=n(566);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},function(e,t,n){var r=n(568);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(14)),i=a(n(0)),o=(a(n(3)),a(n(25)));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.muiTheme.prepareStyles,n=e.style,a=e.text,s=function(e){var t=e.muiTheme.textField.hintColor;return{root:{position:"absolute",opacity:e.show?1:0,color:t,transition:o.default.easeOut(),bottom:12}}}(e);return i.default.createElement("div",{style:t((0,r.default)(s.root,n))},a)};s.propTypes={},s.defaultProps={show:!0},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(14)),i=a(n(0)),o=(a(n(3)),a(n(25)));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.muiTheme,n=e.className,a=e.children,s=e.htmlFor,u=e.onClick,c=t.prepareStyles,l=function(e){var t={position:"absolute",lineHeight:"22px",top:38,transition:o.default.easeOut(),zIndex:1,transform:"scale(1) translate(0, 0)",transformOrigin:"left top",pointerEvents:"auto",userSelect:"none"},n=e.shrink?(0,r.default)({transform:"scale(0.75) translate(0, -28px)",pointerEvents:"none"},e.shrinkStyle):null;return{root:(0,r.default)(t,e.style,n)}}(e);return i.default.createElement("label",{className:n,style:c(l.root),htmlFor:s,onClick:u},a)};s.propTypes={},s.defaultProps={disabled:!1,shrink:!1},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(14)),i=s(n(0)),o=s(n(3)),a=s(n(25));function s(e){return e&&e.__esModule?e:{default:e}}o.default.bool,o.default.object,o.default.bool,o.default.object,o.default.bool,o.default.object,o.default.object.isRequired,o.default.object;var u=function(e){var t=e.disabled,n=e.disabledStyle,o=e.error,s=e.errorStyle,u=e.focus,c=e.focusStyle,l=e.muiTheme,h=e.style,f=s.color,d=l.prepareStyles,p=l.textField,m=p.borderColor,v=p.disabledTextColor,g=p.errorColor,y={root:{borderTop:"none",borderLeft:"none",borderRight:"none",borderBottomStyle:"solid",borderBottomWidth:1,borderColor:m,bottom:8,boxSizing:"content-box",margin:0,position:"absolute",width:"100%"},disabled:{borderBottomStyle:"dotted",borderBottomWidth:2,borderColor:v},focus:{borderBottomStyle:"solid",borderBottomWidth:2,borderColor:p.focusColor,transform:"scaleX(0)",transition:a.default.easeOut()},error:{borderColor:f||g,transform:"scaleX(1)"}},b=(0,r.default)({},y.root,h),_=(0,r.default)({},b,y.focus,c);return t&&(b=(0,r.default)({},b,y.disabled,n)),u&&(_=(0,r.default)({},_,{transform:"scaleX(1)"})),o&&(_=(0,r.default)({},_,y.error)),i.default.createElement("div",null,i.default.createElement("hr",{"aria-hidden":"true",style:d(b)}),i.default.createElement("hr",{"aria-hidden":"true",style:d(_)}))};u.propTypes={},u.defaultProps={disabled:!1,disabledStyle:{},error:!1,errorStyle:{},focus:!1,focusStyle:{},style:{}},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n(21)),i=_(n(22)),o=_(n(17)),a=_(n(15)),s=_(n(18)),u=_(n(19)),c=_(n(20)),l=_(n(14)),h=n(0),f=_(h),d=_(n(3)),p=_(n(280)),m=_(n(283)),v=_(n(25)),g=_(n(284)),y=_(n(286)),b=_(n(582));_(n(65));function _(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={isKeyboardFocused:!1},r.handleChange=function(e){r.tabPressed=!1,r.setState({isKeyboardFocused:!1});var t=r.refs.checkbox.checked;!r.props.hasOwnProperty("checked")&&r.props.onParentShouldUpdate&&r.props.onParentShouldUpdate(t),r.props.onSwitch&&r.props.onSwitch(e,t)},r.handleKeyDown=function(e){var t=(0,m.default)(e);"tab"===t&&(r.tabPressed=!0),r.state.isKeyboardFocused&&"space"===t&&r.handleChange(e)},r.handleKeyUp=function(e){r.state.isKeyboardFocused&&"space"===(0,m.default)(e)&&r.handleChange(e)},r.handleMouseDown=function(e){0===e.button&&r.refs.touchRipple.start(e)},r.handleMouseUp=function(){r.refs.touchRipple.end()},r.handleMouseLeave=function(){r.refs.touchRipple.end()},r.handleTouchStart=function(e){r.refs.touchRipple.start(e)},r.handleTouchEnd=function(){r.refs.touchRipple.end()},r.handleBlur=function(e){r.setState({isKeyboardFocused:!1}),r.props.onBlur&&r.props.onBlur(e)},r.handleFocus=function(e){setTimeout((function(){r.tabPressed&&r.setState({isKeyboardFocused:!0})}),150),r.props.onFocus&&r.props.onFocus(e)},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.componentWillReceiveProps(this.props)}},{key:"componentDidMount",value:function(){var e=this.refs.checkbox;this.props.switched&&e.checked===this.props.switched||!this.props.onParentShouldUpdate||this.props.onParentShouldUpdate(e.checked)}},{key:"componentWillReceiveProps",value:function(e){var t=e.hasOwnProperty("checked"),n=e.hasOwnProperty("defaultChecked")&&e.defaultChecked!==this.props.defaultChecked;if(t||n){var r=e.checked||e.defaultChecked||!1;this.setState({switched:r}),this.props.onParentShouldUpdate&&r!==this.props.switched&&this.props.onParentShouldUpdate(r)}}},{key:"isSwitched",value:function(){return this.refs.checkbox.checked}},{key:"setSwitched",value:function(e){this.props.hasOwnProperty("checked")&&!1!==this.props.checked||(this.props.onParentShouldUpdate&&this.props.onParentShouldUpdate(e),this.refs.checkbox.checked=e)}},{key:"getValue",value:function(){return this.refs.checkbox.value}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,o=(e.checked,e.iconStyle),a=e.inputStyle,s=e.inputType,u=e.label,c=e.labelStyle,h=e.labelPosition,d=(e.onSwitch,e.onBlur,e.onFocus,e.onMouseUp,e.onMouseDown,e.onMouseLeave,e.onTouchStart,e.onTouchEnd,e.onParentShouldUpdate,e.disabled),m=e.disableTouchRipple,_=e.disableFocusRipple,w=e.className,x=(e.rippleColor,e.rippleStyle),T=e.style,S=(e.switched,e.switchElement),E=e.thumbStyle,M=e.trackStyle,C=(0,i.default)(e,["name","value","checked","iconStyle","inputStyle","inputType","label","labelStyle","labelPosition","onSwitch","onBlur","onFocus","onMouseUp","onMouseDown","onMouseLeave","onTouchStart","onTouchEnd","onParentShouldUpdate","disabled","disableTouchRipple","disableFocusRipple","className","rippleColor","rippleStyle","style","switched","switchElement","thumbStyle","trackStyle"]),A=this.context.muiTheme.prepareStyles,P=function(e,t){var n=t.muiTheme.baseTheme;return{root:{cursor:e.disabled?"not-allowed":"pointer",position:"relative",overflow:"visible",display:"table",height:"auto",width:"100%"},input:{position:"absolute",cursor:"inherit",pointerEvents:"all",opacity:0,width:"100%",height:"100%",zIndex:2,left:0,boxSizing:"border-box",padding:0,margin:0},controls:{display:"flex",width:"100%",height:"100%"},label:{float:"left",position:"relative",display:"block",width:"calc(100% - 60px)",lineHeight:"24px",color:n.palette.textColor,fontFamily:n.fontFamily},wrap:{transition:v.default.easeOut(),float:"left",position:"relative",display:"block",flexShrink:0,width:60-n.spacing.desktopGutterLess,marginRight:"right"===e.labelPosition?n.spacing.desktopGutterLess:0,marginLeft:"left"===e.labelPosition?n.spacing.desktopGutterLess:0},ripple:{color:e.rippleColor||n.palette.primary1Color,height:"200%",width:"200%",top:-12,left:-12}}}(this.props,this.context),O=(0,l.default)(P.wrap,o),k=(0,l.default)(P.ripple,x);E&&(O.marginLeft/=2,O.marginRight/=2);var I=u&&f.default.createElement("label",{style:A((0,l.default)(P.label,c))},u),R=!d&&!m,D=!d&&!_,L=f.default.createElement(y.default,{ref:"touchRipple",key:"touchRipple",style:k,color:k.color,muiTheme:this.context.muiTheme,centerRipple:!0}),N=f.default.createElement(g.default,{key:"focusRipple",innerStyle:k,color:k.color,muiTheme:this.context.muiTheme,show:this.state.isKeyboardFocused}),F=[R?L:null,D?N:null],U=R?{onMouseUp:this.handleMouseUp,onMouseDown:this.handleMouseDown,onMouseLeave:this.handleMouseLeave,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}:{},j=f.default.createElement("input",(0,r.default)({},C,{ref:"checkbox",type:s,style:A((0,l.default)(P.input,a)),name:t,value:n,checked:this.state.switched,disabled:d,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange},U)),B=E?f.default.createElement("div",{style:A(O)},f.default.createElement("div",{style:A((0,l.default)({},M))}),f.default.createElement(b.default,{style:E,zDepth:1,circle:!0}," ",F," ")):f.default.createElement("div",{style:A(O)},S,F),z="right"===h?f.default.createElement("div",{style:P.controls},B,I):f.default.createElement("div",{style:P.controls},I,B);return f.default.createElement("div",{ref:"root",className:w,style:A((0,l.default)(P.root,T))},f.default.createElement(p.default,{target:"window",onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp}),j,z)}}]),t}(h.Component);w.contextTypes={muiTheme:d.default.object.isRequired},w.propTypes={},t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(21)),i=v(n(22)),o=v(n(17)),a=v(n(15)),s=v(n(18)),u=v(n(19)),c=v(n(20)),l=v(n(14)),h=n(0),f=v(h),d=v(n(3)),p=v(n(285)),m=v(n(578));function v(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.childStyle,o=e.enterDelay,a=e.maxScale,s=e.minScale,u=e.style,c=(0,i.default)(e,["children","childStyle","enterDelay","maxScale","minScale","style"]),h=this.context.muiTheme.prepareStyles,d=(0,l.default)({},{position:"relative",height:"100%"},u),v=f.default.Children.map(t,(function(e){return f.default.createElement(m.default,{key:e.key,enterDelay:o,maxScale:a,minScale:s,style:n},e)}));return f.default.createElement(p.default,(0,r.default)({},c,{style:h(d),component:"div"}),v)}}]),t}(h.Component);g.defaultProps={enterDelay:0},g.contextTypes={muiTheme:d.default.object.isRequired},g.propTypes={},t.default=g},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,(function(e){return e})).forEach((function(e){t[e.key]=e})),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},i=[];for(var o in e)t.hasOwnProperty(o)?i.length&&(r[o]=i,i=[]):i.push(o);var a=void 0,s={};for(var u in t){if(r.hasOwnProperty(u))for(a=0;a<r[u].length;a++){var c=r[u][a];s[r[u][a]]=n(c)}s[u]=n(u)}for(a=0;a<i.length;a++)s[i[a]]=n(i[a]);return s};var r=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(21)),i=g(n(22)),o=g(n(17)),a=g(n(15)),s=g(n(18)),u=g(n(19)),c=g(n(20)),l=g(n(14)),h=n(0),f=g(h),d=g(n(3)),p=g(n(46)),m=g(n(189)),v=g(n(25));function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.enterTimer),clearTimeout(this.leaveTimer)}},{key:"componentWillAppear",value:function(e){this.initializeAnimation(e)}},{key:"componentWillEnter",value:function(e){this.initializeAnimation(e)}},{key:"componentDidAppear",value:function(){this.animate()}},{key:"componentDidEnter",value:function(){this.animate()}},{key:"componentWillLeave",value:function(e){var t=p.default.findDOMNode(this).style;t.opacity="0",m.default.set(t,"transform","scale("+this.props.minScale+")"),this.leaveTimer=setTimeout(e,450)}},{key:"animate",value:function(){var e=p.default.findDOMNode(this).style;e.opacity="1",m.default.set(e,"transform","scale("+this.props.maxScale+")")}},{key:"initializeAnimation",value:function(e){var t=p.default.findDOMNode(this).style;t.opacity="0",m.default.set(t,"transform","scale(0)"),this.enterTimer=setTimeout(e,this.props.enterDelay)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.enterDelay,e.maxScale,e.minScale,e.style),o=(0,i.default)(e,["children","enterDelay","maxScale","minScale","style"]),a=this.context.muiTheme.prepareStyles,s=(0,l.default)({},{position:"absolute",height:"100%",width:"100%",top:0,left:0,transition:v.default.easeOut(null,["transform","opacity"])},n);return f.default.createElement("div",(0,r.default)({},o,{style:a(s)}),t)}}]),t}(h.Component);y.defaultProps={enterDelay:0,maxScale:1,minScale:0},y.contextTypes={muiTheme:d.default.object.isRequired},y.propTypes={},t.default=y},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(275),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return Array.isArray(e)?e:(0,o.default)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={isDescendant:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},offset:function(e){var t=e.getBoundingClientRect();return{top:t.top+document.body.scrollTop,left:t.left+document.body.scrollLeft}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(21)),i=y(n(22)),o=y(n(17)),a=y(n(15)),s=y(n(18)),u=y(n(19)),c=y(n(20)),l=y(n(14)),h=n(0),f=y(h),d=y(n(3)),p=y(n(46)),m=y(n(95)),v=y(n(189)),g=y(n(25));function y(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"shouldComponentUpdate",value:function(e){return!(0,m.default)(this.props,e)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.enterTimer),clearTimeout(this.leaveTimer)}},{key:"componentWillAppear",value:function(e){this.initializeAnimation(e)}},{key:"componentWillEnter",value:function(e){this.initializeAnimation(e)}},{key:"componentDidAppear",value:function(){this.animate()}},{key:"componentDidEnter",value:function(){this.animate()}},{key:"componentWillLeave",value:function(e){p.default.findDOMNode(this).style.opacity=0;var t=this.props.aborted?0:2e3;this.enterTimer=setTimeout(e,t)}},{key:"animate",value:function(){var e=p.default.findDOMNode(this).style,t=g.default.easeOut("2s","opacity")+", "+g.default.easeOut("1s","transform");v.default.set(e,"transition",t),v.default.set(e,"transform","scale(1)")}},{key:"initializeAnimation",value:function(e){var t=p.default.findDOMNode(this).style;t.opacity=this.props.opacity,v.default.set(t,"transform","scale(0)"),this.leaveTimer=setTimeout(e,0)}},{key:"render",value:function(){var e=this.props,t=(e.aborted,e.color),n=(e.opacity,e.style),o=(e.touchGenerated,(0,i.default)(e,["aborted","color","opacity","style","touchGenerated"])),a=this.context.muiTheme.prepareStyles,s=(0,l.default)({position:"absolute",top:0,left:0,height:"100%",width:"100%",borderRadius:"50%",backgroundColor:t},n);return f.default.createElement("div",(0,r.default)({},o,{style:a(s)}))}}]),t}(h.Component);b.defaultProps={opacity:.1,aborted:!1},b.contextTypes={muiTheme:d.default.object.isRequired},b.propTypes={},t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(583),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=(m(n(287)),m(n(25)));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=(e.circle,e.rounded,e.style),o=(e.transitionEnabled,e.zDepth,(0,i.default)(e,["children","circle","rounded","style","transitionEnabled","zDepth"])),a=this.context.muiTheme.prepareStyles,s=function(e,t){var n=e.rounded,r=e.circle,i=e.transitionEnabled,o=e.zDepth,a=t.muiTheme,s=a.baseTheme,u=a.paper,c=a.borderRadius;return{root:{color:u.color,backgroundColor:u.backgroundColor,transition:i&&p.default.easeOut(),boxSizing:"border-box",fontFamily:s.fontFamily,WebkitTapHighlightColor:"rgba(0,0,0,0)",boxShadow:u.zDepthShadows[o-1],borderRadius:r?"50%":n?c:"0px"}}}(this.props,this.context);return f.default.createElement("div",(0,r.default)({},o,{style:a((0,l.default)(s.root,n))}),t)}}]),t}(h.Component);v.defaultProps={circle:!1,rounded:!0,transitionEnabled:!0,zDepth:1},v.contextTypes={muiTheme:d.default.object.isRequired},v.propTypes={},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(122)),o=a(n(123));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return r.default.createElement(o.default,e,r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))};(s=(0,i.default)(s)).displayName="ToggleRadioButtonUnchecked",s.muiName="SvgIcon",t.default=s},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0);i(n(288)),i(n(289));function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}t.default=function(e){return function(t){var n=(0,r.createFactory)(t);return function(t){function r(){return o(this,r),a(this,t.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},r.prototype.render=function(){return n(this.props)},r}(r.Component)}}},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e,t){return function(n){return n[e]=t,n}}},function(e,t,n){"use strict";t.__esModule=!0;t.default=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=m(n(25));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={hovered:!1},r.handleMouseLeave=function(e){r.setState({hovered:!1}),r.props.onMouseLeave(e)},r.handleMouseEnter=function(e){r.setState({hovered:!0}),r.props.onMouseEnter(e)},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.color,o=e.hoverColor,a=(e.onMouseEnter,e.onMouseLeave,e.style),s=e.viewBox,u=(0,i.default)(e,["children","color","hoverColor","onMouseEnter","onMouseLeave","style","viewBox"]),c=this.context.muiTheme,h=c.svgIcon,d=c.prepareStyles,m=n||"currentColor",v=o||m,g=(0,l.default)({display:"inline-block",color:h.color,fill:this.state.hovered?v:m,height:24,width:24,userSelect:"none",transition:p.default.easeOut()},a);return f.default.createElement("svg",(0,r.default)({},u,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,style:d(g),viewBox:s}),t)}}]),t}(h.Component);v.muiName="SvgIcon",v.defaultProps={onMouseEnter:function(){},onMouseLeave:function(){},viewBox:"0 0 24 24"},v.contextTypes={muiTheme:d.default.object.isRequired},v.propTypes={},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(122)),o=a(n(123));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return r.default.createElement(o.default,e,r.default.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))};(s=(0,i.default)(s)).displayName="ToggleRadioButtonChecked",s.muiName="SvgIcon",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=m(n(282));m(n(65));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={numberCheckedRadioButtons:0,selected:""},r.handleChange=function(e,t){r.updateRadioButtons(t),0===r.state.numberCheckedRadioButtons&&r.props.onChange&&r.props.onChange(e,t)},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=0,n="",r=this.props,i=r.valueSelected,o=r.defaultSelected;void 0!==i?n=i:void 0!==o&&(n=o),f.default.Children.forEach(this.props.children,(function(n){e.hasCheckAttribute(n)&&t++}),this),this.setState({numberCheckedRadioButtons:t,selected:n})}},{key:"componentWillReceiveProps",value:function(e){e.hasOwnProperty("valueSelected")&&this.setState({selected:e.valueSelected})}},{key:"hasCheckAttribute",value:function(e){return e.props.hasOwnProperty("checked")&&e.props.checked}},{key:"updateRadioButtons",value:function(e){0===this.state.numberCheckedRadioButtons&&this.setState({selected:e})}},{key:"getSelectedValue",value:function(){return this.state.selected}},{key:"setSelectedValue",value:function(e){this.updateRadioButtons(e)}},{key:"clearValue",value:function(){this.setSelectedValue("")}},{key:"render",value:function(){var e=this,t=this.context.muiTheme.prepareStyles,n=f.default.Children.map(this.props.children,(function(t){var n=t.props,o=(n.name,n.value,n.label,n.onCheck,(0,i.default)(n,["name","value","label","onCheck"]));return f.default.createElement(p.default,(0,r.default)({},o,{ref:t.props.value,name:e.props.name,key:t.props.value,value:t.props.value,label:t.props.label,labelPosition:e.props.labelPosition,onCheck:e.handleChange,checked:t.props.value===e.state.selected}))}),this);return f.default.createElement("div",{style:t((0,l.default)({},this.props.style)),className:this.props.className},n)}}]),t}(h.Component);v.defaultProps={style:{}},v.contextTypes={muiTheme:d.default.object.isRequired},v.propTypes={},t.default=v},function(e,t,n){"use strict";e.exports=function(e){var t,n;!function(){var r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame;r&&i?(t=function(e,t){var n={value:null};return function t(){n.value=r(t),e()}(),n},n=function(e){i(e.value)}):(t=setInterval,n=clearInterval)}();var r=2*Math.PI,i=2/Math.sqrt(2);function o(e,t,n,r,i){e.beginPath(),e.moveTo(t,n),e.lineTo(r,i),e.stroke()}function a(e,t,n,i,o,a,s,u){var c=Math.cos(t*r);!function(e,t,n,i){e.beginPath(),e.arc(t,n,i,0,r,!1),e.fill()}(e,n-Math.sin(t*r)*o,i+c*a+.5*(u-=s),s+(1-.5*c)*u)}function s(e,t,n,r,i,o,s,u){var c;for(c=5;c--;)a(e,t+c/5,n,r,i,o,s,u)}function u(e,t,n,r,i,o,a){t/=3e4;var u=.21*i,c=.12*i,l=.24*i,h=.28*i;e.fillStyle=a,s(e,t,n,r,u,c,l,h),e.globalCompositeOperation="destination-out",s(e,t,n,r,u,c,l-o,h-o),e.globalCompositeOperation="source-over"}function c(e,t,n,i,a,s,u){t/=12e4;var c,l,h,f,d=.25*a-.5*s,p=.32*a+.5*s,m=.5*a-.5*s;for(e.strokeStyle=u,e.lineWidth=s,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.arc(n,i,d,0,r,!1),e.stroke(),c=8;c--;)l=(t+c/8)*r,o(e,n+(h=Math.cos(l))*p,i+(f=Math.sin(l))*p,n+h*m,i+f*m)}function l(e,t,n,o,a,s,u){t/=15e3;var c=.29*a-.5*s,l=.05*a,h=Math.cos(t*r),f=h*r/-16;e.strokeStyle=u,e.lineWidth=s,e.lineCap="round",e.lineJoin="round",n+=h*l,e.beginPath(),e.arc(n,o,c,f+r/8,f+7*r/8,!1),e.arc(n+Math.cos(f)*c*i,o+Math.sin(f)*c*i,c,f+5*r/8,f+3*r/8,!0),e.closePath(),e.stroke()}var h=[[-.75,-.18,-.7219,-.1527,-.6971,-.1225,-.6739,-.091,-.6516,-.0588,-.6298,-.0262,-.6083,.0065,-.5868,.0396,-.5643,.0731,-.5372,.1041,-.5033,.1259,-.4662,.1406,-.4275,.1493,-.3881,.153,-.3487,.1526,-.3095,.1488,-.2708,.1421,-.2319,.1342,-.1943,.1217,-.16,.1025,-.129,.0785,-.1012,.0509,-.0764,.0206,-.0547,-.012,-.0378,-.0472,-.0324,-.0857,-.0389,-.1241,-.0546,-.1599,-.0814,-.1876,-.1193,-.1964,-.1582,-.1935,-.1931,-.1769,-.2157,-.1453,-.229,-.1085,-.2327,-.0697,-.224,-.0317,-.2064,.0033,-.1853,.0362,-.1613,.0672,-.135,.0961,-.1051,.1213,-.0706,.1397,-.0332,.1512,.0053,.158,.0442,.1624,.0833,.1636,.1224,.1615,.1613,.1565,.1999,.15,.2378,.1402,.2749,.1279,.3118,.1147,.3487,.1015,.3858,.0892,.4236,.0787,.4621,.0715,.5012,.0702,.5398,.0766,.5768,.089,.6123,.1055,.6466,.1244,.6805,.144,.7147,.163,.75,.18],[-.75,0,-.7033,.0195,-.6569,.0399,-.6104,.06,-.5634,.0789,-.5155,.0954,-.4667,.1089,-.4174,.1206,-.3676,.1299,-.3174,.1365,-.2669,.1398,-.2162,.1391,-.1658,.1347,-.1157,.1271,-.0661,.1169,-.017,.1046,.0316,.0903,.0791,.0728,.1259,.0534,.1723,.0331,.2188,.0129,.2656,-.0064,.3122,-.0263,.3586,-.0466,.4052,-.0665,.4525,-.0847,.5007,-.1002,.5497,-.113,.5991,-.124,.6491,-.1325,.6994,-.138,.75,-.14]],f=[{start:.36,end:.11},{start:.56,end:.16}];function d(e,t,n,i,o,a,s,u,c){var l,d,p,m,v=h[s],g=((t/=2500)+s-f[s].start)%u,y=(t+s-f[s].end)%u,b=(t+s)%u;if(e.strokeStyle=c,e.lineWidth=a,e.lineCap="round",e.lineJoin="round",g<1){if(e.beginPath(),g*=v.length/2-1,g-=l=Math.floor(g),l*=2,l+=2,e.moveTo(n+(v[l-2]*(1-g)+v[l]*g)*o,i+(v[l-1]*(1-g)+v[l+1]*g)*o),y<1){for(y*=v.length/2-1,y-=d=Math.floor(y),d*=2,d+=2,m=l;m!==d;m+=2)e.lineTo(n+v[m]*o,i+v[m+1]*o);e.lineTo(n+(v[d-2]*(1-y)+v[d]*y)*o,i+(v[d-1]*(1-y)+v[d+1]*y)*o)}else for(m=l;m!==v.length;m+=2)e.lineTo(n+v[m]*o,i+v[m+1]*o);e.stroke()}else if(y<1){for(e.beginPath(),y*=v.length/2-1,y-=d=Math.floor(y),d*=2,d+=2,e.moveTo(n+v[0]*o,i+v[1]*o),m=2;m!==d;m+=2)e.lineTo(n+v[m]*o,i+v[m+1]*o);e.lineTo(n+(v[d-2]*(1-y)+v[d]*y)*o,i+(v[d-1]*(1-y)+v[d+1]*y)*o),e.stroke()}b<1&&(b*=v.length/2-1,b-=p=Math.floor(b),p*=2,function(e,t,n,i,o,a,s){var u=o/8,c=u/3,l=2*c,h=t%1*r,f=Math.cos(h),d=Math.sin(h);e.fillStyle=s,e.strokeStyle=s,e.lineWidth=a,e.lineCap="round",e.lineJoin="round",e.beginPath(),e.arc(n,i,u,h,h+Math.PI,!1),e.arc(n-c*f,i-c*d,l,h+Math.PI,h,!1),e.arc(n+l*f,i+l*d,c,h+Math.PI,h,!0),e.globalCompositeOperation="destination-out",e.fill(),e.globalCompositeOperation="source-over",e.stroke()}(e,t,n+(v[(p+=2)-2]*(1-b)+v[p]*b)*o,i+(v[p-1]*(1-b)+v[p+1]*b)*o,o,a,c))}var p=function(e){this.list=[],this.interval=null,this.color=e&&e.color?e.color:"black",this.resizeClear=!(!e||!e.resizeClear)};return p.CLEAR_DAY=function(e,t,n){var r=e.canvas.width,i=e.canvas.height,o=Math.min(r,i);c(e,t,.5*r,.5*i,o,.08*o,n)},p.CLEAR_NIGHT=function(e,t,n){var r=e.canvas.width,i=e.canvas.height,o=Math.min(r,i);l(e,t,.5*r,.5*i,o,.08*o,n)},p.PARTLY_CLOUDY_DAY=function(e,t,n){var r=e.canvas.width,i=e.canvas.height,o=Math.min(r,i);c(e,t,.625*r,.375*i,.75*o,.08*o,n),u(e,t,.375*r,.625*i,.75*o,.08*o,n)},p.PARTLY_CLOUDY_NIGHT=function(e,t,n){var r=e.canvas.width,i=e.canvas.height,o=Math.min(r,i);l(e,t,.667*r,.375*i,.75*o,.08*o,n),u(e,t,.375*r,.625*i,.75*o,.08*o,n)},p.CLOUDY=function(e,t,n){var r=e.canvas.width,i=e.canvas.height,o=Math.min(r,i);u(e,t,.5*r,.5*i,o,.08*o,n)},p.RAIN=function(e,t,n){var i=e.canvas.width,o=e.canvas.height,a=Math.min(i,o);!function(e,t,n,i,o,a,s){t/=1350;var u,c,l,h,f=.16*o,d=11*r/12,p=7*r/12;for(e.fillStyle=s,u=4;u--;)l=n+(u-1.5)/1.5*(1===u||2===u?-1:1)*f,h=i+(c=(t+u/4)%1)*c*o,e.beginPath(),e.moveTo(l,h-1.5*a),e.arc(l,h,.75*a,d,p,!1),e.fill()}(e,t,.5*i,.37*o,.9*a,.08*a,n),u(e,t,.5*i,.37*o,.9*a,.08*a,n)},p.SLEET=function(e,t,n){var r=e.canvas.width,i=e.canvas.height,a=Math.min(r,i);!function(e,t,n,r,i,a,s){t/=750;var u,c,l,h,f=.1875*i;for(e.strokeStyle=s,e.lineWidth=.5*a,e.lineCap="round",e.lineJoin="round",u=4;u--;)c=(t+u/4)%1,o(e,l=Math.floor(n+(u-1.5)/1.5*(1===u||2===u?-1:1)*f)+.5,(h=r+c*i)-1.5*a,l,h+1.5*a)}(e,t,.5*r,.37*i,.9*a,.08*a,n),u(e,t,.5*r,.37*i,.9*a,.08*a,n)},p.SNOW=function(e,t,n){var i=e.canvas.width,a=e.canvas.height,s=Math.min(i,a);!function(e,t,n,i,a,s,u){var c,l,h,f,d=.16*a,p=.75*s,m=(t/=3e3)*r*.7,v=Math.cos(m)*p,g=Math.sin(m)*p,y=m+r/3,b=Math.cos(y)*p,_=Math.sin(y)*p,w=m+2*r/3,x=Math.cos(w)*p,T=Math.sin(w)*p;for(e.strokeStyle=u,e.lineWidth=.5*s,e.lineCap="round",e.lineJoin="round",c=4;c--;)l=(t+c/4)%1,o(e,(h=n+Math.sin((l+c/4)*r)*d)-v,(f=i+l*a)-g,h+v,f+g),o(e,h-b,f-_,h+b,f+_),o(e,h-x,f-T,h+x,f+T)}(e,t,.5*i,.37*a,.9*s,.08*s,n),u(e,t,.5*i,.37*a,.9*s,.08*s,n)},p.WIND=function(e,t,n){var r=e.canvas.width,i=e.canvas.height,o=Math.min(r,i);d(e,t,.5*r,.5*i,o,.08*o,0,2,n),d(e,t,.5*r,.5*i,o,.08*o,1,2,n)},p.FOG=function(e,t,n){var i=e.canvas.width,a=e.canvas.height,u=Math.min(i,a),c=.08*u;!function(e,t,n,r,i,o,a){t/=3e4;var u=.21*i,c=.06*i,l=.21*i,h=.28*i;e.fillStyle=a,s(e,t,n,r,u,c,l,h),e.globalCompositeOperation="destination-out",s(e,t,n,r,u,c,l-o,h-o),e.globalCompositeOperation="source-over"}(e,t,.5*i,.32*a,.75*u,c,n),t/=5e3;var l=Math.cos(t*r)*u*.02,h=Math.cos((t+.25)*r)*u*.02,f=Math.cos((t+.5)*r)*u*.02,d=Math.cos((t+.75)*r)*u*.02,p=.936*a,m=Math.floor(p-.5*c)+.5,v=Math.floor(p-2.5*c)+.5;e.strokeStyle=n,e.lineWidth=c,e.lineCap="round",e.lineJoin="round",o(e,l+.2*i+.5*c,m,h+.8*i-.5*c,m),o(e,f+.2*i+.5*c,v,d+.8*i-.5*c,v)},p.prototype={_determineDrawingFunction:function(e){return"string"===typeof e&&(e=p[e.toUpperCase().replace(/-/g,"_")]||null),e},add:function(e,t){var n;"string"===typeof e&&(e=document.getElementById(e)),null!==e&&"function"===typeof(t=this._determineDrawingFunction(t))&&(n={element:e,context:e.getContext("2d"),drawing:t},this.list.push(n),this.draw(n,500))},set:function(e,t){var n;for("string"===typeof e&&(e=document.getElementById(e)),n=this.list.length;n--;)if(this.list[n].element===e)return this.list[n].drawing=this._determineDrawingFunction(t),void this.draw(this.list[n],500);this.add(e,t)},remove:function(e){var t;for("string"===typeof e&&(e=document.getElementById(e)),t=this.list.length;t--;)if(this.list[t].element===e)return void this.list.splice(t,1)},draw:function(e,t){var n=e.context.canvas;this.resizeClear?n.width=n.width:e.context.clearRect(0,0,n.width,n.height),e.drawing(e.context,t,this.color)},play:function(){var e=this;this.pause(),this.interval=t((function(){var t,n=Date.now();for(t=e.list.length;t--;)e.draw(e.list[t],n)}),1e3/60)},pause:function(){this.interval&&(n(this.interval),this.interval=null)}},p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(593),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(21)),i=u(n(22)),o=u(n(14)),a=u(n(0)),s=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t){var n=e.children,s=e.inset,u=e.style,c=(0,i.default)(e,["children","inset","style"]),l=t.muiTheme,h=l.prepareStyles,f=l.subheader,d={root:{boxSizing:"border-box",color:f.color,fontSize:14,fontWeight:f.fontWeight,lineHeight:"48px",paddingLeft:s?72:16,width:"100%"}};return a.default.createElement("div",(0,r.default)({},c,{style:h((0,o.default)(d.root,u))}),n)};c.muiName="Subheader",c.propTypes={},c.defaultProps={inset:!1},c.contextTypes={muiTheme:s.default.object.isRequired},t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=T(n(22)),i=T(n(21)),o=T(n(17)),a=T(n(15)),s=T(n(18)),u=T(n(19)),c=T(n(20)),l=T(n(14)),h=n(0),f=T(h),d=T(n(3)),p=T(n(46)),m=T(n(95)),v=n(121),g=T(n(25)),y=T(n(291)),b=T(n(596)),_=T(n(602)),w=T(n(603)),x=T(n(604));function T(e){return e&&e.__esModule?e:{default:e}}var S=function(e){function t(){var e,n,r,s;(0,a.default)(this,t);for(var c=arguments.length,l=Array(c),h=0;h<c;h++)l[h]=arguments[h];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(l))),r.state={hovered:!1,isKeyboardFocused:!1,open:!1,rightIconButtonHovered:!1,rightIconButtonKeyboardFocused:!1,touch:!1},r.handleKeyboardFocus=function(e,t){r.setState({isKeyboardFocused:t}),r.props.onKeyboardFocus(e,t)},r.handleMouseEnter=function(e){r.state.touch||r.setState({hovered:!0}),r.props.onMouseEnter(e)},r.handleMouseLeave=function(e){r.setState({hovered:!1}),r.props.onMouseLeave(e)},r.handleClick=function(e){r.props.onClick&&r.props.onClick(e),r.props.primaryTogglesNestedList&&r.handleNestedListToggle(e)},r.handleNestedListToggle=function(e){r.props.leftCheckbox&&e.preventDefault(),e.stopPropagation(),null===r.props.open?r.setState({open:!r.state.open},(function(){r.props.onNestedListToggle(r)})):r.props.onNestedListToggle((0,i.default)({},r,{state:{open:!r.state.open}}))},r.handleRightIconButtonKeyboardFocus=function(e,t){t&&r.setState({isKeyboardFocused:!1,rightIconButtonKeyboardFocused:t});var n=r.props.rightIconButton;n&&n.props.onKeyboardFocus&&n.props.onKeyboardFocus(e,t)},r.handleRightIconButtonMouseLeave=function(e){var t=r.props.rightIconButton;r.setState({rightIconButtonHovered:!1}),t&&t.props.onMouseLeave&&t.props.onMouseLeave(e)},r.handleRightIconButtonMouseEnter=function(e){var t=r.props.rightIconButton;r.setState({rightIconButtonHovered:!0}),t&&t.props.onMouseEnter&&t.props.onMouseEnter(e)},r.handleRightIconButtonMouseUp=function(e){var t=r.props.rightIconButton;e.stopPropagation(),t&&t.props.onMouseUp&&t.props.onMouseUp(e)},r.handleRightIconButtonClick=function(e){var t=r.props.rightIconButton;e.stopPropagation(),t&&t.props.onClick&&t.props.onClick(e)},r.handleTouchStart=function(e){r.setState({touch:!0}),r.props.onTouchStart(e)},r.handleTouchEnd=function(e){r.setState({touch:!0}),r.props.onTouchEnd(e)},s=n,(0,u.default)(r,s)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.setState({open:null===this.props.open?!0===this.props.initiallyOpen:this.props.open})}},{key:"componentWillReceiveProps",value:function(e){null!==e.open&&this.setState({open:e.open}),e.disabled&&this.state.hovered&&this.setState({hovered:!1})}},{key:"shouldComponentUpdate",value:function(e,t,n){return!(0,m.default)(this.props,e)||!(0,m.default)(this.state,t)||!(0,m.default)(this.context,n)}},{key:"applyFocusState",value:function(e){if(this.button){var t=p.default.findDOMNode(this.button);switch(e){case"none":t.blur();break;case"focused":t.focus();break;case"keyboard-focused":this.button.setKeyboardFocus(),t.focus()}}}},{key:"createDisabledElement",value:function(e,t,n){var r=this.props,o=r.innerDivStyle,a=r.style,s=(0,l.default)({},e.root,e.innerDiv,o,a);return f.default.createElement("div",(0,i.default)({},n,{style:this.context.muiTheme.prepareStyles(s)}),t)}},{key:"createLabelElement",value:function(e,t,n){var r=this.props,o=r.innerDivStyle,a=r.style,s=(0,l.default)({},e.root,e.innerDiv,o,e.label,a);return f.default.createElement("label",(0,i.default)({},n,{style:this.context.muiTheme.prepareStyles(s)}),t)}},{key:"createTextElement",value:function(e,t,n){var r=this.context.muiTheme.prepareStyles;if(f.default.isValidElement(t)){var i=(0,l.default)({},e,t.props.style);return"string"===typeof t.type&&(i=r(i)),f.default.cloneElement(t,{key:n,style:i})}return f.default.createElement("div",{key:n,style:r(e)},t)}},{key:"pushElement",value:function(e,t,n,r){if(t){var o=(0,l.default)({},n,t.props.style);e.push(f.default.cloneElement(t,(0,i.default)({key:e.length,style:o},r)))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoGenerateNestedIndicator,o=t.children,a=t.containerElement,s=t.disabled,u=t.disableKeyboardFocus,c=(t.hoverColor,t.initiallyOpen,t.innerDivStyle),h=(t.insetChildren,t.leftAvatar),d=t.leftCheckbox,p=t.leftIcon,m=t.nestedItems,T=t.nestedLevel,S=t.nestedListStyle,E=(t.onKeyboardFocus,t.isKeyboardFocused,t.onMouseEnter,t.onMouseLeave,t.onNestedListToggle,t.onTouchStart,t.onClick,t.rightAvatar),M=t.rightIcon,C=t.rightIconButton,A=t.rightToggle,P=t.primaryText,O=t.primaryTogglesNestedList,k=t.secondaryText,I=(t.secondaryTextLines,t.style),R=(0,r.default)(t,["autoGenerateNestedIndicator","children","containerElement","disabled","disableKeyboardFocus","hoverColor","initiallyOpen","innerDivStyle","insetChildren","leftAvatar","leftCheckbox","leftIcon","nestedItems","nestedLevel","nestedListStyle","onKeyboardFocus","isKeyboardFocused","onMouseEnter","onMouseLeave","onNestedListToggle","onTouchStart","onClick","rightAvatar","rightIcon","rightIconButton","rightToggle","primaryText","primaryTogglesNestedList","secondaryText","secondaryTextLines","style"]),D=this.context.muiTheme.prepareStyles,L=function(e,t,n){var r=e.autoGenerateNestedIndicator,i=e.insetChildren,o=e.leftAvatar,a=e.leftCheckbox,s=e.leftIcon,u=e.nestedItems,c=e.nestedLevel,l=e.rightAvatar,h=e.rightIcon,f=e.rightIconButton,d=e.rightToggle,p=e.secondaryText,m=e.secondaryTextLines,y=t.muiTheme,b=y.listItem,_=y.baseTheme.palette.textColor,w=e.hoverColor||(0,v.fade)(_,.1),x=!p&&(o||l),T=!p&&!(o||l),S=p&&1===m,E=p&&m>1;return{root:{backgroundColor:!(void 0!==e.isKeyboardFocused?e:n).isKeyboardFocused&&!n.hovered||n.rightIconButtonHovered||n.rightIconButtonKeyboardFocused?null:w,color:_,display:"block",fontSize:16,lineHeight:"16px",position:"relative",transition:g.default.easeOut()},innerDiv:{marginLeft:c*b.nestedLevelDepth,paddingLeft:s||o||a||i?72:16,paddingRight:h||l||f||u.length&&r?56:d?72:16,paddingBottom:x?20:16,paddingTop:T||E?16:20,position:"relative"},icons:{height:24,width:24,display:"block",position:"absolute",top:S?12:x?4:0,margin:12},leftIcon:{left:4},rightIcon:{right:4},avatars:{position:"absolute",top:x?8:16},label:{cursor:"pointer"},leftAvatar:{left:16},rightAvatar:{right:16},leftCheckbox:{position:"absolute",display:"block",width:24,top:S?24:x?16:12,left:16},primaryText:{},rightIconButton:{position:"absolute",display:"block",top:S?12:x?4:0,right:4},rightToggle:{position:"absolute",display:"block",width:54,top:S?25:x?17:13,right:8},secondaryText:{fontSize:14,lineHeight:E?"18px":"16px",height:E?36:16,margin:0,marginTop:4,color:b.secondaryTextColor,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:E?null:"nowrap",display:E?"-webkit-box":null,WebkitLineClamp:E?2:null,WebkitBoxOrient:E?"vertical":null}}}(this.props,this.context,this.state),N=[o];if(p){var F={color:p.props.color||this.context.muiTheme.listItem.leftIconColor};this.pushElement(N,p,(0,l.default)({},L.icons,L.leftIcon),F)}if(M){var U={color:M.props.color||this.context.muiTheme.listItem.rightIconColor};this.pushElement(N,M,(0,l.default)({},L.icons,L.rightIcon),U)}h&&this.pushElement(N,h,(0,l.default)({},L.avatars,L.leftAvatar)),E&&this.pushElement(N,E,(0,l.default)({},L.avatars,L.rightAvatar)),d&&this.pushElement(N,d,(0,l.default)({},L.leftCheckbox));var j=m.length&&n&&!(E||M||C||A);if(C||j){var B=C,z={onKeyboardFocus:this.handleRightIconButtonKeyboardFocus,onMouseEnter:this.handleRightIconButtonMouseEnter,onMouseLeave:this.handleRightIconButtonMouseLeave,onClick:this.handleRightIconButtonClick,onMouseDown:this.handleRightIconButtonMouseUp,onMouseUp:this.handleRightIconButtonMouseUp};j&&(B=this.state.open?f.default.createElement(b.default,null,f.default.createElement(_.default,null)):f.default.createElement(b.default,null,f.default.createElement(w.default,null)),z.onClick=this.handleNestedListToggle),this.pushElement(N,B,(0,l.default)({},L.rightIconButton),z)}if(A&&this.pushElement(N,A,(0,l.default)({},L.rightToggle)),P){var V=this.createTextElement(L.primaryText,P,"primaryText");N.push(V)}if(k){var W=this.createTextElement(L.secondaryText,k,"secondaryText");N.push(W)}var G=m.length?f.default.createElement(x.default,{nestedLevel:T,open:this.state.open,style:S},m):void 0,H=!O&&(d||A);return f.default.createElement("div",null,H?this.createLabelElement(L,N,R):s?this.createDisabledElement(L,N,R):f.default.createElement(y.default,(0,i.default)({containerElement:a},R,{disableKeyboardFocus:u||this.state.rightIconButtonKeyboardFocused,onKeyboardFocus:this.handleKeyboardFocus,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onClick:this.handleClick,disabled:s,ref:function(t){return e.button=t},style:(0,l.default)({},L.root,I)}),f.default.createElement("div",{style:D((0,l.default)(L.innerDiv,c))},N)),G)}}]),t}(h.Component);S.muiName="ListItem",S.defaultProps={autoGenerateNestedIndicator:!0,containerElement:"span",disableKeyboardFocus:!1,disabled:!1,initiallyOpen:!1,insetChildren:!1,nestedItems:[],nestedLevel:0,onKeyboardFocus:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onNestedListToggle:function(){},onTouchEnd:function(){},onTouchStart:function(){},open:null,primaryTogglesNestedList:!1,secondaryTextLines:1},S.contextTypes={muiTheme:d.default.object.isRequired},S.propTypes={},t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={once:function(e,t,n){for(var r=t?t.split(" "):[],i=function e(t){return t.target.removeEventListener(t.type,e),n(t)},o=r.length-1;o>=0;o--)this.on(e,r[o],i)},on:function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,(function(){n.call(e)}))},off:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)},isKeyboard:function(e){return-1!==["keydown","keypress","keyup"].indexOf(e.type)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(597),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=b(n(21)),i=b(n(22)),o=b(n(17)),a=b(n(15)),s=b(n(18)),u=b(n(19)),c=b(n(20)),l=b(n(14)),h=n(0),f=b(h),d=b(n(3)),p=b(n(25)),m=(b(n(287)),b(n(291))),v=b(n(598)),g=b(n(600)),y=n(601);function b(e){return e&&e.__esModule?e:{default:e}}var _=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={hovered:!1,isKeyboardFocused:!1,touch:!1,tooltipShown:!1},r.handleBlur=function(e){r.hideTooltip(),r.props.onBlur&&r.props.onBlur(e)},r.handleFocus=function(e){r.showTooltip(),r.props.onFocus&&r.props.onFocus(e)},r.handleMouseLeave=function(e){r.button.isKeyboardFocused()||r.hideTooltip(),r.setState({hovered:!1}),r.props.onMouseLeave&&r.props.onMouseLeave(e)},r.handleMouseOut=function(e){r.props.disabled&&r.hideTooltip(),r.props.onMouseOut&&r.props.onMouseOut(e)},r.handleMouseEnter=function(e){r.showTooltip(),r.state.touch||r.setState({hovered:!0}),r.props.onMouseEnter&&r.props.onMouseEnter(e)},r.handleTouchStart=function(e){r.setState({touch:!0}),r.props.onTouchStart&&r.props.onTouchStart(e)},r.handleKeyboardFocus=function(e,t){var n=r.props,i=n.disabled,o=n.onFocus,a=n.onBlur,s=n.onKeyboardFocus;t&&!i?(r.showTooltip(),o&&o(e)):(r.hideTooltip(),a&&a(e)),r.setState({isKeyboardFocused:t}),s&&s(e,t)},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.disabled&&this.setState({hovered:!1})}},{key:"setKeyboardFocus",value:function(){this.button.setKeyboardFocus()}},{key:"showTooltip",value:function(){this.props.tooltip&&this.setState({tooltipShown:!0})}},{key:"hideTooltip",value:function(){this.props.tooltip&&this.setState({tooltipShown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.disabled,o=t.hoveredStyle,a=t.disableTouchRipple,s=t.children,u=t.iconClassName,c=t.style,h=t.tooltip,d=t.tooltipPosition,b=t.tooltipStyles,_=t.touch,w=t.iconStyle,x=(0,i.default)(t,["disabled","hoveredStyle","disableTouchRipple","children","iconClassName","style","tooltip","tooltipPosition","tooltipStyles","touch","iconStyle"]),T=void 0,S=function(e,t){var n=t.muiTheme.baseTheme;return{root:{boxSizing:"border-box",overflow:"visible",transition:p.default.easeOut(),padding:n.spacing.iconSize/2,width:2*n.spacing.iconSize,height:2*n.spacing.iconSize,fontSize:0},tooltip:{boxSizing:"border-box"},disabled:{color:n.palette.disabledColor,fill:n.palette.disabledColor,cursor:"default"}}}(this.props,this.context),E=d.split("-"),M=(this.state.hovered||this.state.isKeyboardFocused)&&!n,C=(0,l.default)(S.root,c,M?o:{}),A=h?f.default.createElement(g.default,{label:h,show:this.state.tooltipShown,touch:_,style:(0,l.default)(S.tooltip,b),verticalPosition:E[0],horizontalPosition:E[1]}):null;if(u){var P=w.iconHoverColor,O=(0,i.default)(w,["iconHoverColor"]);T=f.default.createElement(v.default,{className:u,hoverColor:n?null:P,style:(0,l.default)({},n&&S.disabled,O),color:this.context.muiTheme.baseTheme.palette.textColor},s)}var k=n?(0,l.default)({},w,S.disabled):w;return f.default.createElement(m.default,(0,r.default)({ref:function(t){return e.button=t}},x,{centerRipple:!0,disabled:n,onTouchStart:this.handleTouchStart,style:C,disableTouchRipple:a,onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,onMouseOut:this.handleMouseOut,onKeyboardFocus:this.handleKeyboardFocus}),A,T,(0,y.extendChildren)(s,{style:k}))}}]),t}(h.Component);_.muiName="IconButton",_.defaultProps={disabled:!1,disableTouchRipple:!1,iconStyle:{},tooltipPosition:"bottom-center",touch:!1},_.contextTypes={muiTheme:d.default.object.isRequired},_.propTypes={},t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=n(599),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=m(n(25));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={hovered:!1},r.handleMouseLeave=function(e){void 0!==r.props.hoverColor&&r.setState({hovered:!1}),r.props.onMouseLeave&&r.props.onMouseLeave(e)},r.handleMouseEnter=function(e){void 0!==r.props.hoverColor&&r.setState({hovered:!0}),r.props.onMouseEnter&&r.props.onMouseEnter(e)},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=(e.hoverColor,e.onMouseLeave,e.onMouseEnter,e.style),n=(0,i.default)(e,["hoverColor","onMouseLeave","onMouseEnter","style"]),o=this.context.muiTheme.prepareStyles,a=function(e,t,n){var r=e.color,i=e.hoverColor,o=t.muiTheme.baseTheme,a=r||o.palette.textColor,s=i||a;return{root:{color:n.hovered?s:a,position:"relative",fontSize:o.spacing.iconSize,display:"inline-block",userSelect:"none",transition:p.default.easeOut()}}}(this.props,this.context,this.state);return f.default.createElement("span",(0,r.default)({},n,{onMouseLeave:this.handleMouseLeave,onMouseEnter:this.handleMouseEnter,style:o((0,l.default)(a.root,t))}))}}]),t}(h.Component);v.muiName="FontIcon",v.defaultProps={onMouseEnter:function(){},onMouseLeave:function(){}},v.contextTypes={muiTheme:d.default.object.isRequired},v.propTypes={},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=m(n(25));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(){var e,n,r,i;(0,a.default)(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=r=(0,u.default)(this,(e=t.__proto__||(0,o.default)(t)).call.apply(e,[this].concat(c))),r.state={offsetWidth:null},i=n,(0,u.default)(r,i)}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.setRippleSize(),this.setTooltipPosition()}},{key:"componentWillReceiveProps",value:function(){this.setTooltipPosition()}},{key:"componentDidUpdate",value:function(){this.setRippleSize()}},{key:"setRippleSize",value:function(){var e=this.refs.ripple,t=this.refs.tooltip,n=parseInt(t.offsetWidth,10)/("center"===this.props.horizontalPosition?2:1),r=parseInt(t.offsetHeight,10),i=Math.ceil(2*Math.sqrt(Math.pow(r,2)+Math.pow(n,2)));this.props.show?(e.style.height=i+"px",e.style.width=i+"px"):(e.style.width="0px",e.style.height="0px")}},{key:"setTooltipPosition",value:function(){this.setState({offsetWidth:this.refs.tooltip.offsetWidth})}},{key:"render",value:function(){var e=this.props,t=(e.horizontalPosition,e.label),n=(e.show,e.touch,e.verticalPosition,(0,i.default)(e,["horizontalPosition","label","show","touch","verticalPosition"])),o=this.context.muiTheme.prepareStyles,a=function(e,t,n){var r=e.verticalPosition,i=e.horizontalPosition,o=e.touch?10:0,a=e.touch?-20:-10,s="bottom"===r?14+o:-14-o,u=t.muiTheme,c=u.baseTheme,l=u.zIndex,h=u.tooltip,f=u.borderRadius;return{root:{position:"absolute",fontFamily:c.fontFamily,fontSize:"10px",lineHeight:"22px",padding:"0 8px",zIndex:l.tooltip,color:h.color,overflow:"hidden",top:-1e4,borderRadius:f,userSelect:"none",opacity:0,right:"left"===i?12:null,left:"center"===i?(n.offsetWidth-48)/2*-1:"right"===i?12:null,transition:p.default.easeOut("0ms","top","450ms")+", "+p.default.easeOut("450ms","transform","0ms")+", "+p.default.easeOut("450ms","opacity","0ms")},label:{position:"relative",whiteSpace:"nowrap"},ripple:{position:"absolute",left:"center"===i?"50%":"left"===i?"100%":"0%",top:"bottom"===r?0:"100%",transform:"translate(-50%, -50%)",borderRadius:"50%",backgroundColor:"transparent",transition:p.default.easeOut("0ms","width","450ms")+", "+p.default.easeOut("0ms","height","450ms")+", "+p.default.easeOut("450ms","backgroundColor","0ms")},rootWhenShown:{top:"top"===r?a:36,opacity:h.opacity,transform:"translate(0px, "+s+"px)",transition:p.default.easeOut("0ms","top","0ms")+", "+p.default.easeOut("450ms","transform","0ms")+", "+p.default.easeOut("450ms","opacity","0ms")},rootWhenTouched:{fontSize:"14px",lineHeight:"32px",padding:"0 16px"},rippleWhenShown:{backgroundColor:h.rippleBackgroundColor,transition:p.default.easeOut("450ms","width","0ms")+", "+p.default.easeOut("450ms","height","0ms")+", "+p.default.easeOut("450ms","backgroundColor","0ms")}}}(this.props,this.context,this.state);return f.default.createElement("div",(0,r.default)({},n,{ref:"tooltip",style:o((0,l.default)(a.root,this.props.show&&a.rootWhenShown,this.props.touch&&a.rootWhenTouched,this.props.style))}),f.default.createElement("div",{ref:"ripple",style:o((0,l.default)(a.ripple,this.props.show&&a.rippleWhenShown))}),f.default.createElement("span",{style:o(a.label)},t))}}]),t}(h.Component);v.contextTypes={muiTheme:d.default.object.isRequired},v.propTypes={},t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendChildren=function(e,t,n){return o.default.Children.map(e,(function(e){if(!o.default.isValidElement(e))return e;var r="function"===typeof t?t(e):t,i="function"===typeof n?n(e):n||e.props.children;return o.default.cloneElement(e,r,i)}))};var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(122)),o=a(n(123));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return r.default.createElement(o.default,e,r.default.createElement("path",{d:"M12 8l-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}))};(s=(0,i.default)(s)).displayName="NavigationExpandLess",s.muiName="SvgIcon",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(0)),i=a(n(122)),o=a(n(123));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){return r.default.createElement(o.default,e,r.default.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))};(s=(0,i.default)(s)).displayName="NavigationExpandMore",s.muiName="SvgIcon",t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=a(r),o=(a(n(3)),a(n(290)));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.children,n=e.open,a=e.nestedLevel,s=e.style;return n?i.default.createElement(o.default,{style:s},r.Children.map(t,(function(e){return(0,r.isValidElement)(e)?(0,r.cloneElement)(e,{nestedLevel:a+1}):e}))):null};s.propTypes={},t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeSelectable=void 0;var r=m(n(21)),i=m(n(22)),o=m(n(17)),a=m(n(15)),s=m(n(18)),u=m(n(19)),c=m(n(20)),l=m(n(14)),h=n(0),f=m(h),d=m(n(3)),p=n(121);function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){var t,n;return n=t=function(t){function n(){var e,t,r,i;(0,a.default)(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return t=r=(0,u.default)(this,(e=n.__proto__||(0,o.default)(n)).call.apply(e,[this].concat(c))),r.hasSelectedDescendant=function(e,t){return f.default.isValidElement(t)&&t.props.nestedItems&&t.props.nestedItems.length>0?t.props.nestedItems.reduce(r.hasSelectedDescendant,e):e||r.isChildSelected(t,r.props)},r.handleItemClick=function(e,t){var n=t.props.value;n!==r.props.value&&r.props.onChange&&r.props.onChange(e,n)},i=t,(0,u.default)(r,i)}return(0,c.default)(n,t),(0,s.default)(n,[{key:"extendChild",value:function(e,t,n){var r=this;if(e&&e.type&&"ListItem"===e.type.muiName){var i=void 0;this.isChildSelected(e,this.props)&&(i=(0,l.default)({},t,n));var o=(0,l.default)({},e.props.style,i);return this.keyIndex+=1,f.default.cloneElement(e,{onClick:function(t){r.handleItemClick(t,e),e.props.onClick&&e.props.onClick(t)},key:this.keyIndex,style:o,nestedItems:e.props.nestedItems.map((function(e){return r.extendChild(e,t,n)})),initiallyOpen:this.isInitiallyOpen(e)})}return e}},{key:"isInitiallyOpen",value:function(e){return e.props.initiallyOpen?e.props.initiallyOpen:this.hasSelectedDescendant(!1,e)}},{key:"isChildSelected",value:function(e,t){return t.value===e.props.value}},{key:"render",value:function(){var t=this,n=this.props,o=n.children,a=n.selectedItemStyle,s=(0,i.default)(n,["children","selectedItemStyle"]);this.keyIndex=0;var u={};if(!a){var c=this.context.muiTheme.baseTheme.palette.textColor;u.backgroundColor=(0,p.fade)(c,.2)}return f.default.createElement(e,(0,r.default)({},s,this.state),h.Children.map(o,(function(e){return t.extendChild(e,u,a)})))}}]),n}(h.Component),t.propTypes={children:d.default.node,onChange:d.default.func,selectedItemStyle:d.default.object,value:d.default.any},t.contextTypes={muiTheme:d.default.object.isRequired},n};t.makeSelectable=v,t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirestore=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e,t){return function(n){return function(i,a,c){var l=n(i,a,c),h=r({},o.defaultConfig,t);return u=(0,s.default)(e.firebase_||e,h,l.dispatch),l.firestore=u,l}}};var i,o=n(38),a=n(292),s=(i=a)&&i.__esModule?i:{default:i};var u=void 0;t.getFirestore=function(){if(!u)throw new Error("Firebase instance does not yet exist. Check your compose function.");return u}},function(e,t,n){var r=n(159),i=n(161)((function(e,t,n){r(e,t,n)}));e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(240)),i=h(n(23)),o=h(n(609)),a=h(n(11)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.add=d,t.set=function(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=(0,l.getQueryConfig)(n);return(0,u.wrapInDispatch)(t,{ref:(0,l.firestoreRef)(e,t,a),method:"set",meta:a,args:i,types:[c.actionTypes.SET_REQUEST,c.actionTypes.SET_SUCCESS,c.actionTypes.SET_FAILURE]})},t.get=p,t.update=m,t.deleteRef=function(e,t,n){var o=(0,l.getQueryConfig)(n),a=e._.config;if(!o.doc||o.subcollections&&!(0,r.default)(o.subcollections,"doc"))return(0,i.default)(a.onAttemptCollectionDelete)?a.onAttemptCollectionDelete(n,t,e):Promise.reject(new Error("Only documents can be deleted."));return(0,u.wrapInDispatch)(t,{ref:(0,l.firestoreRef)(e,t,o),method:"delete",meta:o,types:[c.actionTypes.DELETE_REQUEST,{type:c.actionTypes.DELETE_SUCCESS,preserve:e._.config.preserveOnDelete},c.actionTypes.DELETE_FAILURE]})},t.setListener=y,t.setListeners=b,t.unsetListener=_,t.unsetListeners=w,t.runTransaction=x;var u=n(295),c=n(38),l=n(190);function h(e){return e&&e.__esModule?e:{default:e}}var f={};function d(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=(0,l.getQueryConfig)(n);return(0,u.wrapInDispatch)(t,{ref:(0,l.firestoreRef)(e,t,a),method:"add",meta:a,args:i,types:[c.actionTypes.ADD_REQUEST,{type:c.actionTypes.ADD_SUCCESS,payload:function(e){return{id:e.id,data:i[0]}}},c.actionTypes.ADD_FAILURE]})}function p(e,t,n){var r=(0,l.getQueryConfig)(n),i=e._.config||{},o=i.mergeOrdered,a=i.mergeOrderedDocUpdates,s=i.mergeOrderedCollectionUpdates;return(0,u.wrapInDispatch)(t,{ref:(0,l.firestoreRef)(e,t,r),method:"get",meta:r,types:[c.actionTypes.GET_REQUEST,{type:c.actionTypes.GET_SUCCESS,payload:function(e){return{data:(0,l.dataByIdSnapshot)(e),ordered:(0,l.orderedFromSnap)(e)}},merge:{docs:o&&a,collections:o&&s}},c.actionTypes.GET_FAILURE]})}function m(e,t,n){for(var r=arguments.length,i=Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];var a=(0,l.getQueryConfig)(n);return(0,u.wrapInDispatch)(t,{ref:(0,l.firestoreRef)(e,t,a),method:"update",meta:a,args:i,types:[c.actionTypes.UPDATE_REQUEST,c.actionTypes.UPDATE_SUCCESS,c.actionTypes.UPDATE_FAILURE]})}var v={added:c.actionTypes.DOCUMENT_ADDED,removed:c.actionTypes.DOCUMENT_REMOVED,modified:c.actionTypes.DOCUMENT_MODIFIED};function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s({},t,{path:e.doc.ref.path});return t.subcollections&&!t.storeAs?n.subcollections[0]=s({},n.subcollections[0],{doc:e.doc.id}):n.doc=e.doc.id,{type:v[e.type]||c.actionTypes.DOCUMENT_MODIFIED,meta:n,payload:{data:e.doc.data(),ordered:{oldIndex:e.oldIndex,newIndex:e.newIndex}}}}function y(e,t,n,r,i){var a=(0,l.getQueryConfig)(n),s=e._.config||{},u=s.mergeOrdered,h=s.mergeOrderedDocUpdates,f=s.mergeOrderedCollectionUpdates,d=(0,l.firestoreRef)(e,t,a).onSnapshot((function(e){var n="function"===typeof e.docChanges?e.docChanges():e.docChanges;n&&n.length<e.size?1===n.length?t(g(n[0],a)):n.forEach((function(e){t(g(e,a))})):t({type:c.actionTypes.LISTENER_RESPONSE,meta:a,payload:{data:(0,l.dataByIdSnapshot)(e),ordered:(0,l.orderedFromSnap)(e)},merge:{docs:u&&h,collections:u&&f}}),r&&r(e)}),(function(n){var r=e._.config||{},s=r.logListenerError,l=r.preserveOnListenerError;s&&(0,o.default)(console,"error",n),t({type:c.actionTypes.LISTENER_ERROR,meta:a,payload:n,merge:{docs:u&&h,collections:u&&f},preserve:l}),i&&i(n)}));(0,l.attachListener)(e,t,a,d)}function b(e,t,n){if(!(0,a.default)(n))throw new Error("Listeners must be an Array of listener configs (Strings/Objects).");var r=e._.config;return r.oneListenerPerPath?n.forEach((function(n){var r=(0,l.getQueryName)(n),i=f[r]||0;f[r]=i+1,i>0||y(e,t,n)})):n.forEach((function(n){var o=(0,i.default)(r.allowMultipleListeners)?r.allowMultipleListeners(n,e._.listeners):r.allowMultipleListeners;(0,l.listenerExists)(e,n)&&!o||y(e,t,n)}))}function _(e,t,n){return(0,l.detachListener)(e,t,(0,l.getQueryConfig)(n))}function w(e,t,n){if(!(0,a.default)(n))throw new Error("Listeners must be an Array of listener configs (Strings/Objects).");e._.config.oneListenerPerPath?n.forEach((function(n){var r=(0,l.getQueryName)(n);f[r]-=1,0===f[r]&&_(e,t,n)})):n.forEach((function(n){_(e,t,n)}))}function x(e,t,n){return(0,u.wrapInDispatch)(t,{ref:e.firestore(),method:"runTransaction",args:[n],types:[c.actionTypes.TRANSACTION_START,c.actionTypes.TRANSACTION_SUCCESS,c.actionTypes.TRANSACTION_FAILURE]})}t.default={get:p,firestoreRef:l.firestoreRef,add:d,update:m,setListener:y,setListeners:b,unsetListener:_,unsetListeners:w,runTransaction:x}},function(e,t,n){var r=n(610),i=n(90)(r);e.exports=i},function(e,t,n){var r=n(88),i=n(60),o=n(84),a=n(217),s=n(49);e.exports=function(e,t,n){t=i(t,e);var u=null==(e=a(e,t))?e:e[s(o(t))];return null==u?void 0:r(u,e,n)}},function(e,t,n){var r=n(144),i=n(170),o=n(612),a=n(296),s=n(171),u=n(61),c=/^\s+|\s+$/g;e.exports=function(e,t,n){if((e=u(e))&&(n||void 0===t))return e.replace(c,"");if(!e||!(t=r(t)))return e;var l=s(e),h=s(t),f=a(l,h),d=o(l,h)+1;return i(l,f,d).join("")}},function(e,t,n){var r=n(167);e.exports=function(e,t){for(var n=e.length;n--&&r(t,e[n],0)>-1;);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(78),i=n(615);t.default=(0,r.combineReducers)({status:i.statusReducer,data:i.dataReducer,ordered:i.orderedReducer,listeners:i.listenersReducer,errors:i.errorsReducer})},function(e,t,n){var r=n(144),i=n(170),o=n(296),a=n(171),s=n(61),u=/^\s+/;e.exports=function(e,t,n){if((e=s(e))&&(n||void 0===t))return e.replace(u,"");if(!e||!(t=r(t)))return e;var c=a(e),l=o(c,a(t));return i(c,l).join("")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.statusReducer=t.orderedReducer=t.listenersReducer=t.errorsReducer=t.dataReducer=void 0;var r=u(n(616)),i=u(n(617)),o=u(n(618)),a=u(n(619)),s=u(n(628));function u(e){return e&&e.__esModule?e:{default:e}}t.dataReducer=r.default,t.errorsReducer=i.default,t.listenersReducer=o.default,t.orderedReducer=a.default,t.statusReducer=s.default,t.default={dataReducer:r.default,errorsReducer:i.default,listenersReducer:o.default,orderedReducer:a.default,statusReducer:s.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(259)),i=u(n(260)),o=u(n(59));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case l:case h:var n=t.meta,a=t.payload;if(!a||void 0===a.data)return e;var u=function e(t){return t.subcollections?e(t.subcollections.slice(-1)[0]):t.doc},g=u(n),y=g?(0,o.default)(a.data,g):a.data,b=(0,o.default)(e,n.storeAs||(0,s.pathFromMeta)(n));if(!b||n.subcollections)return(0,i.default)(Object,n.storeAs||(0,s.pathFromMeta)(n),y,e);var _=(0,r.default)(b,y);return(0,i.default)(Object,n.storeAs||(0,s.pathFromMeta)(n),_,e);case m:case p:return(0,i.default)(Object,(0,s.pathFromMeta)(t.meta),t.payload.data,e);case v:case d:var w=(0,s.pathFromMeta)(t.meta),x=(0,i.default)(Object,w,null,e);return t.preserve&&t.preserve.data?(0,s.preserveValuesFromState)(e,t.preserve.data,x):x;case c:return t.preserve&&t.preserve.data?(0,s.preserveValuesFromState)(e,t.preserve.data,{}):{};case f:var T=(0,i.default)(Object,(0,s.pathFromMeta)(t.meta),null,e);if(t.preserve&&t.preserve.data)return(0,s.preserveValuesFromState)(e,t.preserve.data,T);var S=(0,o.default)(e,(0,s.pathFromMeta)(t.meta));return S?e:T;default:return e}};var a=n(38),s=n(78);function u(e){return e&&e.__esModule?e:{default:e}}var c=a.actionTypes.CLEAR_DATA,l=a.actionTypes.GET_SUCCESS,h=a.actionTypes.LISTENER_RESPONSE,f=a.actionTypes.LISTENER_ERROR,d=a.actionTypes.DELETE_SUCCESS,p=a.actionTypes.DOCUMENT_ADDED,m=a.actionTypes.DOCUMENT_MODIFIED,v=a.actionTypes.DOCUMENT_REMOVED},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(38),o=n(190),a=n(78);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=i.actionTypes.CLEAR_ERRORS,l=i.actionTypes.CLEAR_ERROR,h=i.actionTypes.LISTENER_ERROR,f=i.actionTypes.ERROR;var d=(0,a.combineReducers)({byQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.meta,i=t.payload,a=t.type;switch(a){case f:case h:return r({},e,s({},(0,o.getQueryName)(n),i));case l:return r({},e,s({},(0,o.getQueryName)(n),null));default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.meta,r=t.type;switch(r){case h:case f:return-1!==e.indexOf((0,o.getQueryName)(n))?e:[].concat(u(e),[(0,o.getQueryName)(n)]);case c:return[];case l:return e.filter((function(e){return e!==(0,o.getQueryName)(n)}));default:return e}}});t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(113),o=(r=i)&&r.__esModule?r:{default:r},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(38);function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=(0,n(78).combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.path,i=t.payload;switch(n){case s.actionTypes.SET_LISTENER:return a({},e,c({},i.name,{name:i.name,path:r}));case s.actionTypes.UNSET_LISTENER:return(0,o.default)(e,[i.name]);default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.type,r=t.payload;switch(n){case s.actionTypes.SET_LISTENER:return[].concat(u(e),[r.name]);case s.actionTypes.UNSET_LISTENER:return e.filter((function(e){return e!==r.name}));default:return e}}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=g(n(293)),o=g(n(172)),a=g(n(620)),s=g(n(85)),u=g(n(113)),c=g(n(624)),l=g(n(625)),h=g(n(59)),f=g(n(87)),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(!t.type)return e;if(t.type===T)return t.preserve&&t.preserve.ordered?(0,v.preserveValuesFromState)(e,t.preserve.ordered,{}):{};if(!Object.prototype.hasOwnProperty.call(O,t.type))return e;if(!t.meta||!t.meta.storeAs&&!t.meta.collection)return e;var n=t.meta.storeAs||t.meta.collection,r=(0,h.default)(e,n);return d({},e,b({},n,k(r,t)))};var m=n(38),v=n(78);function g(e){return e&&e.__esModule?e:{default:e}}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=m.actionTypes.DOCUMENT_ADDED,w=m.actionTypes.GET_SUCCESS,x=m.actionTypes.LISTENER_RESPONSE,T=m.actionTypes.CLEAR_DATA,S=m.actionTypes.DELETE_SUCCESS,E=m.actionTypes.DOCUMENT_REMOVED,M=m.actionTypes.DOCUMENT_MODIFIED;function C(e,t){if(!t.meta.subcollections||t.meta.storeAs)return(0,v.updateItemInArray)(e,t.meta.doc,(function(e){return(0,i.default)(e,t.payload.data)}));var n=(0,v.pathToArr)(t.meta.path),r=p(n,4),o=r[1],a=r[2],s=r[3];return(0,v.updateItemInArray)(e,o,(function(e){return d({},e,b({},a,(0,v.updateItemInArray)((0,h.default)(e,a,[]),s,(function(e){return(0,i.default)(e,t.payload.data)}))))}))}function A(e,t){if(!t.meta.subcollections||t.meta.storeAs)return(0,c.default)(e,{id:t.meta.doc});var n=t.meta.subcollections[0];return n.doc?(0,v.updateItemInArray)(e,t.meta.doc,(function(t){return(0,h.default)(t,n.collection,[]).length?d({},t,b({},n.collection,(0,c.default)(e,{id:n.doc}))):t})):(0,v.updateItemInArray)(e,t.meta.doc,(function(e){return(0,u.default)(e,[n.collection])}))}function P(e,t){var n=t.meta,r=t.merge,c=void 0===r?{doc:!0,collections:!0}:r;if(n.storeAs)return t.payload.ordered;var p=(0,f.default)(e),m=!!(0,f.default)(t.payload.ordered);if(n.doc&&c.doc&&p)return C(e,t);if(p&&c.collections){if(!m)return[];var g=e&&(0,a.default)(e,"id");return(0,s.default)(t.payload.ordered,(function(e){var t=(0,h.default)(g,e.id);return t&&!(0,o.default)(t,e)?d({},t,e):e}))}if(n.doc&&n.subcollections){var y=n.subcollections[0];return p?(0,v.updateItemInArray)(e,n.doc,(function(e){return m?d({},e,b({},y.collection,(0,l.default)((0,h.default)(e,y.collection,[]),t.payload.ordered,"id"))):(0,u.default)(e,[y.collection])})):[b({id:n.doc},y.collection,t.payload.ordered)]}return n.doc&&p?(0,v.updateItemInArray)(e,n.doc,(function(e){return(0,i.default)(e,t.payload.ordered[0])})):t.payload.ordered}var O=(b(r={},_,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.meta,r=t.payload;return!n.subcollections||n.storeAs?[].concat(y(e.slice(0,r.ordered.newIndex)),[d({id:n.doc},r.data)],y(e.slice(r.ordered.newIndex))):C(e,t)})),b(r,M,C),b(r,E,A),b(r,S,A),b(r,x,P),b(r,w,P),r),k=(0,v.createReducer)(void 0,O)},function(e,t,n){var r=n(86),i=n(621)((function(e,t,n){r(e,n,t)}));e.exports=i},function(e,t,n){var r=n(622),i=n(623),o=n(32),a=n(11);e.exports=function(e,t){return function(n,s){var u=a(n)?r:i,c=t?t():{};return u(n,e,o(s,2),c)}}},function(e,t){e.exports=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}},function(e,t,n){var r=n(62);e.exports=function(e,t,n,i){return r(e,(function(e,r,o){t(i,e,n(e),o)})),i}},function(e,t,n){var r=n(138),i=n(224),o=n(32),a=n(11),s=n(257);e.exports=function(e,t){return(a(e)?r:i)(e,s(o(t,3)))}},function(e,t,n){var r=n(107),i=n(32),o=n(90),a=n(626),s=n(160),u=n(84),c=o((function(e){var t=u(e);return s(t)&&(t=void 0),a(r(e,1,s,!0),i(t,2))}));e.exports=c},function(e,t,n){var r=n(133),i=n(166),o=n(258),a=n(134),s=n(627),u=n(135);e.exports=function(e,t,n){var c=-1,l=i,h=e.length,f=!0,d=[],p=d;if(n)f=!1,l=o;else if(h>=200){var m=t?null:s(e);if(m)return u(m);f=!1,l=a,p=new r}else p=t?[]:d;e:for(;++c<h;){var v=e[c],g=t?t(v):v;if(v=n||0!==v?v:0,f&&g===g){for(var y=p.length;y--;)if(p[y]===g)continue e;t&&p.push(g),d.push(v)}else l(p,g,n)||(p!==d&&p.push(g),d.push(v))}return d}},function(e,t,n){var r=n(209),i=n(248),o=n(135),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.requestingReducer=h,t.requestedReducer=f,t.timestampsReducer=d;var i=n(38),o=n(78),a=n(190);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=i.actionTypes.SET_LISTENER,c=i.actionTypes.LISTENER_ERROR,l=i.actionTypes.LISTENER_RESPONSE;function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,i=t.meta;switch(n){case u:return r({},e,s({},(0,o.getSlashStrPath)((0,a.getQueryName)(i)),!0));case c:case l:return r({},e,s({},(0,o.getSlashStrPath)((0,a.getQueryName)(i)),!1));default:return e}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,i=t.meta;switch(n){case u:return r({},e,s({},(0,a.getQueryName)(i),!1));case c:case l:return r({},e,s({},(0,a.getQueryName)(i),!0));default:return e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,i=t.meta;switch(n){case u:return r({},e,s({},(0,a.getQueryName)(i),Date.now()));default:return e}}t.default=(0,o.combineReducers)({requesting:h,requested:f,timestamps:d})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_FIRESTORE=void 0;var r,i=n(11),o=(r=i)&&r.__esModule?r:{default:r},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){i=!0,o=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){return function(t){return function(n){return function(r){var i=r.type===c?r:void 0;if("undefined"===typeof i)return n(r);var u=i.method;if("function"===typeof u&&(u=u(t.getState())),"string"!==typeof u)throw new Error("Specify a method.");var h=i.args,f=l[u];if(!Array.isArray(f)||3!==f.length)throw new Error("Expected an array of three action types.");if(!f.every((function(e){return"string"===typeof e})))throw new Error("Expected action types to be strings.");var d=a(f,3),p=d[0],m=d[1],v=d[2];return n({type:p}),function(e,t){var n=t.method,r=t.modelArgs,i=t.methodArgs;(0,o.default)(r)||(r=[r]);(0,o.default)(i)||(i=[i]);if(!e||!e.firestore)throw new Error("firestore is not a Firebase namespace");return i?e.firestore()[n].apply(e,i):e.firestore()[n]}(e,{method:u}).then((function(e){return n({response:e,method:u,args:h,type:m})})).catch((function(e){return n(function(e){var t=s({},r,e);return delete t[c],t}({type:v,error:e.message||e||"Something bad happened"}))}))}}}};var u=n(38);var c=t.CALL_FIRESTORE="CALL_FIRESTORE",l={get:[u.actionTypes.GET_REQUEST,u.actionTypes.GET_SUCCESS,u.actionTypes.GET_FAILURE]}},function(e,t,n){"use strict";n(631)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=(r=n(9))&&"object"===typeof r&&"default"in r?r.default:r,a=n(124),s=n(298),u=n(191),c=n(297),l=n(633),h=o.SDK_VERSION,f=new s.Logger("@firebase/firestore");function d(){return f.logLevel===s.LogLevel.DEBUG?i.DEBUG:f.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function p(e){switch(e){case i.DEBUG:f.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:f.logLevel=s.LogLevel.ERROR;break;case i.SILENT:f.logLevel=s.LogLevel.SILENT;break;default:f.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function m(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(f.logLevel<=s.LogLevel.DEBUG){var i=n.map(g);f.debug.apply(f,a.__spreadArrays(["Firestore ("+h+") ["+e+"]: "+t],i))}}function v(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(f.logLevel<=s.LogLevel.ERROR){var r=t.map(g);f.error.apply(f,a.__spreadArrays(["Firestore ("+h+"): "+e],r))}}function g(e){if("string"===typeof e)return e;var t=_.getPlatform();try{return t.formatJSON(e)}catch(n){return e}}function y(e){var t="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+e;throw v(t),new Error(t)}function b(e,t){e||y(t)}!function(e){e[e.DEBUG=0]="DEBUG",e[e.ERROR=1]="ERROR",e[e.SILENT=2]="SILENT"}(i||(i={}));var _=function(){function e(){}return e.setPlatform=function(t){e.platform&&y("Platform already defined"),e.platform=t},e.getPlatform=function(){return e.platform||y("Platform not set"),e.platform},e}();function w(){return _.getPlatform().emptyByteString}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},T=function(e){function t(t,n){var r=e.call(this,n)||this;return r.code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(t,e),t}(Error);function S(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new T(x.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t){return void 0!==e?e:t}function C(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function A(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function P(e){for(var t in b(null!=e&&"object"===typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e,t){if(0!==t.length)throw new T(x.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+Q(t.length,"argument")+".")}function k(e,t,n){if(t.length!==n)throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires "+Q(n,"argument")+", but was called with "+Q(t.length,"argument")+".")}function I(e,t,n){if(t.length<n)throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires at least "+Q(n,"argument")+", but was called with "+Q(t.length,"argument")+".")}function R(e,t,n,r){if(t.length<n||t.length>r)throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+Q(t.length,"argument")+".")}function D(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+Q(r,"element")+".")}function L(e,t,n,r){V(e,t,X(n)+" argument",r)}function N(e,t,n,r){void 0!==r&&L(e,t,n,r)}function F(e,t,n,r){V(e,t,n+" option",r)}function U(e,t,n,r){void 0!==r&&F(e,t,n,r)}function j(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+G(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+G(r[o]))}(e,t,n,r,i)}function B(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(G(u))}var c=G(r);throw new T(x.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function z(e,t,n,r){if(!t.some((function(e){return e===r})))throw new T(x.INVALID_ARGUMENT,"Invalid value "+G(r)+" provided to function "+e+"() for its "+X(n)+" argument. Acceptable values: "+t.join(", "))}function V(e,t,n,r){if(!("object"===t?W(r):"non-empty string"===t?"string"===typeof r&&""!==r:typeof r===t)){var i=G(r);throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function W(e){return"object"===typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function G(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"===typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"===typeof e||"boolean"===typeof e)return""+e;if("object"===typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"===typeof e?"a function":y("Unknown wrong type: "+typeof e)}function H(e,t,n){if(void 0===n)throw new T(x.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+X(t)+" argument, but it was undefined.")}function q(e,t,n){A(t,(function(t,r){if(n.indexOf(t)<0)throw new T(x.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+e+"(). Available options: "+n.join(", "))}))}function Y(e,t,n,r){var i=G(r);return new T(x.INVALID_ARGUMENT,"Function "+e+"() requires its "+X(n)+" argument to be a "+t+", but it was: "+i)}function K(e,t,n){if(n<=0)throw new T(x.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+X(t)+" argument to be a positive number, but it was: "+n+".")}function X(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function Q(e,t){return e+" "+t+(1===e?"":"s")}var J=function(){function e(){}return e.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return b(20===t.length,"Invalid auto ID: "+t),t},e}();function Z(e,t){return e<t?-1:e>t?1:0}function $(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function ee(e){return e+"\0"}function te(){if("undefined"===typeof Uint8Array)throw new T(x.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ne(){if(!_.getPlatform().base64Available)throw new T(x.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var re,ie=function(){function e(e){ne(),this._binaryString=e}return e.fromBase64String=function(t){k("Blob.fromBase64String",arguments,1),L("Blob.fromBase64String","string",1,t),ne();try{var n=_.getPlatform().atob(t);return new e(n)}catch(r){throw new T(x.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+r)}},e.fromUint8Array=function(t){if(k("Blob.fromUint8Array",arguments,1),te(),!(t instanceof Uint8Array))throw Y("Blob.fromUint8Array","Uint8Array",1,t);var n=Array.prototype.map.call(t,(function(e){return String.fromCharCode(e)})).join("");return new e(n)},e.prototype.toBase64=function(){return k("Blob.toBase64",arguments,0),ne(),_.getPlatform().btoa(this._binaryString)},e.prototype.toUint8Array=function(){k("Blob.toUint8Array",arguments,0),te();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._binaryString===e._binaryString},e.prototype._compareTo=function(e){return Z(this._binaryString,e._binaryString)},e}(),oe=S(ie,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ae=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},se=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e.prototype.compareTo=function(e){return Z(this.projectId,e.projectId)||Z(this.database,e.database)},e}(),ue=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}return e.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},e.INVALID=-1,e}(),ce=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&y("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&y("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,b(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return b(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return b(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return b(e<this.length,"Index out of range"),this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(e){if(e.indexOf("//")>=0)throw new T(x.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new t(e.split("/").filter((function(e){return e.length>0})))},t.EMPTY_PATH=new t([]),t}(ce),he=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return he.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new T(x.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new T(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new T(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new T(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.EMPTY_PATH=new t([]),t}(ce),de=function(){function e(t){this.path=t,b(e.isDocumentKey(t),"Invalid DocumentKey with an odd number of segments: "+t.toArray().join("/"))}return e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===le.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return le.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2===0},e.fromSegments=function(t){return new e(new le(t.slice()))},e.fromPathString=function(t){return new e(le.fromString(t))},e.EMPTY=new e(new le([])),e}(),pe=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))};!function(e){e.All="all",e.ListenStreamIdle="listen_stream_idle",e.ListenStreamConnectionBackoff="listen_stream_connection_backoff",e.WriteStreamIdle="write_stream_idle",e.WriteStreamConnectionBackoff="write_stream_connection_backoff",e.OnlineStateTimeout="online_state_timeout",e.ClientMetadataRefresh="client_metadata_refresh",e.LruGarbageCollection="lru_garbage_collection",e.RetryTransaction="retry_transaction"}(re||(re={}));var me=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new pe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}(),ve=function(){function e(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},e.prototype.enqueueAndInitiateShutdown=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(e){})):this.enqueueInternal(e)},e.prototype.enqueueInternal=function(e){var t=this,n=this.tail.then((function(){return t.operationInProgress=!0,e().catch((function(e){t.failure=e,t.operationInProgress=!1;var n=e.stack||e.message||"";throw v("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw e}),0),e})).then((function(e){return t.operationInProgress=!1,e}))}));return this.tail=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),b(t>=0,"Attempted to schedule an operation with a negative delay of "+t),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);var i=me.createAndSchedule(this,e,t,n,(function(e){return r.removeDelayedOperation(e)}));return this.delayedOperations.push(i),i},e.prototype.verifyNotFailed=function(){this.failure&&y("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},e.prototype.verifyOperationInProgress=function(){b(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},e.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},e.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++){if(n[t].timerId===e)return!0}return!1},e.prototype.runDelayedOperationsEarly=function(e){var t=this;return this.drain().then((function(){b(e===re.All||t.containsDelayedOperation(e),"Attempted to drain to missing operation "+e),t.delayedOperations.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),e!==re.All&&i.timerId===e)break}return t.drain()}))},e.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},e.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);b(t>=0,"Delayed operation not found."),this.delayedOperations.splice(t,1)},e}();function ge(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=be(t)),t=ye(e.get(n),t);return be(t)}function ye(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function be(e){return e+"\x01\x01"}function _e(e){var t=e.length;if(b(t>=2,"Invalid path "+e),2===t)return b("\x01"===e.charAt(0)&&"\x01"===e.charAt(1),"Non-empty path "+e+" had length 2"),le.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&y('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:y('Invalid encoded resource path: "'+e+'"')}o=a+2}return new le(r)}var we=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e}(),xe=function(){function e(e){this.timestamp=e}return e.fromMicroseconds=function(t){var n=Math.floor(t/1e6);return new e(new we(n,t%1e6*1e3))},e.fromTimestamp=function(t){return new e(t)},e.forDeletedDoc=function(){return e.MIN},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e.MIN=new e(new we(0,0)),e}(),Te=function(){function e(e,t){this.comparator=e,this.root=t||Ee.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ee.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ee.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new Se(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new Se(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new Se(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new Se(this.root,e,this.comparator,!0)},e}(),Se=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){b(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Ee=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw y("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw y("Black depths differ");return e+(this.isRed()?0:1)},e.EMPTY=null,e.RED=!0,e.BLACK=!1,e}(),Me=function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw y("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw y("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw y("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw y("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw y("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Ee(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}();Ee.EMPTY=new Me;var Ce=function(){function e(e){this.comparator=e,this.data=new Te(this.comparator)}return e.fromMapKeys=function(t){var n=new e(t.comparator);return t.forEach((function(e){n=n.add(e)})),n},e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();){if(!e(n.getNext().key))return}},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Ae(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Ae(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Ae=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Pe=new Te(de.comparator);function Oe(){return Pe}function ke(){return Oe()}var Ie=new Te(de.comparator);function Re(){return Ie}var De=new Te(de.comparator);function Le(){return De}var Ne=new Ce(de.comparator);function Fe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Ne,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ue=new Ce(Z);function je(){return Ue}var Be=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r,b(r.length>0,"Cannot create an empty mutation batch")}return e.prototype.applyToRemoteDocument=function(e,t,n){t&&b(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;b(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},e.prototype.applyToLocalView=function(e,t){t&&b(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++){(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime))}for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Fe())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&$(this.mutations,e.mutations)&&$(this.baseMutations,e.baseMutations)},e}(),ze=function(){function e(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return e.from=function(t,n,r,i){b(t.mutations.length===r.length,"Mutations sent "+t.mutations.length+" must equal results received "+r.length);for(var o=Le(),a=t.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new e(t,n,r,i,o)},e}(),Ve=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&y("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++){r(o[i])}return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),We="SimpleDb",Ge=function(){function t(e){this.db=e,12.2===t.getIOSVersion(u.getUA())&&v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.openOrCreate=function(e,n,r){return b(t.isAvailable(),"IndexedDB not supported in current environment."),m(We,"Opening database:",e),new Ve((function(i,o){var a=window.indexedDB.open(e,n);a.onsuccess=function(e){var n=e.target.result;i(new t(n))},a.onblocked=function(){o(new T(x.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var t=e.target.error;"VersionError"===t.name?o(new T(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(t)},a.onupgradeneeded=function(t){m(We,'Database "'+e+'" requires upgrade from version:',t.oldVersion);var n=t.target.result;r.createOrUpgrade(n,a.transaction,t.oldVersion,Zt).next((function(){m(We,"Database upgrade to version "+Zt+" complete")}))}})).toPromise()},t.delete=function(e){return m(We,"Removing database:",e),Ke(window.indexedDB.deleteDatabase(e)).toPromise()},t.isAvailable=function(){if("undefined"===typeof window||null==window.indexedDB)return!1;if(t.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=u.getUA(),n=t.getIOSVersion(e),r=0<n&&n<10,i=t.getAndroidVersion(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.isMockPersistence=function(){var t;return"undefined"!==typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:""}))||void 0===t?void 0:t.USE_MOCK_PERSISTENCE)},t.getStore=function(e,t){return e.store(t)},t.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.setVersionChangeListener=function(e){this.db.onversionchange=function(t){return e(t)}},t.prototype.runTransaction=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(l){switch(l.label){case 0:r=e.startsWith("readonly"),i=e.endsWith("idempotent"),o=0,s=function(){var e,s,c,l;return a.__generator(this,(function(a){switch(a.label){case 0:++o,e=qe.open(u.db,r?"readonly":"readwrite",t),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(e).catch((function(t){return e.abort(t),Ve.reject(t)})).toPromise()).catch((function(){})),[4,e.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return c=a.sent(),l=i&&"FirebaseError"!==c.name&&o<3,m(We,"Transaction failed with error: %s. Retrying: %s.",c.message,l),l?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:return"object"===typeof(c=l.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),He=function(){function e(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),e.prototype.done=function(){this.shouldStop=!0},e.prototype.skip=function(e){this.nextKey=e},e.prototype.delete=function(){return Ke(this.dbCursor.delete())},e}(),qe=function(){function e(e){var t=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new pe,this.transaction.oncomplete=function(){t.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?t.completionDeferred.reject(e.error):t.completionDeferred.resolve()},this.transaction.onerror=function(e){var n=Qe(e.target.error);t.completionDeferred.reject(n)}}return e.open=function(t,n,r){return new e(t.transaction(r,n))},Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),e.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(m(We,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return b(!!t,"Object store not part of transaction: "+e),new Ye(t)},e}(),Ye=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(m(We,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(m(We,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ke(n)},e.prototype.add=function(e){return m(We,"ADD",this.store.name,e,e),Ke(this.store.add(e))},e.prototype.get=function(e){var t=this;return Ke(this.store.get(e)).next((function(n){return void 0===n&&(n=null),m(We,"GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return m(We,"DELETE",this.store.name,e),Ke(this.store.delete(e))},e.prototype.count=function(){return m(We,"COUNT",this.store.name),Ke(this.store.count())},e.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.deleteAll=function(e,t){m(We,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(e,t,n){return n.delete()}))},e.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},e.prototype.iterateSerial=function(e){var t=this.cursor({});return new Ve((function(n,r){t.onerror=function(e){var t=Qe(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.iterateCursor=function(e,t){var n=[];return new Ve((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new He(i),a=t(i.primaryKey,i.value,o);if(a instanceof Ve){var s=a.catch((function(e){return o.done(),Ve.reject(e)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Ve.waitFor(n)}))},e.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"===typeof e?n=e:(b(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function Ke(e){return new Ve((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Qe(e.target.error);n(t)}}))}var Xe=!1;function Qe(e){var t=Ge.getIOSVersion(u.getUA());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new T("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Xe||(Xe=!0,setTimeout((function(){throw r}),0)),r}}return e}var Je=function(){function e(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return e.forUser=function(t,n,r,i){return b(""!==t.uid,"UserID must not be an empty string."),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return tt(e).iterate({index:rn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.acknowledgeBatch=function(e,t,n){return this.getMutationQueueMetadata(e).next((function(t){return t.lastStreamToken=et(n),rt(e).put(t)}))},e.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next((function(e){return e.lastStreamToken}))},e.prototype.setLastStreamToken=function(e,t){return this.getMutationQueueMetadata(e).next((function(n){return n.lastStreamToken=et(t),rt(e).put(n)}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=nt(e),a=tt(e);return a.add({}).next((function(s){b("number"===typeof s,"Auto-generated key is not a number");for(var u=new Be(s,t,n,r),c=i.serializer.toDbMutationBatch(i.userId,u),l=[],h=new Ce((function(e,t){return Z(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=on.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,on.PLACEHOLDER))}return h.forEach((function(t){l.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=u.keys()})),Ve.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return tt(e).get(t).next((function(e){return e?(b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null}))},e.prototype.lookupMutationKeys=function(e,t){var n=this;return this.documentKeysByBatchId[t]?Ve.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.documentKeysByBatchId[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return tt(e).iterate({index:rn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(b(t.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return tt(e).iterate({index:rn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return tt(e).loadAll(rn.userMutationsIndex,n).next((function(e){return e.map((function(e){return t.serializer.fromDbMutationBatch(e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=on.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return nt(e).iterate({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=_e(u);if(s===n.userId&&t.path.isEqual(l))return tt(e).get(c).next((function(e){if(!e)throw y("Dangling document-mutation reference found: "+r+" which points to "+c);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+c),o.push(n.serializer.fromDbMutationBatch(e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ce(Z),i=[];return t.forEach((function(t){var o=on.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=nt(e).iterate({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=_e(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Ve.waitFor(i).next((function(){return n.lookupMutationBatches(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this;b(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=t.path,i=r.length+1,o=on.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ce(Z);return nt(e).iterate({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=_e(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.lookupMutationBatches(e,s)}))},e.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(tt(e).get(t).next((function(e){if(null===e)throw y("Dangling document-mutation reference found, which points to "+t);b(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))})))})),Ve.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return $e(e.simpleDbTransaction,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.removeCachedMutationKeys(t.batchId)})),Ve.forEach(r,(function(t){return n.referenceDelegate.removeMutationReference(e,t)}))}))},e.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Ve.resolve();var r=IDBKeyRange.lowerBound(on.prefixForUser(t.userId)),i=[];return nt(e).iterate({range:r},(function(e,n,r){if(e[0]===t.userId){var o=_e(e[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(e){return e.canonicalString()})))}))}))},e.prototype.containsKey=function(e,t){return Ze(e,this.userId,t)},e.prototype.getMutationQueueMetadata=function(e){var t=this;return rt(e).get(this.userId).next((function(e){return e||new nn(t.userId,-1,"")}))},e}();function Ze(e,t,n){var r=on.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return nt(e).iterate({range:o,keysOnly:!0},(function(e,n,r){var o=e[0],s=e[1];e[2];o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function $e(e,t,n){var r=e.store(rn.store),i=e.store(on.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){b(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=on.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Ve.waitFor(o).next((function(){return c}))}function et(e){return e instanceof Uint8Array?(b(Ge.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function tt(e){return Nn.getStore(e,rn.store)}function nt(e){return Nn.getStore(e,on.store)}function rt(e){return Nn.getStore(e,nn.store)}var it;!function(e){e[e.QueryCache=0]="QueryCache",e[e.SyncEngine=1]="SyncEngine"}(it||(it={}));var ot=function(){function e(e,t){this.generatorId=e,b((1&e)===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}return e.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},e.prototype.after=function(e){return this.seek(e+2),this.next()},e.prototype.seek=function(e){b((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},e.forTargetCache=function(){return new e(it.QueryCache,2)},e.forSyncEngine=function(){return new e(it.SyncEngine)},e}(),at=function(){function e(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=ot.forTargetCache()}return e.prototype.allocateTargetId=function(e){var t=this;return this.retrieveMetadata(e).next((function(n){return n.highestTargetId=t.targetIdGenerator.after(n.highestTargetId),t.saveMetadata(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next((function(e){return xe.fromTimestamp(new we(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return ct(e.simpleDbTransaction)},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.retrieveMetadata(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.saveMetadata(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.saveTargetData(e,t).next((function(){return n.retrieveMetadata(e).next((function(r){return r.targetCount+=1,n.updateMetadataFromTargetData(t,r),n.saveMetadata(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return st(e).delete(t.targetId)})).next((function(){return n.retrieveMetadata(e)})).next((function(t){return b(t.targetCount>0,"Removing from an empty target cache"),t.targetCount-=1,n.saveMetadata(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return st(e).iterate((function(a,s){var u=r.serializer.fromDbTarget(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return Ve.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){var n=this;return st(e).iterate((function(e,r){var i=n.serializer.fromDbTarget(r);t(i)}))},e.prototype.retrieveMetadata=function(e){return ut(e.simpleDbTransaction)},e.prototype.saveMetadata=function(e,t){return(n=e,Nn.getStore(n,fn.store)).put(fn.key,t);var n},e.prototype.saveTargetData=function(e,t){return st(e).put(this.serializer.toDbTarget(t))},e.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=this,r=t.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return st(e).iterate({range:i,index:ln.queryTargetsIndexName},(function(e,r,i){var a=n.serializer.fromDbTarget(r);t.isEqual(a.target)&&(o=a,i.done())})).next((function(){return o}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=lt(e);return t.forEach((function(t){var a=ge(t.path);i.push(o.put(new hn(n,a))),i.push(r.referenceDelegate.addReference(e,t))})),Ve.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=lt(e);return Ve.forEach(t,(function(t){var o=ge(t.path);return Ve.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=lt(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lt(e),i=Fe();return r.iterate({range:n,keysOnly:!0},(function(e,t,n){var r=_e(e[1]),o=new de(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=ge(t.path),r=IDBKeyRange.bound([n],[ee(n)],!1,!0),i=0;return lt(e).iterate({index:hn.documentTargetsIndex,keysOnly:!0,range:r},(function(e,t,n){var r=e[0];e[1];0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.getTargetDataForTarget=function(e,t){var n=this;return st(e).get(t).next((function(e){return e?n.serializer.fromDbTarget(e):null}))},e}();function st(e){return Nn.getStore(e,ln.store)}function ut(e){return Ge.getStore(e,fn.store).get(fn.key).next((function(e){return b(null!==e,"Missing metadata row."),e}))}function ct(e){return ut(e).next((function(e){return e.highestListenSequenceNumber}))}function lt(e){return Nn.getStore(e,hn.store)}var ht,ft=function(){function e(e){this.fields=e}return e.fromSet=function(t){return new e(t)},e.fromArray=function(t){var n=new Ce(fe.comparator);return t.forEach((function(e){return n=n.add(e)})),new e(n)},e.prototype.covers=function(e){var t=!1;return this.fields.forEach((function(n){n.isPrefixOf(e)&&(t=!0)})),t},e.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},e}(),dt=function(){function e(e,t){this.field=e,this.transform=t}return e.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},e}(),pt=function(e,t){this.version=e,this.transformResults=t};!function(e){e[e.Set=0]="Set",e[e.Patch=1]="Patch",e[e.Transform=2]="Transform",e[e.Delete=3]="Delete"}(ht||(ht={}));var mt,vt,gt=function(){function e(e,t){this.updateTime=e,this.exists=t,b(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}return e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),e.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof Bt&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof Bt:(b(this.isNone,"Precondition should be empty"),!0)},e.prototype.isEqual=function(e){return t=this.updateTime,n=e.updateTime,(null!==t&&void 0!==t?!(!n||!t.isEqual(n)):t===n)&&this.exists===e.exists;var t,n},e.NONE=new e,e}(),yt=function(){function e(){}return e.prototype.verifyKeyMatches=function(e){null!=e&&b(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},e.getPostMutationVersion=function(e){return e instanceof Bt?e.version:xe.MIN},e}(),bt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.value=n,i.precondition=r,i.type=ht.Set,i}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new Bt(this.key,n,{hasCommittedMutations:!0},this.value)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=yt.getPostMutationVersion(e);return new Bt(this.key,r,{hasLocalMutations:!0},this.value)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},t}(yt),_t=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.key=t,o.data=n,o.fieldMask=r,o.precondition=i,o.type=ht.Patch,o}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Vt(this.key,t.version);var n=this.patchDocument(e);return new Bt(this.key,t.version,{hasCommittedMutations:!0},n)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=yt.getPostMutationVersion(e),i=this.patchDocument(e);return new Bt(this.key,r,{hasLocalMutations:!0},i)},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},t.prototype.patchDocument=function(e){var t;return t=e instanceof Bt?e.data():Ft.EMPTY,this.patchObject(t)},t.prototype.patchObject=function(e){var t=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e=null!==r?e.set(n,r):e.delete(n)}})),e},t}(yt),wt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.fieldTransforms=n,r.type=ht.Transform,r.precondition=gt.exists(!0),r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),b(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Vt(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new Bt(this.key,i,{hasCommittedMutations:!0},o)},t.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new Bt(this.key,r.version,{hasLocalMutations:!0},o)},t.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof Bt?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?Ft.EMPTY.set(i.field,a):t.set(i.field,a))}return t},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&$(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},t.prototype.requireDocument=function(e){return b(e instanceof Bt,"Unknown MaybeDocument type "+e),b(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},t.prototype.serverTransformResults=function(e,t){var n=[];b(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof Bt&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},t.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof Bt&&(u=t.field(a.field)),null===u&&n instanceof Bt&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},t.prototype.transformObject=function(e,t){b(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},t}(yt),xt=function(e){function t(t,n){var r=e.call(this)||this;return r.key=t,r.precondition=n,r.type=ht.Delete,r}return a.__extends(t,e),t.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),b(null==t.transformResults,"Transform results received by DeleteMutation."),new zt(this.key,t.version,{hasCommittedMutations:!0})},t.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&b(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new zt(this.key,xe.forDeletedDoc())):e},t.prototype.extractBaseValue=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},t}(yt);!function(e){e[e.NullValue=0]="NullValue",e[e.BooleanValue=1]="BooleanValue",e[e.NumberValue=2]="NumberValue",e[e.TimestampValue=3]="TimestampValue",e[e.StringValue=4]="StringValue",e[e.BlobValue=5]="BlobValue",e[e.RefValue=6]="RefValue",e[e.GeoPointValue=7]="GeoPointValue",e[e.ArrayValue=8]="ArrayValue",e[e.ObjectValue=9]="ObjectValue"}(mt||(mt={})),function(e){e[e.Default=0]="Default",e[e.Estimate=1]="Estimate",e[e.Previous=2]="Previous"}(vt||(vt={}));var Tt=function(){function e(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}return e.fromSnapshotOptions=function(t,n){switch(t.serverTimestamps){case"estimate":return new e(vt.Estimate,n);case"previous":return new e(vt.Previous,n);case"none":case void 0:return new e(vt.Default,n);default:return y("fromSnapshotOptions() called with invalid options.")}},e}(),St=function(){function e(){}return e.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},e.prototype.defaultCompareTo=function(e){return b(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Z(this.typeOrder,e.typeOrder)},e}(),Et=function(e){function t(){var t=e.call(this)||this;return t.typeOrder=mt.NullValue,t.internalValue=null,t}return a.__extends(t,e),t.prototype.value=function(e){return null},t.prototype.isEqual=function(e){return e instanceof t},t.prototype.compareTo=function(e){return e instanceof t?0:this.defaultCompareTo(e)},t.INSTANCE=new t,t}(St),Mt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.BooleanValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Z(this,e):this.defaultCompareTo(e)},t.of=function(e){return e?t.TRUE:t.FALSE},t.TRUE=new t(!0),t.FALSE=new t(!1),t}(St),Ct=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.NumberValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.compareTo=function(e){return e instanceof t?(n=this.internalValue,r=e.internalValue,n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1):this.defaultCompareTo(e);var n,r},t}(St);function At(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}var Pt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&At(this.internalValue,e.internalValue)},t}(Ct),Ot=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.isEqual=function(e){return e instanceof t&&At(this.internalValue,e.internalValue)},t.NAN=new t(NaN),t.POSITIVE_INFINITY=new t(1/0),t.NEGATIVE_INFINITY=new t(-1/0),t}(Ct),kt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.StringValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue===e.internalValue},t.prototype.compareTo=function(e){return e instanceof t?Z(this.internalValue,e.internalValue):this.defaultCompareTo(e)},t}(St),It=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.TimestampValue,n}return a.__extends(t,e),t.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):e instanceof Rt?-1:this.defaultCompareTo(e)},t}(St),Rt=function(e){function t(t,n){var r=e.call(this)||this;return r.localWriteTime=t,r.previousValue=n,r.typeOrder=mt.TimestampValue,r}return a.__extends(t,e),t.prototype.value=function(e){return e&&e.serverTimestampBehavior===vt.Estimate?new It(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===vt.Previous&&this.previousValue?this.previousValue.value(e):null},t.prototype.isEqual=function(e){return e instanceof t&&this.localWriteTime.isEqual(e.localWriteTime)},t.prototype.compareTo=function(e){return e instanceof t?this.localWriteTime._compareTo(e.localWriteTime):e instanceof It?1:this.defaultCompareTo(e)},t.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},t}(St),Dt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.BlobValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(St),Lt=function(e){function t(t,n){var r=e.call(this)||this;return r.databaseId=t,r.key=n,r.typeOrder=mt.RefValue,r}return a.__extends(t,e),t.prototype.value=function(e){return this.key},t.prototype.isEqual=function(e){return e instanceof t&&(this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId))},t.prototype.compareTo=function(e){if(e instanceof t){var n=this.databaseId.compareTo(e.databaseId);return 0!==n?n:de.comparator(this.key,e.key)}return this.defaultCompareTo(e)},t}(St),Nt=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.GeoPointValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue},t.prototype.isEqual=function(e){return e instanceof t&&this.internalValue.isEqual(e.internalValue)},t.prototype.compareTo=function(e){return e instanceof t?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},t}(St),Ft=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.ObjectValue,n}return a.__extends(t,e),t.prototype.value=function(e){var t={};return this.internalValue.inorderTraversal((function(n,r){t[n]=r.value(e)})),t},t.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},t.prototype.isEqual=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=this.internalValue.getIterator(),r=e.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=Z(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return Z(n.hasNext(),r.hasNext())}return this.defaultCompareTo(e)},t.prototype.set=function(e,n){if(b(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),n);var r=this.child(e.firstSegment());r instanceof t||(r=t.EMPTY);var i=r.set(e.popFirst(),n);return this.setChild(e.firstSegment(),i)},t.prototype.delete=function(e){if(b(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new t(this.internalValue.remove(e.firstSegment()));var n=this.child(e.firstSegment());if(n instanceof t){var r=n.delete(e.popFirst());return new t(this.internalValue.insert(e.firstSegment(),r))}return this},t.prototype.contains=function(e){return null!==this.field(e)},t.prototype.field=function(e){b(!e.isEmpty(),"Can't get field of empty path");var n=this;return e.forEach((function(e){n=n instanceof t?n.internalValue.get(e):null})),n},t.prototype.fieldMask=function(){var e=new Ce(fe.comparator);return this.internalValue.forEach((function(n,r){var i=new fe([n]);if(r instanceof t){var o=r.fieldMask().fields;o.isEmpty()?e=e.add(i):o.forEach((function(t){e=e.add(i.child(t))}))}else e=e.add(i)})),ft.fromSet(e)},t.prototype.toString=function(){return this.internalValue.toString()},t.prototype.child=function(e){return this.internalValue.get(e)||void 0},t.prototype.setChild=function(e,n){return new t(this.internalValue.insert(e,n))},t.EMPTY=new t(new Te(Z)),t}(St),Ut=function(e){function t(t){var n=e.call(this)||this;return n.internalValue=t,n.typeOrder=mt.ArrayValue,n}return a.__extends(t,e),t.prototype.value=function(e){return this.internalValue.map((function(t){return t.value(e)}))},t.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++){if(n[t].isEqual(e))return!0}return!1},t.prototype.forEach=function(e){this.internalValue.forEach(e)},t.prototype.isEqual=function(e){if(e instanceof t){if(this.internalValue.length!==e.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(e.internalValue[n]))return!1;return!0}return!1},t.prototype.compareTo=function(e){if(e instanceof t){for(var n=Math.min(this.internalValue.length,e.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(e.internalValue[r]);if(i)return i}return Z(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},t.prototype.toString=function(){return"["+this.internalValue.map((function(e){return e.toString()})).join(",")+"]"},t}(St),jt=function(){function e(e,t){this.key=e,this.version=t}return e.compareByKey=function(e,t){return de.comparator(e.key,t.key)},e}(),Bt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,b(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(t,e),t.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},t.prototype.data=function(){var e=this;if(!this.objectValue){var t=Ft.EMPTY;A(this.proto.fields||{},(function(n,r){t=t.set(new fe([n]),e.converter(r))})),this.objectValue=t,this.fieldValueCache=void 0}return this.objectValue},t.prototype.value=function(){return this.data().value()},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.getProtoField=function(e){b(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},t.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):y("Trying to compare documents on fields that don't exist")},t}(jt),zt=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(jt),Vt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(jt),Wt=function(){function e(e){this.mapKeyFn=e,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){A(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return P(this.inner)},e}(),Gt=function(){function e(){this.changes=new Wt((function(e){return e.toString()})),this.changesApplied=!1}return Object.defineProperty(e.prototype,"readTime",{get:function(){return b(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){b(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},e.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Ve.resolve(n):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){b(!this.changesApplied,"Changes have already been applied.")},e}(),Ht=function(){function e(e,t){this.serializer=e,this.indexManager=t}return e.prototype.addEntry=function(e,t,n){return Yt(e).put(Kt(t),n)},e.prototype.removeEntry=function(e,t){var n=Yt(e),r=Kt(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.setMetadata(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return Yt(e).get(Kt(t)).next((function(e){return n.maybeDecodeDocument(e)}))},e.prototype.getSizedEntry=function(e,t){var n=this;return Yt(e).get(Kt(t)).next((function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Xt(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=ke();return this.forEachDbEntry(e,t,(function(e,t){var i=n.maybeDecodeDocument(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.getSizedEntries=function(e,t){var n=this,r=ke(),i=new Te(de.comparator);return this.forEachDbEntry(e,t,(function(e,t){var o=n.maybeDecodeDocument(t);o?(r=r.insert(e,o),i=i.insert(e,Xt(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},e.prototype.forEachDbEntry=function(e,t,n){if(t.isEmpty())return Ve.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return Yt(e).iterate({range:r},(function(e,t,r){for(var a=de.fromSegments(e);o&&de.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this;b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Re(),o=t.path.length+1,a={};if(n.isEqual(xe.MIN)){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=un.collectionReadTimeIndex}return Yt(e).iterate(a,(function(e,n,a){if(e.length===o){var s=r.serializer.fromDbRemoteDocument(n);t.path.isPrefixOf(s.key.path)?s instanceof Bt&&t.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.getNewDocumentChanges=function(e,t){var n=this,r=Oe(),i=this.serializer.toDbTimestampKey(t),o=Yt(e),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:un.readTimeIndex,range:a},(function(e,t){var o=n.serializer.fromDbRemoteDocument(t);r=r.insert(o.key,o),i=t.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},e.prototype.getLastDocumentChange=function(e){var t,n=this,r=Yt(e),i=xe.MIN;return r.iterate({index:un.readTimeIndex,reverse:!0},(function(e,r,o){t=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:t,readTime:i}}))},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this,!!t&&t.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return qt(e).get(cn.key).next((function(e){return b(!!e,"Missing document cache metadata"),e}))},e.prototype.setMetadata=function(e,t){return qt(e).put(cn.key,t)},e.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof zt&&t.version.isEqual(xe.forDeletedDoc())?null:t}return null},e.RemoteDocumentChangeBuffer=function(e){function t(t,n){var r=e.call(this)||this;return r.documentCache=t,r.trackRemovals=n,r.documentSizes=new Wt((function(e){return e.toString()})),r}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Ce((function(e,t){return Z(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.documentSizes.get(o);if(b(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){b(!t.readTime.isEqual(xe.MIN),"Cannot add a document with a read time of zero");var u=t.documentCache.serializer.toDbRemoteDocument(a,t.readTime);i=i.add(o.path.popLast());var c=Xt(u);r+=c-s,n.push(t.documentCache.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=t.documentCache.serializer.toDbRemoteDocument(new zt(o,xe.forDeletedDoc()),t.readTime);n.push(t.documentCache.addEntry(e,o,l))}else n.push(t.documentCache.removeEntry(e,o))})),i.forEach((function(r){n.push(t.documentCache.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.documentCache.updateMetadata(e,r)),Ve.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next((function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next((function(e){var t=e.maybeDocuments;return e.sizeMap.forEach((function(e,t){n.documentSizes.set(e,t)})),t}))},t}(Gt),e}();function qt(e){return Nn.getStore(e,cn.store)}function Yt(e){return Nn.getStore(e,un.store)}function Kt(e){return e.path.toArray()}function Xt(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw y("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Qt=function(){function e(){this.collectionParentIndex=new Jt}return e.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),Ve.resolve()},e.prototype.getCollectionParents=function(e,t){return Ve.resolve(this.collectionParentIndex.getEntries(t))},e}(),Jt=function(){function e(){this.index={}}return e.prototype.add=function(e){b(e.length%2===1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ce(le.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Ce(le.comparator)).toArray()},e}(),Zt=9,$t=function(){function e(e){this.serializer=e}return e.prototype.createOrUpgrade=function(e,t,n,r){var i=this;b(n<r&&n>=0&&r<=Zt,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new qe(t);n<1&&r>=1&&(function(e){e.createObjectStore(tn.store)}(e),function(e){e.createObjectStore(nn.store,{keyPath:nn.keyPath}),e.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(on.store)}(e),pn(e),function(e){e.createObjectStore(un.store)}(e));var a=Ve.resolve();return n<3&&r>=3&&(0!==n&&(!function(e){e.deleteObjectStore(hn.store),e.deleteObjectStore(ln.store),e.deleteObjectStore(fn.store)}(e),pn(e)),a=a.next((function(){return function(e){var t=e.store(fn.store),n=new fn(0,0,xe.MIN.toTimestamp(),0);return t.put(fn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(rn.store).loadAll().next((function(n){e.deleteObjectStore(rn.store),e.createObjectStore(rn.store,{keyPath:rn.keyPath,autoIncrement:!0}).createIndex(rn.userMutationsIndex,rn.userMutationsKeyPath,{unique:!0});var r=t.store(rn.store),i=n.map((function(e){return r.put(e)}));return Ve.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(mn.store,{keyPath:mn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(cn.store)}(e),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(un.store);t.createIndex(un.readTimeIndex,un.readTimeIndexPath,{unique:!1}),t.createIndex(un.collectionReadTimeIndex,un.collectionReadTimeIndexPath,{unique:!1})}(t)}))),a},e.prototype.addDocumentGlobal=function(e){var t=0;return e.store(un.store).iterate((function(e,n){t+=Xt(n)})).next((function(){var n=new cn(t);return e.store(cn.store).put(cn.key,n)}))},e.prototype.removeAcknowledgedMutations=function(e){var t=this,n=e.store(nn.store),r=e.store(rn.store);return n.loadAll().next((function(n){return Ve.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(rn.userMutationsIndex,i).next((function(r){return Ve.forEach(r,(function(r){b(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=t.serializer.fromDbMutationBatch(r);return $e(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ensureSequenceNumbers=function(e){var t=e.store(hn.store),n=e.store(un.store);return ct(e).next((function(e){var r=[];return n.iterate((function(n,i){var o=new le(n),a=function(e){return[0,ge(e)]}(o);r.push(t.get(a).next((function(n){return n?Ve.resolve():function(n){return t.put(new hn(0,ge(n),e))}(o)})))})).next((function(){return Ve.waitFor(r)}))}))},e.prototype.createCollectionParentIndex=function(e,t){e.createObjectStore(dn.store,{keyPath:dn.keyPath});var n=t.store(dn.store),r=new Jt,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ge(i)})}};return t.store(un.store).iterate({keysOnly:!0},(function(e,t){var n=new le(e);return i(n.popLast())})).next((function(){return t.store(on.store).iterate({keysOnly:!0},(function(e,t){e[0];var n=e[1],r=(e[2],_e(n));return i(r.popLast())}))}))},e}();var en=function(e,t){this.seconds=e,this.nanoseconds=t},tn=function(){function e(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}return e.store="owner",e.key="owner",e}();var nn=function(){function e(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}return e.store="mutationQueues",e.keyPath="userId",e}(),rn=function(){function e(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return e.store="mutations",e.keyPath="batchId",e.userMutationsIndex="userMutationsIndex",e.userMutationsKeyPath=["userId","batchId"],e}();var on=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,ge(t)]},e.key=function(e,t,n){return[e,ge(t),n]},e.store="documentMutations",e.PLACEHOLDER=new e,e}();var an=function(e,t){this.path=e,this.readTime=t},sn=function(e,t){this.path=e,this.version=t},un=function(){function e(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return e.store="remoteDocuments",e.readTimeIndex="readTimeIndex",e.readTimeIndexPath="readTime",e.collectionReadTimeIndex="collectionReadTimeIndex",e.collectionReadTimeIndexPath=["parentPath","readTime"],e}(),cn=function(){function e(e){this.byteSize=e}return e.store="remoteDocumentGlobal",e.key="remoteDocumentGlobalKey",e}();var ln=function(){function e(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return e.store="targets",e.keyPath="targetId",e.queryTargetsIndexName="queryTargetsIndex",e.queryTargetsKeyPath=["canonicalId","targetId"],e}(),hn=function(){function e(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n,b(0===e===(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return e.store="targetDocuments",e.keyPath=["targetId","path"],e.documentTargetsIndex="documentTargetsIndex",e.documentTargetsKeyPath=["path","targetId"],e}(),fn=function(){function e(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return e.key="targetGlobalKey",e.store="targetGlobal",e}(),dn=function(){function e(e,t){this.collectionId=e,this.parent=t}return e.store="collectionParents",e.keyPath=["collectionId","parent"],e}();function pn(e){e.createObjectStore(hn.store,{keyPath:hn.keyPath}).createIndex(hn.documentTargetsIndex,hn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(ln.store,{keyPath:ln.keyPath}).createIndex(ln.queryTargetsIndexName,ln.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(fn.store)}var mn=function(){function e(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}return e.store="clientMetadata",e.keyPath="clientId",e}();var vn,gn=[nn.store,rn.store,on.store,un.store,ln.store,tn.store,fn.store,hn.store],yn=a.__spreadArrays(gn,[mn.store]),bn=a.__spreadArrays(yn,[cn.store]),_n=a.__spreadArrays(bn,[dn.store]),wn=function(){function e(){this.collectionParentsCache=new Jt}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(b(t.length%2===1,"Expected a collection path."),!this.collectionParentsCache.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.collectionParentsCache.add(t)}));var o={collectionId:r,parent:ge(i)};return xn(e).put(o)}return Ve.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ee(t),""],!1,!0);return xn(e).loadAll(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(_e(o.parent))}return n}))},e}();function xn(e){return Nn.getStore(e,dn.store)}!function(e){e[e.Listen=0]="Listen",e[e.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",e[e.LimboResolution=2]="LimboResolution"}(vn||(vn={}));var Tn=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=xe.MIN),void 0===o&&(o=xe.MIN),void 0===a&&(a=w()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},e}(),Sn=function(){function e(e){this.remoteSerializer=e}return e.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=de.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new zt(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){t=de.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version);return new Vt(t,n)}return y("Unexpected DbRemoteDocument")},e.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof Bt){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new un(null,null,i,o,n,r)}if(e instanceof zt){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);o=e.hasCommittedMutations;return new un(null,new an(a,s),null,o,n,r)}if(e instanceof Vt){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new un(new sn(a,u),null,null,!0,n,r)}return y("Unexpected MaybeDocument")},e.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},e.prototype.fromDbTimestampKey=function(e){var t=new we(e[0],e[1]);return xe.fromTimestamp(t)},e.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new en(t.seconds,t.nanoseconds)},e.prototype.fromDbTimestamp=function(e){var t=new we(e.seconds,e.nanoseconds);return xe.fromTimestamp(t)},e.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map((function(e){return n.remoteSerializer.toMutation(e)})),i=t.mutations.map((function(e){return n.remoteSerializer.toMutation(e)}));return new rn(e,t.batchId,t.localWriteTime.toMillis(),r,i)},e.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map((function(e){return t.remoteSerializer.fromMutation(e)})),r=e.mutations.map((function(e){return t.remoteSerializer.fromMutation(e)})),i=we.fromMillis(e.localWriteTimeMs);return new Be(e.batchId,i,n,r)},e.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach((function(e){t.push(ge(e.path))})),t},e.prototype.fromDbResourcePaths=function(e){for(var t=Fe(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new de(_e(i)))}return t},e.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):xe.MIN,i=e.resumeToken;return t=void 0!==e.query.documents?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Tn(t,e.targetId,vn.Listen,e.lastListenSequenceNumber,n,r,i)},e.prototype.toDbTarget=function(e){b(vn.Listen===e.purpose,"Only queries with purpose "+vn.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),e.resumeToken instanceof Uint8Array?(b(Ge.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=e.resumeToken.toString()):n=e.resumeToken,new ln(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},e}();function En(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Z(n,i);return 0===a?Z(r,o):a}var Mn=function(){function e(e){this.maxElements=e,this.buffer=new Ce(En),this.previousIndex=0}return e.prototype.nextIndex=function(){return++this.previousIndex},e.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();En(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),e}(),Cn={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},An=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e.COLLECTION_DISABLED=-1,e.MINIMUM_CACHE_SIZE_BYTES=1048576,e.DEFAULT_CACHE_SIZE_BYTES=41943040,e.DEFAULT_COLLECTION_PERCENTILE=10,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,e.DEFAULT=new e(e.DEFAULT_CACHE_SIZE_BYTES,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),e.DISABLED=new e(e.COLLECTION_DISABLED,0,0),e}(),Pn=function(){function e(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}return e.prototype.start=function(){b(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==An.COLLECTION_DISABLED&&this.scheduleGC()},e.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),e.prototype.scheduleGC=function(){var e=this;b(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;m("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(re.LruGarbageCollection,t,(function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then((function(){return e.scheduleGC()})).catch(Fn)}))},e}(),On=function(){function e(e,t){this.delegate=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return Ve.resolve(ue.INVALID);var r=new Mn(t);return this.delegate.forEachTarget(e,(function(e){return r.addElement(e.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,(function(e){return r.addElement(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return this.params.cacheSizeCollectionThreshold===An.COLLECTION_DISABLED?(m("LruGarbageCollector","Garbage collection skipped; disabled"),Ve.resolve(Cn)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(m("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Cn):n.runGarbageCollection(e,t)}))},e.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},e.prototype.runGarbageCollection=function(e,t){var n,r,o,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(m("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return o=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){(c=Date.now(),d()<=i.DEBUG)&&m("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms");return Ve.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})}))},e}(),kn=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),In="IndexedDbPersistence",Rn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Ln=function(e){function t(t,n){var r=e.call(this)||this;return r.simpleDbTransaction=t,r.currentSequenceNumber=n,r}return a.__extends(t,e),t}(kn),Nn=function(){function e(t,n,r,i,o,a,s,u){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=u,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new Bn(this,o),this.dbName=n+e.MAIN_DATABASE,this.serializer=new Sn(s),this.document=i.document,this.targetCache=new at(this.referenceDelegate,this.serializer),this.indexManager=new wn,this.remoteDocumentCache=new Ht(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new T(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return e.getStore=function(e,t){if(e instanceof Ln)return Ge.getStore(e.simpleDbTransaction,t);throw y("IndexedDbPersistence must use instances of IndexedDbTransaction")},e.createIndexedDbPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:if(!e.isAvailable())throw new T(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new e(t.allowTabSynchronization,t.persistenceKey,t.clientId,t.platform,t.lruParams,t.queue,t.serializer,t.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},e.prototype.start=function(){var e=this;return b(!this.started,"IndexedDbPersistence double-started!"),b(null!==this.window,"Expected 'window' to be defined"),Ge.openOrCreate(this.dbName,Zt,new $t(this.serializer)).then((function(t){return e.simpleDb=t,e.updateClientMetadataAndTryBecomePrimary()})).then((function(){return e.attachVisibilityHandler(),e.attachWindowUnloadHook(),e.scheduleClientMetadataAndPrimaryLeaseRefreshes(),e.simpleDb.runTransaction("readonly-idempotent",[fn.store],(function(e){return ct(e)}))})).then((function(t){e.listenSequence=new ue(t,e.sequenceNumberSyncer)})).then((function(){e._started=!0})).catch((function(t){return e.simpleDb&&e.simpleDb.close(),Promise.reject(t)}))},e.prototype.setPrimaryStateListener=function(e){var t=this;return this.primaryStateListener=function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.simpleDb.setVersionChangeListener((function(n){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return null!==n.newVersion?[3,2]:[4,e()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.updateClientMetadataAndTryBecomePrimary=function(){var e=this;return this.simpleDb.runTransaction("readwrite-idempotent",_n,(function(t){return jn(t).put(new mn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.verifyPrimaryLease(t).next((function(t){t||(e.isPrimary=!1,e.queue.enqueueAndForget((function(){return e.primaryStateListener(!1)})))}))})).next((function(){return e.canActAsPrimary(t)})).next((function(n){return e.isPrimary&&!n?e.releasePrimaryLeaseIfHeld(t).next((function(){return!1})):!!n&&e.acquireOrExtendPrimaryLease(t).next((function(){return!0}))}))})).catch((function(t){if(!e.allowTabSynchronization)throw t;return m(In,"Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.queue.enqueueAndForget((function(){return e.primaryStateListener(t)})),e.isPrimary=t}))},e.prototype.verifyPrimaryLease=function(e){var t=this;return Un(e).get(tn.key).next((function(e){return Ve.resolve(t.isLocalClient(e))}))},e.prototype.removeClientMetadata=function(e){return jn(e).delete(this.clientId)},e.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=e.getStore(n,mn.store);return r.loadAll().next((function(e){var n=t.filterActiveClients(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return Ve.forEach(i,(function(e){return r.delete(e.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(e){t.window.localStorage.removeItem(t.zombiedClientLocalStorageKey(e.clientId))})),n.label=2;case 2:return[2]}}))}))},e.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(re.ClientMetadataRefresh,4e3,(function(){return e.updateClientMetadataAndTryBecomePrimary().then((function(){return e.maybeGarbageCollectMultiClientState()})).then((function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},e.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.canActAsPrimary=function(e){var t=this;return Un(e).get(tn.key).next((function(n){if(null!==n&&t.isWithinAge(n.leaseTimestampMs,5e3)&&!t.isClientZombied(n.ownerId)){if(t.isLocalClient(n)&&t.networkEnabled)return!0;if(!t.isLocalClient(n)){if(!n.allowTabSynchronization)throw new T(x.FAILED_PRECONDITION,Dn);return!1}}return!(!t.networkEnabled||!t.inForeground)||jn(e).loadAll().next((function(e){return void 0===t.filterActiveClients(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&m(In,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){switch(t.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[tn.store,mn.store],(function(t){return e.releasePrimaryLeaseIfHeld(t).next((function(){return e.removeClientMetadata(t)}))}))];case 1:return t.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},e.prototype.filterActiveClients=function(e,t){var n=this;return e.filter((function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)}))},e.prototype.getActiveClients=function(){var e=this;return this.simpleDb.runTransaction("readonly-idempotent",[mn.store],(function(t){return jn(t).loadAll().next((function(t){return e.filterActiveClients(t,18e5).map((function(e){return e.clientId}))}))}))},e.clearPersistence=function(t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return e.isAvailable()?(n=t+e.MAIN_DATABASE,[4,Ge.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getMutationQueue=function(e){return b(this.started,"Cannot initialize MutationQueue before persistence is started."),Je.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},e.prototype.getTargetCache=function(){return b(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},e.prototype.getRemoteDocumentCache=function(){return b(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},e.prototype.getIndexManager=function(){return b(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},e.prototype.runTransaction=function(e,t,n){var r=this;m(In,"Starting transaction:",e);var i,o=t.endsWith("idempotent"),a=t.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,_n,(function(o){return i=new Ln(o,r.listenSequence.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?r.verifyPrimaryLease(o).next((function(e){return!!e||r.canActAsPrimary(o)})).next((function(t){if(!t)throw v("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new T(x.FAILED_PRECONDITION,Rn);return n(i)})).next((function(e){return r.acquireOrExtendPrimaryLease(o).next((function(){return e}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.verifyAllowTabSynchronization=function(e){var t=this;return Un(e).get(tn.key).next((function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new T(x.FAILED_PRECONDITION,Dn)}))},e.prototype.acquireOrExtendPrimaryLease=function(e){var t=new tn(this.clientId,this.allowTabSynchronization,Date.now());return Un(e).put(tn.key,t)},e.isAvailable=function(){return Ge.isAvailable()},e.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},e.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=Un(e);return n.get(tn.key).next((function(e){return t.isLocalClient(e)?(m(In,"Releasing primary lease."),n.delete(tn.key)):Ve.resolve()}))},e.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(v("Detected an update time that is in the future: "+e+" > "+n),!1))},e.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"===typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},e.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(b(null!==this.document&&"function"===typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},e.prototype.attachWindowUnloadHook=function(){var e=this;"function"===typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},e.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(b("function"===typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},e.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return m(In,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(n){return v(In,"Failed to get zombied client id.",n),!1}},e.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){v("Failed to set zombie client id.",e)}},e.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},e.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e.MAIN_DATABASE="main",e}();function Fn(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){if(!function(e){return e.code===x.FAILED_PRECONDITION&&e.message===Rn}(e))throw e;return m(In,"Unexpectedly lost primary lease"),[2]}))}))}function Un(e){return e.store(tn.store)}function jn(e){return e.store(mn.store)}var Bn=function(){function e(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new On(this,t)}return e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){return this.forEachOrphanedDocument(e,(function(e,n){return t(n)}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return zn(e,t)},e.prototype.removeReference=function(e,t){return zn(e,t)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.removeMutationReference=function(e,t){return zn(e,t)},e.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?Ve.resolve(!0):function(e,t){var n=!1;return rt(e).iterateSerial((function(r){return Ze(e,r,t).next((function(e){return e&&(n=!0),Ve.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(e,(function(a,s){if(s<=t){var u=n.isPinned(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),lt(e).delete([0,ge(a.path)])}))}));i.push(u)}})).next((function(){return Ve.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return zn(e,t)},e.prototype.forEachOrphanedDocument=function(e,t){var n,r=lt(e),i=ue.INVALID;return r.iterate({index:hn.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),s=r.sequenceNumber;0===o?(i!==ue.INVALID&&t(new de(_e(n)),i),i=s,n=a):i=ue.INVALID})).next((function(){i!==ue.INVALID&&t(new de(_e(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function zn(e,t){return lt(e).put(function(e,t){return new hn(0,ge(e.path),t)}(t,e.currentSequenceNumber))}var Vn=Number,Wn=Vn.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Gn=Vn.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Hn=Vn.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e};function qn(e){return null===e||void 0===e}function Yn(e){return Hn(e)&&e<=Gn&&e>=Wn}var Kn,Xn=function(){function e(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}return e.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++){e+=n[t].canonicalId(),e+=","}e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++){e+=i[r].canonicalId(),e+=","}qn(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},e.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(e+=", filters: ["+this.filters.join(", ")+"]"),qn(this.limit)||(e+=", limit: "+this.limit),this.orderBy.length>0&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},e.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&(!!this.path.isEqual(e.path)&&(!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)))},e.prototype.isDocumentQuery=function(){return de.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},e}();!function(e){e.First="F",e.Last="L"}(Kn||(Kn={}));var Qn=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=Kn.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return e.atPath=function(t){return new e(t)},Object.defineProperty(e.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[ur]:this.memoizedOrderBy=[new sr(e),ur];else{b(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:or.ASCENDING;this.memoizedOrderBy.push(a===or.ASCENDING?ur:cr)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),e.prototype.addFilter=function(t){b(null==this.getInequalityFilterField()||!(t instanceof $n)||!t.isInequality()||t.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),b(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([t]);return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.addOrderBy=function(t){b(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([t]);return new e(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.withLimitToFirst=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Kn.First,this.startAt,this.endAt)},e.prototype.withLimitToLast=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),t,Kn.Last,this.startAt,this.endAt)},e.prototype.withStartAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,t,this.endAt)},e.prototype.withEndAt=function(t){return new e(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,t)},e.prototype.asCollectionQueryAtPath=function(t){return new e(t,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},e.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},e.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},e.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},e.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},e.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return b(n,"orderBy used that doesn't compare on key field"),0},e.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},e.prototype.hasLimitToFirst=function(){return!qn(this.limit)&&this.limitType===Kn.First},e.prototype.hasLimitToLast=function(){return!qn(this.limit)&&this.limitType===Kn.Last},e.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},e.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof $n&&n.isInequality())return n.field}return null},e.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof $n&&e.indexOf(r.op)>=0)return r.op}return null},e.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},e.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},e.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===Kn.First)this.memoizedTarget=new Xn(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===or.DESCENDING?or.ASCENDING:or.DESCENDING;e.push(new sr(r.field,i))}var o=this.endAt?new ar(this.endAt.position,!this.endAt.before):null,a=this.startAt?new ar(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new Xn(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},e.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):de.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},e.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},e.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++){if(!n[t].matches(e))return!1}return!0},e.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e))&&(!this.endAt||!this.endAt.sortsBeforeDocument(this.orderBy,e))},e.prototype.assertValidBound=function(e){b(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},e}(),Jn=function(){},Zn=function(){function e(e){this.name=e}return e.fromString=function(t){switch(t){case"<":return e.LESS_THAN;case"<=":return e.LESS_THAN_OR_EQUAL;case"==":return e.EQUAL;case">=":return e.GREATER_THAN_OR_EQUAL;case">":return e.GREATER_THAN;case"array-contains":return e.ARRAY_CONTAINS;case"in":return e.IN;case"array-contains-any":return e.ARRAY_CONTAINS_ANY;default:return y("Unknown FieldFilter operator: "+t)}},e.prototype.toString=function(){return this.name},e.prototype.isEqual=function(e){return this.name===e.name},e.LESS_THAN=new e("<"),e.LESS_THAN_OR_EQUAL=new e("<="),e.EQUAL=new e("=="),e.GREATER_THAN=new e(">"),e.GREATER_THAN_OR_EQUAL=new e(">="),e.ARRAY_CONTAINS=new e("array-contains"),e.IN=new e("in"),e.ARRAY_CONTAINS_ANY=new e("array-contains-any"),e}(),$n=function(e){function t(t,n,r){var i=e.call(this)||this;return i.field=t,i.op=n,i.value=r,i}return a.__extends(t,e),t.create=function(e,n,r){if(e.isKeyField())return n===Zn.IN?(b(r instanceof Ut,"Comparing on key with IN, but filter value not an ArrayValue"),b(r.internalValue.every((function(e){return e instanceof Lt})),"Comparing on key with IN, but an array value was not a RefValue"),new tr(e,r)):(b(r instanceof Lt,"Comparing on key, but filter value not a RefValue"),b(n!==Zn.ARRAY_CONTAINS&&n!==Zn.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new er(e,n,r));if(r.isEqual(Et.INSTANCE)){if(n!==Zn.EQUAL)throw new T(x.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new t(e,n,r)}if(r.isEqual(Ot.NAN)){if(n!==Zn.EQUAL)throw new T(x.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new t(e,n,r)}return n===Zn.ARRAY_CONTAINS?new nr(e,r):n===Zn.IN?(b(r instanceof Ut,"IN filter has invalid value: "+r.toString()),new rr(e,r)):n===Zn.ARRAY_CONTAINS_ANY?(b(r instanceof Ut,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new ir(e,r)):new t(e,n,r)},t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},t.prototype.matchesComparison=function(e){switch(this.op){case Zn.LESS_THAN:return e<0;case Zn.LESS_THAN_OR_EQUAL:return e<=0;case Zn.EQUAL:return 0===e;case Zn.GREATER_THAN:return e>0;case Zn.GREATER_THAN_OR_EQUAL:return e>=0;default:return y("Unknown FieldFilter operator: "+this.op)}},t.prototype.isInequality=function(){return[Zn.LESS_THAN,Zn.LESS_THAN_OR_EQUAL,Zn.GREATER_THAN,Zn.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},t.prototype.isEqual=function(e){return e instanceof t&&(this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value))},t.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},t}(Jn),er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=de.comparator(e.key,t.key);return this.matchesComparison(n)},t}($n),tr=function(e){function t(t,n){var r=e.call(this,t,Zn.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){return this.value.internalValue.some((function(t){return e.key.isEqual(t.key)}))},t}($n),nr=function(e){function t(t,n){return e.call(this,t,Zn.ARRAY_CONTAINS,n)||this}return a.__extends(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return t instanceof Ut&&t.contains(this.value)},t}($n),rr=function(e){function t(t,n){var r=e.call(this,t,Zn.IN,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},t}($n),ir=function(e){function t(t,n){var r=e.call(this,t,Zn.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof Ut&&n.internalValue.some((function(e){return t.value.contains(e)}))},t}($n),or=function(){function e(e){this.name=e}return e.prototype.toString=function(){return this.name},e.ASCENDING=new e("asc"),e.DESCENDING=new e("desc"),e}(),ar=function(){function e(e,t){this.position=e,this.before=t}return e.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++){e+=n[t].toString()}return e},e.prototype.sortsBeforeDocument=function(e,t){b(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())b(o instanceof Lt,"Bound has a non-key value where the key path is being used."),n=de.comparator(o.key,t.key);else{var a=t.field(i.field);b(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===or.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},e.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},e}(),sr=function(){function e(e,t){this.field=e,void 0===t&&(t=or.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}return e.prototype.compare=function(e,t){var n=this.isKeyOrderBy?Bt.compareByKey(e,t):Bt.compareByField(this.field,e,t);switch(this.dir){case or.ASCENDING:return n;case or.DESCENDING:return-1*n;default:return y("Unknown direction: "+this.dir)}},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},e.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},e.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},e}(),ur=new sr(fe.keyField(),or.ASCENDING),cr=new sr(fe.keyField(),or.DESCENDING),lr=function(){function e(){}return e.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return b(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),t.matchesAllDocuments()?this.executeFullCollectionScan(e,t):n.isEqual(xe.MIN)?this.executeFullCollectionScan(e,t):this.localDocumentsView.getDocuments(e,r).next((function(a){var s=o.applyQuery(t,a);return(t.hasLimitToFirst()||t.hasLimitToLast())&&o.needsRefill(t.limitType,s,r,n)?o.executeFullCollectionScan(e,t):(d()<=i.DEBUG&&m("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),t.toString()),o.localDocumentsView.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.applyQuery=function(e,t){var n=new Ce((function(t,n){return e.docComparator(t,n)}));return t.forEach((function(t,r){r instanceof Bt&&e.matches(r)&&(n=n.add(r))})),n},e.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===Kn.First?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.executeFullCollectionScan=function(e,t){return d()<=i.DEBUG&&m("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,xe.MIN)},e}(),hr=function(){function e(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}return e.prototype.getDocument=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.getDocumentInternal(e,t,r)}))},e.prototype.getDocumentInternal=function(e,t,n){return this.remoteDocumentCache.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++){e=i[r].applyToLocalView(t,e)}return e}))},e.prototype.applyLocalMutationsToDocuments=function(e,t,n){var r=ke();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++){t=o[i].applyToLocalView(e,t)}r=r.insert(e,t)})),r},e.prototype.getDocuments=function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t)}))},e.prototype.getLocalViewOfDocuments=function(e,t){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.applyLocalMutationsToDocuments(e,t,r),o=Oe();return i.forEach((function(e,t){t||(t=new zt(e,xe.forDeletedDoc())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},e.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new de(t)).next((function(e){var t=Re();return e instanceof Bt&&(t=t.insert(e.key,e)),t}))},e.prototype.getDocumentsMatchingCollectionGroupQuery=function(e,t,n){var r=this;b(t.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=t.collectionGroup,o=Re();return this.indexManager.getCollectionParents(e,i).next((function(a){return Ve.forEach(a,(function(a){var s=t.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.getDocumentsMatchingCollectionQuery=function(e,t,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.addMissingBaseDocuments(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c),h=u.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Bt?r.insert(c,h):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){t.matches(n)||(r=r.remove(e))})),r}))},e.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=Fe(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof _t&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof Bt&&(c=c.insert(e,t))})),c}))},e}(),fr=function(){function e(){this.refsByKey=new Ce(dr.compareByKey),this.refsByTarget=new Ce(dr.compareByTargetId)}return e.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},e.prototype.addReference=function(e,t){var n=new dr(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},e.prototype.addReferences=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.removeRef(new dr(e,t))},e.prototype.removeReferences=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.removeReferencesForId=function(e){var t=this,n=de.EMPTY,r=new dr(n,e),i=new dr(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(e){t.removeRef(e),o.push(e.key)})),o},e.prototype.removeAllReferences=function(){var e=this;this.refsByKey.forEach((function(t){return e.removeRef(t)}))},e.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},e.prototype.referencesForId=function(e){var t=de.EMPTY,n=new dr(t,e),r=new dr(t,e+1),i=Fe();return this.refsByTarget.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new dr(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),dr=function(){function e(e,t){this.key=e,this.targetOrBatchId=t}return e.compareByKey=function(e,t){return de.comparator(e.key,t.key)||Z(e.targetOrBatchId,t.targetOrBatchId)},e.compareByTargetId=function(e,t){return Z(e.targetOrBatchId,t.targetOrBatchId)||de.comparator(e.key,t.key)},e}(),pr=function(){function e(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new fr,this.targetDataByTarget=new Te(Z),this.targetIdByTarget=new Wt((function(e){return e.canonicalId()})),this.lastDocumentChangeReadTime=xe.MIN,b(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new hr(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return e.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},e.prototype.handleUserChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:return t=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,t=i.persistence.getMutationQueue(e),n=new hr(i.remoteDocuments,t,i.persistence.getIndexManager()),t.getAllMutationBatches(r)})).next((function(e){for(var t=[],i=[],a=Fe(),s=0,u=o;s<u.length;s++){var c=u[s];t.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){c=p[d];i.push(c.batchId);for(var m=0,v=c.mutations;m<v.length;m++){f=v[m];a=a.add(f.key)}}return n.getDocuments(r,a).next((function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=t,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},e.prototype.localWrite=function(e){var t,n=this,r=we.now(),i=e.reduce((function(e,t){return e.add(t.key)}),Fe());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){t=i;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=c.extractBaseValue(t.get(c.key));null!=l&&a.push(new _t(c.key,l,l.fieldMask(),gt.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,e)}))})).then((function(e){var n=e.applyToLocalDocumentSet(t);return{batchId:e.batchId,changes:n}}))},e.prototype.lookupMutationDocuments=function(e){var t=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return t.mutationQueue.lookupMutationKeys(n,e).next((function(e){return e?t.localDocuments.getDocuments(n,e):Ve.resolve(null)}))}))},e.prototype.acknowledgeBatch=function(e){var t=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=e.batch.keys(),i=t.remoteDocuments.newChangeBuffer({trackRemovals:!0});return t.mutationQueue.acknowledgeBatch(n,e.batch,e.streamToken).next((function(){return t.applyWriteToRemoteDocuments(n,e,i)})).next((function(){return i.apply(n)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.rejectBatch=function(e){var t=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return t.mutationQueue.lookupMutationBatch(n,e).next((function(e){return b(null!==e,"Attempt to reject nonexistent batch!"),r=e.keys(),t.mutationQueue.removeMutationBatch(n,e)})).next((function(){return t.mutationQueue.performConsistencyCheck(n)})).next((function(){return t.localDocuments.getDocuments(n,r)}))}))},e.prototype.getHighestUnacknowledgedBatchId=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(t){return e.mutationQueue.getHighestUnacknowledgedBatchId(t)}))},e.prototype.getLastStreamToken=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(t){return e.mutationQueue.getLastStreamToken(t)}))},e.prototype.setLastStreamToken=function(e){var t=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return t.mutationQueue.setLastStreamToken(n,e)}))},e.prototype.getLastRemoteSnapshotVersion=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(t){return e.targetCache.getLastRemoteSnapshotVersion(t)}))},e.prototype.applyRemoteEvent=function(t){var n=this,r=t.snapshotVersion,i=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.targetDataByTarget;var s=[];C(t.targetChanges,(function(t,a){var u=i.get(t);if(u){s.push(n.targetCache.removeMatchingKeys(o,a.removedDocuments,t).next((function(){return n.targetCache.addMatchingKeys(o,a.addedDocuments,t)})));var c=a.resumeToken;if(c.length>0){var l=u.withResumeToken(c,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(t,l),e.shouldPersistTargetData(u,l,a)&&s.push(n.targetCache.updateTargetData(o,l))}}}));var u=Oe(),c=Fe();if(t.documentUpdates.forEach((function(e,t){c=c.add(e)})),s.push(a.getEntries(o,c).next((function(e){t.documentUpdates.forEach((function(i,c){var l=e.get(i);c instanceof zt&&c.version.isEqual(xe.MIN)?(a.removeEntry(i,r),u=u.insert(i,c)):null==l||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(b(!xe.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),a.addEntry(c,r),u=u.insert(i,c)):m("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",c.version),t.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(xe.MIN)){var l=n.targetCache.getLastRemoteSnapshotVersion(o).next((function(e){return b(r.compareTo(e)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+e),n.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(l)}return Ve.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,u)}))})).then((function(e){return n.targetDataByTarget=i,e}))},e.shouldPersistTargetData=function(e,t,n){return b(t.resumeToken.length>0,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)},e.prototype.notifyLocalViewChanges=function(e){for(var t=this,n=0,r=e;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);b(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ve.forEach(e,(function(e){return Ve.forEach(e.removedKeys,(function(e){return t.persistence.referenceDelegate.removeReference(n,e)}))}))}))},e.prototype.nextMutationBatch=function(e){var t=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)}))},e.prototype.readDocument=function(e){var t=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return t.localDocuments.getDocument(n,e)}))},e.prototype.allocateTarget=function(e){var t=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return t.targetCache.getTargetData(n,e).next((function(i){return i?(r=i,Ve.resolve(r)):t.targetCache.allocateTargetId(n).next((function(i){return r=new Tn(e,i,vn.Listen,n.currentSequenceNumber),t.targetCache.addTargetData(n,r).next((function(){return r}))}))}))})).then((function(n){return null===t.targetDataByTarget.get(n.targetId)&&(t.targetDataByTarget=t.targetDataByTarget.insert(n.targetId,n),t.targetIdByTarget.set(e,n.targetId)),n}))},e.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?Ve.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},e.prototype.releaseTarget=function(e,t){var n=this,r=this.targetDataByTarget.get(e);b(null!==r,"Tried to release nonexistent target: "+e);var i=t?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",i,(function(i){var o=n.localViewReferences.removeReferencesForId(e);return t?Ve.resolve():Ve.forEach(o,(function(e){return n.persistence.referenceDelegate.removeReference(i,e)})).next((function(){n.persistence.referenceDelegate.removeTarget(i,r)}))})).then((function(){n.targetDataByTarget=n.targetDataByTarget.remove(e),n.targetIdByTarget.delete(r.target)}))},e.prototype.executeQuery=function(e,t){var n=this,r=xe.MIN,i=Fe();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getTargetData(o,e.toTarget()).next((function(e){if(e)return r=e.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,e.targetId).next((function(e){i=e}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,e,t?r:xe.MIN,t?i:Fe())})).next((function(e){return{documents:e,remoteKeys:i}}))}))},e.prototype.remoteDocumentKeys=function(e){var t=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return t.targetCache.getMatchingKeysForTargetId(n,e)}))},e.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},e.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},e.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},e.prototype.applyWriteToRemoteDocuments=function(e,t,n){var r=this,i=t.batch,o=i.keys(),a=Ve.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(e,r)})).next((function(e){var o=e,a=t.docVersions.get(r);b(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,t))?n.addEntry(o,t.commitVersion):b(!e,"Mutation batch "+i+" applied to document "+e+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(e,i)}))},e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return e.collect(n,t.targetDataByTarget)}))},e.prototype.getTarget=function(e){var t=this,n=this.targetDataByTarget.get(e);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return t.targetCache.getTargetDataForTarget(n,e).next((function(e){return e?e.target:null}))}))},e.prototype.getNewDocumentChanges=function(){var e=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(t){return e.remoteDocuments.getNewDocumentChanges(t,e.lastDocumentChangeReadTime)})).then((function(t){var n=t.changedDocs,r=t.readTime;return e.lastDocumentChangeReadTime=r,n}))},e.prototype.synchronizeLastDocumentChangeReadTime=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t=this;return a.__generator(this,(function(n){return this.remoteDocuments instanceof Ht?(e=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.getLastDocumentChange(t)})).then((function(e){var n=e.readTime;t.lastDocumentChangeReadTime=n}))]):[2]}))}))},e.RESUME_TOKEN_MAX_AGE_MICROS=3e8,e}(),mr=function(){function e(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=w(),this.batchesByDocumentKey=new Ce(dr.compareByKey)}return e.prototype.checkEmpty=function(e){return Ve.resolve(0===this.mutationQueue.length)},e.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");b(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return b(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ve.resolve()},e.prototype.getLastStreamToken=function(e){return Ve.resolve(this.lastStreamToken)},e.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,Ve.resolve()},e.prototype.addMutationBatch=function(e,t,n,r){b(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;(this.nextBatchId++,this.mutationQueue.length>0)&&b(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new Be(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new dr(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return Ve.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return Ve.resolve(this.findMutationBatch(t))},e.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return b(null!=n,"Failed to find local mutation batch."),Ve.resolve(n.keys())},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Ve.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return Ve.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},e.prototype.getAllMutationBatches=function(e){return Ve.resolve(this.mutationQueue.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new dr(t,0),i=new dr(t,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(e){b(t.isEqual(e.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(e.targetOrBatchId);b(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Ve.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Ce(Z);return t.forEach((function(e){var t=new dr(e,0),i=new dr(e,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([t,i],(function(t){b(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),r=r.add(t.targetOrBatchId)}))})),Ve.resolve(this.findMutationBatches(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;de.isDocumentKey(i)||(i=i.child(""));var o=new dr(new de(i),0),a=new Ce(Z);return this.batchesByDocumentKey.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)}),o),Ve.resolve(this.findMutationBatches(a))},e.prototype.findMutationBatches=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.findMutationBatch(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;b(0===this.indexOfExistingBatchId(t.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ve.forEach(t.mutations,(function(i){var o=new dr(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(e,i.key)})).next((function(){n.batchesByDocumentKey=r}))},e.prototype.removeCachedMutationKeys=function(e){},e.prototype.containsKey=function(e,t){var n=new dr(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ve.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&b(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ve.resolve()},e.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return b(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},e.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},e.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return b(n.batchId===e,"If found batch must match"),n},e}();var vr,gr=function(){function e(e,t){this.indexManager=e,this.sizer=t,this.docs=new Te(de.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){b(!n.isEqual(xe.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return Ve.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=ke();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),Ve.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){b(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Re(),i=new de(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof Bt&&t.matches(c)&&(r=r.insert(c.key,c))}return Ve.resolve(r)},e.prototype.forEachDocumentKey=function(e,t){return Ve.forEach(this.docs,(function(e){return t(e)}))},e.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},e.prototype.newChangeBuffer=function(t){return new e.RemoteDocumentChangeBuffer(this)},e.prototype.getSize=function(e){return Ve.resolve(this.size)},e.RemoteDocumentChangeBuffer=function(e){function t(t){var n=e.call(this)||this;return n.documentCache=t,n}return a.__extends(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i?n.push(t.documentCache.addEntry(e,i,t.readTime)):t.documentCache.removeEntry(r)})),Ve.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},t}(Gt),e}(),yr=function(){function e(e){this.persistence=e,this.targets=new Wt((function(e){return e.canonicalId()})),this.lastRemoteSnapshotVersion=xe.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new fr,this.targetCount=0,this.targetIdGenerator=ot.forTargetCache()}return e.prototype.forEachTarget=function(e,t){return this.targets.forEach((function(e,n){return t(n)})),Ve.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return Ve.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return Ve.resolve(this.highestSequenceNumber)},e.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,Ve.resolve(t)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),Ve.resolve()},e.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return b(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,Ve.resolve()},e.prototype.updateTargetData=function(e,t){return b(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),Ve.resolve()},e.prototype.removeTargetData=function(e,t){return b(this.targetCount>0,"Removing a target from an empty cache"),b(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,Ve.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.targets.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.targets.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Ve.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return Ve.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return Ve.resolve(n)},e.prototype.getTargetDataForTarget=function(e,t){return y("Not yet implemented.")},e.prototype.addMatchingKeys=function(e,t,n){this.references.addReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.addReference(e,t))})),Ve.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){this.references.removeReferences(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.removeReference(e,t))})),Ve.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),Ve.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return Ve.resolve(n)},e.prototype.containsKey=function(e,t){return Ve.resolve(this.references.containsKey(t))},e}(),br=function(){function e(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new ue(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new yr(this);this.indexManager=new Qt,this.remoteDocumentCache=new gr(this.indexManager,(function(e){return n.referenceDelegate.documentSize(e)}))}return e.createLruPersistence=function(t,n,r){return new e(t,(function(e){return new xr(e,new Sn(n),r)}))},e.createEagerPersistence=function(t){return new e(t,(function(e){return new wr(e)}))},e.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),e.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return[2,[this.clientId]]}))}))},e.prototype.setPrimaryStateListener=function(e){return e(!0)},e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(e){},e.prototype.getIndexManager=function(){return this.indexManager},e.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new mr(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.targetCache},e.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},e.prototype.runTransaction=function(e,t,n){var r=this;m("MemoryPersistence","Starting transaction:",e);var i=new _r(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(e){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.mutationQueuesContainKey=function(e,t){return Ve.or(function(e){var t=[];return A(e,(function(e,n){return t.push(n)})),t}(this.mutationQueues).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),_r=function(e){function t(t){var n=e.call(this)||this;return n.currentSequenceNumber=t,n}return a.__extends(t,e),t}(kn),wr=function(){function e(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(e.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw y("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),Ve.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),Ve.resolve()},e.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),Ve.resolve()},e.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.orphanedDocuments.add(e)}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},e.prototype.onTransactionCommitted=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ve.forEach(this.orphanedDocuments,(function(r){return t.isReferenced(e,r).next((function(e){e||n.removeEntry(r)}))})).next((function(){return t._orphanedDocuments=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next((function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)}))},e.prototype.documentSize=function(e){return 0},e.prototype.isReferenced=function(e,t){var n=this;return Ve.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return Ve.resolve(n.inMemoryPins.containsKey(t))}])},e}(),xr=function(){function e(e,t,n){this.persistence=e,this.serializer=t,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Wt((function(e){return ge(e.path)})),this.garbageCollector=new On(this,n)}return e.prototype.onTransactionStarted=function(){},e.prototype.onTransactionCommitted=function(e){return Ve.resolve()},e.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},e.prototype.getSequenceNumberCount=function(e){var t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachOrphanedDocumentSequenceNumber=function(e,t){var n=this;return Ve.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(e,r,i).next((function(e){return e?Ve.resolve():t(i)}))}))},e.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},e.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(e,(function(i){return n.isPinned(e,i,t).next((function(e){e||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(e)})).next((function(){return r}))},e.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ve.resolve()},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},e.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ve.resolve()},e.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ve.resolve()},e.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),Ve.resolve()},e.prototype.documentSize=function(e){var t,n=this.serializer.toDbRemoteDocument(e,e.version);if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw y("Unknown remote document type");t=n.noDocument}return JSON.stringify(t).length},e.prototype.isPinned=function(e,t,n){var r=this;return Ve.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return Ve.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return Ve.resolve(void 0!==e&&e>n)}])},e.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},e}(),Tr=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return e.prototype.reset=function(){this.currentBaseMs=0},e.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},e.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&m("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return t.lastAttemptTime=Date.now(),e()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},e.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},e.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},e}();!function(e){e[e.Initial=0]="Initial",e[e.Starting=1]="Starting",e[e.Open=2]="Open",e[e.Error=3]="Error",e[e.Backoff=4]="Backoff"}(vr||(vr={}));var Sr,Er,Mr=function(){function e(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=vr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new Tr(e,t)}return e.prototype.isStarted=function(){return this.state===vr.Starting||this.state===vr.Open||this.state===vr.Backoff},e.prototype.isOpen=function(){return this.state===vr.Open},e.prototype.start=function(){this.state!==vr.Error?(b(this.state===vr.Initial,"Already started"),this.auth()):this.performBackoff()},e.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(vr.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.inhibitBackoff=function(){b(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=vr.Initial,this.backoff.reset()},e.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return e.handleIdleCloseTimer()})))},e.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},e.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.isOpen()?[2,this.close(vr.Initial)]:[2]}))}))},e.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},e.prototype.close=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return b(this.isStarted(),"Only started streams should be closed."),b(e===vr.Error||qn(t),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,e!==vr.Error?this.backoff.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(v(t.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===x.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.onClose(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.tearDown=function(){},e.prototype.auth=function(){var e=this;b(this.state===vr.Initial,"Must be in initial state to auth"),this.state=vr.Starting;var t=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(t){e.closeCount===n&&e.startStream(t)}),(function(n){t((function(){var t=new T(x.UNKNOWN,"Fetching auth token failed: "+n.message);return e.handleStreamClose(t)}))}))},e.prototype.startStream=function(e){var t=this;b(this.state===vr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen((function(){n((function(){return b(t.state===vr.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=vr.Open,t.listener.onOpen()}))})),this.stream.onClose((function(e){n((function(){return t.handleStreamClose(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.performBackoff=function(){var e=this;b(this.state===vr.Error,"Should only perform backoff when in Error state"),this.state=vr.Backoff,this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return b(this.state===vr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=vr.Initial,this.start(),b(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},e.prototype.handleStreamClose=function(e){return b(this.isStarted(),"Can't handle server close on non-started stream"),m("PersistentStream","close with error: "+e),this.stream=null,this.close(vr.Error,e)},e.prototype.getCloseGuardedDispatcher=function(e){var t=this;return function(n){t.queue.enqueueAndForget((function(){return t.closeCount===e?n():(m("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),Cr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,re.ListenStreamConnectionBackoff,re.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(t,e),t.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},t.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},t.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},t.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},t}(Mr),Ar=function(e){function t(t,n,r,i,o){var a=e.call(this,t,re.WriteStreamConnectionBackoff,re.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=w(),a}return a.__extends(t,e),Object.defineProperty(t.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.handshakeComplete_=!1,e.prototype.start.call(this)},t.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},t.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},t.prototype.onMessage=function(e){if(b(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return b(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},t.prototype.writeHandshake=function(){b(this.isOpen(),"Writing handshake requires an opened stream"),b(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},t.prototype.writeMutations=function(e){var t=this;b(this.isOpen(),"Writing mutations requires an opened stream"),b(this.handshakeComplete_,"Handshake must be complete before writing mutations"),b(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map((function(e){return t.serializer.toMutation(e)}))};this.sendRequest(n)},t}(Mr),Pr=function(){function e(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}return e.prototype.newPersistentWriteStream=function(e){return new Ar(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.newPersistentWatchStream=function(e){return new Cr(this.queue,this.connection,this.credentials,this.serializer,e)},e.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map((function(e){return t.serializer.toMutation(e)}))};return this.invokeRPC("Commit",n).then((function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)}))},e.prototype.lookup=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,documents:e.map((function(e){return t.serializer.toName(e)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Oe();n.forEach((function(e){var n=t.serializer.fromMaybeDocument(e);r=r.insert(n.key,n)}));var i=[];return e.forEach((function(e){var t=r.get(e);b(!!t,"Missing entity in write response for "+e),i.push(t)})),i}))},e.prototype.invokeRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(e,t,r)})).catch((function(e){throw e.code===x.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e.prototype.invokeStreamingRPC=function(e,t){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(e,t,r)})).catch((function(e){throw e.code===x.UNAUTHENTICATED&&n.credentials.invalidateToken(),e}))},e}(),Or=function(){function e(e){this.datastore=e,this.readVersions=Le(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new T(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(e)];case 1:return(t=r.sent()).forEach((function(e){e instanceof zt||e instanceof Bt?n.recordVersion(e):y("Document in a transaction was a "+e.constructor.name)})),[2,t]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},e.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e)},e.prototype.delete=function(e){this.write([new xt(e,this.precondition(e))]),this.writtenDocs.add(e)},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(e=this.readVersions,this.mutations.forEach((function(t){e=e.remove(t.key)})),!e.isEmpty())throw new T(x.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof Bt)t=e.version;else{if(!(e instanceof zt))throw y("Document in a transaction was a "+e.constructor.name);t=xe.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new T(x.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?gt.updateTime(t):gt.NONE},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(!this.writtenDocs.has(e)&&t){if(t.isEqual(xe.forDeletedDoc()))throw new T(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},e.prototype.ensureCommitNotCalled=function(){b(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},e}();!function(e){e[e.Unknown=0]="Unknown",e[e.Online=1]="Online",e[e.Offline=2]="Offline"}(Sr||(Sr={})),function(e){e[e.RemoteStore=0]="RemoteStore",e[e.SharedClientState=1]="SharedClientState"}(Er||(Er={}));var kr,Ir=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Sr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return e.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Sr.Unknown),b(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(re.OnlineStateTimeout,1e4,(function(){return e.onlineStateTimer=null,b(e.state===Sr.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Sr.Offline),Promise.resolve()})))},e.prototype.handleWatchStreamFailure=function(e){this.state===Sr.Online?(this.setAndBroadcast(Sr.Unknown),b(0===this.watchStreamFailures,"watchStreamFailures must be 0"),b(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Sr.Offline)))},e.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Sr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},e.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(v(t),this.shouldWarnClientIsOffline=!1):m("OnlineStateTracker",t)},e.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},e}();function Rr(e){switch(e){case x.OK:return y("Treated status OK as error");case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0;default:return y("Unknown status code: "+e)}}function Dr(e){if(void 0===e)return v("GRPC error has no .code"),x.UNKNOWN;switch(e){case kr.OK:return x.OK;case kr.CANCELLED:return x.CANCELLED;case kr.UNKNOWN:return x.UNKNOWN;case kr.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case kr.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case kr.INTERNAL:return x.INTERNAL;case kr.UNAVAILABLE:return x.UNAVAILABLE;case kr.UNAUTHENTICATED:return x.UNAUTHENTICATED;case kr.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case kr.NOT_FOUND:return x.NOT_FOUND;case kr.ALREADY_EXISTS:return x.ALREADY_EXISTS;case kr.PERMISSION_DENIED:return x.PERMISSION_DENIED;case kr.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case kr.ABORTED:return x.ABORTED;case kr.OUT_OF_RANGE:return x.OUT_OF_RANGE;case kr.UNIMPLEMENTED:return x.UNIMPLEMENTED;case kr.DATA_LOSS:return x.DATA_LOSS;default:return y("Unknown status code: "+e)}}function Lr(e){if(void 0===e)return kr.OK;switch(e){case x.OK:return kr.OK;case x.CANCELLED:return kr.CANCELLED;case x.UNKNOWN:return kr.UNKNOWN;case x.DEADLINE_EXCEEDED:return kr.DEADLINE_EXCEEDED;case x.RESOURCE_EXHAUSTED:return kr.RESOURCE_EXHAUSTED;case x.INTERNAL:return kr.INTERNAL;case x.UNAVAILABLE:return kr.UNAVAILABLE;case x.UNAUTHENTICATED:return kr.UNAUTHENTICATED;case x.INVALID_ARGUMENT:return kr.INVALID_ARGUMENT;case x.NOT_FOUND:return kr.NOT_FOUND;case x.ALREADY_EXISTS:return kr.ALREADY_EXISTS;case x.PERMISSION_DENIED:return kr.PERMISSION_DENIED;case x.FAILED_PRECONDITION:return kr.FAILED_PRECONDITION;case x.ABORTED:return kr.ABORTED;case x.OUT_OF_RANGE:return kr.OUT_OF_RANGE;case x.UNIMPLEMENTED:return kr.UNIMPLEMENTED;case x.DATA_LOSS:return kr.DATA_LOSS;default:return y("Unknown status code: "+e)}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(kr||(kr={}));var Nr,Fr,Ur=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||de.comparator(t.key,n.key)}:function(e,t){return de.comparator(e.key,t.key)},this.keyedMap=Re(),this.sortedSet=new Te(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}();!function(e){e[e.Added=0]="Added",e[e.Removed=1]="Removed",e[e.Modified=2]="Modified",e[e.Metadata=3]="Metadata"}(Nr||(Nr={})),function(e){e[e.Local=0]="Local",e[e.Synced=1]="Synced"}(Fr||(Fr={}));var jr,Br=function(){function e(){this.changeMap=new Te(de.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==Nr.Added&&n.type===Nr.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===Nr.Metadata&&n.type!==Nr.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===Nr.Modified&&n.type===Nr.Modified?this.changeMap=this.changeMap.insert(t,{type:Nr.Modified,doc:e.doc}):e.type===Nr.Modified&&n.type===Nr.Added?this.changeMap=this.changeMap.insert(t,{type:Nr.Added,doc:e.doc}):e.type===Nr.Removed&&n.type===Nr.Added?this.changeMap=this.changeMap.remove(t):e.type===Nr.Removed&&n.type===Nr.Modified?this.changeMap=this.changeMap.insert(t,{type:Nr.Removed,doc:n.doc}):e.type===Nr.Added&&n.type===Nr.Removed?this.changeMap=this.changeMap.insert(t,{type:Nr.Modified,doc:e.doc}):y("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},e.prototype.getChanges=function(){var e=[];return this.changeMap.inorderTraversal((function(t,n){e.push(n)})),e},e}(),zr=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:Nr.Added,doc:e})})),new e(t,n,Ur.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){if(this.fromCache!==e.fromCache||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!this.query.isEqual(e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Vr=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r,i=((r={})[t]=Wr.createSynthesizedTargetChangeForCurrentChange(t,n),r);return new e(xe.MIN,i,je(),Oe(),Fe())},e}(),Wr=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(w(),n,Fe(),Fe(),Fe())},e}(),Gr=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},Hr=function(e,t){this.targetId=e,this.existenceFilter=t};!function(e){e[e.NoChange=0]="NoChange",e[e.Added=1]="Added",e[e.Removed=2]="Removed",e[e.Current=3]="Current",e[e.Reset=4]="Reset"}(jr||(jr={}));var qr=function(e,t,n,r){void 0===n&&(n=w()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Yr=function(){function e(){this.pendingResponses=0,this.documentChanges=Qr(),this._resumeToken=w(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),e.prototype.updateResumeToken=function(e){e.length>0&&(this._hasPendingChanges=!0,this._resumeToken=e)},e.prototype.toTargetChange=function(){var e=Fe(),t=Fe(),n=Fe();return this.documentChanges.forEach((function(r,i){switch(i){case Nr.Added:e=e.add(r);break;case Nr.Modified:t=t.add(r);break;case Nr.Removed:n=n.add(r);break;default:y("Encountered invalid change type: "+i)}})),new Wr(this._resumeToken,this._current,e,t,n)},e.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Qr()},e.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},e.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},e.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},e.prototype.recordTargetResponse=function(){this.pendingResponses-=1},e.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},e}(),Kr=function(){function e(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=Oe(),this.pendingDocumentTargetMapping=Xr(),this.pendingTargetResets=new Ce(Z)}return e.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof Bt?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof zt&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++){r=o[i];this.removeDocumentFromTarget(r,e.key,e.newDoc)}},e.prototype.handleTargetChange=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ensureTargetState(n);switch(e.state){case jr.NoChange:t.isActiveTarget(n)&&r.updateResumeToken(e.resumeToken);break;case jr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case jr.Removed:r.recordTargetResponse(),r.isPending||t.removeTarget(n),b(!e.cause,"WatchChangeAggregator does not handle errored targets");break;case jr.Current:t.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case jr.Reset:t.isActiveTarget(n)&&(t.resetTarget(n),r.updateResumeToken(e.resumeToken));break;default:y("Unknown target watch change state: "+e.state)}}))},e.prototype.forEachTarget=function(e,t){e.targetIds.length>0?e.targetIds.forEach(t):C(this.targetStates,t)},e.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new de(i.path);this.removeDocumentFromTarget(t,o,new zt(o,xe.forDeletedDoc()))}else b(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},e.prototype.createRemoteEvent=function(e){var t=this,n={};C(this.targetStates,(function(r,i){var o=t.targetDataForActiveTarget(r);if(o){if(i.current&&o.target.isDocumentQuery()){var a=new de(o.target.path);null!==t.pendingDocumentUpdates.get(a)||t.targetContainsDocument(r,a)||t.removeDocumentFromTarget(r,a,new zt(a,e))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=Fe();this.pendingDocumentTargetMapping.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.targetDataForActiveTarget(e);return!n||n.purpose===vn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Vr(e,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Oe(),this.pendingDocumentTargetMapping=Xr(),this.pendingTargetResets=new Ce(Z),i},e.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?Nr.Modified:Nr.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},e.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,Nr.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},e.prototype.removeTarget=function(e){delete this.targetStates[e]},e.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},e.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new Yr),this.targetStates[e]},e.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Ce(Z),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},e.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||m("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},e.prototype.resetTarget=function(e){var t=this;b(!this.targetStates[e].isPending,"Should only reset active targets"),this.targetStates[e]=new Yr,this.metadataProvider.getRemoteKeysForTarget(e).forEach((function(n){t.removeDocumentFromTarget(e,n,null)}))},e.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},e}();function Xr(){return new Te(de.comparator)}function Qr(){return new Te(de.comparator)}var Jr=function(){function e(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(e){n.enqueueAndForget((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m("RemoteStore","Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Ir(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return e.prototype.start=function(){return this.enableNetwork()},e.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var e;return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(e=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Sr.Unknown),[4,this.fillWritePipeline()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},e.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Sr.Offline),[2]}}))}))},e.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),this.writePipeline.length>0&&(m("RemoteStore","Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},e.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return m("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Sr.Unknown),[2]}}))}))},e.prototype.listen=function(e){E(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},e.prototype.unlisten=function(e){b(E(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),P(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Sr.Unknown))},e.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},e.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},e.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},e.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},e.prototype.startWatchStream=function(){b(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Kr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},e.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!P(this.listenTargets)},e.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},e.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},e.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(t){return C(this.listenTargets,(function(t,n){e.sendWatchRequest(n)})),[2]}))}))},e.prototype.onWatchStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return void 0===e&&b(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(e),this.startWatchStream()):this.onlineStateTracker.set(Sr.Unknown),[2]}))}))},e.prototype.onWatchStreamChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(Sr.Online),e instanceof qr&&e.state===jr.Removed&&e.cause?[2,this.handleTargetError(e)]:(e instanceof Gr?this.watchChangeAggregator.handleDocumentChange(e):e instanceof Hr?this.watchChangeAggregator.handleExistenceFilter(e):(b(e instanceof qr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(e)),t.isEqual(xe.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),t.compareTo(n)>=0?[4,this.raiseWatchSnapshot(t)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},e.prototype.raiseWatchSnapshot=function(e){var t=this;b(!e.isEqual(xe.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(e);return C(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=t.listenTargets[n];i&&(t.listenTargets[n]=i.withResumeToken(r.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.listenTargets[e];if(n){t.listenTargets[e]=n.withResumeToken(w(),n.snapshotVersion),t.sendUnwatchRequest(e);var r=new Tn(n.target,e,vn.ExistenceFilterMismatch,n.sequenceNumber);t.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},e.prototype.handleTargetError=function(e){var t=this;b(!!e.cause,"Handling target error without a cause");var n=e.cause,r=Promise.resolve();return e.targetIds.forEach((function(e){r=r.then((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return E(this.listenTargets,e)?(delete this.listenTargets[e],this.watchChangeAggregator.removeTarget(e),[2,this.syncEngine.rejectListen(e,n)]):[2]}))}))}))})),r},e.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t;return a.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(e=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(e)]):[3,4];case 1:return null!==(t=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(t),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},e.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},e.prototype.outstandingWrites=function(){return this.writePipeline.length},e.prototype.addToWritePipeline=function(e){b(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},e.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},e.prototype.startWriteStream=function(){b(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},e.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.writeStream.writeHandshake(),[2]}))}))},e.prototype.onWriteHandshakeComplete=function(){var e=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var t=0,n=e.writePipeline;t<n.length;t++){var r=n[t];e.writeStream.writeMutations(r.mutations)}})).catch(Fn)},e.prototype.onMutationResult=function(e,t){var n=this;b(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=ze.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},e.prototype.onWriteStreamClose=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(n){return void 0===e&&b(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),e&&this.writePipeline.length>0?(void 0,[2,(this.writeStream.handshakeComplete?this.handleWriteError(e):this.handleHandshakeError(e)).then((function(){t.shouldStartWriteStream()&&t.startWriteStream()}))]):[2]}))}))},e.prototype.handleHandshakeError=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return Rr(e.code)?(m("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=w(),[2,this.localStore.setLastStreamToken(w()).catch(Fn)]):[2]}))}))},e.prototype.handleWriteError=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){return Rr(i=e.code)&&i!==x.ABORTED?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,e).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},e.prototype.createTransaction=function(){return new Or(this.datastore)},e.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Sr.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}}))}))},e.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.canUseNetwork()?(m("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.isPrimary=e,e&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.disableNetworkInternal()];case 3:t.sent(),this.onlineStateTracker.set(Sr.Unknown),t.label=4;case 4:return[2]}}))}))},e}(),Zr=function(){function e(e,t){if(k("GeoPoint",arguments,2),L("GeoPoint","number",1,e),L("GeoPoint","number",2,t),!isFinite(e)||e<-90||e>90)throw new T(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype._compareTo=function(e){return Z(this._lat,e._lat)||Z(this._long,e._long)},e}(),$r=function(){function e(){}return e.prototype.applyToLocalView=function(e,t){return new Rt(t,e)},e.prototype.applyToRemoteDocument=function(e,t){return t},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e},e.instance=new e,e}(),ei=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ri(e),n=function(e){t.find((function(t){return t.isEqual(e)}))||t.push(e)},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ut(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),ti=function(){function e(e){this.elements=e}return e.prototype.applyToLocalView=function(e,t){return this.apply(e)},e.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},e.prototype.apply=function(e){for(var t=ri(e),n=function(e){t=t.filter((function(t){return!t.isEqual(e)}))},r=0,i=this.elements;r<i.length;r++){n(i[r])}return new Ut(t)},e.prototype.computeBaseValue=function(e){return null},e.prototype.isEqual=function(t){return t instanceof e&&$(t.elements,this.elements)},e}(),ni=function(){function e(e){this.operand=e}return e.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof Pt&&this.operand instanceof Pt){var r=n.internalValue+this.operand.internalValue;return new Pt(r)}r=n.internalValue+this.operand.internalValue;return new Ot(r)},e.prototype.applyToRemoteDocument=function(e,t){return b(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},e.prototype.computeBaseValue=function(e){return e instanceof Ct?e:new Pt(0)},e.prototype.isEqual=function(t){return t instanceof e&&this.operand.isEqual(t.operand)},e}();function ri(e){return e instanceof Ut?e.internalValue.slice():[]}var ii=function(){function e(e){this.count=e}return e.prototype.isEqual=function(e){return e&&e.count===this.count},e}(),oi=function(){var e={};return e[or.ASCENDING.name]="ASCENDING",e[or.DESCENDING.name]="DESCENDING",e}(),ai=function(){var e={};return e[Zn.LESS_THAN.name]="LESS_THAN",e[Zn.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",e[Zn.GREATER_THAN.name]="GREATER_THAN",e[Zn.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",e[Zn.EQUAL.name]="EQUAL",e[Zn.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",e[Zn.IN.name]="IN",e[Zn.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",e}(),si=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(e,t){b(!qn(e),t+" is missing")}function ci(e){return"number"===typeof e?e:"string"===typeof e?Number(e):y("can't parse "+e)}var li=function(){function e(e,t){this.databaseId=e,this.options=t}return e.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},e.prototype.unsafeCastProtoByteString=function(e){return e},e.prototype.fromRpcStatus=function(e){var t=void 0===e.code?x.UNKNOWN:Dr(e.code);return new T(t,e.message||"")},e.prototype.toInt32Value=function(e){return this.options.useProto3Json||qn(e)?e:{value:e}},e.prototype.fromInt32Value=function(e){var t;return qn(t="object"===typeof e?e.value:e)?null:t},e.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},e.prototype.fromTimestamp=function(e){if("string"===typeof e)return this.fromIso8601String(e);b(!!e,"Cannot deserialize null or undefined timestamp.");var t=ci(e.seconds||"0"),n=e.nanos||0;return new we(t,n)},e.prototype.fromIso8601String=function(e){var t=0,n=si.exec(e);if(b(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new we(o,t)},e.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},e.prototype.fromBlob=function(e){return"string"===typeof e?(b(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ie.fromBase64String(e)):(b(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ie.fromUint8Array(e))},e.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},e.prototype.fromVersion=function(e){return b(!!e,"Trying to deserialize version that isn't set"),xe.fromTimestamp(this.fromTimestamp(e))},e.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},e.prototype.fromResourceName=function(e){var t=le.fromString(e);return b(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},e.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},e.prototype.fromName=function(e){var t=this.fromResourceName(e);return b(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),b(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new de(this.extractLocalPathFromResourceName(t))},e.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},e.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?le.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(e.prototype,"encodedDatabaseId",{get:function(){return new le(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),e.prototype.fullyQualifiedPrefixPath=function(e){return new le(["projects",e.projectId,"databases",e.database])},e.prototype.extractLocalPathFromResourceName=function(e){return b(e.length>4&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},e.prototype.isValidResourceName=function(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)},e.prototype.toValue=function(e){if(e instanceof Et)return{nullValue:"NULL_VALUE"};if(e instanceof Mt)return{booleanValue:e.value()};if(e instanceof Pt)return{integerValue:""+e.value()};if(e instanceof Ot){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof kt?{stringValue:e.value()}:e instanceof Ft?{mapValue:this.toMapValue(e)}:e instanceof Ut?{arrayValue:this.toArrayValue(e)}:e instanceof It?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof Nt?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof Dt?{bytesValue:this.toBytes(e.value())}:e instanceof Lt?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:y("Unknown FieldValue "+JSON.stringify(e))},e.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return Et.INSTANCE;if("booleanValue"in e)return Mt.of(e.booleanValue);if("integerValue"in e)return new Pt(ci(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Ot.NAN;if("Infinity"===e.doubleValue)return Ot.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Ot.NEGATIVE_INFINITY}return new Ot(e.doubleValue)}if("stringValue"in e)return new kt(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){ui(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new Ut(n.map((function(e){return t.fromValue(e)})))}if("timestampValue"in e)return ui(e.timestampValue,"timestampValue"),new It(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){ui(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new Nt(new Zr(r,i))}if("bytesValue"in e){ui(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new Dt(o)}if("referenceValue"in e){ui(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new se(a.get(1),a.get(3)),u=new de(this.extractLocalPathFromResourceName(a));return new Lt(s,u)}return y("Unknown Value proto "+JSON.stringify(e))},e.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},e.prototype.toDocument=function(e){return b(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},e.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new Bt(r,i,{hasCommittedMutations:!!t},void 0,e,(function(e){return n.fromValue(e)}))},e.prototype.toFields=function(e){var t=this,n={};return e.forEach((function(e,r){n[e]=t.toValue(r)})),n},e.prototype.fromFields=function(e){var t=this,n=e,r=Ft.EMPTY;return A(n,(function(e,n){r=r.set(new fe([e]),t.fromValue(n))})),r},e.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},e.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach((function(e){n.push(t.toValue(e))})),{values:n}},e.prototype.fromFound=function(e){var t=this;b(!!e.found,"Tried to deserialize a found document from a missing document."),ui(e.found.name,"doc.found.name"),ui(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new Bt(n,r,{},void 0,e.found,(function(e){return t.fromValue(e)}))},e.prototype.fromMissing=function(e){b(!!e.missing,"Tried to deserialize a missing document from a found document."),b(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new zt(t,n)},e.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):y("invalid batch get response: "+JSON.stringify(e))},e.prototype.toWatchTargetChangeState=function(e){switch(e){case jr.Added:return"ADD";case jr.Current:return"CURRENT";case jr.NoChange:return"NO_CHANGE";case jr.Removed:return"REMOVE";case jr.Reset:return"RESET";default:return y("Unknown WatchTargetChangeState: "+e)}},e.prototype.toTestWatchChange=function(e){if(e instanceof Hr)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof Gr){if(e.newDoc instanceof Bt){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof zt){t=e.newDoc;return{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}}}if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof qr){var n=void 0;return e.cause&&(n={code:Lr(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return y("Unrecognized watch change: "+JSON.stringify(e))},e.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){ui(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new qr(r,i,o,s||null)}else if("documentChange"in e){ui(e.documentChange,"documentChange");var u=e.documentChange;ui(u.document,"documentChange.name"),ui(u.document.name,"documentChange.document.name"),ui(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new Bt(c,l,{},void 0,u.document,(function(e){return n.fromValue(e)})),f=u.targetIds||[],d=u.removedTargetIds||[];t=new Gr(f,d,h.key,h)}else if("documentDelete"in e){ui(e.documentDelete,"documentDelete");var p=e.documentDelete;ui(p.document,"documentDelete.document");c=this.fromName(p.document),l=p.readTime?this.fromVersion(p.readTime):xe.forDeletedDoc(),h=new zt(c,l),d=p.removedTargetIds||[];t=new Gr([],d,h.key,h)}else if("documentRemove"in e){ui(e.documentRemove,"documentRemove");var m=e.documentRemove;ui(m.document,"documentRemove");c=this.fromName(m.document),d=m.removedTargetIds||[];t=new Gr([],d,c,null)}else{if(!("filter"in e))return y("Unknown change type "+JSON.stringify(e));ui(e.filter,"filter");var v=e.filter;ui(v.targetId,"filter.targetId");var g=v.count||0,b=new ii(g),_=v.targetId;t=new Hr(_,b)}return t},e.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?jr.NoChange:"ADD"===e?jr.Added:"REMOVE"===e?jr.Removed:"CURRENT"===e?jr.Current:"RESET"===e?jr.Reset:y("Got unexpected TargetChange.state: "+e)},e.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return xe.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?xe.MIN:t.readTime?this.fromVersion(t.readTime):xe.MIN},e.prototype.toMutation=function(e){var t,n=this;if(e instanceof bt)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof xt)t={delete:this.toName(e.key)};else if(e instanceof _t)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else{if(!(e instanceof wt))return y("Unknown mutation type "+e.type);t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map((function(e){return n.toFieldTransform(e)}))}}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},e.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):gt.NONE;if(e.update){ui(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new _t(r,i,o,n)}return new bt(r,i,n)}if(e.delete){r=this.fromName(e.delete);return new xt(r,n)}if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map((function(e){return t.fromFieldTransform(e)}));return b(!0===n.exists,'Transforms only support precondition "exists == true"'),new wt(r,a)}return y("unknown mutation proto: "+JSON.stringify(e))},e.prototype.toPrecondition=function(e){return b(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y("Unknown precondition")},e.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?gt.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?gt.exists(e.exists):gt.NONE},e.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(xe.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&e.transformResults.length>0&&(i=e.transformResults.map((function(e){return n.fromValue(e)}))),new pt(r,i)},e.prototype.fromWriteResults=function(e,t){var n=this;return e&&e.length>0?(b(void 0!==t,"Received a write result without a commit time"),e.map((function(e){return n.fromWriteResult(e,t)}))):[]},e.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof $r)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ei)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ti)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(e){return t.toValue(e)}))}};if(n instanceof ni)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw y("Unknown transform: "+e.transform)},e.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=$r.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new ei(r.map((function(e){return t.fromValue(e)})))}else if("removeAllFromArray"in e){r=e.removeAllFromArray.values||[];n=new ti(r.map((function(e){return t.fromValue(e)})))}else if("increment"in e){var i=this.fromValue(e.increment);b(i instanceof Ct,"NUMERIC_ADD transform requires a NumberValue"),n=new ni(i)}else y("Unknown transform proto: "+JSON.stringify(e));var o=fe.fromServerFormat(e.fieldPath);return new dt(o,n)},e.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},e.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;b(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return Qn.atPath(this.fromQueryPath(n)).toTarget()},e.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(b(n.length%2===0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(b(n.length%2!==0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},e.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Qn(t,i,s,a,u,Kn.First,c,l).toTarget()},e.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},e.prototype.toLabel=function(e){switch(e){case vn.Listen:return null;case vn.ExistenceFilterMismatch:return"existence-filter-mismatch";case vn.LimboResolution:return"limbo-document";default:return y("Unrecognized query purpose: "+e)}},e.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,e.resumeToken.length>0&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},e.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map((function(e){return e instanceof $n?t.toUnaryOrFieldFilter(e):y("Unrecognized filter: "+JSON.stringify(e))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},e.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t.fromFilter(e)})).reduce((function(e,t){return e.concat(t)})):y("Unknown filter: "+JSON.stringify(e)):[]},e.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map((function(e){return t.toPropertyOrder(e)}))},e.prototype.fromOrder=function(e){var t=this;return e.map((function(e){return t.fromPropertyOrder(e)}))},e.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map((function(e){return t.toValue(e)}))}},e.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map((function(e){return t.fromValue(e)}));return new ar(r,n)},e.prototype.toDirection=function(e){return oi[e.name]},e.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return or.ASCENDING;case"DESCENDING":return or.DESCENDING;default:return}},e.prototype.toOperatorName=function(e){return ai[e.name]},e.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return Zn.EQUAL;case"GREATER_THAN":return Zn.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Zn.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Zn.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Zn.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Zn.ARRAY_CONTAINS;case"IN":return Zn.IN;case"ARRAY_CONTAINS_ANY":return Zn.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return y("Unspecified operator");default:return y("Unknown operator")}},e.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},e.prototype.fromFieldPathReference=function(e){return fe.fromServerFormat(e.fieldPath)},e.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},e.prototype.fromPropertyOrder=function(e){return new sr(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},e.prototype.fromFieldFilter=function(e){return $n.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},e.prototype.toUnaryOrFieldFilter=function(e){if(e.op===Zn.EQUAL){if(e.value.isEqual(Ot.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(Et.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},e.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return $n.create(t,Zn.EQUAL,Ot.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return $n.create(n,Zn.EQUAL,Et.INSTANCE);case"OPERATOR_UNSPECIFIED":return y("Unspecified filter");default:return y("Unknown filter")}},e.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}},e.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map((function(e){return fe.fromServerFormat(e)}));return ft.fromArray(t)},e}(),hi=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},fi=function(){function e(e){this.syncEngine=e,this.queries=new Wt((function(e){return e.canonicalId()})),this.onlineState=Sr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return e.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);(r||(n=!0,r=new hi,this.queries.set(t,r)),r.listeners.push(e),b(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap)&&(e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent());return n?this.syncEngine.listen(t).then((function(e){return r.targetId=e,e})):Promise.resolve(r.targetId)},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return a.__generator(this,(function(o){return t=e.query,n=!1,(r=this.queries.get(t))&&(i=r.listeners.indexOf(e))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]}))}))},e.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++){u[s].onViewSnapshot(i)&&(t=!0)}a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},e.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++){i[r].onError(t)}this.queries.delete(e)},e.prototype.onOnlineStateChange=function(e){this.onlineState=e;var t=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++){o[i].applyOnlineStateChange(e)&&(t=!0)}})),t&&this.raiseSnapshotsInSyncEvent()},e.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},e.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},e.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(e){e.next()}))},e}(),di=function(){function e(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Sr.Unknown,this.options=n||{}}return e.prototype.onViewSnapshot=function(e){if(b(e.docChanges.length>0||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==Nr.Metadata&&t.push(i)}e=new zr(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},e.prototype.onError=function(e){this.queryObserver.error(e)},e.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},e.prototype.shouldRaiseInitialEvent=function(e,t){if(b(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Sr.Offline;return this.options.waitForSyncWhenOnline&&n?(b(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Sr.Offline},e.prototype.shouldRaiseEvent=function(e){if(e.docChanges.length>0)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.raiseInitialEvent=function(e){b(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},e}(),pi=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}return e.fromSnapshot=function(t,n){for(var r=Fe(),i=Fe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case Nr.Added:r=r.add(s.doc.key);break;case Nr.Removed:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),mi=function(e){this.key=e},vi=function(e){this.key=e},gi=function(){function e(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=Fe(),this.mutatedKeys=Fe(),this.documentSet=new Ur(e.docComparator.bind(e))}return Object.defineProperty(e.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),e.prototype.computeDocChanges=function(e,t){var n=this,r=t?t.changeSet:new Br,i=t?t.documentSet:this.documentSet,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=this.query.hasLimitToFirst()&&i.size===this.query.limit?i.last():null,c=this.query.hasLimitToLast()&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof Bt?t:null;h&&(b(e.isEqual(h.key),"Mismatching keys found in document changes: "+e+" != "+h.key),h=n.query.matches(h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:Nr.Metadata,doc:h}),p=!0):n.shouldWaitForSyncedDocument(l,h)||(r.track({type:Nr.Modified,doc:h}),p=!0,(u&&n.query.docComparator(h,u)>0||c&&n.query.docComparator(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:Nr.Added,doc:h}),p=!0):l&&!h&&(r.track({type:Nr.Removed,doc:l}),p=!0,(u||c)&&(s=!0));p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;a.size>this.query.limit;){var l=this.query.hasLimitToFirst()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:Nr.Removed,doc:l})}return b(!s||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},e.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this;b(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case Nr.Added:return 1;case Nr.Modified:case Nr.Metadata:return 2;case Nr.Removed:return 0;default:return y("Unknown ChangeType: "+e)}};return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)})),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Fr.Synced:Fr.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new zr(this.query,e.documentSet,i,o,e.mutatedKeys,s===Fr.Local,u,!1),limboChanges:a}:{limboChanges:a}},e.prototype.applyOnlineStateChange=function(e){return this.current&&e===Sr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Br,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},e.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&(!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations)},e.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.add(e)})),e.modifiedDocuments.forEach((function(e){return b(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")})),e.removedDocuments.forEach((function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)})),this.current=e.current)},e.prototype.updateLimboDocuments=function(){var e=this;if(!this.current)return[];var t=this.limboDocuments;this.limboDocuments=Fe(),this.documentSet.forEach((function(t){e.shouldBeInLimbo(t.key)&&(e.limboDocuments=e.limboDocuments.add(t.key))}));var n=[];return t.forEach((function(t){e.limboDocuments.has(t)||n.push(new vi(t))})),this.limboDocuments.forEach((function(e){t.has(e)||n.push(new mi(e))})),n},e.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=Fe();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},e.prototype.computeInitialSnapshot=function(){return zr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Fr.Local)},e}();var yi=function(){function e(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new Tr(this.asyncQueue,re.RetryTransaction)}return e.prototype.run=function(){this.runWithBackOff()},e.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,t,n=this;return a.__generator(this,(function(r){return e=this.remoteStore.createTransaction(),(t=this.tryRunUpdateFunction(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.handleTransactionError(e)}))}))})).catch((function(e){n.handleTransactionError(e)})),[2]}))}))}))},e.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!qn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(v){return this.deferred.reject(v),null}},e.prototype.handleTransactionError=function(e){var t=this;this.retries>0&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return t.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.isRetryableTransactionError=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Rr(t)}return!1},e}(),bi=function(e,t,n){this.query=e,this.targetId=t,this.view=n},_i=function(e){this.key=e,this.receivedDocument=!1},wi=function(){function e(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Wt((function(e){return e.canonicalId()})),this.queriesByTarget={},this.limboTargetsByKey=new Te(de.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new fr,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=ot.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Sr.Unknown}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),e.prototype.subscribe=function(e){b(null!==e,"SyncEngine listener cannot be null"),b(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},e.prototype.listen=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(e))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(e.toTarget())];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(e,t,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}}))}))},e.prototype.initializeViewAndComputeSnapshot=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c;return a.__generator(this,(function(a){switch(a.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return r=a.sent(),i=new gi(e,r.remoteKeys),o=i.computeDocChanges(r.documents),s=Wr.createSynthesizedTargetChangeForCurrentChange(t,n&&this.onlineState!==Sr.Offline),b(0===(u=i.applyChanges(o,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),b(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new bi(e,t,i),this.queryViewsByQuery.set(e,c),this.queriesByTarget[t]||(this.queriesByTarget[t]=[]),this.queriesByTarget[t].push(e),[2,u.snapshot]}}))}))},e.prototype.synchronizeViewAndComputeSnapshot=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(e.query,!0)];case 1:return t=r.sent(),n=e.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(e.targetId,n.limboChanges),[2,n]}}))}))},e.prototype.unlisten=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r=this;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("unlisten()"),b(!!(t=this.queryViewsByQuery.get(e)),"Trying to unlisten on query not found:"+e),(n=this.queriesByTarget[t.targetId]).length>1?(this.queriesByTarget[t.targetId]=n.filter((function(t){return!t.isEqual(e)})),this.queryViewsByQuery.delete(e),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then((function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)})).catch(Fn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(e)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,t),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},e.prototype.runTransaction=function(e,t,n){new yi(e,this.remoteStore,t,n).run()},e.prototype.applyRemoteEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(e)];case 2:return t=r.sent(),A(e.targetChanges,(function(e,t){var r=n.limboResolutionsByTarget[Number(e)];r&&(b(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),t.addedDocuments.size>0?r.receivedDocument=!0:t.modifiedDocuments.size>0?b(r.receivedDocument,"Received change for limbo target document without add."):t.removedDocuments.size>0&&(b(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(t,e)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.applyOnlineStateChange=function(e,t){if(this.isPrimary&&t===Er.RemoteStore||!this.isPrimary&&t===Er.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(t,r){var i=r.view.applyOnlineStateChange(e);b(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(e),this.syncEngineListener.onWatchChange(n),this.onlineState=e,this.isPrimary&&this.sharedClientState.setOnlineState(e)}},e.prototype.rejectListen=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(e,"rejected",t),n=this.limboResolutionsByTarget[e],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[e],i=(i=new Te(de.comparator)).insert(r,new zt(r,xe.forDeletedDoc())),o=Fe().add(r),s=new Vr(xe.MIN,{},new Ce(Z),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return[4,this.localStore.releaseTarget(e,!1).then((function(){return u.removeAndCleanupTarget(e,t)})).catch(Fn)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))},e.prototype.applyBatchState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(e)];case 1:return null===(r=i.sent())?(m("SyncEngine","Cannot apply mutation batch with id: "+e),[2]):"pending"!==t?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===t||"rejected"===t?(this.processUserCallback(e,n||null),this.localStore.removeCachedMutationBatchMetadata(e)):y("Unknown batchState: "+t),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},e.prototype.applySuccessfulWrite=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=e.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.rejectFailedWrite=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(e,t),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(e)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"rejected",t),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.registerPendingWritesCallback=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||m("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=r.sent())?(e.resolve(),[2]):((n=this.pendingWritesCallbacks.get(t)||[]).push(e),this.pendingWritesCallbacks.set(t,n),[2])}}))}))},e.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach((function(e){e.resolve()})),this.pendingWritesCallbacks.delete(e)},e.prototype.rejectOutstandingPendingWritesCallbacks=function(e){this.pendingWritesCallbacks.forEach((function(t){t.forEach((function(t){t.reject(new T(x.CANCELLED,e))}))})),this.pendingWritesCallbacks.clear()},e.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new Te(Z)),n=n.insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},e.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(b(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},e.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),b(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach((function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)}))}},e.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},e.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i instanceof mi)this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i);else if(i instanceof vi){m("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)}else y("Unknown limbo change: "+JSON.stringify(i))}},e.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){m("SyncEngine","New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=Qn.atPath(t.path);this.limboResolutionsByTarget[n]=new _i(t),this.remoteStore.listen(new Tn(r.toTarget(),n,vn.LimboResolution,ue.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},e.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},e.prototype.emitNewSnapsAndNotifyLocalStore=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var t=s.view.computeDocChanges(e);return t.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(e){var n=e.documents;return s.view.computeDocChanges(n,t)})):t})).then((function(e){var i=t&&t.targetChanges[s.targetId],a=s.view.applyChanges(e,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var u=pi.fromSnapshot(s.targetId,a.snapshot);r.push(u)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},e.prototype.assertSubscribed=function(e){b(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},e.prototype.handleCredentialChange=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n;return a.__generator(this,(function(r){switch(r.label){case 0:return t=!this.currentUser.isEqual(e),this.currentUser=e,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(e)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},e.prototype.applyPrimaryState=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==e||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==e||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],u=Promise.resolve(),C(this.queriesByTarget,(function(e,t){c.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then((function(){return c.removeAndCleanupTarget(e),c.localStore.releaseTarget(e,!0)})),c.remoteStore.unlisten(e)})),[4,u]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.resetLimboDocuments=function(){var e=this;C(this.limboResolutionsByTarget,(function(t){e.remoteStore.unlisten(t)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Te(de.comparator)},e.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(e){return a.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,o,s,u,c,l,h,f,d,p;return a.__generator(this,(function(a){switch(a.label){case 0:t=[],n=[],r=0,i=e,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(u=this.queriesByTarget[o])&&0!==u.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return a.sent(),[4,this.localStore.allocateTarget(u[0].toTarget())];case 3:s=a.sent(),c=0,l=u,a.label=4;case 4:return c<l.length?(h=l[c],b(!!(f=this.queryViewsByQuery.get(h)),"No query view found for "+h),[4,this.synchronizeViewAndComputeSnapshot(f)]):[3,7];case 5:(d=a.sent()).snapshot&&n.push(d.snapshot),a.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return b(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return b(!!(p=a.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:a.sent(),a.label=12;case 12:t.push(s),a.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}}))}))},e.prototype.synthesizeTargetToQuery=function(e){return new Qn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,Kn.First,e.startAt,e.endAt)},e.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},e.prototype.applyTargetState=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i;return a.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return m("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[e])return[3,7];switch(t){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=o.sent(),i=Vr.createSynthesizedRemoteEventForCurrentChange(e,"current"===t),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(e,!0)];case 5:return o.sent(),this.removeAndCleanupTarget(e,n),[3,7];case 6:y("Unexpected target state: "+t),o.label=7;case 7:return[2]}}))}))},e.prototype.applyActiveTargetsChange=function(e,t){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f=this;return a.__generator(this,(function(d){switch(d.label){case 0:if(!this.isPrimary)return[2];n=0,r=e,d.label=1;case 1:return n<r.length?(h=r[n],b(!this.queriesByTarget[h],"Trying to add an already active target"),[4,this.localStore.getTarget(h)]):[3,6];case 2:return b(!!(i=d.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateTarget(i)];case 3:return o=d.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(i),o.targetId,!1)];case 4:d.sent(),this.remoteStore.listen(o),d.label=5;case 5:return n++,[3,1];case 6:s=function(e){return a.__generator(this,(function(t){switch(t.label){case 0:return u.queriesByTarget[e]?[4,u.localStore.releaseTarget(e,!1).then((function(){f.remoteStore.unlisten(e),f.removeAndCleanupTarget(e)})).catch(Fn)]:[2,"continue"];case 1:return t.sent(),[2]}}))},u=this,c=0,l=t,d.label=7;case 7:return c<l.length?(h=l[c],[5,s(h)]):[3,10];case 8:d.sent(),d.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},e.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},e.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return Fe().add(t.key);var n=Fe(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);b(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},e}(),xi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e.UNAUTHENTICATED=new e(null),e.GOOGLE_CREDENTIALS=new e("google-credentials-uid"),e.FIRST_PARTY=new e("first-party-uid"),e}();function Ti(e,t){return b(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),"firestore_clients_"+e+"_"+t}function Si(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Ei(e,t){return"firestore_targets_"+e+"_"+t}var Mi="SharedClientState",Ci=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r,b(void 0!==r===("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n,r){var i=JSON.parse(r),o="object"===typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"===typeof i.error),a=void 0;return o&&i.error&&(o="string"===typeof i.error.message&&"string"===typeof i.error.code)&&(a=new T(i.error.code,i.error.message)),o?new e(t,n,i.state,a):(v(Mi,"Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ai=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n,b(void 0!==n===("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return e.fromWebStorageEntry=function(t,n){var r=JSON.parse(n),i="object"===typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"===typeof r.error),o=void 0;return i&&r.error&&(i="string"===typeof r.error.message&&"string"===typeof r.error.code)&&(o=new T(r.error.code,r.error.message)),i?new e(t,r.state,o):(v(Mi,"Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Pi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.fromWebStorageEntry=function(t,n){for(var r=JSON.parse(n),i="object"===typeof r&&r.activeTargetIds instanceof Array,o=je(),a=0;i&&a<r.activeTargetIds.length;++a)i=Yn(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(v(Mi,"Failed to parse client data for instance '"+t+"': "+n),null)},e}(),Oi=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.fromWebStorageEntry=function(t){var n=JSON.parse(t);return"object"===typeof n&&n.onlineState in Sr&&"string"===typeof n.clientId?new e(n.clientId,Sr[n.onlineState]):(v(Mi,"Failed to parse online state: "+t),null)},e}(),ki=function(){function e(){this.activeTargetIds=je()}return e.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),Ii=function(){function e(t,n,r,i,o){if(this.queue=t,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!e.isAvailable(this.platform))throw new T(x.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=Ti(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new ki,this.clientStateKeyRe=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.onlineStateKey=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}return e.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},e.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u,c,l,h,f=this;return a.__generator(this,(function(a){switch(a.label){case 0:return b(!this.started,"WebStorageSharedClientState already started"),b(null!==this.syncEngine,"syncEngine property must be set before calling start()"),b(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.localClientId&&(i=this.getItem(Ti(this.persistenceKey,r)))&&(o=Pi.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){var e=je();return A(this.activeClients,(function(t,n){e=e.unionWith(n.activeTargetIds)})),e},e.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},e.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ei(this.persistenceKey,e));if(n){var r=Ai.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},e.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},e.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Ei(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.removeMutationState(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.persistOnlineState(e)},e.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return m(Mi,"READ",e,t),t},e.prototype.setItem=function(e,t){m(Mi,"SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){m(Mi,"REMOVE",e),this.storage.removeItem(e)},e.prototype.handleWebStorageEvent=function(e){var t=this;if(e.storageArea===this.storage){if(m(Mi,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.started)return this.earlyEvents.push(e),[2];if(null===e.key)return[2];if(this.clientStateKeyRe.test(e.key)){if(null==e.newValue)return n=this.fromWebStorageClientStateKey(e.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(e.key,e.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(e.key)){if(null!==e.newValue&&(r=this.fromWebStorageMutationMetadata(e.key,e.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(e.key)){if(null!==e.newValue&&(i=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(e.key===this.onlineStateKey){if(null!==e.newValue&&(o=this.fromWebStorageOnlineState(e.newValue)))return[2,this.handleOnlineStateEvent(o)]}else e.key===this.sequenceNumberKey&&(b(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(e){var t=ue.INVALID;if(null!=e)try{var n=JSON.parse(e);b("number"===typeof n,"Found non-numeric sequence number"),t=n}catch(r){v(Mi,"Failed to read sequence number from WebStorage",r)}return t}(e.newValue))!==ue.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(e.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),e.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},e.prototype.persistMutationState=function(e,t,n){var r=new Ci(this.currentUser,e,t,n),i=Si(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},e.prototype.removeMutationState=function(e){var t=Si(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Sr[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},e.prototype.persistQueryTargetState=function(e,t,n){var r=Ei(this.persistenceKey,e),i=new Ai(e,t,n);this.setItem(r,i.toWebStorageJSON())},e.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},e.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return b(null!==n,"Cannot parse client state key '"+e+"'"),Pi.fromWebStorageEntry(n,t)},e.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);b(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ci.fromWebStorageEntry(new xi(i),r,t)},e.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);b(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return Ai.fromWebStorageEntry(r,t)},e.prototype.fromWebStorageOnlineState=function(e){return Oi.fromWebStorageEntry(e)},e.prototype.handleMutationBatchEvent=function(e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return e.user.uid!==this.currentUser.uid?(m(Mi,"Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.syncEngine.applyBatchState(e.batchId,e.state,e.error)]}))}))},e.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},e.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return r.has(e)||o.push(e),[2]}))}))})),r.forEach((function(e){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){return i.has(e)||s.push(e),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,s)},e.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},e}();var Ri=function(){function e(){this.localState=new ki,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},e.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.queryState[e]},e.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},e.prototype.start=function(){return this.localState=new ki,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e}(),Di=function(){function e(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}return e.prototype.lruParams=function(){return An.withCacheSize(this.cacheSizeBytes)},e}(),Li=function(){},Ni=function(){function e(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=J.newId()}return e.prototype.start=function(e){var t=this;this.verifyNotTerminated();var n=new pe,r=new pe,i=!1;return this.credentials.setChangeListener((function(o){i?t.asyncQueue.enqueueAndForget((function(){return t.handleCredentialChange(o)})):(i=!0,t.initializePersistence(e,r,o).then((function(e){return t.initializeRest(o,e)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},e.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.enableNetwork()}))},e.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Di?this.startIndexedDbPersistence(n,e).then((function(e){return t.resolve(),e})).catch((function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()})):(t.resolve(),this.startMemoryPersistence())},e.prototype.canFallback=function(e){return e instanceof T?e.code===x.FAILED_PRECONDITION||e.code===x.UNIMPLEMENTED:!("undefined"!==typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new T(x.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.startIndexedDbPersistence=function(e,t){var n=this,r=Nn.buildStoragePrefix(this.databaseInfo),i=new li(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(t.synchronizeTabs&&!Ii.isAvailable(this.platform))throw new T(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=t.lruParams(),this.sharedClientState=t.synchronizeTabs?new Ii(this.asyncQueue,this.platform,r,this.clientId,e):new Ri,[4,Nn.createIndexedDbPersistence({allowTabSynchronization:t.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},e.prototype.startMemoryPersistence=function(){return this.persistence=br.createEagerPersistence(this.clientId),this.sharedClientState=new Ri,Promise.resolve(null)},e.prototype.initializeRest=function(e,t){var n=this;return m("FirestoreClient","Initializing. user=",e.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,u,c,l=this;return a.__generator(this,(function(h){switch(h.label){case 0:return n=new lr,this.localStore=new pr(this.persistence,n,e),[4,this.localStore.start()];case 1:return h.sent(),t&&(this.lruScheduler=new Pn(t,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),s=new Pr(this.asyncQueue,r,this.credentials,o),u=function(e){return l.syncEngine.applyOnlineStateChange(e,Er.RemoteStore)},c=function(e){return l.syncEngine.applyOnlineStateChange(e,Er.SharedClientState)},this.remoteStore=new Jr(this.localStore,s,this.asyncQueue,u,i),this.syncEngine=new wi(this.localStore,this.remoteStore,this.sharedClientState,e),this.sharedClientState.onlineStateHandler=c,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new fi(this.syncEngine),[4,this.sharedClientState.start()];case 2:return h.sent(),[4,this.remoteStore.start()];case 3:return h.sent(),[4,this.persistence.setPrimaryStateListener((function(e){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.syncEngine.applyPrimaryState(e)];case 1:return t.sent(),this.lruScheduler&&(e&&!this.lruScheduler.started?this.lruScheduler.start():e||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},e.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),m("FirestoreClient","Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},e.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.syncEngine.disableNetwork()}))},e.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new pe;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.registerPendingWritesCallback(t)})),t.promise},e.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new di(e,t,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},e.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.unlisten(e)}))},e.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.localStore.readDocument(e)})).then((function(e){if(e instanceof Bt)return e;if(e instanceof zt)return null;throw new T(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},e.prototype.getDocumentsFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,n,r;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(e,!0)];case 1:return t=i.sent(),n=new gi(e,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},e.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.write(e,n)})),n.promise},e.prototype.databaseId=function(){return this.databaseInfo.databaseId},e.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()}))},e.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(e.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),e.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new pe;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()})),n.promise},e}(),Fi=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},e.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},e.prototype.mute=function(){this.muted=!0},e.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Ui=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];D("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(L("FieldPath","string",n,e[n]),0===e[n].length)throw new T(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fe(e)}return e.documentId=function(){return e._DOCUMENT_ID},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Y("isEqual","FieldPath",1,t);return this._internalPath.isEqual(t._internalPath)},e._DOCUMENT_ID=new e(fe.keyField().canonicalString()),e}(),ji=new RegExp("[~\\*/\\[\\]]");var Bi=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},zi=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,e(xi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){b(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},e}(),Vi=function(){function e(e){var t=this;this.tokenListener=null,this.currentUser=xi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then((function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)}),(function(){})))}return e.prototype.getToken=function(){var e=this;b(null!=this.tokenListener,"getToken cannot be called after listener removed.");var t=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(e.tokenCounter!==t)throw new T(x.ABORTED,"getToken aborted due to token change.");return n?(b("string"===typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Bi(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){b(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){b(null!=this.tokenListener,"removeChangeListener() called twice"),b(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},e.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return b(null===e||"string"===typeof e,"Received invalid UID: "+e),new xi(e)},e}(),Wi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=xi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),e}(),Gi=function(){function e(e,t){this.gapi=e,this.sessionIndex=t}return e.prototype.getToken=function(){return Promise.resolve(new Wi(this.gapi,this.sessionIndex))},e.prototype.setChangeListener=function(e){e(xi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Hi(e){if(!e)return new zi;switch(e.type){case"gapi":var t=e.client;return b(!("object"!==typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Gi(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new T(x.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function qi(e){return function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"===typeof n[o])return!0}return!1}(e,["next","error","complete"])}var Yi,Ki=function(){function e(e){this._methodName=e}return e.delete=function(){return O("FieldValue.delete",arguments),Xi.instance},e.serverTimestamp=function(){return O("FieldValue.serverTimestamp",arguments),Qi.instance},e.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("FieldValue.arrayUnion",arguments,1),new Ji(e)},e.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I("FieldValue.arrayRemove",arguments,1),new Zi(e)},e.increment=function(e){return L("FieldValue.increment","number",1,e),k("FieldValue.increment",arguments,1),new $i(e)},e.prototype.isEqual=function(e){return this===e},e}(),Xi=function(e){function t(){return e.call(this,"FieldValue.delete")||this}return a.__extends(t,e),t.instance=new t,t}(Ki),Qi=function(e){function t(){return e.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(t,e),t.instance=new t,t}(Ki),Ji=function(e){function t(t){var n=e.call(this,"FieldValue.arrayUnion")||this;return n._elements=t,n}return a.__extends(t,e),t}(Ki),Zi=function(e){function t(t){var n=e.call(this,"FieldValue.arrayRemove")||this;return n._elements=t,n}return a.__extends(t,e),t}(Ki),$i=function(e){function t(t){var n=e.call(this,"FieldValue.increment")||this;return n._operand=t,n}return a.__extends(t,e),t}(Ki),eo=S(Ki,"Use FieldValue.<field>() instead."),to=/^__.*__$/,no=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new _t(e,this.data,this.fieldMask,t)):n.push(new bt(e,this.data,t)),this.fieldTransforms.length>0&&n.push(new wt(e,this.fieldTransforms)),n},e}(),ro=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutations=function(e,t){var n=[new _t(e,this.data,this.fieldMask,t)];return this.fieldTransforms.length>0&&n.push(new wt(e,this.fieldTransforms)),n},e}();function io(e){switch(e){case Yi.Set:case Yi.MergeSet:case Yi.Update:return!0;case Yi.Argument:case Yi.ArrayArgument:return!1;default:throw y("Unexpected case for UserDataSource: "+e)}}!function(e){e[e.Set=0]="Set",e[e.Update=1]="Update",e[e.MergeSet=2]="MergeSet",e[e.Argument=3]="Argument",e[e.ArrayArgument=4]="ArrayArgument"}(Yi||(Yi={}));var oo=function(){function e(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return e.prototype.childContextForField=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(t),r},e.prototype.childContextForFieldPath=function(t){var n=null==this.path?null:this.path.child(t),r=new e(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},e.prototype.childContextForArray=function(t){return new e(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},e.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new T(x.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},e.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(io(this.dataSource)&&to.test(e))throw this.createError('Document fields cannot begin and end with "__"')},e}(),ao=function(e,t){this.databaseId=e,this.key=t},so=function(){function e(e){this.preConverter=e}return e.prototype.parseSetData=function(e,t){var n=new oo(Yi.Set,e,fe.EMPTY_PATH);co("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new no(r,null,n.fieldTransforms)},e.prototype.parseMergeData=function(e,t,n){var r=new oo(Yi.MergeSet,e,fe.EMPTY_PATH);co("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new Ce(fe.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Ui)h=l._internalPath;else{if("string"!==typeof l)throw y("Expected stringOrFieldPath to be a string or a FieldPath");h=ho(e,l)}if(!r.contains(h))throw new T(x.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=ft.fromSet(s),o=r.fieldTransforms.filter((function(e){return i.covers(e.field)}))}else i=ft.fromArray(r.fieldMask),o=r.fieldTransforms;return new no(a,i,o)},e.prototype.parseUpdateData=function(e,t){var n=this,r=new oo(Yi.Update,e,fe.EMPTY_PATH);co("Data must be an object, but it was:",r,t);var i=new Ce(fe.comparator),o=Ft.EMPTY;A(t,(function(t,a){var s=ho(e,t),u=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,u))instanceof Xi)i=i.add(s);else{var c=n.parseData(a,u);null!=c&&(i=i.add(s),o=o.set(s,c))}}));var a=ft.fromSet(i);return new ro(o,a,r.fieldTransforms)},e.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new oo(Yi.Update,e,fe.EMPTY_PATH),o=[lo(e,t)],a=[n];if(r.length%2!==0)throw new T(x.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(lo(e,r[s])),a.push(r[s+1]);var u=new Ce(fe.comparator),c=Ft.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Xi)u=u.add(l);else{var d=this.parseData(f,h);null!=d&&(u=u.add(l),c=c.set(l,d))}}var p=ft.fromSet(u);return new ro(c,p,i.fieldTransforms)},e.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new oo(n?Yi.ArrayArgument:Yi.Argument,e,fe.EMPTY_PATH),i=this.parseData(t,r);return b(null!=i,"Parsed data should not be null."),b(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},e.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(r){var n=fo(r);throw t.createError(n)}},e.prototype.parseData=function(e,t){if(uo(e=this.runPreConverter(e,t)))return co("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Ki)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==Yi.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},e.prototype.parseObject=function(e,t){var n=this,r=new Te(Z);return P(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):A(e,(function(e,i){var o=n.parseData(i,t.childContextForField(e));null!=o&&(r=r.insert(e,o))})),new Ft(r)},e.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=Et.INSTANCE),n.push(s),r++}return new Ut(n)},e.prototype.parseSentinelFieldValue=function(e,t){if(!io(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Xi){if(t.dataSource!==Yi.MergeSet)throw t.dataSource===Yi.Update?(b(t.path.length>0,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof Qi)t.fieldTransforms.push(new dt(t.path,$r.instance));else if(e instanceof Ji){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new ei(n);t.fieldTransforms.push(new dt(t.path,r))}else if(e instanceof Zi){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new ti(n);t.fieldTransforms.push(new dt(t.path,i))}else if(e instanceof $i){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new ni(o);t.fieldTransforms.push(new dt(t.path,a))}else y("Unknown FieldValue type: "+e)},e.prototype.parseScalarValue=function(e,t){if(null===e)return Et.INSTANCE;if("number"===typeof e)return Yn(e)?new Pt(e):new Ot(e);if("boolean"===typeof e)return Mt.of(e);if("string"===typeof e)return new kt(e);if(e instanceof Date)return new It(we.fromDate(e));if(e instanceof we)return new It(new we(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof Zr)return new Nt(e);if(e instanceof ie)return new Dt(e);if(e instanceof ao)return new Lt(e.databaseId,e.key);throw t.createError("Unsupported field value: "+G(e))},e.prototype.parseArrayTransformElements=function(e,t){var n=this;return t.map((function(t,r){var i=new oo(Yi.Argument,e,fe.EMPTY_PATH);return n.parseData(t,i.childContextForArray(r))}))},e}();function uo(e){return"object"===typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof we)&&!(e instanceof Zr)&&!(e instanceof ie)&&!(e instanceof ao)&&!(e instanceof Ki)}function co(e,t,n){if(!uo(n)||!W(n)){var r=G(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function lo(e,t){if(t instanceof Ui)return t._internalPath;if("string"===typeof t)return ho(e,t);throw new T(x.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function ho(e,t){try{return function(e){if(e.search(ji)>=0)throw new T(x.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Ui.bind.apply(Ui,a.__spreadArrays([void 0],e.split("."))))}catch(t){throw new T(x.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t)._internalPath}catch(r){var n=fo(r);throw new T(x.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function fo(e){return e instanceof Error?e.message:e.toString()}var po=An.COLLECTION_DISABLED,mo=function(){function e(e){if(void 0===e.host){if(void 0!==e.ssl)throw new T(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else F("settings","non-empty string","host",e.host),this.host=e.host,U("settings","boolean","ssl",e.ssl),this.ssl=M(e.ssl,!0);if(q("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),U("settings","object","credentials",e.credentials),this.credentials=e.credentials,U("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?v("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&v("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=M(e.timestampsInSnapshots,!0),U("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=An.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==po&&e.cacheSizeBytes<An.MINIMUM_CACHE_SIZE_BYTES)throw new T(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+An.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}U("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},e}(),vo=function(){function e(t,n){var r=this;if(this._firebaseApp=null,this._queue=new ve,this.INTERNAL={delete:function(){return a.__awaiter(r,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}}))}))}},"object"===typeof t.options){var i=t;this._firebaseApp=i,this._databaseId=e.databaseIdFromApp(i),this._persistenceKey=i.name,this._credentials=new Vi(n)}else{var o=t;if(!o.projectId)throw new T(x.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new se(o.projectId,o.database),this._persistenceKey="[DEFAULT]",this._credentials=new zi}this._settings=new mo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return e.prototype.settings=function(e){if(k("Firestore.settings",arguments,1),L("Firestore.settings","object",1,e),E(e,"persistence"))throw new T(x.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new mo(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new T(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=t,void 0!==t.credentials&&(this._credentials=Hi(t.credentials))},e.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},e.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},e.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new T(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&v("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=M(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Di(this._settings.cacheSizeBytes,t))},e.prototype.clearPersistence=function(){var e=this,t=Nn.buildStoragePrefix(this.makeDatabaseInfo()),n=new pe;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return a.__awaiter(e,void 0,void 0,(function(){var e;return a.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new T(x.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Nn.clearPersistence(t)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),qi(e))return this.onSnapshotsInSyncInternal(e);L("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},e.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Fi({next:function(){e.next&&e.next()},error:function(e){throw y("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},e.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Li),this._firestoreClient},e.prototype.makeDatabaseInfo=function(){return new ae(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},e.prototype.configureClient=function(e){b(!!this._settings.host,"FirestoreSettings.host is not set"),b(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new Ni(_.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},e.prototype.createDataConverter=function(e){return new so((function(t){if(t instanceof bo){var n=e,r=t.firestore._databaseId;if(!r.isEqual(n))throw new T(x.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new ao(e,t._key)}return t}))},e.databaseIdFromApp=function(e){var t=e.options;if(!E(t,"projectId"))throw new T(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!==typeof n)throw new T(x.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new se(n)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this._firebaseApp)throw new T(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){return k("Firestore.collection",arguments,1),L("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new Eo(le.fromString(e),this)},e.prototype.doc=function(e){return k("Firestore.doc",arguments,1),L("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),bo.forPath(le.fromString(e),this)},e.prototype.collectionGroup=function(e){if(k("Firestore.collectionGroup",arguments,1),L("Firestore.collectionGroup","non-empty string",1,e),e.indexOf("/")>=0)throw new T(x.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new To(new Qn(le.EMPTY_PATH,e),this)},e.prototype.runTransaction=function(e){var t=this;return k("Firestore.runTransaction",arguments,1),L("Firestore.runTransaction","function",1,e),this.ensureClientConfigured().transaction((function(n){return e(new go(t,n))}))},e.prototype.batch=function(){return this.ensureClientConfigured(),new yo(this)},Object.defineProperty(e,"logLevel",{get:function(){switch(d()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return y("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),e.setLogLevel=function(e){switch(k("Firestore.setLogLevel",arguments,1),L("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":p(i.DEBUG);break;case"error":p(i.ERROR);break;case"silent":p(i.SILENT);break;default:throw new T(x.INVALID_ARGUMENT,"Invalid log level: "+e)}},e.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},e}(),go=function(){function e(e,t){this._firestore=e,this._transaction=t}return e.prototype.get=function(e){var t=this;k("Transaction.get",arguments,1);var n=Po("Transaction.get",e,this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return y("Mismatch in docs returned from document lookup.");var r=e[0];if(r instanceof zt)return new wo(t._firestore,n._key,null,!1,!1,n._converter);if(r instanceof Bt)return new wo(t._firestore,n._key,r,!1,!1,n._converter);throw y("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},e.prototype.set=function(e,t,n){R("Transaction.set",arguments,2,3);var r=Po("Transaction.set",e,this._firestore);n=Mo("Transaction.set",n);var i=ko(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"===typeof t||t instanceof Ui?(I("Transaction.update",arguments,3),r=Po("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(k("Transaction.update",arguments,2),r=Po("Transaction.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},e.prototype.delete=function(e){k("Transaction.delete",arguments,1);var t=Po("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},e}(),yo=function(){function e(e){this._firestore=e,this._mutations=[],this._committed=!1}return e.prototype.set=function(e,t,n){R("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=Po("WriteBatch.set",e,this._firestore);n=Mo("WriteBatch.set",n);var i=ko(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,gt.NONE)),this},e.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"===typeof t||t instanceof Ui?(I("WriteBatch.update",arguments,3),r=Po("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(k("WriteBatch.update",arguments,2),r=Po("WriteBatch.update",e,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,gt.exists(!0))),this},e.prototype.delete=function(e){k("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=Po("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new xt(t._key,gt.NONE)),this},e.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},e.prototype.verifyNotCommitted=function(){if(this._committed)throw new T(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),bo=function(){function e(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}return e.forPath=function(t,n,r){if(t.length%2!==0)throw new T(x.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(new de(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Eo(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.collection=function(e){if(k("DocumentReference.collection",arguments,1),L("DocumentReference.collection","non-empty string",1,e),!e)throw new T(x.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=le.fromString(e);return new Eo(this._key.path.child(t),this.firestore)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Y("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this._key.isEqual(t._key)&&this._converter===t._converter},e.prototype.set=function(e,t){R("DocumentReference.set",arguments,1,2),t=Mo("DocumentReference.set",t);var n=ko(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,gt.NONE))},e.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"===typeof e||e instanceof Ui?(I("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(k("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,gt.exists(!0)))},e.prototype.delete=function(){return k("DocumentReference.delete",arguments,0),this._firestoreClient.write([new xt(this._key,gt.NONE)])},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];R("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!==typeof e[i]||qi(e[i])||(q("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),U("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return qi(e[i])?n=e[i]:(L("DocumentReference.onSnapshot","function",i,e[i]),N("DocumentReference.onSnapshot","function",i+1,e[i+1]),N("DocumentReference.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Fi({next:function(e){if(t.next){b(e.docs.size<=1,"Too many documents returned on a document query");var r=e.docs.get(n._key);t.next(new wo(n.firestore,n._key,r,e.fromCache,e.hasPendingWrites,n._converter))}},error:r}),o=this._firestoreClient.listen(Qn.atPath(this._key.path),i,e);return function(){i.mute(),n._firestoreClient.unlisten(o)}},e.prototype.get=function(e){var t=this;return R("DocumentReference.get",arguments,0,1),Ao("DocumentReference.get",e),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentFromLocalCache(t._key).then((function(e){n(new wo(t.firestore,t._key,e,!0,e instanceof Bt&&e.hasLocalMutations,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?t(new T(x.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?t(new T(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(i)},error:t})},e.prototype.withConverter=function(t){return new e(this._key,this.firestore,t)},e}(),_o=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),wo=function(){function e(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}return e.prototype.data=function(e){if(R("DocumentSnapshot.data",arguments,0,1),e=Co("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new xo(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),Tt.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},e.prototype.get=function(e,t){if(R("DocumentSnapshot.get",arguments,1,2),t=Co("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(lo("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,Tt.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new bo(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return new _o(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){if(!(t instanceof e))throw Y("isEqual","DocumentSnapshot",1,t);return this._firestore===t._firestore&&this._fromCache===t._fromCache&&this._key.isEqual(t._key)&&(null===this._document?null===t._document:this._document.isEqual(t._document))&&this._converter===t._converter},e.prototype.toJSObject=function(e,t){var n=this,r={};return e.forEach((function(e,i){r[e]=n.toJSValue(i,t)})),r},e.prototype.toJSValue=function(e,t){if(e instanceof Ft)return this.toJSObject(e,t);if(e instanceof Ut)return this.toJSArray(e,t);if(e instanceof Lt){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||v("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new bo(n,this._firestore,this._converter)}return e.value(t)},e.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map((function(e){return n.toJSValue(e,t)}))},e}(),xo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(t,e),t.prototype.data=function(t){var n=e.prototype.data.call(this,t);return b(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},t}(wo),To=function(){function e(e,t,n){this._query=e,this.firestore=t,this._converter=n}return e.prototype.where=function(t,n,r){k("Query.where",arguments,3),H("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];z("Query.where",o,2,n);var a=lo("Query.where",t),s=Zn.fromString(n);if(a.isKeyField()){if(s===Zn.ARRAY_CONTAINS||s===Zn.ARRAY_CONTAINS_ANY)throw new T(x.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===Zn.IN){this.validateDisjunctiveFilterElements(r,s);for(var u=[],c=0,l=r;c<l.length;c++){var h=l[c];u.push(this.parseDocumentIdValue(h))}i=new Ut(u)}else i=this.parseDocumentIdValue(r)}else s!==Zn.IN&&s!==Zn.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),i=this.firestore._dataConverter.parseQueryValue("Query.where",r,s===Zn.IN);var f=$n.create(a,s,i);return this.validateNewFilter(f),new e(this._query.addFilter(f),this.firestore,this._converter)},e.prototype.orderBy=function(t,n){var r;if(R("Query.orderBy",arguments,1,2),N("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=or.ASCENDING;else{if("desc"!==n)throw new T(x.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=or.DESCENDING}if(null!==this._query.startAt)throw new T(x.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new T(x.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=lo("Query.orderBy",t),o=new sr(i,r);return this.validateNewOrderBy(o),new e(this._query.addOrderBy(o),this.firestore,this._converter)},e.prototype.limit=function(t){return k("Query.limit",arguments,1),L("Query.limit","number",1,t),K("Query.limit",1,t),new e(this._query.withLimitToFirst(t),this.firestore,this._converter)},e.prototype.limitToLast=function(t){return k("Query.limitToLast",arguments,1),L("Query.limitToLast","number",1,t),K("Query.limitToLast",1,t),new e(this._query.withLimitToLast(t),this.firestore,this._converter)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",t,n,!0);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",t,n,!1);return new e(this._query.withStartAt(i),this.firestore,this._converter)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",t,n,!0);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];I("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",t,n,!1);return new e(this._query.withEndAt(i),this.firestore,this._converter)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Y("isEqual","Query",1,t);return this.firestore===t.firestore&&this._query.isEqual(t._query)},e.prototype.withConverter=function(t){return new e(this._query,this.firestore,t)},e.prototype.boundFromDocOrFields=function(e,t,n,r){if(H(e,1,t),t instanceof wo){if(n.length>0)throw new T(x.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new T(x.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},e.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Lt(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof Rt)throw new T(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new T(x.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new ar(r,n)},e.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new T(x.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!==typeof a)throw new T(x.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new T(x.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(le.fromString(a));if(!de.isDocumentKey(s))throw new T(x.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new de(s);i.push(new Lt(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new ar(i,n)},e.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];R("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!==typeof e[i]||qi(e[i])||(q("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),U("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),qi(e[i])?n=e[i]:(L("Query.onSnapshot","function",i,e[i]),N("Query.onSnapshot","function",i+1,e[i+1]),N("Query.onSnapshot","function",i+2,e[i+2]),n={next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},e.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Fi({next:function(e){t.next&&t.next(new So(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},e.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new T(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},e.prototype.get=function(e){var t=this;return R("Query.get",arguments,0,1),Ao("Query.get",e),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise((function(n,r){e&&"cache"===e.source?t.firestore.ensureClientConfigured().getDocumentsFromLocalCache(t._query).then((function(e){n(new So(t.firestore,t._query,e,t._converter))}),r):t.getViaSnapshotListener(n,r,e)}))},e.prototype.getViaSnapshotListener=function(e,t,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?t(new T(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(i)},error:t})},e.prototype.parseDocumentIdValue=function(e){if("string"===typeof e){if(""===e)throw new T(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new T(x.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(le.fromString(e));if(!de.isDocumentKey(t))throw new T(x.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new Lt(this.firestore._databaseId,new de(t))}if(e instanceof bo){var n=e;return new Lt(this.firestore._databaseId,n._key)}throw new T(x.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+G(e)+".")},e.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new T(x.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new T(x.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(e.indexOf(null)>=0)throw new T(x.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(e.filter((function(e){return Number.isNaN(e)})).length>0)throw new T(x.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},e.prototype.validateNewFilter=function(e){if(e instanceof $n){var t=[Zn.ARRAY_CONTAINS,Zn.ARRAY_CONTAINS_ANY],n=[Zn.IN,Zn.ARRAY_CONTAINS_ANY],r=t.indexOf(e.op)>=0,i=n.indexOf(e.op)>=0;if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new T(x.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new T(x.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new T(x.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},e.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},e.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new T(x.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},e}(),So=function(){function e(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new _o(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;R("QuerySnapshot.forEach",arguments,1,2),L("QuerySnapshot.forEach","function",1,e),this._snapshot.docs.forEach((function(r){e.call(t,n.convertToDocumentImpl(r))}))},Object.defineProperty(e.prototype,"query",{get:function(){return new To(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),e.prototype.docChanges=function(e){e&&(q("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),U("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new T(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t,n,r){if(n.oldDocs.isEmpty()){var i,o=0;return n.docChanges.map((function(t){var a=new xo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r);return b(t.type===Nr.Added,"Invalid event type for first snapshot"),b(!i||n.query.docComparator(i,t.doc)<0,"Got added events in wrong order"),i=t.doc,{type:"added",doc:a,oldIndex:-1,newIndex:o++}}))}var a=n.oldDocs;return n.docChanges.filter((function(e){return t||e.type!==Nr.Metadata})).map((function(t){var i=new xo(e,t.doc.key,t.doc,n.fromCache,n.mutatedKeys.has(t.doc.key),r),o=-1,s=-1;return t.type!==Nr.Added&&(b((o=a.indexOf(t.doc.key))>=0,"Index for document not found"),a=a.delete(t.doc.key)),t.type!==Nr.Removed&&(s=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:Oo(t.type),doc:i,oldIndex:o,newIndex:s}}))}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Y("isEqual","QuerySnapshot",1,t);return this._firestore===t._firestore&&this._originalQuery.isEqual(t._originalQuery)&&this._snapshot.isEqual(t._snapshot)&&this._converter===t._converter},e.prototype.convertToDocumentImpl=function(e){return new xo(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},e}();a.__spreadArrays(["length","forEach","map"],"undefined"!==typeof Symbol?[Symbol.iterator]:[]).forEach((function(e){try{Object.defineProperty(So.prototype.docChanges,e,{get:function(){return function(){throw new T(x.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var Eo=function(e){function t(t,n,r){var i=e.call(this,Qn.atPath(t),n,r)||this;if(i._path=t,t.length%2!==1)throw new T(x.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.canonicalString()+" has "+t.length);return i}return a.__extends(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new bo(new de(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.doc=function(e){if(R("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=J.newId()),L("CollectionReference.doc","non-empty string",1,e),""===e)throw new T(x.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=le.fromString(e);return bo.forPath(this._query.path.child(t),this.firestore,this._converter)},t.prototype.add=function(e){k("CollectionReference.add",arguments,1),L("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then((function(){return t}))},t.prototype.withConverter=function(e){return new t(this._path,this.firestore,e)},t}(To);function Mo(e,t){if(void 0===t)return{merge:!1};if(q(e,t,["merge","mergeFields"]),U(e,"boolean","merge",t.merge),j(e,"mergeFields","a string or a FieldPath",t.mergeFields,(function(e){return"string"===typeof e||e instanceof Ui})),void 0!==t.mergeFields&&void 0!==t.merge)throw new T(x.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Co(e,t){return void 0===t?{}:(q(e,t,["serverTimestamps"]),B(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function Ao(e,t){N(e,"object",1,t),t&&(q(e,t,["source"]),B(e,0,"source",t.source,["default","server","cache"]))}function Po(e,t,n){if(t instanceof bo){if(t.firestore!==n)throw new T(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Y(e,"DocumentReference",1,t)}function Oo(e){switch(e){case Nr.Added:return"added";case Nr.Modified:case Nr.Metadata:return"modified";case Nr.Removed:return"removed";default:return y("Unknown change type: "+e)}}function ko(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var Io=S(vo,"Use firebase.firestore() instead."),Ro=S(go,"Use firebase.firestore().runTransaction() instead."),Do=S(yo,"Use firebase.firestore().batch() instead."),Lo=S(bo,"Use firebase.firestore().doc() instead."),No=S(wo),Fo=S(xo),Uo=S(To),jo=S(So),Bo=S(Eo,"Use firebase.firestore().collection() instead."),zo={Firestore:Io,GeoPoint:Zr,Timestamp:we,Blob:oe,Transaction:Ro,WriteBatch:Do,DocumentReference:Lo,DocumentSnapshot:No,Query:Uo,QueryDocumentSnapshot:Fo,QuerySnapshot:jo,CollectionReference:Bo,FieldPath:Ui,FieldValue:eo,setLogLevel:vo.setLogLevel,CACHE_SIZE_UNLIMITED:po};function Vo(e){e.INTERNAL.registerComponent(new c.Component("firestore",(function(e){var t=e.getProvider("app").getImmediate();return new vo(t,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(function(e){b(e&&"object"===typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(zo)))}var Wo=function(){function e(){}return e.prototype.addCallback=function(e){},e.prototype.shutdown=function(){},e}(),Go=function(){function e(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return e.prototype.addCallback=function(e){this.callbacks.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},e.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},e.prototype.onNetworkAvailable=function(){m("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(0)}},e.prototype.onNetworkUnavailable=function(){m("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++){(0,t[e])(1)}},e.isAvailable=function(){return"undefined"!==typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),Ho=function(){function e(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}return e.prototype.onOpen=function(e){b(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},e.prototype.onClose=function(e){b(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},e.prototype.onMessage=function(e){b(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},e.prototype.close=function(){this.closeFn()},e.prototype.send=function(e){this.sendFn(e)},e.prototype.callOnOpen=function(){b(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},e.prototype.callOnClose=function(e){b(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},e.prototype.callOnMessage=function(e){b(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},e}(),qo="Connection",Yo={BatchGetDocuments:"batchGet",Commit:"commit"},Ko="gl-js/ fire/"+h,Xo=function(){function e(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}return e.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Ko},e.prototype.invokeRPC=function(e,t,n){var r=this,i=this.makeUrl(e);return new Promise((function(o,s){var u=new l.XhrIo;u.listenOnce(l.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case l.ErrorCode.NO_ERROR:var t=u.getResponseJson();m(qo,"XHR received:",JSON.stringify(t)),o(t);break;case l.ErrorCode.TIMEOUT:m(qo,'RPC "'+e+'" timed out'),s(new T(x.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(m(qo,'RPC "'+e+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=function(e){var t=e.toLowerCase().replace("_","-");return Object.values(x).indexOf(t)>=0?t:x.UNKNOWN}(r.status);s(new T(i,r.message))}else s(new T(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else m(qo,'RPC "'+e+'" failed'),s(new T(x.UNAVAILABLE,"Connection failed."));break;default:y('RPC "'+e+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{m(qo,'RPC "'+e+'" completed.')}}));var c=a.__assign({},t);delete c.database;var h=JSON.stringify(c);m(qo,"XHR sending: ",i+" "+h);var f={"Content-Type":"text/plain"};r.modifyHeadersForRequest(f,n),u.send(i,"POST",h,f,15)}))},e.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},e.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=l.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),u.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");m(qo,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,c=!1,h=new Ho({sendFn:function(e){c?m(qo,"Not sending because WebChannel is closed:",e):(s||(m(qo,"Opening WebChannel transport."),a.open(),s=!0),m(qo,"WebChannel sending:",e),a.send(e))},closeFn:function(){return a.close()}}),f=function(e,t){a.listen(e,(function(e){try{t(e)}catch(n){setTimeout((function(){throw n}),0)}}))};return f(l.WebChannel.EventType.OPEN,(function(){c||m(qo,"WebChannel transport opened.")})),f(l.WebChannel.EventType.CLOSE,(function(){c||(c=!0,m(qo,"WebChannel transport closed"),h.callOnClose())})),f(l.WebChannel.EventType.ERROR,(function(e){c||(c=!0,m(qo,"WebChannel transport errored:",e),h.callOnClose(new T(x.UNAVAILABLE,"The operation could not be completed")))})),f(l.WebChannel.EventType.MESSAGE,(function(e){var t;if(!c){var n=e.data[0];b(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){m(qo,"WebChannel received error:",i);var o=i.status,s=function(e){var t=kr[e];if(void 0!==t)return Dr(t)}(o),u=i.message;void 0===s&&(s=x.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),c=!0,h.callOnClose(new T(s,u)),a.close()}else m(qo,"WebChannel received:",n),h.callOnMessage(n)}})),setTimeout((function(){h.callOnOpen()}),0),h},e.prototype.makeUrl=function(e){var t=Yo[e];return b(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},e}(),Qo=function(){function e(){this.emptyByteString="",this.base64Available="undefined"!==typeof atob}return Object.defineProperty(e.prototype,"document",{get:function(){return"undefined"!==typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return"undefined"!==typeof window?window:null},enumerable:!0,configurable:!0}),e.prototype.loadConnection=function(e){return Promise.resolve(new Xo(e))},e.prototype.newConnectivityMonitor=function(){return Go.isAvailable()?new Go:new Wo},e.prototype.newSerializer=function(e){return new li(e,{useProto3Json:!0})},e.prototype.formatJSON=function(e){return JSON.stringify(e)},e.prototype.atob=function(e){return atob(e)},e.prototype.btoa=function(e){return btoa(e)},e}();_.setPlatform(new Qo);function Jo(e){Vo(e),e.registerVersion("@firebase/firestore","1.9.1")}Jo(o),t.registerFirestore=Jo}).call(this,n(632))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"ErrorCode",(function(){return ur})),n.d(t,"EventType",(function(){return cr})),n.d(t,"WebChannel",(function(){return lr})),n.d(t,"XhrIo",(function(){return hr})),n.d(t,"createWebChannelTransport",(function(){return sr}));var r,i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},o=o||{},a=i;function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e,t){e=e.split("."),t=t||a;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function l(){}function h(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function f(e){return"array"==h(e)}function d(e){var t=h(e);return"array"==t||"object"==t&&"number"==typeof e.length}function p(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function y(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function b(e,t,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:y).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function x(e,t){function n(){}n.prototype=t.prototype,e.N=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.xb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function T(){this.j=this.j,this.i=this.i}T.prototype.j=!1,T.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[m]||(this[m]=++v)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var S=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},E=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function M(e){return Array.prototype.concat.apply([],arguments)}function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var P,O=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function k(e,t){return-1!=e.indexOf(t)}function I(e,t){return e<t?-1:e>t?1:0}e:{var R=a.navigator;if(R){var D=R.userAgent;if(D){P=D;break e}}P=""}function L(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function N(e){var t,n={};for(t in e)n[t]=e[t];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){return j[" "](e),e}j[" "]=l;var B,z=k(P,"Opera"),V=k(P,"Trident")||k(P,"MSIE"),W=k(P,"Edge"),G=W||V,H=k(P,"Gecko")&&!(k(P.toLowerCase(),"webkit")&&!k(P,"Edge"))&&!(k(P,"Trident")||k(P,"MSIE"))&&!k(P,"Edge"),q=k(P.toLowerCase(),"webkit")&&!k(P,"Edge");function Y(){var e=a.document;return e?e.documentMode:void 0}e:{var K="",X=function(){var e=P;return H?/rv:([^\);]+)(\)|;)/.exec(e):W?/Edge\/([\d\.]+)/.exec(e):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):q?/WebKit\/(\S+)/.exec(e):z?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(X&&(K=X?X[1]:""),V){var Q=Y();if(null!=Q&&Q>parseFloat(K)){B=String(Q);break e}}B=K}var J,Z={};function $(e){return function(e,t){var n=Z;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=O(String(B)).split("."),r=O(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=I(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||I(0==a[2].length,0==s[2].length)||I(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}var ee=a.document;J=ee&&V?Y()||("CSS1Compat"==ee.compatMode?parseInt(B,10):5):void 0;var te=!V||9<=Number(J),ne=V&&!$("9"),re=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",l,t),a.removeEventListener("test",l,t)}catch(n){}return e}();function ie(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function oe(e,t){if(ie.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(H){e:{try{j(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:ae[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}ie.prototype.b=function(){this.Ia=!1},x(oe,ie);var ae={2:"touch",3:"pen",4:"mouse"};oe.prototype.b=function(){oe.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ne)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var se="closure_listenable_"+(1e6*Math.random()|0),ue=0;function ce(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++ue,this.X=this.Z=!1}function le(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function he(e){this.src=e,this.a={},this.b=0}function fe(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=S(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(le(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function de(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}he.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=de(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new ce(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var pe="closure_lm_"+(1e6*Math.random()|0),me={};function ve(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(f(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}return r=Se(r),t&&t[se]?t.Aa(n,r,p(i)?!!i.capture:!!i,o):ge(t,n,r,!0,i,o)}(e,t,n,r,i);if(f(t)){for(var o=0;o<t.length;o++)ve(e,t[o],n,r,i);return null}return n=Se(n),e&&e[se]?e.za(t,n,p(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i;if(a&&!te)return null;var s=xe(e);if(s||(e[pe]=s=new he(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=we,t=te?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)re||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ye(e){if(!u(e)&&e&&!e.X){var t=e.src;if(t&&t[se])fe(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xe(t))?(fe(n,e),0==n.b&&(n.src=null,t[pe]=null)):le(e)}}}function be(e){return e in me?me[e]:me[e]="on"+e}function _e(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&ye(e),n.call(r,t)}function we(e,t){return!!e.X||(te?_e(e,new oe(t,this)):_e(e,t=new oe(t||c("window.event"),this)))}function xe(e){return(e=e[pe])instanceof he?e:null}var Te="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(e){return"function"==h(e)?e:(e[Te]||(e[Te]=function(t){return e.handleEvent(t)}),e[Te])}function Ee(){T.call(this),this.c=new he(this),this.J=this,this.B=null}function Me(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&fe(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}x(Ee,T),Ee.prototype[se]=!0,(r=Ee.prototype).addEventListener=function(e,t,n,r){ve(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(f(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=p(i)?!!i.capture:!!i,r=Se(r),t&&t[se]?(t=t.c,(n=String(n).toString())in t.a&&(-1<(r=de(a=t.a[n],r,i,o))&&(le(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--)))):t&&(t=xe(t))&&(n=t.a[n.toString()],t=-1,n&&(t=de(n,r,i,o)),(r=-1<t?n[t]:null)&&ye(r))}(this,e,t,n,r)},r.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new ie(e,n);else if(e instanceof ie)e.target=e.target||n;else{var i=e;U(e=new ie(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Me(a,r,!0,e)&&i}if(i=Me(a=e.a=n,r,!0,e)&&i,i=Me(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Me(a=e.a=t[o],r,!1,e)&&i;return i},r.G=function(){if(Ee.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)le(n[r]);delete t.a[e],t.b--}}this.B=null},r.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},r.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ce=a.JSON.stringify;function Ae(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Pe(){this.b=this.a=null}Ae.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Oe,ke=new Ae((function(){return new Re}),(function(e){e.reset()}));function Ie(){var e=Fe,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Re(){this.next=this.b=this.a=null}function De(e){a.setTimeout((function(){throw e}),0)}function Le(e,t){Oe||function(){var e=a.Promise.resolve(void 0);Oe=function(){e.then(Ue)}}(),Ne||(Oe(),Ne=!0),Fe.add(e,t)}Pe.prototype.add=function(e,t){var n=ke.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Re.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Re.prototype.reset=function(){this.next=this.b=this.a=null};var Ne=!1,Fe=new Pe;function Ue(){for(var e;e=Ie();){try{e.a.call(e.b)}catch(n){De(n)}var t=ke;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Ne=!1}function je(e,t){Ee.call(this),this.b=e||1,this.a=t||a,this.f=b(this.fb,this),this.g=w()}function Be(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function ze(e,t,n){if("function"==h(e))n&&(e=b(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=b(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function Ve(e,t,n){T.call(this),this.f=null!=n?b(e,n):e,this.c=t,this.b=b(this.$a,this),this.a=[]}function We(e){e.U=ze(e.b,e.c),e.f.apply(null,e.a)}function Ge(e){T.call(this),this.b=e,this.a={}}x(je,Ee),(r=je.prototype).ba=!1,r.L=null,r.fb=function(){if(this.ba){var e=w()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Be(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=w())},r.G=function(){je.N.G.call(this),Be(this),delete this.a},x(Ve,T),(r=Ve.prototype).ea=!1,r.U=null,r.Ta=function(e){this.a=arguments,this.U?this.ea=!0:We(this)},r.G=function(){Ve.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,We(this))},x(Ge,T);var He=[];function qe(e,t,n,r){f(n)||(n&&(He[0]=n.toString()),n=He);for(var i=0;i<n.length;i++){var o=ve(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ye(e){L(e.a,(function(e,t){this.a.hasOwnProperty(t)&&ye(e)}),e),e.a={}}function Ke(){}Ge.prototype.G=function(){Ge.N.G.call(this),Ye(this)},Ge.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=new Ee;function Qe(e){ie.call(this,"serverreachability",e)}function Je(e){Xe.dispatchEvent(new Qe(Xe,e))}function Ze(e){ie.call(this,"statevent",e)}function $e(e){Xe.dispatchEvent(new Ze(Xe,e))}function et(e){ie.call(this,"timingevent",e)}function tt(e,t){if("function"!=h(e))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}x(Qe,ie),x(Ze,ie),x(et,ie);var nt={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},rt={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function it(){}function ot(e){var t;return(t=e.a)||(t=e.a={}),t}function at(){}it.prototype.a=null;var st,ut={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function ct(){ie.call(this,"d")}function lt(){ie.call(this,"c")}function ht(){}function ft(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Ge(this),this.O=dt,e=G?125:void 0,this.P=new je(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}x(ct,ie),x(lt,ie),x(ht,it),st=new ht;var dt=45e3,pt={},mt={};function vt(e,t,n){e.F=1,e.f=zt(Dt(t)),e.l=n,e.H=!0,yt(e,null)}function gt(e,t,n,r){e.F=1,e.f=zt(Dt(t)),e.l=null,e.H=n,yt(e,r)}function yt(e,t){e.v=w(),wt(e),e.D=Dt(e.f),Bt(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Ve(b(e.Ja,e,e.a),e.J)),qe(e.I,e.a,"readystatechange",e.cb),t=e.h?N(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Je(1)}function bt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=_t(e,n);if(i==mt){4==t&&(e.c=4,$e(14),r=!1);break}if(i==pt){e.c=4,$e(15),r=!1;break}Mt(e,i)}4==t&&0==n.length&&(e.c=1,$e(16),r=!1),e.b=e.b&&r,r||(Et(e),St(e))}function _t(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?mt:(n=Number(t.substring(n,r)),isNaN(n)?pt:(r+=1)+n>t.length?mt:(t=t.substr(r,n),e.A=r+n,t))}function wt(e){e.R=w()+e.O,xt(e,e.O)}function xt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=tt(b(e.ab,e),t)}function Tt(e){e.i&&(a.clearTimeout(e.i),e.i=null)}function St(e){e.g.Ca()||e.m||e.g.na(e)}function Et(e){Tt(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Be(e.P),Ye(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function Mt(e,t){try{e.g.Fa(e,t),Je(4)}catch(n){}}function Ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(d(e)||s(e))E(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(d(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(d(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function At(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof At)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Pt(e,t){kt(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Ot(e))}function Ot(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];kt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)kt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ft.prototype).setTimeout=function(e){this.O=e},r.cb=function(e){e=e.target;var t=this.B;t&&3==Dn(e)?t.Ta():this.Ja(e)},r.Ja=function(e){try{if(e==this.a)e:{var t=Dn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>t||3==t&&!G&&!this.a.aa())){this.m||4!=t||7==n||Je(8==n||0>=r?3:2),Tt(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=Ln(this.a,"X-HTTP-Initial-Response");if(a&&!A(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,$e(12),Et(this),St(this);break e}this.s=!0,Mt(this,s)}this.H?(bt(this,t,o),G&&this.b&&3==t&&(qe(this.I,this.P,"tick",this.bb),this.P.start())):Mt(this,o),4==t&&Et(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,wt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,$e(12)):(this.c=0,$e(13)),Et(this),St(this)}}}catch(u){}},r.bb=function(){if(this.a){var e=Dn(this.a),t=this.a.aa();this.A<t.length&&(Tt(this),bt(this,e,t),this.b&&4!=e&&wt(this))}},r.cancel=function(){this.m=!0,Et(this)},r.ab=function(){this.i=null;var e=w();0<=e-this.R?(2!=this.F&&(Je(3),$e(17)),Et(this),this.c=2,St(this)):xt(this,this.R-e)},(r=At.prototype).C=function(){Ot(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},r.K=function(){return Ot(this),this.a.concat()},r.get=function(e,t){return kt(this.b,e)?this.b[e]:t},r.set=function(e,t){kt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},r.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var It=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Rt?(this.h=void 0!==t?t:e.h,Lt(this,e.f),this.j=e.j,Nt(this,e.b),Ft(this,e.i),this.a=e.a,Ut(this,tn(e.c)),this.g=e.g):e&&(n=String(e).match(It))?(this.h=!!t,Lt(this,n[1]||"",!0),this.j=Vt(n[2]||""),Nt(this,n[3]||"",!0),Ft(this,n[4]),this.a=Vt(n[5]||"",!0),Ut(this,n[6]||"",!0),this.g=Vt(n[7]||"")):(this.h=!!t,this.c=new Qt(null,this.h))}function Dt(e){return new Rt(e)}function Lt(e,t,n){e.f=n?Vt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Nt(e,t,n){e.b=n?Vt(t,!0):t}function Ft(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Ut(e,t,n){t instanceof Qt?(e.c=t,function(e,t){t&&!e.f&&(Jt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Zt(this,t),en(this,n,e))}),e)),e.f=t}(e.c,e.h)):(n||(t=Wt(t,Kt)),e.c=new Qt(t,e.h))}function jt(e,t,n){e.c.set(t,n)}function Bt(e,t,n){f(n)||(n=[String(n)]),en(e.c,t,n)}function zt(e){return jt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^w()).toString(36)),e}function Vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Gt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Wt(t,Ht,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Wt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wt(n,"/"==n.charAt(0)?Yt:qt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Wt(n,Xt)),e.join("")},Rt.prototype.resolve=function(e){var t=Dt(this),n=!!e.f;n?Lt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Nt(t,e.b):n=null!=e.i;var r=e.a;if(n)Ft(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(k(i,"./")||k(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Ut(t,tn(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Ht=/[#\/\?@]/g,qt=/[#\?:]/g,Yt=/[#\?]/g,Kt=/[#\?@]/g,Xt=/#/g;function Qt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Jt(e){e.a||(e.a=new At,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zt(e,t){Jt(e),t=nn(e,t),kt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Pt(e.a,t))}function $t(e,t){return Jt(e),t=nn(e,t),kt(e.a.b,t)}function en(e,t,n){Zt(e,t),0<n.length&&(e.c=null,e.a.set(nn(e,t),C(n)),e.b+=n.length)}function tn(e){var t=new Qt;return t.c=e.c,e.a&&(t.a=new At(e.a),t.b=e.b),t}function nn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function rn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function on(e){var t=e.a.F.a;if(null!=t)$e(4),t?($e(10),Yn(e.a,e,!1)):($e(11),Yn(e.a,e,!0));else{e.b=new ft(e,void 0,void 0),e.b.h=e.h,t=Zn(t=e.a,t.Y()?e.f:null,e.i),$e(4),Bt(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&jt(t,n,r),gt(e.b,t,!1,e.f)}}function an(){this.a=this.b=null}function sn(){this.a=new At}function un(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[m]||(e[m]=++v)):t.charAt(0)+e}function cn(e,t){this.b=e,this.a=t}function ln(e){this.g=e||hn,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.ka&&a.ka.Da&&a.ka.Da()&&a.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=Qt.prototype).add=function(e,t){Jt(this),this.c=null,e=nn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},r.forEach=function(e,t){Jt(this),this.a.forEach((function(n,r){E(n,(function(n){e.call(t,n,r,this)}),this)}),this)},r.K=function(){Jt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},r.C=function(e){Jt(this);var t=[];if(s(e))$t(this,e)&&(t=M(t,this.a.get(nn(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=M(t,e[n])}return t},r.set=function(e,t){return Jt(this),this.c=null,$t(this,e=nn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},r.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},x((function(){}),(function(){})),(r=rn.prototype).M=null,r.$=function(e){return this.a.$(e)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=Ln(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=Ln(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(i){return(t=this.a).m=this.c,void Qn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Qn(t,2)}else 1==this.M&&(this.g?$e(6):"11111"==t?($e(5),this.g=!0,(!V||10<=Number(J))&&(this.c=200,this.b.cancel(),$e(11),Yn(this.a,this,!0))):($e(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,on(this)):1==this.M&&(this.g?($e(11),Yn(this.a,this,!0)):($e(10),Yn(this.a,this,!1)));else{0==this.M?$e(8):1==this.M&&$e(9);var e=this.a;e.m=this.c,Qn(e,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(e){this.a.set(un(e),e)},sn.prototype.C=function(){return this.a.C()};var hn=10;function fn(e,t){!e.a&&(k(t,"spdy")||k(t,"quic")||k(t,"h2"))&&(e.f=e.g,e.a=new sn,e.b&&(vn(e,e.b),e.b=null))}function dn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function pn(e){return e.b?1:e.a?e.a.a.c:0}function mn(e,t){return e.b?e=e.b==t:e.a?(t=un(t),e=kt(e.a.a.b,t)):e=!1,e}function vn(e,t){e.a?e.a.add(t):e.b=t}function gn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=un(t),n=kt(e.a.a.b,n)),n&&Pt(e.a.a,un(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null!=e.a&&0!=e.a.a.c){var t=e.c;return E(e.a.C(),(function(e){t=t.concat(e.j)})),t}return C(e.c)}function bn(){}function _n(){this.a=new bn}function wn(e,t,n){var r=n||"";try{Ct(e,(function(e,n){var i=e;p(e)&&(i=Ce(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function xn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}ln.prototype.cancel=function(){var e;this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(E(this.a.C(),(function(e){e.cancel()})),(e=this.a.a).b={},e.a.length=0,e.c=0)},bn.prototype.stringify=function(e){return a.JSON.stringify(e,void 0)},bn.prototype.parse=function(e){return a.JSON.parse(e,void 0)};var Tn=a.JSON.parse;function Sn(e){Ee.call(this),this.headers=new At,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=En,this.D=this.F=!1}x(Sn,Ee);var En="",Mn=/^https?$/i,Cn=["POST","PUT"];function An(e){return"content-type"==e.toLowerCase()}function Pn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,On(e),In(e)}function On(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function kn(e){if(e.b&&"undefined"!=typeof o&&(!e.s[1]||4!=Dn(e)||2!=e.T()))if(e.l&&4==Dn(e))ze(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==Dn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var s=String(e.A).match(It)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!Mn.test(s?s.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var c=2<Dn(e)?e.a.statusText:""}catch(l){c=""}e.f=c+" ["+e.T()+"]",On(e)}}finally{In(e)}}}function In(e,t){if(e.a){Rn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function Rn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(a.clearTimeout(e.m),e.m=null)}function Dn(e){return e.a?e.a.readyState:0}function Ln(e,t){return e.a?e.a.getResponseHeader(t):null}function Nn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var t="";return L(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=e.indexOf("#"))&&(n=e.length),0>(r=e.indexOf("?"))||r>n){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return jt(e,t,n),e}function Fn(e){this.f=[],this.F=new an,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new ln(e&&e.concurrentRequestLimit),this.ja=new _n,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Un(e){if(jn(e),3==e.u){var t=e.P++,n=Dt(e.B);jt(n,"SID",e.H),jt(n,"RID",t),jt(n,"TYPE","terminate"),Wn(e,n),(t=new ft(e,t,void 0)).F=2,t.f=zt(Dt(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(t.f.toString(),"")),!n&&a.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=w(),wt(t)}Jn(e)}function jn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(a.clearTimeout(e.l),e.l=null),Kn(e),e.b.cancel(),e.h&&(u(e.h)&&a.clearTimeout(e.h),e.h=null)}function Bn(e,t){e.f.push(new cn(e.Qa++,t)),3==e.u&&zn(e)}function zn(e){dn(e.b)||e.h||(e.h=!0,Le(e.Ha,e),e.A=0)}function Vn(e,t){var n;n=t?t.W:e.P++;var r=Dt(e.B);jt(r,"SID",e.H),jt(r,"RID",n),jt(r,"AID",e.O),Wn(e,r),e.g&&e.i&&Nn(r,e.g,e.i),n=new ft(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Gn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),vn(e.b,n),vt(n,r,t)}function Wn(e,t){e.c&&Ct({},(function(e,n){jt(t,n,e)}))}function Gn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?b(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{wn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Hn(e){e.a||e.l||(e.S=1,Le(e.Ga,e),e.v=0)}function qn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=tt(b(e.Ga,e),Xn(e,e.v)),e.v++,!0)}function Yn(e,t,n){var r=t.l;r&&fn(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Zn(e,null,e.ha),zn(e)}function Kn(e){null!=e.s&&(a.clearTimeout(e.s),e.s=null)}function Xn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Qn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=b(e.eb,e);n||(n=new Rt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Lt(n,"https"),zt(n)),function(e,t){var n=new Ke;if(a.Image){var r=new Image;r.onload=_(xn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_(xn,n,r,"TestLoadImage: error",!1,t),r.onabort=_(xn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_(xn,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else $e(2);e.u=0,e.c&&e.c.ta(t),Jn(e),jn(e)}function Jn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,C(e.f),e.f.length=0),e.c.sa())}function Zn(e,t,n){var r=function(e){return e instanceof Rt?Dt(e):new Rt(e,void 0)}(n);if(""!=r.b)t&&Nt(r,t+"."+r.b),Ft(r,r.i);else{var i,o=a.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Rt(null,void 0);return e&&Lt(i,e),t&&Nt(i,t),n&&Ft(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&L(e.V,(function(e,t){jt(r,t,e)})),t=e.j,n=e.I,t&&n&&jt(r,t,n),jt(r,"VER",e.wa),Wn(e,r),r}function $n(){}function er(){if(V&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function tr(e,t){Ee.call(this),this.a=new Fn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))t=i;else(r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new ir(this)}function nr(e){ct.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function rr(){lt.call(this),this.status=1}function ir(e){this.a=e}(r=Sn.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ot(this.H):ot(st),this.a.onreadystatechange=b(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(o){return void Pn(this,o)}e=n||"";var i=new At(this.headers);r&&Ct(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=An,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:s(e)?e.charAt(t):e[t]}(i.K()),n=a.FormData&&e instanceof a.FormData,!(0<=S(Cn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Rn(this),0<this.o&&((this.D=function(e){return V&&$(9)&&u(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ba,this)):this.m=ze(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){Pn(this,o)}},r.Ba=function(){"undefined"!=typeof o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),In(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),In(this,!0)),Sn.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?kn(this):this.Za())},r.Za=function(){kn(this)},r.T=function(){try{return 2<Dn(this)?this.a.status:-1}catch(e){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},r.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Tn(t)}},r.ya=function(){return this.h},r.Xa=function(){return s(this.f)?this.f:String(this.f)},(r=Fn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random());var t,n=new ft(this,e=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=N(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Gn(this,n,t),jt(i=Dt(this.B),"RID",e),jt(i,"CVER",22),this.o&&this.j&&jt(i,"X-HTTP-Session-Id",this.j),Wn(this,i),this.g&&r&&Nn(i,this.g,r),vn(this.b,n),this.W?(jt(i,"$req",t),jt(i,"SID","null"),n.S=!0,vt(n,i,null)):vt(n,i,t),this.u=2}}else 3==this.u&&(e?Vn(this,e):0==this.f.length||dn(this.b)||Vn(this))},r.Ga=function(){this.l=null,this.a=new ft(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Dt(this.pa);jt(e,"RID","rpc"),jt(e,"SID",this.H),jt(e,"CI",this.ia?"0":"1"),jt(e,"AID",this.O),Wn(this,e),jt(e,"TYPE","xmlhttp"),this.g&&this.i&&Nn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),gt(this.a,e,!0,this.ga)},r.Fa=function(e,t){if(0!=this.u&&(this.a==e||mn(this.b,e)))if(this.m=e.o,!e.s&&mn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Kn(this),this.a.cancel(),this.a=null}qn(this),$e(18)}}else this.ra=t[1],0<this.ra-this.O&&37500>t[2]&&this.ia&&0==this.v&&!this.s&&(this.s=tt(b(this.Ya,this),6e3));if(1>=pn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Qn(this,11)}else if((e.s||this.a==e)&&Kn(this),!A(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=Ln(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=Ln(r,"X-HTTP-Session-Id")))&&(this.I=r,jt(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Zn(this,this.Y()?this.ga:null,this.ha),r.s?(gn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Tt(r),wt(r)),this.a=r):Hn(this),0<this.f.length&&zn(this)}else"stop"!=r[0]&&"close"!=r[0]||Qn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Qn(this,7):Un(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,qn(this),$e(19))},r.na=function(e){var t=null;if(this.a==e){Kn(this),this.a=null;var n=2}else{if(!mn(this.b,e))return;t=e.j,gn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=w()-e.v,Xe.dispatchEvent(new et(Xe,e.l?e.l.length:0,t,this.A)),zn(this)):Hn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(pn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa))&&(e.h=tt(b(e.Ha,e,t),Xn(e,e.A)),e.A++,!0))}(this,e)||2==n&&qn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Qn(this,5);break;case 4:Qn(this,10);break;case 3:Qn(this,6);break;default:Qn(this,2)}}},r.eb=function(e){$e(e?2:1)},r.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sn(this.Ka)).F=this.R,e},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=$n.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},er.prototype.a=function(e,t){return new tr(e,t)},x(tr,Ee),(r=tr.prototype).addEventListener=function(e,t,n,r){tr.N.addEventListener.call(this,e,t,n,r)},r.removeEventListener=function(e,t,n,r){tr.N.removeEventListener.call(this,e,t,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;$e(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new rn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Nn(t,e.g,e.i)),(e=e.w).i=n,t=Zn(e.a,null,e.i),$e(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,on(e)):(Bt(t,"MODE","init"),!e.a.o&&e.a.j&&Bt(t,"X-HTTP-Session-Id",e.a.j),e.b=new ft(e,void 0,void 0),e.b.h=e.h,gt(e.b,t,!1,null),e.M=0)},r.close=function(){Un(this.a)},r.Wa=function(e){if(s(e)){var t={};t.__data__=e,Bn(this.a,t)}else this.h?((t={}).__data__=Ce(e),Bn(this.a,t)):Bn(this.a,e)},r.G=function(){this.a.c=null,delete this.f,Un(this.a),delete this.a,tr.N.G.call(this)},x(nr,ct),x(rr,lt),x(ir,$n),ir.prototype.va=function(){this.a.dispatchEvent("a")},ir.prototype.ua=function(e){this.a.dispatchEvent(new nr(e))},ir.prototype.ta=function(e){this.a.dispatchEvent(new rr(e))},ir.prototype.sa=function(){this.a.dispatchEvent("b")};var or=_((function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r}),er);er.prototype.createWebChannel=er.prototype.a,tr.prototype.send=tr.prototype.Wa,tr.prototype.open=tr.prototype.Va,tr.prototype.close=tr.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE="complete",at.EventType=ut,ut.OPEN="a",ut.CLOSE="b",ut.ERROR="c",ut.MESSAGE="d",Ee.prototype.listen=Ee.prototype.za,Sn.prototype.listenOnce=Sn.prototype.Aa,Sn.prototype.getLastError=Sn.prototype.Xa,Sn.prototype.getLastErrorCode=Sn.prototype.ya,Sn.prototype.getStatus=Sn.prototype.T,Sn.prototype.getResponseJson=Sn.prototype.Ua,Sn.prototype.getResponseText=Sn.prototype.aa,Sn.prototype.send=Sn.prototype.ca;var ar={createWebChannelTransport:or,ErrorCode:nt,EventType:rt,WebChannel:at,XhrIo:Sn},sr=ar.createWebChannelTransport,ur=ar.ErrorCode,cr=ar.EventType,lr=ar.WebChannel,hr=ar.XhrIo;t.default=ar}.call(this,n(47))},function(e,t,n){"use strict";n(635)},function(e,t,n){"use strict";(function(e){var t=n(9),r=n.n(t);(function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},i="undefined"!=typeof window&&window===this?this:"undefined"!=typeof e&&null!=e?e:this;function o(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function a(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:o(e)}}!function(e,t){if(t){var r=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in r||(r[a]={}),r=r[a]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var o=i.setTimeout;n.prototype.c=function(e){o(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.o=function(e){var t=this.f();e.La(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.La(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.La=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=a(e),o=i.next();!o.done;o=i.next())r(o.value).La(t,n)}))},t.all=function(e){var n=a(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).La(o(a.length-1),t),i=n.next()}while(!i.done)}))},t}));var s=s||{},u=this||self;function c(e){return"string"==typeof e}function l(e){return"boolean"==typeof e}var h=/^[\w+/_-]+[=]{0,2}$/,f=null;function d(){}function p(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function m(e){return null===e}function v(e){return"array"==p(e)}function g(e){var t=p(e);return"array"==t||"object"==t&&"number"==typeof e.length}function y(e){return"function"==p(e)}function b(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var _="closure_uid_"+(1e9*Math.random()>>>0),w=0;function x(e,t,n){return e.call.apply(e.bind,arguments)}function T(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function S(e,t,n){return(S=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?x:T).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var M=Date.now||function(){return+new Date};function C(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.gd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function A(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function P(e){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function O(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");P.call(this,n+e[r])}function k(e,t){throw new O("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function I(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function R(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function D(){this.b=this.a=null}C(P,Error),P.prototype.name="CustomError",C(O,P),O.prototype.name="AssertionError",I.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var L=new I((function(){return new F}),(function(e){e.reset()}));function N(){var e=Ge,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function F(){this.next=this.b=this.a=null}function U(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(b(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;k("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}D.prototype.add=function(e,t){var n=L.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(c(e))return c(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},B=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=c(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var z=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=c(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},V=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=c(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function W(e,t){return 0<=j(e,t)}function G(e,t){var n;return(n=0<=(t=j(e,t)))&&Array.prototype.splice.call(e,t,1),n}function H(e,t){!function(e,t){for(var n=c(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function q(e){return Array.prototype.concat.apply([],arguments)}function Y(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function K(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function X(e){for(var t in e)return!1;return!0}function Q(e){var t,n={};for(t in e)n[t]=e[t];return n}var J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<J.length;o++)n=J[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function $(e,t){this.a=e===ne&&t||"",this.b=te}function ee(e){return e instanceof $&&e.constructor===$&&e.b===te?e.a:(k("expected object of type Const, got '"+e+"'"),"type_error:Const")}$.prototype.qa=!0,$.prototype.pa=function(){return this.a},$.prototype.toString=function(){return"Const{"+this.a+"}"};var te={},ne={},re=new $(ne,"");function ie(){this.a="",this.b=ce}function oe(e){return e instanceof ie&&e.constructor===ie&&e.b===ce?e.a:(k("expected object of type TrustedResourceUrl, got '"+e+"' of type "+p(e)),"type_error:TrustedResourceUrl")}function ae(e,t){var n=ee(e);if(!ue.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return le(e=n.replace(se,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof $?ee(e):encodeURIComponent(String(e))})))}ie.prototype.qa=!0,ie.prototype.pa=function(){return this.a.toString()},ie.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var se=/%{(\w+)}/g,ue=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ce={};function le(e){var t=new ie;return t.a=e,t}var he=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},fe=/&/g,de=/</g,pe=/>/g,me=/"/g,ve=/'/g,ge=/\x00/g,ye=/[\x00&<>"']/;function be(e,t){return-1!=e.indexOf(t)}function _e(e,t){return e<t?-1:e>t?1:0}function we(){this.a="",this.b=Me}function xe(e){return e instanceof we&&e.constructor===we&&e.b===Me?e.a:(k("expected object of type SafeUrl, got '"+e+"' of type "+p(e)),"type_error:SafeUrl")}we.prototype.qa=!0,we.prototype.pa=function(){return this.a.toString()},we.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Te=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Se(e){return e instanceof we?e:(e="object"==typeof e&&e.qa?e.pa():String(e),Te.test(e)||(e="about:invalid#zClosurez"),Ce(e))}var Ee,Me={};function Ce(e){var t=new we;return t.a=e,t}Ce("about:blank");e:{var Ae=u.navigator;if(Ae){var Pe=Ae.userAgent;if(Pe){Ee=Pe;break e}}Ee=""}function Oe(e){return be(Ee,e)}function ke(){this.a="",this.b=Re}function Ie(e){return e instanceof ke&&e.constructor===ke&&e.b===Re?e.a:(k("expected object of type SafeHtml, got '"+e+"' of type "+p(e)),"type_error:SafeHtml")}ke.prototype.qa=!0,ke.prototype.pa=function(){return this.a.toString()},ke.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Re={};function De(e){var t=new ke;return t.a=e,t}De("<!DOCTYPE html>");var Le,Ne,Fe=De("");function Ue(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function je(e){return ye.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(fe,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(de,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(pe,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(me,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ve,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ge,"&#0;"))),e}function Be(e){u.setTimeout((function(){throw e}),0)}function ze(){var e=u.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!Oe("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=le(ee(re));U(e,"HTMLIFrameElement"),e.src=oe(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(Ie(Fe)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=S((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!Oe("Trident")&&!Oe("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){u.setTimeout(e,0)}}function Ve(e,t){Ne||function(){if(u.Promise&&u.Promise.resolve){var e=u.Promise.resolve(void 0);Ne=function(){e.then(He)}}else Ne=function(){var e=He;!y(u.setImmediate)||u.Window&&u.Window.prototype&&!Oe("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(Le||(Le=ze()),Le(e)):u.setImmediate(e)}}(),We||(Ne(),We=!0),Ge.add(e,t)}De("<br>");var We=!1,Ge=new D;function He(){for(var e;e=N();){try{e.a.call(e.b)}catch(t){Be(t)}R(L,e)}We=!1}function qe(e,t){if(this.a=Ye,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=d)try{var n=this;e.call(t,(function(e){ot(n,Ke,e)}),(function(e){if(!(e instanceof ft))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}ot(n,Xe,e)}))}catch(r){ot(this,Xe,r)}}var Ye=0,Ke=2,Xe=3;function Qe(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Qe.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Je=new I((function(){return new Qe}),(function(e){e.reset()}));function Ze(e,t,n){var r=Je.get();return r.g=e,r.b=t,r.f=n,r}function $e(e){if(e instanceof qe)return e;var t=new qe(d);return ot(t,Ke,e),t}function et(e){return new qe((function(t,n){n(e)}))}function tt(e,t,n){at(e,t,n,null)||Ve(E(t,e))}function nt(e){return new qe((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)tt(e[o],E(i,o,!0),E(i,o,!1));else t(r)}))}function rt(e,t){e.b||e.a!=Ke&&e.a!=Xe||st(e),e.f?e.f.next=t:e.b=t,e.f=t}function it(e,t,n,r){var i=Ze(null,null,null);return i.a=new qe((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof ft?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,rt(e,i),i.a}function ot(e,t,n){e.a==Ye&&(e===n&&(t=Xe,n=new TypeError("Promise cannot resolve to itself")),e.a=1,at(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,st(e),t!=Xe||n instanceof ft||function(e,t){e.g=!0,Ve((function(){e.g&&ht.call(null,t)}))}(e,n)))}function at(e,t,n,r){if(e instanceof qe)return rt(e,Ze(t||d,n||null,r)),!0;if(A(e))return e.then(t,n,r),!0;if(b(e))try{var i=e.then;if(y(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,(function(e){a||(a=!0,n.call(i,e))}),o)}catch(s){o(s)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function st(e){e.h||(e.h=!0,Ve(e.Zb,e))}function ut(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ct(e,t,n,r){if(n==Xe&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,lt(t,n,r);else try{t.c?t.g.call(t.f):lt(t,n,r)}catch(i){ht.call(null,i)}R(Je,t)}function lt(e,t,n){t==Ke?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}qe.prototype.then=function(e,t,n){return it(this,y(e)?e:null,y(t)?t:null,n)},qe.prototype.$goog_Thenable=!0,(t=qe.prototype).ka=function(e,t){return(e=Ze(e,e,t)).c=!0,rt(this,e),this},t.s=function(e,t){return it(this,null,e,t)},t.cancel=function(e){this.a==Ye&&Ve((function(){!function e(t,n){if(t.a==Ye)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Ye&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):ut(r),ct(r,o,Xe,n)))}t.c=null}else ot(t,Xe,n)}(this,new ft(e))}),this)},t.Oc=function(e){this.a=Ye,ot(this,Ke,e)},t.Pc=function(e){this.a=Ye,ot(this,Xe,e)},t.Zb=function(){for(var e;e=ut(this);)ct(this,e,this.a,this.i);this.h=!1};var ht=Be;function ft(e){P.call(this,e)}function dt(){0!=pt&&(mt[this[_]||(this[_]=++w)]=this),this.va=this.va,this.la=this.la}C(ft,P),ft.prototype.name="cancel";var pt=0,mt={};function vt(e){if(!e.va&&(e.va=!0,e.za(),0!=pt)){var t=e[_]||(e[_]=++w);if(0!=pt&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete mt[t]}}function gt(e){return gt[" "](e),e}dt.prototype.va=!1,dt.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},gt[" "]=d;var yt,bt=Oe("Opera"),_t=Oe("Trident")||Oe("MSIE"),wt=Oe("Edge"),xt=wt||_t,Tt=Oe("Gecko")&&!(be(Ee.toLowerCase(),"webkit")&&!Oe("Edge"))&&!(Oe("Trident")||Oe("MSIE"))&&!Oe("Edge"),St=be(Ee.toLowerCase(),"webkit")&&!Oe("Edge");function Et(){var e=u.document;return e?e.documentMode:void 0}e:{var Mt="",Ct=function(){var e=Ee;return Tt?/rv:([^\);]+)(\)|;)/.exec(e):wt?/Edge\/([\d\.]+)/.exec(e):_t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):St?/WebKit\/(\S+)/.exec(e):bt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ct&&(Mt=Ct?Ct[1]:""),_t){var At=Et();if(null!=At&&At>parseFloat(Mt)){yt=String(At);break e}}yt=Mt}var Pt,Ot={};function kt(e){return function(e,t){var n=Ot;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=he(String(yt)).split("."),r=he(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=_e(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||_e(0==a[2].length,0==s[2].length)||_e(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}Pt=u.document&&_t?Et():void 0;var It=Object.freeze||function(e){return e},Rt=!_t||9<=Number(Pt),Dt=_t&&!kt("9"),Lt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",d,t),u.removeEventListener("test",d,t)}catch(n){}return e}();function Nt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Ft(e,t){if(Nt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(Tt){e:{try{gt(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=c(e.pointerType)?e.pointerType:Ut[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}Nt.prototype.preventDefault=function(){this.Mb=!1},C(Ft,Nt);var Ut=It({2:"touch",3:"pen",4:"mouse"});Ft.prototype.preventDefault=function(){Ft.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Dt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Ft.prototype.f=function(){return this.a};var jt="closure_listenable_"+(1e6*Math.random()|0),Bt=0;function zt(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Bt,this.ta=this.Ka=!1}function Vt(e){e.ta=!0,e.listener=null,e.proxy=null,e.src=null,e.Pa=null}function Wt(e){this.src=e,this.a={},this.b=0}function Gt(e,t){var n=t.type;n in e.a&&G(e.a[n],t)&&(Vt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Ht(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ta&&o.listener==t&&o.capture==!!n&&o.Pa==r)return i}return-1}Wt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Ht(e,t,r,i);return-1<a?(t=e[a],n||(t.Ka=!1)):((t=new zt(t,this.src,o,!!r,i)).Ka=n,e.push(t)),t};var qt="closure_lm_"+(1e6*Math.random()|0),Yt={};function Kt(e,t,n,r,i){if(r&&r.once)Qt(e,t,n,r,i);else if(v(t))for(var o=0;o<t.length;o++)Kt(e,t[o],n,r,i);else n=an(n),e&&e[jt]?un(e,t,n,b(r)?!!r.capture:!!r,i):Xt(e,t,n,!1,r,i)}function Xt(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=b(i)?!!i.capture:!!i,s=rn(e);if(s||(e[qt]=s=new Wt(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var e=nn,t=Rt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Lt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($t(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function Qt(e,t,n,r,i){if(v(t))for(var o=0;o<t.length;o++)Qt(e,t[o],n,r,i);else n=an(n),e&&e[jt]?cn(e,t,n,b(r)?!!r.capture:!!r,i):Xt(e,t,n,!0,r,i)}function Jt(e,t,n,r,i){if(v(t))for(var o=0;o<t.length;o++)Jt(e,t[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=an(n),e&&e[jt]?(e=e.u,(t=String(t).toString())in e.a&&(-1<(n=Ht(o=e.a[t],n,r,i))&&(Vt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=rn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Ht(t,n,r,i)),(n=-1<e?t[e]:null)&&Zt(n))}function Zt(e){if("number"!=typeof e&&e&&!e.ta){var t=e.src;if(t&&t[jt])Gt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($t(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=rn(t))?(Gt(n,e),0==n.b&&(n.src=null,t[qt]=null)):Vt(e)}}}function $t(e){return e in Yt?Yt[e]:Yt[e]="on"+e}function en(e,t,n,r){var i=!0;if((e=rn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ta&&(o=tn(o,r),i=i&&!1!==o)}return i}function tn(e,t){var n=e.listener,r=e.Pa||e.src;return e.Ka&&Zt(e),n.call(r,t)}function nn(e,t){if(e.ta)return!0;if(!Rt){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Ft(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=en(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=en(r[i],e,!1,t),n=n&&o}return n}return tn(e,new Ft(t,this))}function rn(e){return(e=e[qt])instanceof Wt?e:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function an(e){return y(e)?e:(e[on]||(e[on]=function(t){return e.handleEvent(t)}),e[on])}function sn(){dt.call(this),this.u=new Wt(this),this.Sb=this,this.Xa=null}function un(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function cn(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function ln(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&Gt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function hn(e,t,n){if(y(e))n&&(e=S(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=S(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function fn(e){var t=null;return new qe((function(n,r){-1==(t=hn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw u.clearTimeout(t),e}))}function dn(e){if(e.U&&"function"==typeof e.U)return e.U();if(c(e))return e.split("");if(g(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function pn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(g(e)||c(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function mn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof mn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function vn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];gn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)gn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function gn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(sn,dt),sn.prototype[jt]=!0,sn.prototype.addEventListener=function(e,t,n,r){Kt(this,e,t,n,r)},sn.prototype.removeEventListener=function(e,t,n,r){Jt(this,e,t,n,r)},sn.prototype.dispatchEvent=function(e){var t,n=this.Xa;if(n)for(t=[];n;n=n.Xa)t.push(n);n=this.Sb;var r=e.type||e;if(c(e))e=new Nt(e,n);else if(e instanceof Nt)e.target=e.target||n;else{var i=e;Z(e=new Nt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=ln(a,r,!0,e)&&i}if(i=ln(a=e.b=n,r,!0,e)&&i,i=ln(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=ln(a=e.b=t[o],r,!1,e)&&i;return i},sn.prototype.za=function(){if(sn.qb.za.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Vt(n[r]);delete t.a[e],t.b--}}this.Xa=null},(t=mn.prototype).U=function(){vn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},t.X=function(){return vn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(e,t){return gn(this.b,e)?this.b[e]:t},t.set=function(e,t){gn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},t.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof bn?(this.h=void 0!==t?t:e.h,_n(this,e.f),this.i=e.i,this.b=e.b,wn(this,e.l),this.c=e.c,xn(this,zn(e.a)),this.g=e.g):e&&(n=String(e).match(yn))?(this.h=!!t,_n(this,n[1]||"",!0),this.i=Cn(n[2]||""),this.b=Cn(n[3]||"",!0),wn(this,n[4]),this.c=Cn(n[5]||"",!0),xn(this,n[6]||"",!0),this.g=Cn(n[7]||"")):(this.h=!!t,this.a=new Ln(null,this.h))}function _n(e,t,n){e.f=n?Cn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function wn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.l=t}else e.l=null}function xn(e,t,n){t instanceof Ln?(e.a=t,function(e,t){t&&!e.f&&(Nn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Un(this,t),Bn(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=An(t,Rn)),e.a=new Ln(t,e.h))}function Tn(e,t,n){e.a.set(t,n)}function Sn(e,t){return e.a.get(t)}function En(e){return e instanceof bn?new bn(e):new bn(e,void 0)}function Mn(e,t){var n=new bn(null,void 0);return _n(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function Cn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function An(e,t,n){return c(e)?(e=encodeURI(e).replace(t,Pn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Pn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}bn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(An(t,On,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(An(t,On,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(An(n,"/"==n.charAt(0)?In:kn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",An(n,Dn)),e.join("")},bn.prototype.resolve=function(e){var t=new bn(this),n=!!e.f;n?_n(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)wn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(be(i,"./")||be(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?xn(t,zn(e.a)):n=!!e.g,n&&(t.g=e.g),t};var On=/[#\/\?@]/g,kn=/[#\?:]/g,In=/[#\?]/g,Rn=/[#\?@]/g,Dn=/#/g;function Ln(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Nn(e){e.a||(e.a=new mn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fn(e){var t=pn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Ln(null,void 0);e=dn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];v(o)?Bn(n,i,o):n.add(i,o)}return n}function Un(e,t){Nn(e),t=Vn(e,t),gn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,gn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&vn(e)))}function jn(e,t){return Nn(e),t=Vn(e,t),gn(e.a.b,t)}function Bn(e,t,n){Un(e,t),0<n.length&&(e.c=null,e.a.set(Vn(e,t),Y(n)),e.b+=n.length)}function zn(e){var t=new Ln;return t.c=e.c,e.a&&(t.a=new mn(e.a),t.b=e.b),t}function Vn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(t=Ln.prototype).add=function(e,t){Nn(this),this.c=null,e=Vn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(e,t){Nn(this),this.a.forEach((function(n,r){B(n,(function(n){e.call(t,n,r,this)}),this)}),this)},t.X=function(){Nn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},t.U=function(e){Nn(this);var t=[];if(c(e))jn(this,e)&&(t=q(t,this.a.get(Vn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=q(t,e[n])}return t},t.set=function(e,t){return Nn(this),this.c=null,jn(this,e=Vn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},t.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var Wn=!_t||9<=Number(Pt);function Gn(e){var t=document;return c(e)?t.getElementById(e):e}function Hn(e,t){K(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:qn.hasOwnProperty(n)?e.setAttribute(qn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var qn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Yn(e,t,n){function r(n){n&&t.appendChild(c(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!g(o)||b(o)&&0<o.nodeType?r(o):B(Kn(o)?Y(o):o,r)}}function Kn(e){if(e&&"number"==typeof e.length){if(b(e))return"function"==typeof e.item||"string"==typeof e.item;if(y(e))return"function"==typeof e.item}return!1}function Xn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(v(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),$n(i,r),r.push(":"),e(t,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,e,t),t.join("")}function Qn(){}var Jn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Zn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(e,t){t.push('"',e.replace(Zn,(function(e){var t=Jn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Jn[e]=t),t})),'"')}function er(){var e=br();return _t&&!!Pt&&11==Pt||/Edge\/\d+/.test(e)}function tr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function nr(e,t){t=t||u.window;var n="about:blank";e&&(n=xe(Se(e)).toString()),t.location.href=n}function rr(e){return!!((e=(e||br()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function ir(e){e=e||u.window;try{e.close()}catch(t){}}function or(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(t.target=r,be(n,"crios/")&&(t.target="_blank")),vr(br())==pr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof we?n:Se("undefined"!=typeof n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((Oe("iPhone")&&!Oe("iPod")&&!Oe("iPad")||Oe("iPad")||Oe("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(U(a=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof we||t instanceof we||(t="object"==typeof t&&t.qa?t.pa():String(t),Te.test(t)||(t="about:invalid#zClosurez"),t=Ce(t)),a.href=xe(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=xe(t).toString(),a&&(xt&&be(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=De('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+je(e)+'">'),a.document.write(Ie(e)),a.document.close())):(a=r.open(xe(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ur(){var e=null;return new qe((function(t){"complete"==u.document.readyState?t():(e=function(){t()},Qt(window,"load",e))})).s((function(t){throw Jt(window,"load",e),t}))}function cr(e){return e=e||br(),!("file:"!==Sr()&&"ionic:"!==Sr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var e=u.window;try{return!(!e||e==e.top)}catch(t){return!1}}function hr(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function fr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function dr(){var e=fr();return"ReactNative"===e||"Node"===e}var pr="Firefox",mr="Chrome";function vr(e){var t=e.toLowerCase();return be(t,"opera/")||be(t,"opr/")||be(t,"opios/")?"Opera":be(t,"iemobile")?"IEMobile":be(t,"msie")||be(t,"trident/")?"IE":be(t,"edge/")?"Edge":be(t,"firefox/")?pr:be(t,"silk/")?"Silk":be(t,"blackberry")?"Blackberry":be(t,"webos")?"Webos":!be(t,"safari/")||be(t,"chrome/")||be(t,"crios/")||be(t,"android")?!be(t,"chrome/")&&!be(t,"crios/")||be(t,"edge/")?be(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":mr:"Safari"}var gr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function yr(e,t){t=t||[];var n,r=[],i={};for(n in gr)i[gr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=fr())?r=vr(i=br()):"Worker"===r&&(r=vr(i=br())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function br(){return u.navigator&&u.navigator.userAgent||""}function _r(e,t){e=e.split("."),t=t||u;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function wr(){try{var e=u.localStorage,t=Pr();if(e)return e.setItem(t,"1"),e.removeItem(t),!er()||!!u.indexedDB}catch(n){return hr()&&!!u.indexedDB}return!1}function xr(){return(Tr()||"chrome-extension:"===Sr()||cr())&&!dr()&&wr()&&!hr()}function Tr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return u.location&&u.location.protocol||null}function Er(e){return!rr(e=e||br())&&vr(e)!=pr}function Mr(e){return"undefined"===typeof e?null:Xn(e)}function Cr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Ar(e){if(null!==e)return JSON.parse(e)}function Pr(e){return e||Math.floor(1e9*Math.random()).toString()}function Or(e){return"Safari"!=vr(e=e||br())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function kr(){var e=u.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Ir(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=br(),t=fr(),this.b=rr(e)||"ReactNative"===t}function Rr(){var e=u.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Dr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Lr(){return!(!_r("fireauth.oauthhelper",u)&&!_r("fireauth.iframe",u))}Ir.prototype.get=function(){var e=u.navigator;return!e||"boolean"!==typeof e.onLine||!Tr()&&"chrome-extension:"!==Sr()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Nr,Fr={};function Ur(e){Fr[e]||(Fr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Nr=2==jr.abcd}catch(qo){Nr=!1}function Br(e,t,n){Nr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function zr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Br(e,n,t[n])}function Vr(e){var t={};return zr(t,e),t}function Wr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Br(t,n,Wr(e[n]));return t}function Gr(e){var t={},n=e[qr],r=e[Yr];if(!(e=e[Kr])||e!=Hr&&!n)throw Error("Invalid provider user info!");t[Qr]=r||null,t[Xr]=n||null,Br(this,Zr,e),Br(this,Jr,Wr(t))}var Hr="EMAIL_SIGNIN",qr="email",Yr="newEmail",Kr="requestType",Xr="email",Qr="fromEmail",Jr="data",Zr="operation";function $r(e,t){this.code=ti+e,this.message=t||ni[e]||""}function ei(e){var t=e&&e.code;return t?new $r(t.substring(ti.length),e.message):null}C($r,Error),$r.prototype.A=function(){return{code:this.code,message:this.message}},$r.prototype.toJSON=function(){return this.A()};var ti="auth/",ni={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ri(e){var t=Sn(e=En(e),ii)||null,n=Sn(e,oi)||null,r=Sn(e,ui)||null;if(r=r&&li[r]||null,!t||!n||!r)throw new $r("argument-error",ii+", "+oi+"and "+ui+" are required in a valid action code URL.");zr(this,{apiKey:t,operation:r,code:n,continueUrl:Sn(e,ai)||null,languageCode:Sn(e,si)||null,tenantId:Sn(e,ci)||null})}var ii="apiKey",oi="oobCode",ai="continueUrl",si="languageCode",ui="mode",ci="tenantId",li={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Hr,verifyEmail:"VERIFY_EMAIL"};function hi(e){try{return new ri(e)}catch(t){return null}}function fi(e){var t=e[gi];if("undefined"===typeof t)throw new $r("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new $r("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[di];if(n&&"object"===typeof n){t=n[_i];var r=n[yi];if(n=n[bi],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new $r("argument-error",yi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new $r("argument-error",bi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new $r("argument-error",_i+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new $r("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new $r("argument-error",di+" property must be a non null object when specified.");if(this.f=null,(t=e[vi])&&"object"===typeof t){if("string"===typeof(t=t[wi])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new $r("argument-error",wi+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new $r("argument-error",vi+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[mi])&&"boolean"!==typeof t)throw new $r("argument-error",mi+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[pi])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new $r("argument-error",pi+" property must be a non empty string when specified.");this.i=e||null}var di="android",pi="dynamicLinkDomain",mi="handleCodeInApp",vi="iOS",gi="url",yi="installApp",bi="minimumVersion",_i="packageName",wi="bundleId";function xi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Ti=null,Si=null;function Ei(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Si[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Ti){Ti={},Si={};for(var e=0;65>e;e++)Ti[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Si[Ti[e]]=e,62<=e&&(Si["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t+=String.fromCharCode(e)})),t}function Mi(e){this.f=e.sub,M(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Ci(e){return(e=Ai(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Mi(e):null}function Ai(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(Ei(e))}catch(r){}return null}Mi.prototype.R=function(){return this.c},Mi.prototype.g=function(){return this.b};var Pi,Oi={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function ki(e){for(var t in Oi)if(Oi[t].id===e)return{firebaseEndpoint:(e=Oi[t]).cb,secureTokenEndpoint:e.ib};return null}Pi=ki("__EID__")?"__EID__":void 0;var Ii="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ri=["client_id","response_type","scope","redirect_uri","state"],Di={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Ri},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Ri},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Ri},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ii},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Li(e){for(var t in Di)if(Di[t].Fa==e)return Di[t];return null}function Ni(e){var t={};t["facebook.com"]=zi,t["google.com"]=Wi,t["github.com"]=Vi,t["twitter.com"]=Gi;var n=e&&e[Ui];try{if(n)return t[n]?new t[n](e):new Bi(e);if("undefined"!==typeof e[Fi])return new ji(e)}catch(r){}return null}var Fi="idToken",Ui="providerId";function ji(e){var t=e[Ui];if(!t&&e[Fi]){var n=Ci(e[Fi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Br(this,"providerId",t),Br(this,"isNewUser",n)}function Bi(e){ji.call(this,e),Br(this,"profile",Wr((e=Ar(e.rawUserInfo||"{}"))||{}))}function zi(e){if(Bi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(e){if(Bi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",this.profile&&this.profile.login||null)}function Wi(e){if(Bi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(e){if(Bi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",e.screenName||null)}function Hi(e){var t=En(e),n=Sn(t,"link"),r=Sn(En(n),"link");return t=Sn(t,"deep_link_id"),Sn(En(t),"link")||t||r||n||e}function qi(){}function Yi(e,t){return e.then((function(e){if(e[Na]){var n=Ci(e[Na]);if(!n||t!=n.f)throw new $r("user-mismatch");return e}throw new $r("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==ti+"user-not-found"?new $r("user-mismatch"):e}))}function Ki(e,t){if(!t)throw new $r("internal-error","failed to construct a credential");this.a=t,Br(this,"providerId",e),Br(this,"signInMethod",e)}function Xi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Qi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Ki(e.providerId,e.pendingToken)}catch(t){}return null}function Ji(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Br(this,"idToken",t.idToken),t.accessToken&&Br(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Br(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new $r("internal-error","failed to construct a credential");Br(this,"accessToken",t.oauthToken),Br(this,"secret",t.oauthTokenSecret)}Br(this,"providerId",e),Br(this,"signInMethod",n)}function Zi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Fn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function $i(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Ji(e.providerId,t,e.signInMethod)}catch(n){}}return null}function eo(e,t){this.Fc=t||[],zr(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(Li(e)||{}).Ea||null,this.bb=null}function to(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new $r("argument-error",'SAML provider IDs must be prefixed with "saml."');eo.call(this,e,[])}function no(e){eo.call(this,e,Ri),this.a=[]}function ro(){no.call(this,"facebook.com")}function io(e){if(!e)throw new $r("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return b(e)&&(t=e.accessToken),(new ro).credential({accessToken:t})}function oo(){no.call(this,"github.com")}function ao(e){if(!e)throw new $r("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return b(e)&&(t=e.accessToken),(new oo).credential({accessToken:t})}function so(){no.call(this,"google.com"),this.ya("profile")}function uo(e,t){var n=e;return b(e)&&(n=e.idToken,t=e.accessToken),(new so).credential({idToken:n,accessToken:t})}function co(){eo.call(this,"twitter.com",Ii)}function lo(e,t){var n=e;if(b(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new $r("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ji("twitter.com",n,"twitter.com")}function ho(e,t,n){this.a=e,this.c=t,Br(this,"providerId","password"),Br(this,"signInMethod",n===po.EMAIL_LINK_SIGN_IN_METHOD?po.EMAIL_LINK_SIGN_IN_METHOD:po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function fo(e){return e&&e.email&&e.password?new ho(e.email,e.password,e.signInMethod):null}function po(){zr(this,{providerId:"password",isOAuthProvider:!1})}function mo(e,t){if(!(t=vo(t)))throw new $r("argument-error","Invalid email link!");return new ho(e,t.code,po.EMAIL_LINK_SIGN_IN_METHOD)}function vo(e){return(e=hi(e=Hi(e)))&&e.operation===Hr?e:null}function go(e){if(!(e.Va&&e.Ua||e.Ha&&e.ba))throw new $r("internal-error");this.a=e,Br(this,"providerId","phone"),Br(this,"signInMethod","phone")}function yo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new go(t)}return null}function bo(e){return e.a.Ha&&e.a.ba?{temporaryProof:e.a.Ha,phoneNumber:e.a.ba}:{sessionInfo:e.a.Va,code:e.a.Ua}}function _o(e){try{this.a=e||r.a.auth()}catch(t){throw new $r("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}zr(this,{providerId:"phone",isOAuthProvider:!1})}function wo(e,t){if(!e)throw new $r("missing-verification-id");if(!t)throw new $r("missing-verification-code");return new go({Va:e,Ua:t})}function xo(e){if(e.temporaryProof&&e.phoneNumber)return new go({Ha:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return uo(o,n);case"facebook.com":return io(n);case"github.com":return ao(n);case"twitter.com":return lo(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new Ki(t,a):new Ji(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new no(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function To(e){if(!e.isOAuthProvider)throw new $r("invalid-oauth-provider")}function So(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new $r("invalid-auth-event");if(this.g&&this.a)throw new $r("invalid-auth-event");if(this.g&&!this.f)throw new $r("invalid-auth-event")}function Eo(e){return(e=e||{}).type?new So(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&ei(e.error),e.postBody,e.tenantId):null}function Mo(){this.b=null,this.a=[]}C(Bi,ji),C(zi,Bi),C(Vi,Bi),C(Wi,Bi),C(Gi,Bi),Ki.prototype.na=function(e){return es(e,Xi(this))},Ki.prototype.b=function(e,t){var n=Xi(this);return n.idToken=t,ts(e,n)},Ki.prototype.f=function(e,t){return Yi(ns(e,Xi(this)),t)},Ki.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ji.prototype.na=function(e){return es(e,Zi(this))},Ji.prototype.b=function(e,t){var n=Zi(this);return n.idToken=t,ts(e,n)},Ji.prototype.f=function(e,t){return Yi(ns(e,Zi(this)),t)},Ji.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},eo.prototype.Ga=function(e){return this.zb=Q(e),this},C(to,eo),C(no,eo),no.prototype.ya=function(e){return W(this.a,e)||this.a.push(e),this},no.prototype.Hb=function(){return Y(this.a)},no.prototype.credential=function(e,t){var n;if(!(n=b(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new $r("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ji(this.providerId,n,this.providerId)},C(ro,no),Br(ro,"PROVIDER_ID","facebook.com"),Br(ro,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(oo,no),Br(oo,"PROVIDER_ID","github.com"),Br(oo,"GITHUB_SIGN_IN_METHOD","github.com"),C(so,no),Br(so,"PROVIDER_ID","google.com"),Br(so,"GOOGLE_SIGN_IN_METHOD","google.com"),C(co,eo),Br(co,"PROVIDER_ID","twitter.com"),Br(co,"TWITTER_SIGN_IN_METHOD","twitter.com"),ho.prototype.na=function(e){return this.signInMethod==po.EMAIL_LINK_SIGN_IN_METHOD?ks(e,ls,{email:this.a,oobCode:this.c}):ks(e,Cs,{email:this.a,password:this.c})},ho.prototype.b=function(e,t){return this.signInMethod==po.EMAIL_LINK_SIGN_IN_METHOD?ks(e,hs,{idToken:t,email:this.a,oobCode:this.c}):ks(e,ws,{idToken:t,email:this.a,password:this.c})},ho.prototype.f=function(e,t){return Yi(this.na(e),t)},ho.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},zr(po,{PROVIDER_ID:"password"}),zr(po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),zr(po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),go.prototype.na=function(e){return e.Wa(bo(this))},go.prototype.b=function(e,t){var n=bo(this);return n.idToken=t,ks(e,Ps,n)},go.prototype.f=function(e,t){var n=bo(this);return n.operation="REAUTH",Yi(e=ks(e,Os,n),t)},go.prototype.A=function(){var e={providerId:"phone"};return this.a.Va&&(e.verificationId=this.a.Va),this.a.Ua&&(e.verificationCode=this.a.Ua),this.a.Ha&&(e.temporaryProof=this.a.Ha),this.a.ba&&(e.phoneNumber=this.a.ba),e},_o.prototype.Wa=function(e,t){var n=this.a.b;return $e(t.verify()).then((function(r){if(!c(r))throw new $r("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return ks(e,bs,t)}(n,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new $r("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},zr(_o,{PROVIDER_ID:"phone"}),zr(_o,{PHONE_SIGN_IN_METHOD:"phone"}),So.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},So.prototype.R=function(){return this.h},So.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Co,Ao=null;function Po(e){var t="unauthorized-domain",n=void 0,r=En(e);e=r.b,"chrome-extension"==(r=r.f)?n=Ue("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Ue("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",$r.call(this,t,n)}function Oo(e,t,n){$r.call(this,e,n),(e=t||{}).Ab&&Br(this,"email",e.Ab),e.ba&&Br(this,"phoneNumber",e.ba),e.credential&&Br(this,"credential",e.credential),e.Qb&&Br(this,"tenantId",e.Qb)}function ko(e){if(e.code){var t=e.code||"";0==t.indexOf(ti)&&(t=t.substring(ti.length));var n={credential:xo(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new $r(t,e.message||void 0);return new Oo(t,n,e.message)}return null}function Io(){}function Ro(e){return e.c||(e.c=e.b())}function Do(){}function Lo(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function No(){}function Fo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=S(this.fc,this),this.a.onerror=S(this.Ib,this),this.a.onprogress=S(this.gc,this),this.a.ontimeout=S(this.kc,this)}function Uo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function jo(e,t,n){this.reset(e,t,n,void 0,void 0)}C(Po,$r),C(Oo,$r),Oo.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&Z(e,t),e},Oo.prototype.toJSON=function(){return this.A()},Io.prototype.c=null,C(Do,Io),Do.prototype.a=function(){var e=Lo(this);return e?new ActiveXObject(e):new XMLHttpRequest},Do.prototype.b=function(){var e={};return Lo(this)&&(e[0]=!0,e[1]=!0),e},Co=new Do,C(No,Io),No.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Fo;throw Error("Unsupported browser")},No.prototype.b=function(){return{}},(t=Fo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},t.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},t.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Uo(this,4)},t.Ib=function(){this.status=500,this.response=this.responseText="",Uo(this,4)},t.kc=function(){this.Ib()},t.gc=function(){this.status=200,Uo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},jo.prototype.a=null;function Bo(e){this.f=e,this.b=this.c=this.a=null}function zo(e,t){this.name=e,this.value=t}jo.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||M(),delete this.a},zo.prototype.toString=function(){return this.name};var Vo=new zo("SEVERE",1e3),Wo=new zo("WARNING",900),Go=new zo("CONFIG",700),Ho=new zo("FINE",500);Bo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(k("Root logger has no level set."),null)}(this).value)for(y(t)&&(t=t()),e=new jo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var qo,Yo={},Ko=null;function Xo(e){var t;if(Ko||(Ko=new Bo(""),Yo[""]=Ko,Ko.c=Go),!(t=Yo[e])){t=new Bo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Xo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,Yo[e]=t}return t}function Qo(e,t){e&&e.log(Ho,t,void 0)}function Jo(e){this.f=e}function Zo(e){sn.call(this),this.o=e,this.readyState=$o,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Xo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}C(Jo,Io),Jo.prototype.a=function(){return new Zo(this.f)},Jo.prototype.b=(qo={},function(){return qo}),C(Zo,sn);var $o=0;function ea(e){e.c.read().then(e.ec.bind(e)).catch(e.Oa.bind(e))}function ta(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,na(e)}function na(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ra(e){sn.call(this),this.headers=new mn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=ia,this.v=this.P=!1}(t=Zo.prototype).open=function(e,t){if(this.readyState!=$o)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,na(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Oa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ta(this,!1)),this.readyState=$o},t.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,na(this)),this.a&&(this.readyState=3,na(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,ea(this)):e.text().then(this.ic.bind(this),this.Oa.bind(this)))))},t.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ta(this,!0):na(this),3==this.readyState&&ea(this)}},t.ic=function(e){this.a&&(this.response=this.responseText=e,ta(this,!0))},t.hc=function(e){this.a&&(this.response=e,ta(this,!0))},t.Oa=function(e){var t=this.h;t&&t.log(Wo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&ta(this,!0)},t.setRequestHeader=function(e,t){this.i.append(e,t)},t.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Wo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Wo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},C(ra,sn);var ia="";ra.prototype.b=Xo("goog.net.XhrIo");var oa=/^https?$/i,aa=["POST","PUT"];function sa(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():Co.a(),e.w=e.B?Ro(e.B):Ro(Co),e.a.onreadystatechange=S(e.Lb,e);try{Qo(e.b,va(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(a){return Qo(e.b,va(e,"Error opening Xhr: "+a.message)),void ca(e,a)}t=r||"";var o=new mn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(g(e)||c(e))B(e,t,void 0);else for(var n=pn(e),r=dn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=ua,n=e.length,r=c(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:c(e)?e.charAt(t):e[t]}(o.X()),r=u.FormData&&t instanceof u.FormData,!W(aa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{da(e),0<e.g&&(e.v=function(e){return _t&&kt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),Qo(e.b,va(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=S(e.Ia,e)):e.o=hn(e.Ia,e.g,e)),Qo(e.b,va(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){Qo(e.b,va(e,"Send error: "+a.message)),ca(e,a)}}function ua(e){return"content-type"==e.toLowerCase()}function ca(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,la(e),fa(e)}function la(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function ha(e){if(e.c&&"undefined"!=typeof s)if(e.w[1]&&4==pa(e)&&2==ma(e))Qo(e.b,va(e,"Local request error detected and ignored"));else if(e.i&&4==pa(e))hn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==pa(e)){Qo(e.b,va(e,"Request complete")),e.c=!1;try{var t,n=ma(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(yn)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!oa.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<pa(e)?e.a.statusText:""}catch(l){Qo(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+ma(e)+"]",la(e)}}finally{fa(e)}}}function fa(e,t){if(e.a){da(e);var n=e.a,r=e.w[0]?d:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(Vo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function da(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(u.clearTimeout(e.o),e.o=null)}function pa(e){return e.a?e.a.readyState:0}function ma(e){try{return 2<pa(e)?e.a.status:-1}catch(t){return-1}}function va(e,t){return t+" ["+e.O+" "+e.l+" "+ma(e)+"]"}function ga(e){var t=Aa;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ya(e,t,n){e.a=!0,e.c=n,e.f=!t,xa(e)}function ba(e){if(e.a){if(!e.u)throw new Ta(e);e.u=!1}}function _a(e,t,n,r){e.g.push([t,n,r]),e.a&&xa(e)}function wa(e){return V(e.g,(function(e){return y(e[1])}))}function xa(e){if(e.h&&e.a&&wa(e)){var t=e.h,n=Ma[t];n&&(u.clearTimeout(n.a),delete Ma[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.o,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(A(t)||"function"===typeof u.Promise&&t instanceof u.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,wa(e)||(n=!0)}}e.c=t,r&&(s=S(e.m,e,!0),r=S(e.m,e,!1),t instanceof ga?(_a(t,s,r),t.w=!0):t.then(s,r)),n&&(t=new Ea(t),Ma[t.a]=t,e.h=t.a)}function Ta(){P.call(this)}function Sa(){P.call(this)}function Ea(e){this.a=u.setTimeout(S(this.c,this),0),this.b=e}(t=ra.prototype).Ia=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Qo(this.b,va(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Qo(this.b,va(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),fa(this))},t.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),fa(this,!0)),ra.qb.za.call(this)},t.Lb=function(){this.va||(this.J||this.i||this.f?ha(this):this.yc())},t.yc=function(){ha(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ia:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Vo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Qo(this.b,"Can not get response: "+t.message),null}},ga.prototype.cancel=function(e){if(this.a)this.c instanceof ga&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new Sa(this),ba(this),ya(this,!1,e))}},ga.prototype.m=function(e,t){this.i=!1,ya(this,e,t)},ga.prototype.then=function(e,t,n){var r,i,o=new qe((function(e,t){r=e,i=t}));return _a(this,r,(function(e){e instanceof Sa?o.cancel():i(e)})),o.then(e,t,n)},ga.prototype.$goog_Thenable=!0,C(Ta,P),Ta.prototype.message="Deferred has already fired",Ta.prototype.name="AlreadyCalledError",C(Sa,P),Sa.prototype.message="Deferred was canceled",Sa.prototype.name="CanceledError",Ea.prototype.c=function(){throw delete Ma[this.a],this.b};var Ma={};function Ca(e){var t={},n=t.document||document,r=oe(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new ga(o),s=null,c=null!=t.timeout?t.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Pa(i,!0);var e=new Ia(ka,"Timeout reached for loading script "+r);ba(a),ya(a,!1,e)}),c),o.Ia=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Pa(i,t.hd||!1,s),ba(a),ya(a,!0,null))},i.onerror=function(){Pa(i,!0,s);var e=new Ia(Oa,"Error while loading script "+r);ba(a),ya(a,!1,e)},Z(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Hn(i,o),function(e,t){U(e,"HTMLScriptElement"),e.src=oe(t),null===f&&(f=(t=(t=u.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""),(t=f)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Aa(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Pa(e,!0,this.Ia)}}function Pa(e,t,n){null!=n&&u.clearTimeout(n),e.onload=d,e.onerror=d,e.onreadystatechange=d,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Oa=0,ka=1;function Ia(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),P.call(this,n),this.code=e}function Ra(e){this.f=e}function Da(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||Fa,this.g=Q(e.secureTokenHeaders||Ua),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||ja,this.a=Q(e.firebaseHeaders||Ba),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==fr(),!(n=u.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!hr())throw new $r("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new Jo(self):dr()?this.f=new Ra(n):this.f=new No,this.b=null}C(Ia,P),C(Ra,Io),Ra.prototype.a=function(){return new this.f},Ra.prototype.b=function(){return{}};var La,Na="idToken",Fa=new Ir(3e4,6e4),Ua={"Content-Type":"application/x-www-form-urlencoded"},ja=new Ir(3e4,6e4),Ba={"Content-Type":"application/json"};function za(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Va(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Wa(e,t,n,r,i,o,a){(function(){var e=br();return!((e=vr(e)!=mr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!_t||!Pt||9<Pt)})()||hr()?e=S(e.o,e):(La||(La=new qe((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{u[Ha]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){_a(e,null,t,void 0)}(Ca(ae(Ga,{onload:Ha})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=S(e.m,e)),e(t,n,r,i,o,a)}Da.prototype.R=function(){return this.b},Da.prototype.o=function(e,t,n,r,i,o){if(hr()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new $r("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ra(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}un(a,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Qo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),cn(a,"ready",(function(){s&&clearTimeout(s),vt(this)})),cn(a,"timeout",(function(){s&&clearTimeout(s),vt(this),t&&t(null)})),sa(a,e,n,r,i)};var Ga=new $(ne,"https://apis.google.com/js/client.js?onload=%{onload}"),Ha="__fcb"+Math.floor(1e6*Math.random()).toString();function qa(e){if(!c(e=e.email)||!sr.test(e))throw new $r("invalid-email")}function Ya(e){"email"in e&&qa(e)}function Ka(e){if(!e[Na])throw new $r("internal-error")}function Xa(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new $r("internal-error")}else{if(!e.sessionInfo)throw new $r("missing-verification-id");if(!e.code)throw new $r("missing-verification-code")}}Da.prototype.m=function(e,t,n,r,i){var o=this;La.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Da.prototype.ob=function(){return ks(this,xs,{})},Da.prototype.rb=function(e,t){return ks(this,_s,{idToken:e,email:t})},Da.prototype.sb=function(e,t){return ks(this,ws,{idToken:e,password:t})};var Qa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ja(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new $r("internal-error")}function Za(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(jn(e=new Ln(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function $a(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=ko(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=ko(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=ko(e)):e.errorMessage&&(t=Is(e.errorMessage)),t)throw t;if(!e[Na])throw new $r("internal-error")}function es(e,t){return t.returnIdpCredential=!0,ks(e,Ts,t)}function ts(e,t){return t.returnIdpCredential=!0,ks(e,Es,t)}function ns(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,ks(e,Ss,t)}function rs(e){if(!e.oobCode)throw new $r("invalid-action-code")}(t=Da.prototype).tb=function(e,t){var n={idToken:e},r=[];return K(Qa,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ks(this,_s,n)},t.kb=function(e,t){return Z(e={requestType:"PASSWORD_RESET",email:e},t),ks(this,ms,e)},t.lb=function(e,t){return Z(e={requestType:"EMAIL_SIGNIN",email:e},t),ks(this,ds,e)},t.jb=function(e,t){return Z(e={requestType:"VERIFY_EMAIL",idToken:e},t),ks(this,ps,e)},t.Wa=function(e){return ks(this,As,e)},t.ab=function(e,t){return ks(this,ys,{oobCode:e,newPassword:t})},t.Ma=function(e){return ks(this,os,{oobCode:e})},t.Ya=function(e){return ks(this,is,{oobCode:e})};var is={endpoint:"setAccountInfo",D:rs,fa:"email",F:!0},os={endpoint:"resetPassword",D:rs,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new $r("internal-error")},F:!0},as={endpoint:"signupNewUser",D:function(e){if(qa(e),!e.password)throw new $r("weak-password")},K:Ka,T:!0,F:!0},ss={endpoint:"createAuthUri",F:!0},us={endpoint:"deleteAccount",V:["idToken"]},cs={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!v(e.deleteProvider))throw new $r("internal-error")}},ls={endpoint:"emailLinkSignin",V:["email","oobCode"],D:qa,K:Ka,T:!0,F:!0},hs={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:qa,K:Ka,T:!0},fs={endpoint:"getAccountInfo"},ds={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new $r("internal-error");qa(e)},fa:"email",F:!0},ps={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new $r("internal-error")},fa:"email",F:!0},ms={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new $r("internal-error");qa(e)},fa:"email",F:!0},vs={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},gs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new $r("internal-error")}},ys={endpoint:"resetPassword",D:rs,fa:"email",F:!0},bs={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},_s={endpoint:"setAccountInfo",V:["idToken"],D:Ya,T:!0},ws={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(Ya(e),!e.password)throw new $r("weak-password")},K:Ka,T:!0},xs={endpoint:"signupNewUser",K:Ka,T:!0,F:!0},Ts={endpoint:"verifyAssertion",D:Ja,Ra:Za,K:$a,T:!0,F:!0},Ss={endpoint:"verifyAssertion",D:Ja,Ra:Za,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new $r("user-not-found");if(e.errorMessage)throw Is(e.errorMessage);if(!e[Na])throw new $r("internal-error")},T:!0,F:!0},Es={endpoint:"verifyAssertion",D:function(e){if(Ja(e),!e.idToken)throw new $r("internal-error")},Ra:Za,K:$a,T:!0},Ms={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new $r("invalid-custom-token")},K:Ka,T:!0,F:!0},Cs={endpoint:"verifyPassword",D:function(e){if(qa(e),!e.password)throw new $r("wrong-password")},K:Ka,T:!0,F:!0},As={endpoint:"verifyPhoneNumber",D:Xa,K:Ka,F:!0},Ps={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new $r("internal-error");Xa(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",ko(e);Ka(e)}},Os={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Xa,K:Ka,F:!0};function ks(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.V))return et(new $r("internal-error"));var r,i=t.Kb||"POST";return $e(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var a=En(e.h+t);Tn(a,"key",e.c),o&&Tn(a,"cb",M().toString());var s="GET"==n;if(s)for(var u in r)r.hasOwnProperty(u)&&Tn(a,u,r[u]);return new qe((function(t,o){Wa(e,a.toString(),(function(e){e?e.error?o(Rs(e,i||{})):t(e):o(new $r("network-request-failed"))}),n,s?void 0:Xn(Cr(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Ra?t.Ra(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new $r("internal-error");return r[t.fa]}))}function Is(e){return Rs({error:{errors:[{message:e}],code:400,message:e}})}function Rs(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new $r(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",Z(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new $r(r[i],t);return!t&&e&&(t=Mr(e)),new $r("internal-error",t)}function Ds(e){this.b=e,this.a=null,this.gb=function(e){return(Us||(Us=new qe((function(e,t){function n(){kr(),_r("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){kr(),t(Error("Network Error"))},timeout:Ns.get()})}if(_r("gapi.iframes.Iframe"))e();else if(_r("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){_r("gapi.load")?n():t(Error("Network Error"))},$e(Ca(r=ae(Ls,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw Us=null,e})))).then((function(){return new qe((function(t,n){_r("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Fs.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Ls=new $(ne,"https://apis.google.com/js/api.js?onload=%{onload}"),Ns=new Ir(3e4,6e4),Fs=new Ir(5e3,15e3),Us=null;function js(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Mn(this.i,"/__/auth/iframe"),Tn(this.a,"apiKey",this.g),Tn(this.a,"appName",this.h),this.b=null,this.c=[]}function Bs(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function zs(e){try{return r.a.app(e).auth().Ca()}catch(t){return[]}}function Vs(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Ws(e){var t=tr();return function(e){return ks(e,vs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=En(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=En(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:ar.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Po(tr())}))}function Gs(e){return e.l?e.l:(e.l=ur().then((function(){if(!e.o){var t=e.c,n=e.h,r=zs(e.b),i=new js(e.u,e.f,e.b);i.f=t,i.b=n,i.c=Y(r||[]),e.o=i.toString()}e.i=new Ds(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.gb.then((function(){e.a.register("authEvent",t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Eo(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",$e(n)}return n.status="ERROR",$e(n)}))}(e)})),e.l)}function Hs(e){return e.m||(e.v=e.c?yr(e.c,zs(e.b)):null,e.m=new Da(e.f,ki(e.h),e.v)),e.m}function qs(e,t,n,r,i,o,a,s,u,c,l){return(e=new Bs(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=Q(u||null),e.f=c,e.nb(l).toString()}function Ys(e){if(this.a=e||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new $r("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ks(e){this.b=e,this.a={},this.f=S(this.c,this)}js.prototype.toString=function(){return this.f?Tn(this.a,"v",this.f):Un(this.a.a,"v"),this.b?Tn(this.a,"eid",this.b):Un(this.a.a,"eid"),this.c.length?Tn(this.a,"fw",this.c.join(",")):Un(this.a.a,"fw"),this.a.toString()},Bs.prototype.nb=function(e){return this.h=e,this},Bs.prototype.toString=function(){var e=Mn(this.o,"/__/auth/handler");if(Tn(e,"apiKey",this.m),Tn(e,"appName",this.c),Tn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=r.a.app(this.c).auth().ha()}catch(u){n=null}for(var i in t.bb=n,Tn(e,"providerId",this.a.providerId),n=Cr((t=this.a).zb))n[i]=n[i].toString();i=t.Fc,n=Q(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}t.eb&&t.bb&&!n[t.eb]&&(n[t.eb]=t.bb),X(n)||Tn(e,"customParameters",Mr(n))}if("function"===typeof this.a.Hb&&((t=this.a.Hb()).length&&Tn(e,"scopes",t.join(","))),this.l?Tn(e,"redirectUrl",this.l):Un(e.a,"redirectUrl"),this.g?Tn(e,"eventId",this.g):Un(e.a,"eventId"),this.i?Tn(e,"v",this.i):Un(e.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Sn(e,s)&&Tn(e,s,this.b[s]);return this.h?Tn(e,"tid",this.h):Un(e.a,"tid"),this.f?Tn(e,"eid",this.f):Un(e.a,"eid"),(s=zs(this.c)).length&&Tn(e,"fw",s.join(",")),e.toString()},(t=Vs.prototype).Fb=function(e,t,n){var r=new $r("popup-closed-by-user"),i=new $r("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){(function(e){var t={type:"webStorageSupport"};return Gs(e).then((function(){return function(e,t){return e.gb.then((function(){return new qe((function(n){e.a.send(t.type,t,n,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&ir(e),t(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(e){return new qe((function(t){return function n(){fn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return fn(n).then((function(){t(r)}))}))},t.Ob=function(){var e=br();return!Er(e)&&!Or(e)},t.Jb=function(){return!1},t.Db=function(e,t,n,r,i,o,a,s){if(!e)return et(new $r("popup-blocked"));if(a&&!Er())return this.ia().s((function(t){ir(e),i(t)})),r(),$e();this.a||(this.a=Ws(Hs(this)));var u=this;return this.a.then((function(){var t=u.ia().s((function(t){throw ir(e),i(t),t}));return r(),t})).then((function(){(To(n),a)||nr(qs(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,s),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},t.Eb=function(e,t,n,r){this.a||(this.a=Ws(Hs(this)));var i=this;return this.a.then((function(){To(t),nr(qs(i.u,i.f,i.b,e,t,tr(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},t.ia=function(){var e=this;return Gs(this).then((function(){return e.i.gb})).s((function(){throw e.a=null,new $r("network-request-failed")}))},t.Rb=function(){return!0},t.Aa=function(e){this.g.push(e)},t.Na=function(e){H(this.g,(function(t){return t==e}))},(t=Ys.prototype).get=function(e){return $e(this.a.getItem(e)).then((function(e){return e&&Ar(e)}))},t.set=function(e,t){return $e(this.a.setItem(e,Mr(t)))},t.S=function(e){return $e(this.a.removeItem(e))},t.$=function(){},t.ea=function(){};var Xs,Qs=[];function Js(e,t,n){X(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Zs(e){this.a=e}function $s(e){this.c=e,this.b=!1,this.a=[]}function eu(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return et(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new qe((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return tu(e,c),t})).s((function(t){throw tu(e,c),t}))}function tu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(e.a,(function(e){return e==t}))}}function nu(){if(!ou())throw new $r("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=u.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e=this;hr()&&self?(this.l=function(){var e=hr()?self:null;if(B(Qs,(function(n){n.b==e&&(t=n)})),!t){var t=new Ks(e);Qs.push(t)}return t}(),Js(this.l,"keyChanged",(function(t,n){return lu(e).then((function(t){return 0<t.length&&B(e.a,(function(e){e(t)})),{keyProcessed:W(t,n.key)}}))})),Js(this.l,"ping",(function(){return $e(["keyChanged"])}))):function(){var e=u.navigator;return e&&e.serviceWorker?$e().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):$e(null)}().then((function(t){(e.h=t)&&(e.g=new $s(new Zs(t)),eu(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&W(t[0].value,"keyChanged")&&(e.o=!0)})).s((function(){})))}))}function ru(e){return new qe((function(t,n){var r=e.u.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new qe((function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return ru(e)})).then((function(e){t(e)})).s((function(e){n(e)}))}}))}function iu(e){return e.m||(e.m=ru(e)),e.m}function ou(){try{return!!u.indexedDB}catch(qo){return!1}}function au(e){return e.objectStore("firebaseLocalStorage")}function su(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function uu(e){return new qe((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function cu(e,t){return e.g&&e.h&&function(){var e=u.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?eu(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):$e()}function lu(e){return iu(e).then((function(e){var t=au(su(e,!1));return t.getAll?uu(t.getAll()):new qe((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function hu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function fu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=$e().then((function(){if(ou()){var e=Pr(),r="__sak"+e;return Xs||(Xs=new nu),(n=Xs).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){B(t.a,(function(t){t(e)}))})),e}))}function du(){this.a={},this.type="inMemory"}function pu(){if(!function(){var e="Node"==fr();if(!(e=mu()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new $r("internal-error","The LocalStorage compatibility library was not found.");throw new $r("web-storage-unsupported")}this.a=mu()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function mu(){try{var e=u.localStorage,t=Pr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function vu(){this.type="nullStorage"}function gu(){if(!function(){var e="Node"==fr();if(!(e=yu()||e&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==fr())throw new $r("internal-error","The SessionStorage compatibility library was not found.");throw new $r("web-storage-unsupported")}this.a=yu()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function yu(){try{var e=u.sessionStorage,t=Pr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function bu(){var e={};e.Browser=xu,e.Node=Tu,e.ReactNative=Su,e.Worker=Eu,this.a=e[fr()]}Ks.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];B(r,(function(t){i.push($e().then((function(){return t(e.origin,e.data.data)})))})),nt(i).then((function(r){var i=[];B(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),B(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Zs.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},$s.prototype.close=function(){for(;0<this.a.length;)tu(this,this.a[0]);this.b=!0},(t=nu.prototype).set=function(e,t){var n,r=!1,i=this;return iu(this).then((function(t){return uu((t=au(su(n=t,!0))).get(e))})).then((function(o){var a=au(su(n,!0));return o?(o.value=t,uu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,uu(a.add(o)))})).then((function(){return i.c[e]=t,cu(i,e)})).ka((function(){r&&i.b--}))},t.get=function(e){return iu(this).then((function(t){return uu(au(su(t,!1)).get(e))})).then((function(e){return e&&e.value}))},t.S=function(e){var t=!1,n=this;return iu(this).then((function(r){return t=!0,n.b++,uu(au(su(r,!0)).delete(e))})).then((function(){return delete n.c[e],cu(n,e)})).ka((function(){t&&n.b--}))},t.$=function(e){0==this.a.length&&function(e){hu(e),function t(){e.f=setTimeout((function(){e.i=lu(e).then((function(t){0<t.length&&B(e.a,(function(e){e(t)}))})).then((function(){t()})).s((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},t.ea=function(e){H(this.a,(function(t){return t==e})),0==this.a.length&&hu(this)},(t=fu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},t.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},t.S=function(e){return this.b.then((function(t){return t.S(e)}))},t.$=function(e){this.a.push(e)},t.ea=function(e){H(this.a,(function(t){return t==e}))},(t=du.prototype).get=function(e){return $e(this.a[e])},t.set=function(e,t){return this.a[e]=t,$e()},t.S=function(e){return delete this.a[e],$e()},t.$=function(){},t.ea=function(){},(t=pu.prototype).get=function(e){var t=this;return $e().then((function(){return Ar(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return $e().then((function(){var r=Mr(t);null===r?n.S(e):n.a.setItem(e,r)}))},t.S=function(e){var t=this;return $e().then((function(){t.a.removeItem(e)}))},t.$=function(e){u.window&&Kt(u.window,"storage",e)},t.ea=function(e){u.window&&Jt(u.window,"storage",e)},(t=vu.prototype).get=function(){return $e(null)},t.set=function(){return $e()},t.S=function(){return $e()},t.$=function(){},t.ea=function(){},(t=gu.prototype).get=function(e){var t=this;return $e().then((function(){return Ar(t.a.getItem(e))}))},t.set=function(e,t){var n=this;return $e().then((function(){var r=Mr(t);null===r?n.S(e):n.a.setItem(e,r)}))},t.S=function(e){var t=this;return $e().then((function(){t.a.removeItem(e)}))},t.$=function(){},t.ea=function(){};var _u,wu,xu={C:pu,Ta:gu},Tu={C:pu,Ta:gu},Su={C:Ys,Ta:vu},Eu={C:pu,Ta:vu},Mu={ad:"local",NONE:"none",cd:"session"};function Cu(){var e=!(Or(br())||!lr()),t=Er(),n=wr();this.m=e,this.h=t,this.l=n,this.a={},_u||(_u=new bu),e=_u;try{this.g=!er()&&Lr()||!u.indexedDB?new e.a.C:new fu(hr()?new du:new e.a.C)}catch(r){this.g=new du,this.h=!0}try{this.i=new e.a.Ta}catch(r){this.i=new du}this.u=new du,this.f=S(this.Pb,this),this.b={}}function Au(){return wu||(wu=new Cu),wu}function Pu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Ou(e,t){return"firebase:"+e.name+(t?":"+t:"")}function ku(e,t,n){return n=Ou(t,n),"local"==t.C&&(e.b[n]=null),Pu(e,t.C).S(n)}function Iu(e){e.c&&(clearInterval(e.c),e.c=null)}function Ru(e){this.a=e,this.b=Au()}(t=Cu.prototype).get=function(e,t){return Pu(this,e.C).get(Ou(e,t))},t.set=function(e,t,n){var r=Ou(e,n),i=this,o=Pu(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},t.addListener=function(e,t,n){e=Ou(e,t),this.l&&(this.b[e]=u.localStorage.getItem(e)),X(this.a)&&(Pu(this,"local").$(this.f),this.h||(er()||!Lr())&&u.indexedDB||!this.l||function(e){Iu(e),e.c=setInterval((function(){for(var t in e.a){var n=u.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Ft({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Pb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},t.removeListener=function(e,t,n){e=Ou(e,t),this.a[e]&&(H(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),X(this.a)&&(Pu(this,"local").ea(this.f),Iu(this))},t.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?Pu(this,"local").ea(this.f):Iu(this),this.m)if(n=u.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?u.localStorage.setItem(t,r):u.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===u.localStorage.getItem(t)||(o.b[t]=u.localStorage.getItem(t),o.$a(t))},_t&&Pt&&10==Pt&&u.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else B(e,S(this.$a,this))},t.$a=function(e){this.a[e]&&B(this.a[e],(function(e){e()}))};var Du,Lu={name:"authEvent",C:"local"};function Nu(){this.a=Au()}function Fu(e,t){this.b=Uu,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0!==Du||(Du=u.Int32Array?new Int32Array(Hu):Hu),this.reset()}C(Fu,(function(){this.b=-1}));for(var Uu=64,ju=Uu-1,Bu=[],zu=0;zu<ju;zu++)Bu[zu]=0;var Vu=q(128,Bu);function Wu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Du[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Gu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(c(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Wu(e),i=0);else{if(!g(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Wu(e),i=0)}}e.c=i,e.g+=n}Fu.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Y(this.h)};var Hu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function qu(){Fu.call(this,8,Yu)}C(qu,Fu);var Yu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ku(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Nu,this.g=new Ru(this.h),this.f=null,this.b=[],this.a=this.c=null}function Xu(e){return new $r("invalid-cordova-configuration",e)}function Qu(e){var t=new qu;Gu(t,e),e=[];var n=8*t.g;56>t.c?Gu(t,Vu,56-t.c):Gu(t,Vu,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Wu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return z(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Ju(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Zu(e){return e.f||(e.f=e.ia().then((function(){return new qe((function(t){e.Aa((function n(r){return t(r),e.Na(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),$u(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=Hi(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Ar(Sn(o=En(i),"firebaseError")||null))?ei(o):null)?new So(r.c,r.b,null,null,o,null,r.R()):new So(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Ju(e,i)}))}var n=new So("unknown",null,null,null,new $r("no-auth-event")),r=!1,i=fn(500).then((function(){return $u(e).then((function(){r||Ju(e,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(_r("BuildInfo.packageName",u).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},Ao||(Ao=new Mo),function(e){var t=Ao;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=_r("universalLinks.subscribe",u))&&e(null,t.b))}(t)}(e)}))}))),e.f}function $u(e){var t=null;return function(e){return e.b.get(Lu,e.a).then((function(e){return Eo(e)}))}(e.g).then((function(n){return t=n,ku((n=e.g).b,Lu,n.a)})).then((function(){return t}))}function ec(e){this.a=e,this.b=Au()}(t=Ku.prototype).ia=function(){return this.Da?this.Da:this.Da=(cr(void 0)?ur().then((function(){return new qe((function(e,t){var n=u.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):et(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof _r("universalLinks.subscribe",u))throw Xu("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof _r("BuildInfo.packageName",u))throw Xu("cordova-plugin-buildinfo is not installed");if("function"!==typeof _r("cordova.plugins.browsertab.openUrl",u))throw Xu("cordova-plugin-browsertab is not installed");if("function"!==typeof _r("cordova.InAppBrowser.open",u))throw Xu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new $r("cordova-not-ready")}))},t.Fb=function(e,t){return t(new $r("operation-not-supported-in-this-environment")),$e()},t.Db=function(){return et(new $r("operation-not-supported-in-this-environment"))},t.Rb=function(){return!1},t.Ob=function(){return!0},t.Jb=function(){return!0},t.Eb=function(e,t,n,r){if(this.c)return et(new $r("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=$e().then((function(){return To(t),Zu(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new So(t,r,null,o,new $r("no-auth-event"),null,i),s=_r("BuildInfo.packageName",u);if("string"!==typeof s)throw new $r("invalid-cordova-configuration");var c=_r("BuildInfo.displayName",u),l={};if(br().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!br().toLowerCase().match(/android/))return et(new $r("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=Qu(o),l.sessionId=o;var h=qs(e.u,e.i,e.l,t,n,null,r,e.m,l,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Lu,a.A(),t)})).then((function(){var t=_r("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof t)throw new $r("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=_r("cordova.plugins.browsertab.openUrl",u)))throw new $r("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=_r("cordova.InAppBrowser.open",u)))throw new $r("invalid-cordova-configuration");t=br(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new qe((function(e,t){s=function(){var t=_r("cordova.plugins.browsertab.close",u);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(s),c=function(){a||(a=fn(2e3).then((function(){t(new $r("redirect-cancelled-by-user"))})))},l=function(){Rr()&&c()},o.addEventListener("resume",c,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(e){return $u(i).then((function(){throw e}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Na(s),i.c=null}))},t.Aa=function(e){this.b.push(e),Zu(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new So("unknown",null,null,null,new $r("no-auth-event")),e(t))}))},t.Na=function(e){H(this.b,(function(t){return t==e}))};var tc={name:"pendingRedirect",C:"session"};function nc(e){return ku(e.b,tc,e.a)}function rc(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=S(this.o,this),this.b=new gc,this.w=new xc,this.g=new ec(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=ic(this.B,this.u,this.m,Pi)}function ic(e,t,n,i){var o=r.a.SDK_VERSION||null;return cr()?new Ku(e,t,n,o,i):new Vs(e,t,n,o,i)}function oc(e){e.f||(e.f=!0,e.a.Aa(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function ac(e){e.a.Ob()&&oc(e).s((function(t){var n=new So("unknown",null,null,null,new $r("operation-not-supported-in-this-environment"));fc(t)&&e.o(n)})),e.a.Jb()||yc(e.b)}function sc(e,t){W(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(tc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?nc(e.g).then((function(){oc(e).s((function(t){var n=new So("unknown",null,null,null,new $r("operation-not-supported-in-this-environment"));fc(t)&&e.o(n)}))})):ac(e)})).s((function(){ac(e)}))}function uc(e,t){H(e.h,(function(e){return e==t}))}rc.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=ic(this.B,this.u,this.m),this.i={}},rc.prototype.o=function(e){if(!e)throw new $r("invalid-auth-event");if(6e5<=M()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=M())),t=!0;break}}return yc(this.b),t};var cc=new Ir(2e3,1e4),lc=new Ir(3e4,6e4);function hc(e,t,n,r,i,o,a){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.Aa(e.l))}),(function(){e.reset()}),i,o,a)}function fc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function dc(e,t,n,r,i){var o;return function(e){return e.b.set(tc,"pending",e.a)}(e.g).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(fc(t))throw new $r("operation-not-supported-in-this-environment");return o=t,nc(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new qe((function(){})):nc(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function pc(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),cc.get())}rc.prototype.oa=function(){return this.b.oa()};var mc={};function vc(e,t,n){var r=t+":"+n;return mc[r]||(mc[r]=new rc(e,t,n)),mc[r]}function gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function yc(e){e.g||(e.g=!0,wc(e,!1,null,null))}function bc(e){e.g&&!e.i&&wc(e,!1,null,null)}function _c(e,t){if(e.b=function(){return $e(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function wc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return et(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):_c(e,n):_c(e,{user:null}),e.f=[],e.c=[]}function xc(){}function Tc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function Sc(e,t){this.a=t,Br(this,"verificationId",e)}function Ec(e,t,n,r){return new _o(e).Wa(t,n).then((function(e){return new Sc(e,r)}))}function Mc(e){var t=Ai(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new $r("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");zr(this,{token:e,expirationTime:Dr(1e3*t.exp),authTime:Dr(1e3*t.auth_time),issuedAtTime:Dr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function Cc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ac(e){this.f=e,this.b=this.a=null,this.c=0}function Pc(e,t){var n=t[Na],r=t.refreshToken;t=Oc(t.expiresIn),e.b=n,e.c=t,e.a=r}function Oc(e){return M()+1e3*parseInt(e,10)}function kc(e,t){return function(e,t){return new qe((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Wa(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(Rs(e)):e.access_token&&e.refresh_token?n(e):r(new $r("internal-error")):r(new $r("network-request-failed"))}),"POST",Fn(t).toString(),e.g,e.u.get()):r(new $r("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=Oc(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Ic(e,t){this.a=e||null,this.b=t||null,zr(this,{lastSignInTime:Dr(t||null),creationTime:Dr(e||null)})}function Rc(e,t,n,r,i,o){zr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Dc(e,t){for(var n in Nt.call(this,e),t)this[n]=t[n]}function Lc(e,t,n){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=r.a.SDK_VERSION?yr(r.a.SDK_VERSION):null,this.a=new Da(this.l,ki(Pi),e),this.b=new Ac(this.a),Vc(this,t[Na]),Pc(this.b,t),Br(this,"refreshToken",this.b.a),Hc(this,n||{}),sn.call(this),this.J=!1,this.o&&xr()&&(this.i=vc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new Cc((function(){return e.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-M()-3e5;return 0<t?t:0}))}(this),this.W=S(this.Ja,this);var i=this;this.ga=null,this.xa=function(e){i.ua(e.g)},this.Z=null,this.P=[],this.wa=function(e){Fc(i,e.c)},this.Y=null}function Nc(e,t){e.Z&&Jt(e.Z,"languageCodeChanged",e.xa),(e.Z=t)&&Kt(t,"languageCodeChanged",e.xa)}function Fc(e,t){e.P=t,Va(e.a,r.a.SDK_VERSION?yr(r.a.SDK_VERSION,e.P):null)}function Uc(e,t){e.Y&&Jt(e.Y,"frameworkChanged",e.wa),(e.Y=t)&&Kt(t,"frameworkChanged",e.wa)}function jc(e){try{return r.a.app(e.m).auth()}catch(t){throw new $r("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Bc(e){e.B||e.w.b||(e.w.start(),Jt(e,"tokenChanged",e.W),Kt(e,"tokenChanged",e.W))}function zc(e){Jt(e,"tokenChanged",e.W),e.w.stop()}function Vc(e,t){e.ma=t,Br(e,"_lat",t)}function Wc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return nt(t).then((function(){return e}))}function Gc(e){e.i&&!e.J&&(e.J=!0,sc(e.i,e))}function Hc(e,t){zr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Ic(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function qc(){}function Yc(e){return $e().then((function(){if(e.B)throw new $r("app-deleted")}))}function Kc(e){return z(e.providerData,(function(e){return e.providerId}))}function Xc(e,t){t&&(Qc(e,t.providerId),e.providerData.push(t))}function Qc(e,t){H(e.providerData,(function(e){return e.providerId==t}))}function Jc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Br(e,t,n)}function Zc(e,t){e!=t&&(zr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Br(e,"metadata",function(e){return new Ic(e.a,e.b)}(t.metadata)):Br(e,"metadata",new Ic),B(t.providerData,(function(t){Xc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),Br(e,"refreshToken",e.b.a))}function $c(e){return e.G().then((function(t){var n=e.isAnonymous;return function(e,t){return ks(e.a,fs,{idToken:t}).then(S(e.zc,e))}(e,t).then((function(){return n||Jc(e,"isAnonymous",!1),t}))}))}function el(e,t){t[Na]&&e.ma!=t[Na]&&(Pc(e.b,t),e.dispatchEvent(new Dc("tokenChanged")),Vc(e,t[Na]),Jc(e,"refreshToken",e.b.a))}function tl(e,t){return $c(e).then((function(){if(W(Kc(e),t))return Wc(e).then((function(){throw new $r("provider-already-linked")}))}))}function nl(e,t,n){return Vr({user:e,credential:xo(t),additionalUserInfo:t=Ni(t),operationType:n})}function rl(e,t){return el(e,t),e.reload().then((function(){return e}))}function il(e,t,n,i,o){if(!xr())return et(new $r("operation-not-supported-in-this-environment"));if(e.h&&!o)return et(e.h);var a=Li(n.providerId),s=Pr(e.uid+":::"),u=null;(!Er()||lr())&&e.o&&n.isOAuthProvider&&(u=qs(e.o,e.l,e.m,t,n,null,s,r.a.SDK_VERSION||null,null,null,e.tenantId));var c=or(u,a&&a.sa,a&&a.ra);return i=i().then((function(){if(al(e),!o)return e.G().then((function(){}))})).then((function(){return hc(e.i,c,t,n,s,!!u,e.tenantId)})).then((function(){return new qe((function(n,r){e.ja(t,null,new $r("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=s,e.c=pc(e.i,e,t,c,s)}))})).then((function(e){return c&&ir(c),e?Vr(e):null})).s((function(e){throw c&&ir(c),e})),sl(e,i,o)}function ol(e,t,n,r,i){if(!xr())return et(new $r("operation-not-supported-in-this-environment"));if(e.h&&!i)return et(e.h);var o=null,a=Pr(e.uid+":::");return r=r().then((function(){if(al(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=a,Wc(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(ll,e.A(),t.a)),t})).then((function(){return dc(e.i,t,n,a,e.tenantId)})).s((function(t){if(o=t,e.da)return hl(e.da);throw o})).then((function(){if(o)throw o})),sl(e,r,i)}function al(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new $r("internal-error");throw new $r("auth-domain-config-required")}}function sl(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),et(e.h)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Dc("userInvalidated")),e.h=t),t}))}(e,t,n);return e.I.push(r),r.ka((function(){G(e.I,r)})),r}function ul(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Na]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-M())/1e3;var r=new Lc(t,n,e);return e.providerData&&B(e.providerData,(function(e){e&&Xc(r,Vr(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function cl(e){this.a=e,this.b=Au()}gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},gc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(wc(this,!0,null,e.a),$e()):t.Ba(n,r)?function(e,t,n){n=n.Ba(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.R(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){wc(e,s,t,null)})).s((function(t){wc(e,s,null,t)}))}(this,e,t):et(new $r("invalid-auth-event")):(wc(this,!1,null,null),$e())}else et(new $r("invalid-auth-event"))},gc.prototype.oa=function(){var e=this;return new qe((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new $r("timeout");e.a&&e.a.cancel(),e.a=fn(lc.get()).then((function(){e.b||(e.g=!0,wc(e,!0,null,t))}))}(e))}))},xc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),$e()):t.Ba(n,r)?function(e,t){var n=e.b,r=e.c;t.Ba(r,n)(e.g,e.f,e.R(),e.i).then((function(e){t.ja(r,e,null,n)})).s((function(e){t.ja(r,null,e,n)}))}(e,t):et(new $r("invalid-auth-event"))}else et(new $r("invalid-auth-event"))},Sc.prototype.confirm=function(e){return e=wo(this.verificationId,e),this.a(e)},Cc.prototype.start=function(){this.a=this.c,function e(t,n){t.stop(),t.b=fn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return function(){var e=u.document,t=null;return Rr()||!e?$e():new qe((function(n){t=function(){Rr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},Cc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ac.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Ac.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?et(new $r("user-token-expired")):e||!this.b||M()>this.c-3e4?this.a?kc(this,{grant_type:"refresh_token",refresh_token:this.a}):$e(null):$e({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Ic.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Dc,Nt),C(Lc,sn),Lc.prototype.ua=function(e){this.ga=e,za(this.a,e)},Lc.prototype.ha=function(){return this.ga},Lc.prototype.Ca=function(){return Y(this.P)},Lc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Br(Lc.prototype,"providerId","firebase"),(t=Lc.prototype).reload=function(){var e=this;return sl(this,Yc(this).then((function(){return $c(e).then((function(){return Wc(e)})).then(qc)})))},t.dc=function(e){return this.G(e).then((function(e){return new Mc(e)}))},t.G=function(e){var t=this;return sl(this,Yc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new $r("internal-error");return e.accessToken!=t.ma&&(Vc(t,e.accessToken),t.dispatchEvent(new Dc("tokenChanged"))),Jc(t,"refreshToken",e.refreshToken),e.accessToken})))},t.zc=function(e){if(!(e=e.users)||!e.length)throw new $r("internal-error");Hc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?z(e,(function(e){return new Rc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Xc(this,t[n]);Jc(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length))},t.Ac=function(e){return Ur("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},t.hb=function(e){var t=this,n=null;return sl(this,e.f(this.a,this.uid).then((function(e){return el(t,e),n=nl(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},t.rc=function(e){return Ur("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},t.fb=function(e){var t=this,n=null;return sl(this,tl(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=nl(t,e,"link"),rl(t,e)})).then((function(){return n})))},t.sc=function(e,t){var n=this;return sl(this,tl(this,"phone").then((function(){return Ec(jc(n),e,t,S(n.fb,n))})))},t.Bc=function(e,t){var n=this;return sl(this,$e().then((function(){return Ec(jc(n),e,t,S(n.hb,n))})),!0)},t.rb=function(e){var t=this;return sl(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return el(t,e),t.reload()})))},t.Sc=function(e){var t=this;return sl(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return el(t,e),t.reload()})))},t.sb=function(e){var t=this;return sl(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return el(t,e),t.reload()})))},t.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Yc(this);var t=this;return sl(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return el(t,e),Jc(t,"displayName",e.displayName||null),Jc(t,"photoURL",e.photoUrl||null),B(t.providerData,(function(e){"password"===e.providerId&&(Br(e,"displayName",t.displayName),Br(e,"photoURL",t.photoURL))})),Wc(t)})).then(qc))},t.Qc=function(e){var t=this;return sl(this,$c(this).then((function(n){return W(Kc(t),e)?function(e,t,n){return ks(e,cs,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return B(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),B(Kc(t),(function(e){n[e]||Qc(t,e)})),n[_o.PROVIDER_ID]||Br(t,"phoneNumber",null),Wc(t)})):Wc(t).then((function(){throw new $r("no-such-provider")}))})))},t.delete=function(){var e=this;return sl(this,this.G().then((function(t){return ks(e.a,us,{idToken:t})})).then((function(){e.dispatchEvent(new Dc("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Nc(e,null),Uc(e,null),e.I=[],e.B=!0,zc(e),Br(e,"refreshToken",null),e.i&&uc(e.i,e)}))},t.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},t.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?S(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?S(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?S(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?S(this.Cb,this):null},t.tc=function(e){var t=this;return il(this,"linkViaPopup",e,(function(){return tl(t,e.providerId).then((function(){return Wc(t)}))}),!1)},t.Cc=function(e){return il(this,"reauthViaPopup",e,(function(){return $e()}),!0)},t.uc=function(e){var t=this;return ol(this,"linkViaRedirect",e,(function(){return tl(t,e.providerId)}),!1)},t.Dc=function(e){return ol(this,"reauthViaRedirect",e,(function(){return $e()}),!0)},t.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return sl(this,this.G().then((function(n){return ts(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=nl(i,e,"link"),rl(i,e)})).then((function(){return o})))},t.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return sl(this,$e().then((function(){return Yi(ns(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=nl(i,e,"reauthenticate"),el(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},t.jb=function(e){var t=this,n=null;return sl(this,this.G().then((function(t){return n=t,"undefined"===typeof e||X(e)?{}:xi(new fi(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},t.toJSON=function(){return this.A()},t.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Z(e,this.metadata.A()),B(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var ll={name:"redirectUser",C:"session"};function hl(e){return ku(e.b,ll,e.a)}function fl(e){this.a=e,this.b=Au(),this.c=null,this.f=function(e){var t=ml("local"),n=ml("session"),r=ml("none");return function(e,t,n){var r=Ou(t,n),i=Pu(e,t.C);return e.get(t,n).then((function(o){var a=null;try{a=Ar(u.localStorage.getItem(r))}catch(s){}if(a&&!o)return u.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(pl,e.a).then((function(e){return e?ml(e):t}))}))}))})).then((function(t){return e.c=t,dl(e,t.C)})).s((function(){e.c||(e.c=t)}))}(this),this.b.addListener(ml("local"),this.a,S(this.g,this))}function dl(e,t){var n,r=[];for(n in Mu)Mu[n]!==t&&r.push(ku(e.b,ml(Mu[n]),e.a));return r.push(ku(e.b,pl,e.a)),function(e){return new qe((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)tt(e[s],E(o,s),a);else t(i)}))}(r)}fl.prototype.g=function(){var e=this,t=ml("local");bl(this,(function(){return $e().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return dl(e,"local").then((function(){e.c=t}))}))}))};var pl={name:"persistence",C:"session"};function ml(e){return{name:"authUser",C:e}}function vl(e,t){return bl(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function gl(e){return bl(e,(function(){return ku(e.b,e.c,e.a)}))}function yl(e,t){return bl(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),ul(e||{})}))}))}function bl(e,t){return e.f=e.f.then(t,t),e.f}function _l(e){if(this.l=!1,Br(this,"settings",new Tc),Br(this,"app",e),!Al(this).options||!Al(this).options.apiKey)throw new $r("invalid-api-key");e=r.a.SDK_VERSION?yr(r.a.SDK_VERSION):null,this.b=new Da(Al(this).options&&Al(this).options.apiKey,ki(Pi),e),this.O=[],this.m=[],this.J=[],this.Ub=r.a.INTERNAL.createSubscribe(S(this.oc,this)),this.W=void 0,this.Vb=r.a.INTERNAL.createSubscribe(S(this.pc,this)),Ml(this,null),this.h=new fl(Al(this).options.apiKey+":"+Al(this).name),this.w=new cl(Al(this).options.apiKey+":"+Al(this).name),this.Y=Il(this,function(e){var t=Al(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(ll,e.a).then((function(e){return e&&t&&(e.authDomain=t),ul(e||{})}))}(e.w,Al(e).options.authDomain).then((function(t){return(e.B=t)&&(t.da=e.w),hl(e.w)}));return Il(e,t)}(e).then((function(){return yl(e.h,t)})).then((function(t){return t?(t.da=e.w,e.B&&(e.B.ca||null)==(t.ca||null)?t:t.reload().then((function(){return vl(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:gl(e.h)}))):null})).then((function(t){Ml(e,t||null)}));return Il(e,n)}(this)),this.i=Il(this,function(e){return e.Y.then((function(){return Sl(e)})).s((function(){})).then((function(){if(!e.l)return e.ma()})).s((function(){})).then((function(){if(!e.l){e.ga=!0;var t=e.h;t.b.addListener(ml("local"),t.a,e.ma)}}))}(this)),this.ga=!1,this.ma=S(this.Nc,this),this.ub=S(this.aa,this),this.wa=S(this.bc,this),this.xa=S(this.mc,this),this.Ja=S(this.nc,this),this.a=null,function(e){var t=Al(e).options.authDomain,n=Al(e).options.apiKey;t&&xr()&&(e.Tb=e.Y.then((function(){if(!e.l){if(e.a=vc(t,n,Al(e).name),sc(e.a,e),Pl(e)&&Gc(Pl(e)),e.B){Gc(e.B);var r=e.B;r.ua(e.ha()),Nc(r,e),Fc(r=e.B,e.I),Uc(r,e),e.B=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=S(this.delete,this),this.INTERNAL.logFramework=S(this.vc,this),this.o=0,sn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.ua(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function wl(e){Nt.call(this,"languageCodeChanged"),this.g=e}function xl(e){Nt.call(this,"frameworkChanged"),this.c=e}function Tl(e){return e.Tb||et(new $r("auth-domain-config-required"))}function Sl(e){if(!xr())return et(new $r("operation-not-supported-in-this-environment"));var t=Tl(e).then((function(){return e.a.oa()})).then((function(e){return e?Vr(e):null}));return Il(e,t)}function El(e,t){var n={};return n.apiKey=Al(e).options.apiKey,n.authDomain=Al(e).options.authDomain,n.appName=Al(e).name,e.Y.then((function(){return function(e,t,n,r){var i=new Lc(e,t);return n&&(i.da=n),r&&Fc(i,r),i.reload().then((function(){return i}))}(n,t,e.w,e.Ca())})).then((function(t){return Pl(e)&&t.uid==Pl(e).uid?(Zc(Pl(e),t),e.aa(t)):(Ml(e,t),Gc(t),e.aa(t))})).then((function(){kl(e)}))}function Ml(e,t){Pl(e)&&(function(e,t){H(e.O,(function(e){return e==t}))}(Pl(e),e.ub),Jt(Pl(e),"tokenChanged",e.wa),Jt(Pl(e),"userDeleted",e.xa),Jt(Pl(e),"userInvalidated",e.Ja),zc(Pl(e))),t&&(t.O.push(e.ub),Kt(t,"tokenChanged",e.wa),Kt(t,"userDeleted",e.xa),Kt(t,"userInvalidated",e.Ja),0<e.o&&Bc(t)),Br(e,"currentUser",t),t&&(t.ua(e.ha()),Nc(t,e),Fc(t,e.I),Uc(t,e))}function Cl(e,t){var n=null,r=null;return Il(e,t.then((function(t){return n=xo(t),r=Ni(t),El(e,t)})).then((function(){return Vr({user:Pl(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Al(e){return e.app}function Pl(e){return e.currentUser}function Ol(e){return Pl(e)&&Pl(e)._lat||null}function kl(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Ol(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](Ol(e))}}function Il(e,t){return e.O.push(t),t.ka((function(){G(e.O,t)})),t}function Rl(){}function Dl(){this.a={},this.b=1e12}fl.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new $r("invalid-persistence-type"),n=new $r("unsupported-persistence-type");e:{for(r in Mu)if(Mu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(fr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!wr()&&"none"!==e)throw n}}(e),bl(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,dl(n,e)})).then((function(){if(n.c=ml(e),t)return n.b.set(n.c,t,n.a)})):$e()}))},C(_l,sn),C(wl,Nt),C(xl,Nt),(t=_l.prototype).mb=function(e){return Il(this,e=this.h.mb(e))},t.ua=function(e){this.Z===e||this.l||(this.Z=e,za(this.b,this.Z),this.dispatchEvent(new wl(this.ha())))},t.ha=function(){return this.Z},t.Tc=function(){var e=u.navigator;this.ua(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},t.vc=function(e){this.I.push(e),Va(this.b,r.a.SDK_VERSION?yr(r.a.SDK_VERSION,this.I):null),this.dispatchEvent(new xl(this.I))},t.Ca=function(){return Y(this.I)},t.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},t.R=function(){return this.P},t.toJSON=function(){return{apiKey:Al(this).options.apiKey,authDomain:Al(this).options.authDomain,appName:Al(this).name,currentUser:Pl(this)&&Pl(this).A()}},t.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},t.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},t.Ba=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?S(this.ac,this):null},t.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=es(i.b,e).then((function(e){return o=xo(e),a=Ni(e),e}));return Il(this,e=i.Y.then((function(){return s})).then((function(e){return El(i,e)})).then((function(){return Vr({user:Pl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},t.Lc=function(e){if(!xr())return et(new $r("operation-not-supported-in-this-environment"));var t=this,n=Li(e.providerId),i=Pr(),o=null;(!Er()||lr())&&Al(this).options.authDomain&&e.isOAuthProvider&&(o=qs(Al(this).options.authDomain,Al(this).options.apiKey,Al(this).name,"signInViaPopup",e,null,i,r.a.SDK_VERSION||null,null,null,this.R()));var a=or(o,n&&n.sa,n&&n.ra);return Il(this,n=Tl(this).then((function(n){return hc(n,a,"signInViaPopup",e,i,!!o,t.R())})).then((function(){return new qe((function(e,n){t.ja("signInViaPopup",null,new $r("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=i,t.c=pc(t.a,t,"signInViaPopup",a,i)}))})).then((function(e){return a&&ir(a),e?Vr(e):null})).s((function(e){throw a&&ir(a),e})))},t.Mc=function(e){if(!xr())return et(new $r("operation-not-supported-in-this-environment"));var t=this;return Il(this,Tl(this).then((function(){return function(e){return bl(e,(function(){return e.b.set(pl,e.c.C,e.a)}))}(t.h)})).then((function(){return dc(t.a,"signInViaRedirect",e,void 0,t.R())})))},t.oa=function(){var e=this;return Sl(this).then((function(t){return e.a&&bc(e.a.b),t})).s((function(t){throw e.a&&bc(e.a.b),t}))},t.Rc=function(e){if(!e)return et(new $r("null-user"));if(this.P!=e.tenantId)return et(new $r("tenant-id-mismatch"));var t=this,n={};n.apiKey=Al(this).options.apiKey,n.authDomain=Al(this).options.authDomain,n.appName=Al(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[Na]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-M())/1e3,t=new Lc(t,o),n&&(t.da=n),r&&Fc(t,r),Zc(t,e),t}(e,n,t.w,t.Ca());return Il(this,this.i.then((function(){if(Al(t).options.apiKey!=e.l)return r.reload()})).then((function(){return Pl(t)&&e.uid==Pl(t).uid?(Zc(Pl(t),e),t.aa(e)):(Ml(t,r),Gc(r),t.aa(r))})).then((function(){kl(t)})))},t.pb=function(){var e=this;return Il(this,this.i.then((function(){return e.a&&bc(e.a.b),Pl(e)?(Ml(e,null),gl(e.h).then((function(){kl(e)}))):$e()})))},t.Nc=function(){var e=this;return yl(this.h,Al(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=Pl(e)&&t){n=Pl(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Zc(Pl(e),t),Pl(e).G();(Pl(e)||t)&&(Ml(e,t),t&&(Gc(t),t.da=e.w),e.a&&sc(e.a,e),kl(e))}}))},t.aa=function(e){return vl(this.h,e)},t.bc=function(){kl(this),this.aa(Pl(this))},t.mc=function(){this.pb()},t.nc=function(){this.pb()},t.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(Pl(t))}))},t.pc=function(e){var t=this;!function(e,t){e.J.push(t),Il(e,e.i.then((function(){!e.l&&W(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(Ol(e)))})))}(this,(function(){e.next(Pl(t))}))},t.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){y(e)?e(Pl(r)):y(e.next)&&e.next(Pl(r))})),this.Ub(e,t,n)},t.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),y(e)?e(Pl(r)):y(e.next)&&e.next(Pl(r))})),this.Vb(e,t,n)},t.cc=function(e){var t=this;return Il(this,this.i.then((function(){return Pl(t)?Pl(t).G(e).then((function(e){return{accessToken:e}})):null})))},t.Hc=function(e){var t=this;return this.i.then((function(){return Cl(t,ks(t.b,Ms,{token:e}))})).then((function(e){var n=e.user;return Jc(n,"isAnonymous",!1),t.aa(n),e}))},t.Ic=function(e,t){var n=this;return this.i.then((function(){return Cl(n,ks(n.b,Cs,{email:e,password:t}))}))},t.Xb=function(e,t){var n=this;return this.i.then((function(){return Cl(n,ks(n.b,as,{email:e,password:t}))}))},t.Sa=function(e){var t=this;return this.i.then((function(){return Cl(t,e.na(t.b))}))},t.Gc=function(e){return Ur("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(e)},t.ob=function(){var e=this;return this.i.then((function(){var t=Pl(e);if(t&&t.isAnonymous){var n=Vr({providerId:null,isNewUser:!1});return Vr({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Cl(e,e.b.ob()).then((function(t){var n=t.user;return Jc(n,"isAnonymous",!0),e.aa(n),t}))}))},t.getUid=function(){return Pl(this)&&Pl(this).uid||null},t.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&Pl(this)&&Bc(Pl(this))},t.Ec=function(e){var t=this;B(this.m,(function(n){n==e&&t.o--})),0>this.o&&(this.o=0),0==this.o&&Pl(this)&&zc(Pl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(e){var t=this;this.m.push(e),Il(this,this.i.then((function(){t.l||W(t.m,e)&&e(Ol(t))})))},t.removeAuthTokenListener=function(e){H(this.m,(function(t){return t==e}))},t.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(ml("local"),e.a,this.ma),this.a&&(uc(this.a,this),bc(this.a.b)),Promise.resolve()},t.$b=function(e){return Il(this,function(e,t){return ks(e,ss,{identifier:t,continueUri:Tr()?tr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},t.qc=function(e){return!!vo(e)},t.lb=function(e,t){var n=this;return Il(this,$e().then((function(){var e=new fi(t);if(!e.c)throw new $r("argument-error",mi+" must be true when sending sign in link to email");return xi(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},t.Uc=function(e){return this.Ma(e).then((function(e){return e.data.email}))},t.ab=function(e,t){return Il(this,this.b.ab(e,t).then((function(){})))},t.Ma=function(e){return Il(this,this.b.Ma(e).then((function(e){return new Gr(e)})))},t.Ya=function(e){return Il(this,this.b.Ya(e).then((function(){})))},t.kb=function(e,t){var n=this;return Il(this,$e().then((function(){return"undefined"===typeof t||X(t)?{}:xi(new fi(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},t.Kc=function(e,t){return Il(this,Ec(this,e,t,S(this.Sa,this)))},t.Jc=function(e,t){var n=this;return Il(this,$e().then((function(){var r=t||tr(),i=mo(e,r);if(!(r=vo(r)))throw new $r("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new $r("tenant-id-mismatch");return n.Sa(i)})))},Rl.prototype.render=function(){},Rl.prototype.reset=function(){},Rl.prototype.getResponse=function(){},Rl.prototype.execute=function(){};var Ll=null;function Nl(e,t){return(t=Fl(t))&&e.a[t]||null}function Fl(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Ul(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Gn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Kt(this.f,"click",this.i)}function jl(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Bl(){}Dl.prototype.render=function(e,t){return this.a[this.b.toString()]=new Ul(e,t),this.b++},Dl.prototype.reset=function(e){var t=Nl(this,e);e=Fl(e),t&&e&&(t.delete(),delete this.a[e])},Dl.prototype.getResponse=function(e){return(e=Nl(this,e))?e.getResponse():null},Dl.prototype.execute=function(e){(e=Nl(this,e))&&e.execute()},Ul.prototype.getResponse=function(){return jl(this),this.b},Ul.prototype.execute=function(){jl(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Ul.prototype.delete=function(){jl(this),this.g=!0,clearTimeout(this.a),this.a=null,Jt(this.f,"click",this.i)},Bl.prototype.g=function(){return Ll||(Ll=new Dl),$e(Ll)},Bl.prototype.c=function(){};var zl=null;function Vl(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Wl=new $(ne,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Gl=new Ir(3e4,6e4);Vl.prototype.g=function(e){var t=this;return new qe((function(n,r){var i=setTimeout((function(){r(new $r("network-request-failed"))}),Gl.get());!u.grecaptcha||e!==t.f&&!t.b?(u[t.a]=function(){if(u.grecaptcha){t.f=e;var o=u.grecaptcha.render;u.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new $r("internal-error"));delete u[t.a]},$e(Ca(ae(Wl,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new $r("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Vl.prototype.c=function(){this.b--};var Hl=null;function ql(e,t,n,r,i,o,a){if(Br(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,a?(zl||(zl=new Bl),a=zl):(Hl||(Hl=new Vl),a=Hl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Xl])throw new $r("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ql],!u.document)throw new $r("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Gn(t)||!this.i&&Gn(t).hasChildNodes())throw new $r("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Da(e,o||null,i||null),this.v=r||function(){return null};var s=this;this.l=[];var c=this.a[Yl];this.a[Yl]=function(e){if(Jl(s,e),"function"===typeof c)c(e);else if("string"===typeof c){var t=_r(c,u);"function"===typeof t&&t(e)}};var l=this.a[Kl];this.a[Kl]=function(){if(Jl(s,null),"function"===typeof l)l();else if("string"===typeof l){var e=_r(l,u);"function"===typeof e&&e()}}}var Yl="callback",Kl="expired-callback",Xl="sitekey",Ql="size";function Jl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Zl(e,t){return e.h.push(t),t.ka((function(){G(e.h,t)})),t}function $l(e){if(e.B)throw new $r("internal-error","RecaptchaVerifier instance has been destroyed.")}function eh(e,t,n){var i=!1;try{this.b=n||r.a.app()}catch(s){throw new $r("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new $r("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ca()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=r.a.SDK_VERSION?yr(r.a.SDK_VERSION,a):null,ql.call(this,n,e,t,(function(){try{var e=o.b.auth().ha()}catch(t){e=null}return e}),a,ki(Pi),i)}function th(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new $r("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],0>i||i>=nh.length)throw new $r("internal-error","Argument validator received an unsupported number of arguments.");n=nh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new $r("argument-error",e+" failed: "+r)}(t=ql.prototype).Da=function(){var e=this;return this.f?this.f:this.f=Zl(this,$e().then((function(){if(Tr()&&!hr())return ur();throw new $r("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,ks(e.o,gs,{})})).then((function(t){e.a[Xl]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},t.render=function(){$l(this);var e=this;return Zl(this,this.Da().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=Gn(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Wn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',je(a.name),'"'),a.type){o.push(' type="',je(a.type),'"');var s={};Z(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(c(a)?o.className=a:v(a)?o.className=a.join(" "):Hn(o,a)),2<r.length&&Yn(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},t.verify=function(){$l(this);var e=this;return Zl(this,this.render().then((function(t){return new qe((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){H(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},t.reset=function(){$l(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){$l(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=Gn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},C(eh,ql);var nh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function rh(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:c}}function ih(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:l}}function oh(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:b}}function ah(e,t){return{name:e||"",M:"a function",optional:!!t,N:y}}function sh(e,t){return{name:e||"",M:"null",optional:!!t,N:m}}function uh(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.na||!n)}}}function ch(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&c(e.type)&&y(e.verify))}}}function lh(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function hh(e,t){for(var n in t){var r=t[n].name;e[r]=ph(r,e[n],t[n].j)}}function fh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:E((function(e){return this[e]}),n),set:E((function(e,t,n,r){th(e,[n],[r],!0),this[t]=r}),r,n,t[n].Za),enumerable:!0})}}function dh(e,t,n,r){e[t]=ph(t,n,r)}function ph(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return th(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}hh(_l.prototype,{Ya:{name:"applyActionCode",j:[rh("code")]},Ma:{name:"checkActionCode",j:[rh("code")]},ab:{name:"confirmPasswordReset",j:[rh("code"),rh("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[rh("email"),rh("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[rh("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[rh("emailLink")]},wc:{name:"onAuthStateChanged",j:[lh(oh(),ah(),"nextOrObserver"),ah("opt_error",!0),ah("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[lh(oh(),ah(),"nextOrObserver"),ah("opt_error",!0),ah("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[rh("email"),lh(oh("opt_actionCodeSettings",!0),sh(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[rh("email"),oh("actionCodeSettings")]},mb:{name:"setPersistence",j:[rh("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[uh()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[uh()]},Hc:{name:"signInWithCustomToken",j:[rh("token")]},Ic:{name:"signInWithEmailAndPassword",j:[rh("email"),rh("password")]},Jc:{name:"signInWithEmailLink",j:[rh("email"),rh("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[rh("phoneNumber"),ch()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[lh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Lc)}},sh(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[rh(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[rh("code")]}}),fh(_l.prototype,{lc:{name:"languageCode",Za:lh(rh(),sh(),"languageCode")},ti:{name:"tenantId",Za:lh(rh(),sh(),"tenantId")}}),_l.Persistence=Mu,_l.Persistence.LOCAL="local",_l.Persistence.SESSION="session",_l.Persistence.NONE="none",hh(Lc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[ih("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[ih("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[uh()]},fb:{name:"linkWithCredential",j:[uh()]},sc:{name:"linkWithPhoneNumber",j:[rh("phoneNumber"),ch()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[uh()]},hb:{name:"reauthenticateWithCredential",j:[uh()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[rh("phoneNumber"),ch()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[lh(oh("opt_actionCodeSettings",!0),sh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[rh(null,!0)]},Qc:{name:"unlink",j:[rh("provider")]},rb:{name:"updateEmail",j:[rh("email")]},sb:{name:"updatePassword",j:[rh("password")]},Sc:{name:"updatePhoneNumber",j:[uh("phone")]},tb:{name:"updateProfile",j:[oh("profile")]}}),hh(Dl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hh(Rl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hh(qe.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),fh(Tc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:ih("appVerificationDisabledForTesting")}}),hh(Sc.prototype,{confirm:{name:"confirm",j:[rh("verificationCode")]}}),dh(qi,"fromJSON",(function(e){e=c(e)?JSON.parse(e):e;for(var t,n=[$i,fo,yo,Qi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[lh(rh(),oh(),"json")]),dh(po,"credential",(function(e,t){return new ho(e,t)}),[rh("email"),rh("password")]),hh(ho.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),hh(ro.prototype,{ya:{name:"addScope",j:[rh("scope")]},Ga:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(ro,"credential",io,[lh(rh(),oh(),"token")]),dh(po,"credentialWithLink",mo,[rh("email"),rh("emailLink")]),hh(oo.prototype,{ya:{name:"addScope",j:[rh("scope")]},Ga:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(oo,"credential",ao,[lh(rh(),oh(),"token")]),hh(so.prototype,{ya:{name:"addScope",j:[rh("scope")]},Ga:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(so,"credential",uo,[lh(rh(),lh(oh(),sh()),"idToken"),lh(rh(),sh(),"accessToken",!0)]),hh(co.prototype,{Ga:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(co,"credential",lo,[lh(rh(),oh(),"token"),rh("secret",!0)]),hh(no.prototype,{ya:{name:"addScope",j:[rh("scope")]},credential:{name:"credential",j:[lh(rh(),lh(oh(),sh()),"optionsOrIdToken"),lh(rh(),sh(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),hh(Ji.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),hh(Ki.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),dh(_o,"credential",wo,[rh("verificationId"),rh("verificationCode")]),hh(_o.prototype,{Wa:{name:"verifyPhoneNumber",j:[rh("phoneNumber"),ch()]}}),hh(go.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),hh($r.prototype,{toJSON:{name:"toJSON",j:[rh(null,!0)]}}),hh(Oo.prototype,{toJSON:{name:"toJSON",j:[rh(null,!0)]}}),hh(Po.prototype,{toJSON:{name:"toJSON",j:[rh(null,!0)]}}),hh(eh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),dh(ri,"parseLink",hi,[rh("link")]),function(){if("undefined"===typeof r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Hr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:_l,AuthCredential:qi,Error:$r};dh(e,"EmailAuthProvider",po,[]),dh(e,"FacebookAuthProvider",ro,[]),dh(e,"GithubAuthProvider",oo,[]),dh(e,"GoogleAuthProvider",so,[]),dh(e,"TwitterAuthProvider",co,[]),dh(e,"OAuthProvider",no,[rh("providerId")]),dh(e,"SAMLAuthProvider",to,[rh("providerId")]),dh(e,"PhoneAuthProvider",_o,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof _l)}}]),dh(e,"RecaptchaVerifier",eh,[lh(rh(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),oh("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof r.a.app.App)}}]),dh(e,"ActionCodeURL",ri,[]),r.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new _l(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),r.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:S((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:S(e.cc,e),addAuthTokenListener:S(e.Wb,e),removeAuthTokenListener:S(e.Ec,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.a.registerVersion("@firebase/auth","0.13.3"),r.a.INTERNAL.extendNamespace({User:Lc})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(47))}]]);
//# sourceMappingURL=2.29f53591.chunk.js.map